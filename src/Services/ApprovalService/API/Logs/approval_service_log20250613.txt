2025-06-13 06:27:52.077 +09:00 [DBG] Connection id "0HND9L2LUR7Q1" accepted.
2025-06-13 06:27:52.123 +09:00 [DBG] Connection id "0HND9L2LUR7Q1" started.
2025-06-13 06:27:52.161 +09:00 [DBG] Connection 0HND9L2LUR7Q1 established using the following protocol: "Tls12"
2025-06-13 06:27:52.171 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - null null
2025-06-13 06:27:52.174 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 06:27:52.175 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 06:27:52.176 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 06:27:52.189 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 06:27:52.189 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 06:27:52.193 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 06:27:52.193 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 06:27:52.193 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 06:27:52.194 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 06:27:52.194 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 06:27:52.194 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 06:27:52.195 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 06:27:52.201 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 06:27:52.202 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 06:27:52.203 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 06:27:52.203 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 06:27:52.203 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 06:27:52.203 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 06:27:52.204 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 06:27:52.218 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 06:27:52.231 +09:00 [DBG] Creating DbConnection.
2025-06-13 06:27:52.234 +09:00 [DBG] Created DbConnection. (2ms).
2025-06-13 06:27:52.234 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 06:27:52.239 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 06:27:52.242 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 06:27:52.242 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-06-13 06:27:52.242 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-06-13 06:27:52.242 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 06:27:52.248 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 06:27:52.248 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 06:27:52.248 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 06:27:52.248 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 06:27:52.248 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 06:27:52.252 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 06:27:52.253 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 06:27:52.253 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 06:27:52.253 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 06:27:52.253 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 06:27:52.253 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 06:27:52.259 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 63.831ms
2025-06-13 06:27:52.260 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 06:27:52.260 +09:00 [DBG] Connection id "0HND9L2LUR7Q1" completed keep alive response.
2025-06-13 06:27:52.261 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 06:27:52.261 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 06:27:52.261 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 06:27:52.261 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - 200 null application/json; charset=utf-8 90.327ms
2025-06-13 06:29:07.043 +09:00 [DBG] Connection id "0HND9L2LUR7Q1" received FIN.
2025-06-13 06:29:07.046 +09:00 [DBG] Connection id "0HND9L2LUR7Q1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 06:29:07.047 +09:00 [DBG] Connection id "0HND9L2LUR7Q1" disconnecting.
2025-06-13 06:29:07.048 +09:00 [DBG] Connection id "0HND9L2LUR7Q1" stopped.
2025-06-13 06:30:10.556 +09:00 [DBG] Connection id "0HND9L2LUR7Q2" accepted.
2025-06-13 06:30:10.559 +09:00 [DBG] Connection id "0HND9L2LUR7Q2" started.
2025-06-13 06:30:10.588 +09:00 [DBG] Connection 0HND9L2LUR7Q2 established using the following protocol: "Tls12"
2025-06-13 06:30:10.593 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - null null
2025-06-13 06:30:10.593 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 06:30:10.593 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 06:30:10.594 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 06:30:10.600 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 06:30:10.600 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 06:30:10.605 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 06:30:10.605 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 06:30:10.605 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 06:30:10.605 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 06:30:10.605 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 06:30:10.605 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 06:30:10.605 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 06:30:10.606 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 06:30:10.607 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 06:30:10.607 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 06:30:10.607 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 06:30:10.607 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 06:30:10.607 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 06:30:10.607 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 06:30:10.609 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 06:30:10.614 +09:00 [DBG] Creating DbConnection.
2025-06-13 06:30:10.615 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 06:30:10.615 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 06:30:10.616 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 06:30:10.616 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 06:30:10.616 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 06:30:10.617 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 06:30:10.617 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 06:30:10.617 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 06:30:10.617 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 06:30:10.618 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 06:30:10.618 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 06:30:10.618 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 06:30:10.618 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 06:30:10.619 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 06:30:10.619 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 06:30:10.619 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 06:30:10.619 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 06:30:10.619 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 06:30:10.621 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 15.0971ms
2025-06-13 06:30:10.621 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 06:30:10.621 +09:00 [DBG] Connection id "0HND9L2LUR7Q2" completed keep alive response.
2025-06-13 06:30:10.621 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 06:30:10.621 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 06:30:10.621 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 06:30:10.621 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - 200 null application/json; charset=utf-8 28.67ms
2025-06-13 06:30:38.462 +09:00 [DBG] Connection id "0HND9L2LUR7Q2" received FIN.
2025-06-13 06:30:38.463 +09:00 [DBG] Connection id "0HND9L2LUR7Q2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 06:30:38.464 +09:00 [DBG] Connection id "0HND9L2LUR7Q2" disconnecting.
2025-06-13 06:30:38.464 +09:00 [DBG] Connection id "0HND9L2LUR7Q2" stopped.
2025-06-13 06:32:18.774 +09:00 [DBG] Connection id "0HND9L2LUR7Q3" accepted.
2025-06-13 06:32:18.774 +09:00 [DBG] Connection id "0HND9L2LUR7Q3" started.
2025-06-13 06:32:18.802 +09:00 [DBG] Connection 0HND9L2LUR7Q3 established using the following protocol: "Tls12"
2025-06-13 06:32:18.806 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - null null
2025-06-13 06:32:18.807 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 06:32:18.807 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 06:32:18.807 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 06:32:18.807 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 06:32:18.808 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 06:32:18.810 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 06:32:18.810 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 06:32:18.810 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 06:32:18.810 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 06:32:18.810 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 06:32:18.810 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 06:32:18.810 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 06:32:18.816 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 06:32:18.817 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 06:32:18.817 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 06:32:18.817 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 06:32:18.817 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 06:32:18.817 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 06:32:18.818 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 06:32:18.821 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 06:32:18.823 +09:00 [DBG] Creating DbConnection.
2025-06-13 06:32:18.823 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 06:32:18.823 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 06:32:18.824 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 06:32:18.824 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 06:32:18.824 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 06:32:18.824 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 06:32:18.825 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 06:32:18.825 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 06:32:18.825 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 06:32:18.825 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 06:32:18.826 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 06:32:18.826 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 06:32:18.826 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 06:32:18.826 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 06:32:18.826 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 06:32:18.826 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 06:32:18.826 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 06:32:18.827 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 06:32:18.827 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 16.9204ms
2025-06-13 06:32:18.827 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 06:32:18.828 +09:00 [DBG] Connection id "0HND9L2LUR7Q3" completed keep alive response.
2025-06-13 06:32:18.828 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 06:32:18.828 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 06:32:18.828 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 06:32:18.828 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - 200 null application/json; charset=utf-8 22.1999ms
2025-06-13 06:34:29.863 +09:00 [DBG] Connection id "0HND9L2LUR7Q3" disconnecting.
2025-06-13 06:34:29.866 +09:00 [DBG] Connection id "0HND9L2LUR7Q3" stopped.
2025-06-13 06:34:29.866 +09:00 [DBG] Connection id "0HND9L2LUR7Q3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 07:14:28.661 +09:00 [DBG] Hosting stopping
2025-06-13 07:14:28.665 +09:00 [INF] Application is shutting down...
2025-06-13 07:14:28.705 +09:00 [DBG] Hosting stopped
2025-06-13 07:14:47.561 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-13 07:14:47.692 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-13 07:14:48.229 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 07:14:48.236 +09:00 [DBG] Creating DbConnection.
2025-06-13 07:14:48.251 +09:00 [DBG] Created DbConnection. (14ms).
2025-06-13 07:14:48.290 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:14:48.302 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:14:48.306 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:14:48.310 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 07:14:48.312 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 07:14:48.313 +09:00 [DBG] Creating DbConnection.
2025-06-13 07:14:48.313 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 07:14:48.315 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-13 07:14:48.317 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-13 07:14:48.318 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:14:48.319 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:14:48.322 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 07:14:48.347 +09:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 07:14:48.348 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:14:48.350 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-13 07:14:48.354 +09:00 [DBG] Creating DbConnection.
2025-06-13 07:14:48.354 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 07:14:48.354 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:14:48.354 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:14:48.354 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:14:48.354 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 07:14:48.355 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 07:14:48.355 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 07:14:48.355 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 07:14:48.355 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:14:48.355 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:14:48.355 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 07:14:48.355 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 07:14:48.355 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:14:48.355 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 07:14:48.392 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-13 07:14:48.522 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 07:14:48.538 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:14:48.539 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:14:48.539 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 07:14:48.539 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 07:14:48.539 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 07:14:48.540 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 07:14:48.541 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 07:14:48.544 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:14:48.545 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-13 07:14:48.546 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:14:48.547 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 07:14:48.547 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 07:14:48.548 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:14:48.548 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 07:14:48.550 +09:00 [DBG] Hosting starting
2025-06-13 07:14:48.572 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-13 07:14:48.572 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-13 07:14:48.889 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-13 07:14:48.889 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-13 07:14:48.889 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-13 07:14:48.889 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-13 07:14:48.890 +09:00 [INF] Hosting environment: Development
2025-06-13 07:14:48.890 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-13 07:14:48.890 +09:00 [DBG] Hosting started
2025-06-13 07:21:59.414 +09:00 [DBG] Connection id "0HND9VU66O1QT" accepted.
2025-06-13 07:21:59.415 +09:00 [DBG] Connection id "0HND9VU66O1QT" started.
2025-06-13 07:21:59.463 +09:00 [DBG] Connection 0HND9VU66O1QT established using the following protocol: "Tls12"
2025-06-13 07:21:59.481 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - null null
2025-06-13 07:21:59.501 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 07:21:59.503 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 07:21:59.504 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 07:21:59.531 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 07:21:59.531 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 07:21:59.544 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 07:21:59.545 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 07:21:59.545 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 07:21:59.545 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 07:21:59.545 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 07:21:59.546 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 07:21:59.546 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 07:21:59.547 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 07:21:59.548 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 07:21:59.549 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 07:21:59.549 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 07:21:59.549 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 07:21:59.549 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 07:21:59.552 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 07:21:59.567 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 07:21:59.579 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(request => EF.Property<string>(request, "ApplicantEmployeeNumber") == __userId_0)
    .Include(request => request.Steps)
    .OrderByDescending(request => request.RequestedAt)'
2025-06-13 07:21:59.589 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-13 07:21:59.645 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.MisKey (string), 7], [Property: ApprovalRequest.RequestContent (string), 8], [Property: ApprovalRequest.RequestTitle (string) Required, 9], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 10], [Property: ApprovalRequest.RespondedAt (DateTime?), 11], [Property: ApprovalRequest.Status (string) Required, 12] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: ApprovalStep.ActionDate (DateTime?), 14], [Property: ApprovalStep.ActionStatus (string), 15], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 16], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 17], [Property: ApprovalStep.ApproverName (string), 18], [Property: ApprovalStep.Comment (string), 19], [Property: ApprovalStep.Department (string), 20], [Property: ApprovalStep.IsFinalApprover (bool) Required, 21], [Property: ApprovalStep.Position (string), 22], [Property: ApprovalStep.Sequence (int) Required, 23], [Property: ApprovalStep.StepType (string), 24] }
            3 -> 13
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.MisKey (string), 7], [Property: ApprovalRequest.RequestContent (string), 8], [Property: ApprovalRequest.RequestTitle (string) Required, 9], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 10], [Property: ApprovalRequest.RespondedAt (DateTime?), 11], [Property: ApprovalRequest.Status (string) Required, 12] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: ApprovalStep.ActionDate (DateTime?), 14], [Property: ApprovalStep.ActionStatus (string), 15], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 16], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 17], [Property: ApprovalStep.ApproverName (string), 18], [Property: ApprovalStep.Comment (string), 19], [Property: ApprovalStep.Department (string), 20], [Property: ApprovalStep.IsFinalApprover (bool) Required, 21], [Property: ApprovalStep.Position (string), 22], [Property: ApprovalStep.Sequence (int) Required, 23], [Property: ApprovalStep.StepType (string), 24] }
            3 -> 13
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            ApprovalRequest entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                ApprovalRequest instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(ApprovalRequest);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (ApprovalRequest)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                            {
                                return 
                                {
                                    ApprovalRequest instance;
                                    instance = new ApprovalRequest();
                                    instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                    instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                    instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<MisKey>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<RequestContent>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<RequestTitle>k__BackingField = dataReader.GetString(9);
                                    instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(10);
                                    instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<Status>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(ApprovalRequest)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (ApprovalRequest)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                trackingQuery: True, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalStep instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalStep);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(13) ? default(object) : (object)dataReader.GetGuid(13) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalStep)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(13) ? default(Guid) : dataReader.GetGuid(13);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(14) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(14);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(16) ? default(Guid) : dataReader.GetGuid(16);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(21) ? default(bool) : dataReader.GetBoolean(21);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(23) ? default(int) : dataReader.GetInt32(23);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
            fixup: (namelessParameter{9}, namelessParameter{10}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                    entity: namelessParameter{9}, 
                    value: namelessParameter{10}, 
                    forMaterialization: True);
                return namelessParameter{10}.<ApprovalRequest>k__BackingField = namelessParameter{9};
            }, 
            trackingQuery: True);
        return IsTrue(resultCoordinator.ResultReady)
         ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 07:21:59.652 +09:00 [DBG] Creating DbConnection.
2025-06-13 07:21:59.652 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 07:21:59.653 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:21:59.654 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:21:59.655 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 07:21:59.655 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 07:21:59.656 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-13 07:21:59.658 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 07:21:59.664 +09:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 07:21:59.664 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:21:59.664 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 07:21:59.664 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:21:59.665 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 07:21:59.665 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 07:21:59.666 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 07:21:59.666 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 07:21:59.666 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 07:21:59.668 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 07:21:59.668 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 07:21:59.704 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 156.3995ms
2025-06-13 07:21:59.706 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 07:21:59.706 +09:00 [DBG] Connection id "0HND9VU66O1QT" completed keep alive response.
2025-06-13 07:21:59.707 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 07:21:59.708 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:21:59.708 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 07:21:59.709 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - 200 null application/json; charset=utf-8 228.8526ms
2025-06-13 07:23:02.155 +09:00 [DBG] Connection id "0HND9VU66O1QT" received FIN.
2025-06-13 07:23:02.168 +09:00 [DBG] Connection id "0HND9VU66O1QT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 07:23:02.171 +09:00 [DBG] Connection id "0HND9VU66O1QT" disconnecting.
2025-06-13 07:23:02.173 +09:00 [DBG] Connection id "0HND9VU66O1QT" stopped.
2025-06-13 07:31:44.331 +09:00 [DBG] Connection id "0HND9VU66O1QU" accepted.
2025-06-13 07:31:44.332 +09:00 [DBG] Connection id "0HND9VU66O1QU" started.
2025-06-13 07:31:44.376 +09:00 [DBG] Connection 0HND9VU66O1QU established using the following protocol: "Tls12"
2025-06-13 07:31:44.380 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - null null
2025-06-13 07:31:44.384 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 07:31:44.385 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 07:31:44.385 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 07:31:44.389 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 07:31:44.389 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 07:31:44.390 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 07:31:44.391 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 07:31:44.391 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 07:31:44.391 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 07:31:44.391 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 07:31:44.391 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 07:31:44.391 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 07:31:44.393 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 07:31:44.393 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 07:31:44.393 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 07:31:44.393 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 07:31:44.394 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 07:31:44.394 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 07:31:44.394 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 07:31:44.434 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 07:31:44.446 +09:00 [DBG] Creating DbConnection.
2025-06-13 07:31:44.447 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 07:31:44.447 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:31:44.449 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:31:44.449 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 07:31:44.449 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 07:31:44.449 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 07:31:44.450 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 07:31:44.454 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 07:31:44.454 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:31:44.454 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 07:31:44.454 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:31:44.454 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 07:31:44.454 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 07:31:44.455 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 07:31:44.455 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 07:31:44.455 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 07:31:44.455 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 07:31:44.455 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 07:31:44.455 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 64.2709ms
2025-06-13 07:31:44.455 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 07:31:44.455 +09:00 [DBG] Connection id "0HND9VU66O1QU" completed keep alive response.
2025-06-13 07:31:44.456 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 07:31:44.456 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:31:44.456 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 07:31:44.456 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - 200 null application/json; charset=utf-8 75.7492ms
2025-06-13 07:33:00.106 +09:00 [DBG] Connection id "0HND9VU66O1QU" received FIN.
2025-06-13 07:33:00.113 +09:00 [DBG] Connection id "0HND9VU66O1QU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 07:33:00.114 +09:00 [DBG] Connection id "0HND9VU66O1QU" disconnecting.
2025-06-13 07:33:00.115 +09:00 [DBG] Connection id "0HND9VU66O1QU" stopped.
2025-06-13 07:41:18.820 +09:00 [DBG] Connection id "0HND9VU66O1QV" accepted.
2025-06-13 07:41:18.826 +09:00 [DBG] Connection id "0HND9VU66O1QV" started.
2025-06-13 07:41:18.897 +09:00 [DBG] Connection 0HND9VU66O1QV established using the following protocol: "Tls12"
2025-06-13 07:41:18.928 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - null null
2025-06-13 07:41:18.929 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 07:41:18.929 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 07:41:18.929 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 07:41:18.962 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 07:41:18.962 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 07:41:18.968 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 07:41:18.972 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 07:41:18.973 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 07:41:18.973 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 07:41:18.973 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 07:41:18.973 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 07:41:18.973 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 07:41:18.986 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 07:41:18.986 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 07:41:18.986 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 07:41:18.986 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 07:41:18.986 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 07:41:18.986 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 07:41:18.986 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 07:41:19.031 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 07:41:19.098 +09:00 [DBG] Creating DbConnection.
2025-06-13 07:41:19.100 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-13 07:41:19.100 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:41:19.134 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:41:19.134 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 07:41:19.134 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 07:41:19.134 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 07:41:19.139 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 07:41:19.219 +09:00 [INF] Executed DbCommand (81ms) [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 07:41:19.219 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:41:19.219 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 07:41:19.219 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 07:41:19.219 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 07:41:19.221 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 07:41:19.221 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 07:41:19.221 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 07:41:19.221 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 07:41:19.221 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 07:41:19.221 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 07:41:19.233 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 257.8161ms
2025-06-13 07:41:19.234 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 07:41:19.234 +09:00 [DBG] Connection id "0HND9VU66O1QV" completed keep alive response.
2025-06-13 07:41:19.234 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 07:41:19.234 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 07:41:19.234 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 07:41:19.234 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - 200 null application/json; charset=utf-8 306.0941ms
2025-06-13 07:43:30.191 +09:00 [DBG] Connection id "0HND9VU66O1QV" disconnecting.
2025-06-13 07:43:30.193 +09:00 [DBG] Connection id "0HND9VU66O1QV" stopped.
2025-06-13 07:43:30.193 +09:00 [DBG] Connection id "0HND9VU66O1QV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 08:03:52.628 +09:00 [DBG] Connection id "0HND9VU66O1R0" accepted.
2025-06-13 08:03:52.633 +09:00 [DBG] Connection id "0HND9VU66O1R0" started.
2025-06-13 08:03:52.676 +09:00 [DBG] Connection 0HND9VU66O1R0 established using the following protocol: "Tls12"
2025-06-13 08:03:52.687 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - null null
2025-06-13 08:03:52.689 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 08:03:52.690 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 08:03:52.690 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 08:03:52.696 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 08:03:52.697 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 08:03:52.699 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 08:03:52.700 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 08:03:52.701 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 08:03:52.702 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 08:03:52.702 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 08:03:52.702 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 08:03:52.703 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 08:03:52.709 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 08:03:52.710 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 08:03:52.713 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 08:03:52.713 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 08:03:52.713 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 08:03:52.713 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 08:03:52.715 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 08:03:52.729 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 08:03:52.739 +09:00 [DBG] Creating DbConnection.
2025-06-13 08:03:52.741 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-13 08:03:52.741 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 08:03:52.745 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 08:03:52.747 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 08:03:52.747 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-06-13 08:03:52.747 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-13 08:03:52.747 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 08:03:52.753 +09:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 08:03:52.754 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 08:03:52.754 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 08:03:52.755 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 08:03:52.755 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 08:03:52.756 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 08:03:52.756 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 08:03:52.756 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 08:03:52.756 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 08:03:52.756 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 08:03:52.756 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 08:03:52.759 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 56.4127ms
2025-06-13 08:03:52.759 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 08:03:52.759 +09:00 [DBG] Connection id "0HND9VU66O1R0" completed keep alive response.
2025-06-13 08:03:52.759 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 08:03:52.759 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 08:03:52.760 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 08:03:52.762 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - 200 null application/json; charset=utf-8 75.0204ms
2025-06-13 08:03:55.946 +09:00 [DBG] Connection id "0HND9VU66O1R0" received FIN.
2025-06-13 08:03:55.947 +09:00 [DBG] Connection id "0HND9VU66O1R0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 08:03:55.947 +09:00 [DBG] Connection id "0HND9VU66O1R0" disconnecting.
2025-06-13 08:03:55.947 +09:00 [DBG] Connection id "0HND9VU66O1R0" stopped.
2025-06-13 08:32:03.980 +09:00 [DBG] Connection id "0HND9VU66O1R1" accepted.
2025-06-13 08:32:03.981 +09:00 [DBG] Connection id "0HND9VU66O1R1" started.
2025-06-13 08:32:04.018 +09:00 [DBG] Connection 0HND9VU66O1R1 established using the following protocol: "Tls12"
2025-06-13 08:32:04.025 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - null null
2025-06-13 08:32:04.028 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 08:32:04.029 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 08:32:04.029 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 08:32:04.033 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 08:32:04.033 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 08:32:04.035 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 08:32:04.035 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 08:32:04.035 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 08:32:04.036 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 08:32:04.036 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 08:32:04.036 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 08:32:04.036 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 08:32:04.038 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 08:32:04.039 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 08:32:04.040 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 08:32:04.040 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 08:32:04.040 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 08:32:04.040 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 08:32:04.041 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 08:32:04.054 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 08:32:04.060 +09:00 [DBG] Creating DbConnection.
2025-06-13 08:32:04.061 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-13 08:32:04.062 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 08:32:04.066 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 08:32:04.067 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 08:32:04.067 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-06-13 08:32:04.067 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-13 08:32:04.068 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 08:32:04.071 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 08:32:04.071 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 08:32:04.071 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 08:32:04.071 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 08:32:04.072 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 08:32:04.073 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 08:32:04.073 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 08:32:04.073 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 08:32:04.073 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 08:32:04.073 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 08:32:04.073 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 08:32:04.074 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 38.0037ms
2025-06-13 08:32:04.074 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 08:32:04.074 +09:00 [DBG] Connection id "0HND9VU66O1R1" completed keep alive response.
2025-06-13 08:32:04.074 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 08:32:04.074 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 08:32:04.075 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 08:32:04.075 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - 200 null application/json; charset=utf-8 49.9194ms
2025-06-13 08:33:16.993 +09:00 [DBG] Connection id "0HND9VU66O1R1" received FIN.
2025-06-13 08:33:16.995 +09:00 [DBG] Connection id "0HND9VU66O1R1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 08:33:16.996 +09:00 [DBG] Connection id "0HND9VU66O1R1" disconnecting.
2025-06-13 08:33:16.997 +09:00 [DBG] Connection id "0HND9VU66O1R1" stopped.
2025-06-13 08:47:53.993 +09:00 [DBG] Connection id "0HND9VU66O1R2" accepted.
2025-06-13 08:47:53.995 +09:00 [DBG] Connection id "0HND9VU66O1R2" started.
2025-06-13 08:47:54.035 +09:00 [DBG] Connection 0HND9VU66O1R2 established using the following protocol: "Tls12"
2025-06-13 08:47:54.049 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - null null
2025-06-13 08:47:54.050 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 08:47:54.050 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4'
2025-06-13 08:47:54.051 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 08:47:54.056 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 08:47:54.056 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 08:47:54.058 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 08:47:54.059 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 08:47:54.059 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 08:47:54.060 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 08:47:54.060 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 08:47:54.060 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 08:47:54.061 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 08:47:54.064 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 08:47:54.065 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 08:47:54.065 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 08:47:54.065 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 08:47:54.065 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 08:47:54.065 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 08:47:54.066 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 08:47:54.083 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 08:47:54.094 +09:00 [DBG] Creating DbConnection.
2025-06-13 08:47:54.095 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-13 08:47:54.096 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 08:47:54.101 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 08:47:54.102 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 08:47:54.102 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 08:47:54.102 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 08:47:54.102 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 08:47:54.107 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 43)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 08:47:54.107 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 08:47:54.107 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 08:47:54.107 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 08:47:54.107 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 08:47:54.108 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 08:47:54.108 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 08:47:54.108 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 08:47:54.108 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 08:47:54.108 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 08:47:54.108 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 08:47:54.111 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 49.7381ms
2025-06-13 08:47:54.111 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 08:47:54.111 +09:00 [DBG] Connection id "0HND9VU66O1R2" completed keep alive response.
2025-06-13 08:47:54.111 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 08:47:54.111 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 08:47:54.112 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 08:47:54.112 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/CWnq567KN0HgdQQhdWSER0kho59j1asPUX9RuiKNgm4 - 200 null application/json; charset=utf-8 64.3245ms
2025-06-13 08:48:47.720 +09:00 [DBG] Connection id "0HND9VU66O1R2" received FIN.
2025-06-13 08:48:47.722 +09:00 [DBG] Connection id "0HND9VU66O1R2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 08:48:47.723 +09:00 [DBG] Connection id "0HND9VU66O1R2" disconnecting.
2025-06-13 08:48:47.724 +09:00 [DBG] Connection id "0HND9VU66O1R2" stopped.
2025-06-13 08:58:00.356 +09:00 [DBG] Connection id "0HND9VU66O1R3" accepted.
2025-06-13 08:58:00.357 +09:00 [DBG] Connection id "0HND9VU66O1R3" started.
2025-06-13 08:58:00.389 +09:00 [DBG] Connection 0HND9VU66O1R3 established using the following protocol: "Tls12"
2025-06-13 08:58:00.394 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 08:58:00.395 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 08:58:00.395 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 08:58:00.395 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 08:58:00.397 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 08:58:00.398 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 08:58:00.398 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 08:58:00.398 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 08:58:00.398 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 08:58:00.398 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 08:58:00.399 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 08:58:00.399 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 08:58:00.399 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 08:58:00.400 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 08:58:00.402 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 08:58:00.402 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 08:58:00.402 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 08:58:00.402 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 08:58:00.402 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 08:58:00.403 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 08:58:00.406 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 08:58:00.413 +09:00 [DBG] Creating DbConnection.
2025-06-13 08:58:00.414 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-13 08:58:00.414 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 08:58:00.418 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 08:58:00.418 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 08:58:00.418 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 08:58:00.418 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 08:58:00.419 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 08:58:00.423 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 08:58:00.423 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 08:58:00.423 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 08:58:00.423 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 08:58:00.424 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 08:58:00.425 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 08:58:00.425 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 08:58:00.425 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 08:58:00.425 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 08:58:00.425 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 08:58:00.425 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 08:58:00.427 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 28.1488ms
2025-06-13 08:58:00.427 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 08:58:00.427 +09:00 [DBG] Connection id "0HND9VU66O1R3" completed keep alive response.
2025-06-13 08:58:00.427 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 08:58:00.427 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 08:58:00.427 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 08:58:00.428 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 33.3445ms
2025-06-13 08:59:15.353 +09:00 [DBG] Connection id "0HND9VU66O1R3" received FIN.
2025-06-13 08:59:15.355 +09:00 [DBG] Connection id "0HND9VU66O1R3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 08:59:15.357 +09:00 [DBG] Connection id "0HND9VU66O1R3" disconnecting.
2025-06-13 08:59:15.358 +09:00 [DBG] Connection id "0HND9VU66O1R3" stopped.
2025-06-13 09:06:30.642 +09:00 [DBG] Connection id "0HND9VU66O1R4" accepted.
2025-06-13 09:06:30.643 +09:00 [DBG] Connection id "0HND9VU66O1R4" started.
2025-06-13 09:06:30.668 +09:00 [DBG] Connection 0HND9VU66O1R4 established using the following protocol: "Tls12"
2025-06-13 09:06:30.673 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 09:06:30.673 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 09:06:30.673 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 09:06:30.673 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 09:06:30.674 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 09:06:30.674 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 09:06:30.674 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 09:06:30.674 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 09:06:30.675 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 09:06:30.675 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 09:06:30.675 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 09:06:30.675 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 09:06:30.675 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 09:06:30.677 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 09:06:30.678 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 09:06:30.678 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 09:06:30.678 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 09:06:30.678 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 09:06:30.678 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 09:06:30.679 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 09:06:30.683 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 09:06:30.685 +09:00 [DBG] Creating DbConnection.
2025-06-13 09:06:30.686 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 09:06:30.686 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:06:30.688 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:30.689 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 09:06:30.689 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:06:30.689 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-13 09:06:30.689 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 09:06:30.693 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 09:06:30.693 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:30.694 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 09:06:30.694 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:30.694 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:06:30.694 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 09:06:30.694 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 09:06:30.694 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 09:06:30.694 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 09:06:30.694 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 09:06:30.694 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 09:06:30.695 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 19.7817ms
2025-06-13 09:06:30.695 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 09:06:30.695 +09:00 [DBG] Connection id "0HND9VU66O1R4" completed keep alive response.
2025-06-13 09:06:30.695 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 09:06:30.695 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:06:30.695 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:06:30.695 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 22.6768ms
2025-06-13 09:06:53.695 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-13 09:06:53.697 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-13 09:06:53.697 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-13 09:06:53.697 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 09:06:53.698 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 09:06:53.698 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 09:06:53.724 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequest) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 09:06:53.724 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 09:06:53.724 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 09:06:53.724 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 09:06:53.724 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 09:06:53.724 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 09:06:53.724 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 09:06:53.724 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 09:06:53.725 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequest' ...
2025-06-13 09:06:53.728 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequest' using the name '' in request data ...
2025-06-13 09:06:53.739 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-13 09:06:53.764 +09:00 [DBG] Connection id "0HND9VU66O1R4", Request id "0HND9VU66O1R4:00000002": started reading request body.
2025-06-13 09:06:53.766 +09:00 [DBG] Connection id "0HND9VU66O1R4", Request id "0HND9VU66O1R4:00000002": done reading request body.
2025-06-13 09:06:53.784 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequest'
2025-06-13 09:06:53.784 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 09:06:53.784 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 09:06:53.784 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequest' ...
2025-06-13 09:06:53.808 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 09:06:53.809 +09:00 [INF] Creating a new approval request.
2025-06-13 09:06:53.812 +09:00 [DBG] Approval Request Details: {"ApprovalId":"be21de64-00f2-4b98-baa5-fd302db5f4e2","RequestTitle":"Test","RequestContent":"Cotnetn","ApplicantEmployeeNumber":"EMP0006","ApplicantName":"User 6","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-13T00:06:53.6542160Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0001","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 1","Position":"System Administrator","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0005","Sequence":2,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 5","Position":"Auditor","Department":"Marketing","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequest"}
2025-06-13 09:06:53.820 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 09:06:53.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:53.904 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:53.932 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:53.933 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:53.933 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:53.935 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-13 09:06:53.937 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-13 09:06:53.950 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-13 09:06:54.005 +09:00 [DBG] Creating DbConnection.
2025-06-13 09:06:54.005 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 09:06:54.005 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:06:54.005 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:54.007 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-13 09:06:54.012 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-13 09:06:54.013 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 09:06:54.013 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:06:54.013 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:06:54.014 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (Size = 7), @p9='?' (Size = 4), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-06-13 09:06:54.015 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (Size = 7), @p9='?' (Size = 4), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-06-13 09:06:54.016 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:54.017 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 09:06:54.017 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 09:06:54.017 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:06:54.017 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:06:54.017 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 09:06:54.018 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 09:06:54.019 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:54.019 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 09:06:54.019 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 09:06:54.019 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:06:54.019 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:06:54.019 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 9), @p8='?' (DbType = Boolean), @p9='?' (Size = 7), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 09:06:54.019 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 9), @p8='?' (DbType = Boolean), @p9='?' (Size = 7), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 09:06:54.020 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:54.020 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 09:06:54.021 +09:00 [DBG] Committing transaction.
2025-06-13 09:06:54.022 +09:00 [DBG] Committed transaction.
2025-06-13 09:06:54.024 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:54.024 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:06:54.025 +09:00 [DBG] Disposing transaction.
2025-06-13 09:06:54.028 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:54.028 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:54.029 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:54.030 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 3 entities written to the database.
2025-06-13 09:06:54.030 +09:00 [INF] Approval request created successfully with ID: "be21de64-00f2-4b98-baa5-fd302db5f4e2"
2025-06-13 09:06:54.031 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 09:06:54.032 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 09:06:54.032 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 09:06:54.032 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 09:06:54.032 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 09:06:54.032 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 09:06:54.046 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] for address (approvalId=[be21de64-00f2-4b98-baa5-fd302db5f4e2],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-13 09:06:54.049 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) resulting in /api/ApprovalRequest/be21de64-00f2-4b98-baa5-fd302db5f4e2 and 
2025-06-13 09:06:54.050 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] with result /api/ApprovalRequest/be21de64-00f2-4b98-baa5-fd302db5f4e2
2025-06-13 09:06:54.122 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API) in 397.7108ms
2025-06-13 09:06:54.123 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 09:06:54.123 +09:00 [DBG] Connection id "0HND9VU66O1R4" completed keep alive response.
2025-06-13 09:06:54.124 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 09:06:54.125 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:06:54.125 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:06:54.125 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 430.3433ms
2025-06-13 09:06:54.183 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 09:06:54.183 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 09:06:54.184 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 09:06:54.184 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 09:06:54.184 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 09:06:54.184 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 09:06:54.184 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 09:06:54.184 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 09:06:54.184 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 09:06:54.184 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 09:06:54.184 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 09:06:54.184 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 09:06:54.184 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 09:06:54.184 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 09:06:54.184 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 09:06:54.185 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 09:06:54.185 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 09:06:54.185 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 09:06:54.185 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 09:06:54.185 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 09:06:54.186 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 09:06:54.187 +09:00 [DBG] Creating DbConnection.
2025-06-13 09:06:54.187 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 09:06:54.187 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:06:54.187 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:54.188 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 09:06:54.188 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:06:54.188 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:06:54.188 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 09:06:54.189 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 09:06:54.216 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:54.220 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:54.221 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:54.222 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:54.222 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 33ms reading results.
2025-06-13 09:06:54.222 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:54.222 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:06:54.222 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 09:06:54.222 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 09:06:54.222 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 09:06:54.222 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 09:06:54.222 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 09:06:54.223 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 09:06:54.223 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 38.6164ms
2025-06-13 09:06:54.223 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 09:06:54.223 +09:00 [DBG] Connection id "0HND9VU66O1R4" completed keep alive response.
2025-06-13 09:06:54.223 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 09:06:54.223 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:06:54.223 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:06:54.223 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 39.7315ms
2025-06-13 09:06:56.394 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/be21de64-00f2-4b98-baa5-fd302db5f4e2 - null null
2025-06-13 09:06:56.395 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/be21de64-00f2-4b98-baa5-fd302db5f4e2'
2025-06-13 09:06:56.395 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/be21de64-00f2-4b98-baa5-fd302db5f4e2'
2025-06-13 09:06:56.395 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 09:06:56.395 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 09:06:56.395 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 09:06:56.406 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 09:06:56.406 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 09:06:56.406 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 09:06:56.406 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 09:06:56.406 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 09:06:56.406 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 09:06:56.409 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 09:06:56.410 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 09:06:56.410 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 09:06:56.410 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-13 09:06:56.415 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 09:06:56.415 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 09:06:56.415 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 09:06:56.415 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-13 09:06:56.427 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 09:06:56.433 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-13 09:06:56.458 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-13 09:06:56.462 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-13 09:06:56.479 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-13 09:06:56.494 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.MisKey (string), 7], [Property: ApprovalRequest.RequestContent (string), 8], [Property: ApprovalRequest.RequestTitle (string) Required, 9], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 10], [Property: ApprovalRequest.RespondedAt (DateTime?), 11], [Property: ApprovalRequest.Status (string) Required, 12] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: ApprovalStep.ActionDate (DateTime?), 14], [Property: ApprovalStep.ActionStatus (string), 15], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 16], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 17], [Property: ApprovalStep.ApproverName (string), 18], [Property: ApprovalStep.Comment (string), 19], [Property: ApprovalStep.Department (string), 20], [Property: ApprovalStep.IsFinalApprover (bool) Required, 21], [Property: ApprovalStep.Position (string), 22], [Property: ApprovalStep.Sequence (int) Required, 23], [Property: ApprovalStep.StepType (string), 24] }
                3 -> 13
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 25], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 26], [Property: ApprovalAttachment.FileName (string) Required, 27], [Property: ApprovalAttachment.FilePath (string) Required, 28], [Property: ApprovalAttachment.FileSize (long?), 29], [Property: ApprovalAttachment.FileType (string), 30], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 31], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 32] }
                5 -> 25
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.MisKey (string), 7], [Property: ApprovalRequest.RequestContent (string), 8], [Property: ApprovalRequest.RequestTitle (string) Required, 9], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 10], [Property: ApprovalRequest.RespondedAt (DateTime?), 11], [Property: ApprovalRequest.Status (string) Required, 12] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: ApprovalStep.ActionDate (DateTime?), 14], [Property: ApprovalStep.ActionStatus (string), 15], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 16], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 17], [Property: ApprovalStep.ApproverName (string), 18], [Property: ApprovalStep.Comment (string), 19], [Property: ApprovalStep.Department (string), 20], [Property: ApprovalStep.IsFinalApprover (bool) Required, 21], [Property: ApprovalStep.Position (string), 22], [Property: ApprovalStep.Sequence (int) Required, 23], [Property: ApprovalStep.StepType (string), 24] }
                3 -> 13
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 25], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 26], [Property: ApprovalAttachment.FileName (string) Required, 27], [Property: ApprovalAttachment.FilePath (string) Required, 28], [Property: ApprovalAttachment.FileSize (long?), 29], [Property: ApprovalAttachment.FileType (string), 30], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 31], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 32] }
                5 -> 25
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(9);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(10);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                        instance.<Status>k__BackingField = dataReader.GetString(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(13) ? default(object) : (object)dataReader.GetGuid(13) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(13) ? default(Guid) : dataReader.GetGuid(13);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(14) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(14);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(16) ? default(Guid) : dataReader.GetGuid(16);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(21) ? default(bool) : dataReader.GetBoolean(21);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(23) ? default(int) : dataReader.GetInt32(23);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(25) ? default(Guid?) : (Guid?)dataReader.GetGuid(25) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(25) ? default(object) : (object)dataReader.GetGuid(25) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(25) ? default(Guid) : dataReader.GetGuid(25);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(26) ? default(Guid) : dataReader.GetGuid(26);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(28) ? default(string) : dataReader.GetString(28);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(29) ? default(long?) : (long?)dataReader.GetInt64(29);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(31) ? default(DateTime) : dataReader.GetDateTime(31);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 09:06:56.498 +09:00 [DBG] Creating DbConnection.
2025-06-13 09:06:56.498 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 09:06:56.498 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:06:56.498 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:56.498 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 09:06:56.500 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-06-13 09:06:56.500 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-13 09:06:56.500 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 09:06:56.501 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 09:06:56.502 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:56.503 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:56.504 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:06:56.505 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:56.505 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 09:06:56.505 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:06:56.505 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:06:56.505 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 09:06:56.505 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 09:06:56.505 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 09:06:56.505 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 09:06:56.505 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 09:06:56.505 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 09:06:56.505 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 98.7904ms
2025-06-13 09:06:56.505 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 09:06:56.506 +09:00 [DBG] Connection id "0HND9VU66O1R4" completed keep alive response.
2025-06-13 09:06:56.506 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 09:06:56.506 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:06:56.506 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:06:56.506 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/be21de64-00f2-4b98-baa5-fd302db5f4e2 - 200 null application/json; charset=utf-8 111.2432ms
2025-06-13 09:07:02.764 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 09:07:02.766 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 09:07:02.768 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 09:07:02.769 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 09:07:02.770 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 09:07:02.770 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 09:07:02.772 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 09:07:02.772 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 09:07:02.772 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 09:07:02.772 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 09:07:02.772 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 09:07:02.773 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 09:07:02.773 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 09:07:02.774 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 09:07:02.775 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 09:07:02.775 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 09:07:02.776 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 09:07:02.776 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 09:07:02.776 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 09:07:02.776 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 09:07:02.779 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 09:07:02.781 +09:00 [DBG] Creating DbConnection.
2025-06-13 09:07:02.782 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 09:07:02.782 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:07:02.782 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:07:02.783 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 09:07:02.783 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:07:02.784 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:07:02.784 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 09:07:02.785 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 09:07:02.786 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:02.786 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:02.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:02.788 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:07:02.788 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 09:07:02.788 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:07:02.788 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:07:02.788 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 09:07:02.789 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 09:07:02.789 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 09:07:02.789 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 09:07:02.789 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 09:07:02.789 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 09:07:02.792 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 19.7547ms
2025-06-13 09:07:02.793 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 09:07:02.793 +09:00 [DBG] Connection id "0HND9VU66O1R4" completed keep alive response.
2025-06-13 09:07:02.794 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 09:07:02.794 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:07:02.797 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:07:02.797 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 33.7445ms
2025-06-13 09:07:05.228 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - null null
2025-06-13 09:07:05.228 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 09:07:05.228 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 09:07:05.228 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 09:07:05.229 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 09:07:05.229 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 09:07:05.242 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 09:07:05.242 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 09:07:05.242 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 09:07:05.243 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 09:07:05.243 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 09:07:05.243 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 09:07:05.243 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 09:07:05.248 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 09:07:05.249 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 09:07:05.251 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 09:07:05.252 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 09:07:05.252 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 09:07:05.252 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 09:07:05.253 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 09:07:05.258 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 09:07:05.260 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)'
2025-06-13 09:07:05.264 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-13 09:07:05.276 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.MisKey (string), 7], [Property: ApprovalRequest.RequestContent (string), 8], [Property: ApprovalRequest.RequestTitle (string) Required, 9], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 10], [Property: ApprovalRequest.RespondedAt (DateTime?), 11], [Property: ApprovalRequest.Status (string) Required, 12] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: ApprovalStep.ActionDate (DateTime?), 14], [Property: ApprovalStep.ActionStatus (string), 15], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 16], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 17], [Property: ApprovalStep.ApproverName (string), 18], [Property: ApprovalStep.Comment (string), 19], [Property: ApprovalStep.Department (string), 20], [Property: ApprovalStep.IsFinalApprover (bool) Required, 21], [Property: ApprovalStep.Position (string), 22], [Property: ApprovalStep.Sequence (int) Required, 23], [Property: ApprovalStep.StepType (string), 24] }
            3 -> 13
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.MisKey (string), 7], [Property: ApprovalRequest.RequestContent (string), 8], [Property: ApprovalRequest.RequestTitle (string) Required, 9], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 10], [Property: ApprovalRequest.RespondedAt (DateTime?), 11], [Property: ApprovalRequest.Status (string) Required, 12] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: ApprovalStep.ActionDate (DateTime?), 14], [Property: ApprovalStep.ActionStatus (string), 15], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 16], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 17], [Property: ApprovalStep.ApproverName (string), 18], [Property: ApprovalStep.Comment (string), 19], [Property: ApprovalStep.Department (string), 20], [Property: ApprovalStep.IsFinalApprover (bool) Required, 21], [Property: ApprovalStep.Position (string), 22], [Property: ApprovalStep.Sequence (int) Required, 23], [Property: ApprovalStep.StepType (string), 24] }
            3 -> 13
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            ApprovalRequest entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                ApprovalRequest instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(ApprovalRequest);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (ApprovalRequest)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                            {
                                return 
                                {
                                    ApprovalRequest instance;
                                    instance = new ApprovalRequest();
                                    instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                    instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                    instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<MisKey>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<RequestContent>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<RequestTitle>k__BackingField = dataReader.GetString(9);
                                    instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(10);
                                    instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<Status>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(ApprovalRequest)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (ApprovalRequest)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                trackingQuery: True, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalStep instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalStep);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(13) ? default(object) : (object)dataReader.GetGuid(13) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalStep)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(13) ? default(Guid) : dataReader.GetGuid(13);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(14) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(14);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(16) ? default(Guid) : dataReader.GetGuid(16);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(21) ? default(bool) : dataReader.GetBoolean(21);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(23) ? default(int) : dataReader.GetInt32(23);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
            fixup: (namelessParameter{9}, namelessParameter{10}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                    entity: namelessParameter{9}, 
                    value: namelessParameter{10}, 
                    forMaterialization: True);
                return namelessParameter{10}.<ApprovalRequest>k__BackingField = namelessParameter{9};
            }, 
            trackingQuery: True);
        return IsTrue(resultCoordinator.ResultReady)
         ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 09:07:05.282 +09:00 [DBG] Creating DbConnection.
2025-06-13 09:07:05.283 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 09:07:05.283 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:07:05.284 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:07:05.284 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 09:07:05.284 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:07:05.284 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:07:05.284 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 09:07:05.285 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 09:07:05.285 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.287 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.287 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.287 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.287 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:07:05.289 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:07:05.289 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-13 09:07:05.289 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:07:05.289 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:07:05.289 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 09:07:05.289 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 09:07:05.289 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 09:07:05.289 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 09:07:05.290 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 09:07:05.290 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 09:07:05.291 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 47.9472ms
2025-06-13 09:07:05.291 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 09:07:05.291 +09:00 [DBG] Connection id "0HND9VU66O1R4" completed keep alive response.
2025-06-13 09:07:05.291 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 09:07:05.291 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:07:05.291 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:07:05.292 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - 200 null application/json; charset=utf-8 63.9262ms
2025-06-13 09:08:15.660 +09:00 [DBG] Connection id "0HND9VU66O1R4" received FIN.
2025-06-13 09:08:15.663 +09:00 [DBG] Connection id "0HND9VU66O1R4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 09:08:15.663 +09:00 [DBG] Connection id "0HND9VU66O1R4" disconnecting.
2025-06-13 09:08:15.666 +09:00 [DBG] Connection id "0HND9VU66O1R4" stopped.
2025-06-13 09:58:37.762 +09:00 [DBG] Connection id "0HND9VU66O1R5" accepted.
2025-06-13 09:58:37.763 +09:00 [DBG] Connection id "0HND9VU66O1R5" started.
2025-06-13 09:58:37.794 +09:00 [DBG] Connection 0HND9VU66O1R5 established using the following protocol: "Tls12"
2025-06-13 09:58:37.811 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - null null
2025-06-13 09:58:37.817 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 09:58:37.817 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 09:58:37.818 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 09:58:37.823 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 09:58:37.823 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 09:58:37.827 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 09:58:37.827 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 09:58:37.827 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 09:58:37.828 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 09:58:37.828 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 09:58:37.828 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 09:58:37.828 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 09:58:37.835 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 09:58:37.835 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 09:58:37.836 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 09:58:37.837 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 09:58:37.837 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 09:58:37.837 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 09:58:37.838 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 09:58:37.848 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 09:58:37.859 +09:00 [DBG] Creating DbConnection.
2025-06-13 09:58:37.861 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-13 09:58:37.862 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:58:37.866 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:58:37.866 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 09:58:37.866 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:58:37.867 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:58:37.867 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 09:58:37.871 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 09:58:37.873 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.874 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.876 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.876 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.876 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:58:37.876 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:58:37.876 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-13 09:58:37.876 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:58:37.876 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:58:37.876 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 09:58:37.876 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 09:58:37.876 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 09:58:37.876 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 09:58:37.876 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 09:58:37.877 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 09:58:37.881 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 52.6449ms
2025-06-13 09:58:37.881 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 09:58:37.881 +09:00 [DBG] Connection id "0HND9VU66O1R5" completed keep alive response.
2025-06-13 09:58:37.881 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 09:58:37.882 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:58:37.882 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:58:37.882 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - 200 null application/json; charset=utf-8 72.2318ms
2025-06-13 09:59:49.859 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 09:59:49.862 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 09:59:49.863 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 09:59:49.863 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 09:59:49.864 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 09:59:49.864 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 09:59:49.864 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 09:59:49.865 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 09:59:49.865 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 09:59:49.865 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 09:59:49.866 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 09:59:49.866 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 09:59:49.867 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 09:59:49.895 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 09:59:49.896 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 09:59:49.898 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 09:59:49.898 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 09:59:49.898 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 09:59:49.898 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 09:59:49.899 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 09:59:49.915 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 09:59:49.918 +09:00 [DBG] Creating DbConnection.
2025-06-13 09:59:49.918 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 09:59:49.918 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:59:49.919 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:59:49.919 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 09:59:49.919 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:59:49.919 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 09:59:49.920 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 09:59:49.921 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 09:59:49.921 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:59:49.922 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:59:49.922 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 09:59:49.922 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:59:49.922 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 09:59:49.922 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 09:59:49.922 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:59:49.923 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 09:59:49.923 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 09:59:49.923 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 09:59:49.923 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 09:59:49.923 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 09:59:49.923 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 09:59:49.926 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 59.1956ms
2025-06-13 09:59:49.926 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 09:59:49.927 +09:00 [DBG] Connection id "0HND9VU66O1R5" completed keep alive response.
2025-06-13 09:59:49.927 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 09:59:49.927 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 09:59:49.927 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 09:59:49.927 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 68.6642ms
2025-06-13 10:00:18.205 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 10:00:18.208 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 10:00:18.209 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 10:00:18.209 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:00:18.210 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 10:00:18.210 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:00:18.213 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 10:00:18.213 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 10:00:18.213 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 10:00:18.213 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 10:00:18.213 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 10:00:18.213 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 10:00:18.213 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 10:00:18.214 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 10:00:18.214 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 10:00:18.215 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 10:00:18.215 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 10:00:18.215 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 10:00:18.215 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 10:00:18.215 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 10:00:18.216 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 10:00:18.220 +09:00 [DBG] Creating DbConnection.
2025-06-13 10:00:18.221 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-13 10:00:18.222 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 10:00:18.222 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:00:18.222 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 10:00:18.222 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 10:00:18.223 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 10:00:18.223 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 10:00:18.223 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 10:00:18.224 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:00:18.224 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:00:18.224 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:00:18.224 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:00:18.224 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 10:00:18.224 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:00:18.225 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 10:00:18.227 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 10:00:18.227 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 10:00:18.227 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 10:00:18.227 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 10:00:18.228 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 10:00:18.228 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 10:00:18.229 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 15.2126ms
2025-06-13 10:00:18.229 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:00:18.229 +09:00 [DBG] Connection id "0HND9VU66O1R5" completed keep alive response.
2025-06-13 10:00:18.229 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 10:00:18.229 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 10:00:18.229 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 10:00:18.232 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 27.0624ms
2025-06-13 10:00:19.745 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 10:00:19.747 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 10:00:19.748 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 10:00:19.748 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:00:19.749 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 10:00:19.749 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:00:19.749 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 10:00:19.749 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 10:00:19.749 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 10:00:19.749 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 10:00:19.750 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 10:00:19.750 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 10:00:19.750 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 10:00:19.750 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 10:00:19.750 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 10:00:19.750 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 10:00:19.750 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 10:00:19.750 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 10:00:19.750 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 10:00:19.750 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 10:00:19.751 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 10:00:19.751 +09:00 [DBG] Creating DbConnection.
2025-06-13 10:00:19.751 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 10:00:19.751 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 10:00:19.751 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:00:19.751 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 10:00:19.752 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 10:00:19.752 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 10:00:19.752 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 10:00:19.753 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 10:00:19.753 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:00:19.753 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:00:19.753 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:00:19.753 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:00:19.753 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 10:00:19.753 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:00:19.754 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 10:00:19.754 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 10:00:19.754 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 10:00:19.754 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 10:00:19.754 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 10:00:19.754 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 10:00:19.754 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 10:00:19.754 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.7154ms
2025-06-13 10:00:19.754 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:00:19.754 +09:00 [DBG] Connection id "0HND9VU66O1R5" completed keep alive response.
2025-06-13 10:00:19.755 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 10:00:19.755 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 10:00:19.755 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 10:00:19.755 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 9.4998ms
2025-06-13 10:00:52.764 +09:00 [DBG] Connection id "0HND9VU66O1R5" received FIN.
2025-06-13 10:00:52.769 +09:00 [DBG] Connection id "0HND9VU66O1R5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 10:00:52.770 +09:00 [DBG] Connection id "0HND9VU66O1R5" disconnecting.
2025-06-13 10:00:52.772 +09:00 [DBG] Connection id "0HND9VU66O1R5" stopped.
2025-06-13 10:01:37.702 +09:00 [DBG] Connection id "0HND9VU66O1R6" accepted.
2025-06-13 10:01:37.703 +09:00 [DBG] Connection id "0HND9VU66O1R6" started.
2025-06-13 10:01:37.727 +09:00 [DBG] Connection 0HND9VU66O1R6 established using the following protocol: "Tls12"
2025-06-13 10:01:37.733 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 10:01:37.736 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 10:01:37.737 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 10:01:37.737 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:01:37.737 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 10:01:37.737 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:01:37.738 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 10:01:37.738 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 10:01:37.738 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 10:01:37.738 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 10:01:37.738 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 10:01:37.738 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 10:01:37.739 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 10:01:37.739 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 10:01:37.740 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 10:01:37.740 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 10:01:37.740 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 10:01:37.740 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 10:01:37.740 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 10:01:37.740 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 10:01:37.741 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 10:01:37.743 +09:00 [DBG] Creating DbConnection.
2025-06-13 10:01:37.743 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 10:01:37.743 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 10:01:37.743 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:01:37.743 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 10:01:37.743 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 10:01:37.743 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 10:01:37.743 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 10:01:37.744 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 10:01:37.744 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:01:37.744 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:01:37.744 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:01:37.745 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:01:37.745 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 10:01:37.746 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:01:37.746 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 10:01:37.746 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 10:01:37.746 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 10:01:37.746 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 10:01:37.746 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 10:01:37.746 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 10:01:37.746 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 10:01:37.747 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.9737ms
2025-06-13 10:01:37.747 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:01:37.747 +09:00 [DBG] Connection id "0HND9VU66O1R6" completed keep alive response.
2025-06-13 10:01:37.747 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 10:01:37.747 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 10:01:37.747 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 10:01:37.747 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 13.9793ms
2025-06-13 10:02:49.215 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 10:02:49.216 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 10:02:49.216 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 10:02:49.217 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:02:49.219 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 10:02:49.219 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:02:49.219 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 10:02:49.225 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 10:02:49.225 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 10:02:49.227 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 10:02:49.227 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 10:02:49.227 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 10:02:49.227 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 10:02:49.228 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 10:02:49.229 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 10:02:49.229 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 10:02:49.229 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 10:02:49.229 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 10:02:49.229 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 10:02:49.229 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 10:02:49.231 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 10:02:49.253 +09:00 [DBG] Creating DbConnection.
2025-06-13 10:02:49.253 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 10:02:49.254 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 10:02:49.254 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:02:49.255 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 10:02:49.255 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 10:02:49.256 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-13 10:02:49.256 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 10:02:49.257 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 10:02:49.258 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:02:49.258 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:02:49.258 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:02:49.259 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:02:49.259 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 10:02:49.259 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:02:49.259 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 10:02:49.259 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 10:02:49.260 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 10:02:49.260 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 10:02:49.260 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 10:02:49.260 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 10:02:49.260 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 10:02:49.260 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 33.2377ms
2025-06-13 10:02:49.261 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:02:49.261 +09:00 [DBG] Connection id "0HND9VU66O1R6" completed keep alive response.
2025-06-13 10:02:49.261 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 10:02:49.261 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 10:02:49.261 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 10:02:49.262 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 46.1544ms
2025-06-13 10:02:55.167 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 10:02:55.168 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 10:02:55.168 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 10:02:55.168 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:02:55.169 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 10:02:55.169 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:02:55.169 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 10:02:55.170 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 10:02:55.170 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 10:02:55.170 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 10:02:55.170 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 10:02:55.170 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 10:02:55.170 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 10:02:55.172 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 10:02:55.172 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 10:02:55.173 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 10:02:55.173 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 10:02:55.173 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 10:02:55.173 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 10:02:55.173 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 10:02:55.190 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 10:02:55.193 +09:00 [DBG] Creating DbConnection.
2025-06-13 10:02:55.193 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 10:02:55.193 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 10:02:55.193 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:02:55.196 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 10:02:55.196 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-06-13 10:02:55.196 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-06-13 10:02:55.197 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 10:02:55.197 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 10:02:55.198 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:02:55.198 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:02:55.198 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 10:02:55.198 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:02:55.198 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 10:02:55.198 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 10:02:55.199 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 10:02:55.199 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 10:02:55.199 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 10:02:55.199 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 10:02:55.199 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 10:02:55.199 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 10:02:55.199 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 10:02:55.200 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 29.2326ms
2025-06-13 10:02:55.200 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 10:02:55.200 +09:00 [DBG] Connection id "0HND9VU66O1R6" completed keep alive response.
2025-06-13 10:02:55.200 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 10:02:55.200 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 10:02:55.200 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 10:02:55.200 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 33.147ms
2025-06-13 10:03:52.717 +09:00 [DBG] Connection id "0HND9VU66O1R6" received FIN.
2025-06-13 10:03:52.720 +09:00 [DBG] Connection id "0HND9VU66O1R6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 10:03:52.721 +09:00 [DBG] Connection id "0HND9VU66O1R6" disconnecting.
2025-06-13 10:03:52.721 +09:00 [DBG] Connection id "0HND9VU66O1R6" stopped.
2025-06-13 17:00:26.771 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-13 17:00:27.016 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-13 17:00:27.565 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:00:27.572 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:00:27.580 +09:00 [DBG] Created DbConnection. (6ms).
2025-06-13 17:00:27.586 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:27.598 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:27.601 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:27.605 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:27.608 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 17:00:27.608 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:00:27.609 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:00:27.614 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-13 17:00:27.614 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (7ms).
2025-06-13 17:00:27.614 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:27.616 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:27.621 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 17:00:27.640 +09:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 17:00:27.641 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:27.643 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (2ms).
2025-06-13 17:00:27.649 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:00:27.649 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:00:27.649 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:27.651 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:27.651 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:27.651 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:27.652 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 17:00:27.652 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 17:00:27.652 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 17:00:27.652 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:27.652 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:27.657 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 17:00:27.657 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 17:00:27.658 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:27.658 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:27.692 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-13 17:00:27.854 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 17:00:27.874 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:27.876 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:27.876 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:00:27.876 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:00:27.876 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:00:27.877 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 17:00:27.878 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 17:00:27.880 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:27.881 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 17:00:27.882 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:27.882 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:27.884 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:00:27.884 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:27.884 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:27.886 +09:00 [DBG] Hosting starting
2025-06-13 17:00:27.903 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-13 17:00:27.904 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-13 17:00:28.225 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-13 17:00:28.226 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-13 17:00:28.226 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-13 17:00:28.227 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-13 17:00:28.227 +09:00 [INF] Hosting environment: Development
2025-06-13 17:00:28.228 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-13 17:00:28.229 +09:00 [DBG] Hosting started
2025-06-13 17:00:34.261 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" accepted.
2025-06-13 17:00:34.261 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" started.
2025-06-13 17:00:34.294 +09:00 [DBG] Connection 0HNDAA1G1B3CV established using the following protocol: "Tls12"
2025-06-13 17:00:34.309 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:00:34.317 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:00:34.319 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:00:34.319 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:34.328 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:00:34.329 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:34.337 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:00:34.337 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:00:34.337 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:00:34.337 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:00:34.337 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:00:34.338 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:00:34.338 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:00:34.339 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:00:34.341 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:00:34.341 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:00:34.342 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:00:34.342 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:00:34.342 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:00:34.343 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:00:34.350 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:00:34.356 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(request => EF.Property<string>(request, "ApplicantEmployeeNumber") == __userId_0)
    .Include(request => request.Steps)
    .OrderByDescending(request => request.RequestedAt)'
2025-06-13 17:00:34.364 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-13 17:00:34.410 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.MisKey (string), 7], [Property: ApprovalRequest.RequestContent (string), 8], [Property: ApprovalRequest.RequestTitle (string) Required, 9], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 10], [Property: ApprovalRequest.RespondedAt (DateTime?), 11], [Property: ApprovalRequest.Status (string) Required, 12] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: ApprovalStep.ActionDate (DateTime?), 14], [Property: ApprovalStep.ActionStatus (string), 15], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 16], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 17], [Property: ApprovalStep.ApproverName (string), 18], [Property: ApprovalStep.Comment (string), 19], [Property: ApprovalStep.Department (string), 20], [Property: ApprovalStep.IsFinalApprover (bool) Required, 21], [Property: ApprovalStep.Position (string), 22], [Property: ApprovalStep.Sequence (int) Required, 23], [Property: ApprovalStep.StepType (string), 24] }
            3 -> 13
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.MisKey (string), 7], [Property: ApprovalRequest.RequestContent (string), 8], [Property: ApprovalRequest.RequestTitle (string) Required, 9], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 10], [Property: ApprovalRequest.RespondedAt (DateTime?), 11], [Property: ApprovalRequest.Status (string) Required, 12] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: ApprovalStep.ActionDate (DateTime?), 14], [Property: ApprovalStep.ActionStatus (string), 15], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 16], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 17], [Property: ApprovalStep.ApproverName (string), 18], [Property: ApprovalStep.Comment (string), 19], [Property: ApprovalStep.Department (string), 20], [Property: ApprovalStep.IsFinalApprover (bool) Required, 21], [Property: ApprovalStep.Position (string), 22], [Property: ApprovalStep.Sequence (int) Required, 23], [Property: ApprovalStep.StepType (string), 24] }
            3 -> 13
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            ApprovalRequest entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                ApprovalRequest instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(ApprovalRequest);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (ApprovalRequest)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                            {
                                return 
                                {
                                    ApprovalRequest instance;
                                    instance = new ApprovalRequest();
                                    instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                    instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                    instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<MisKey>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<RequestContent>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<RequestTitle>k__BackingField = dataReader.GetString(9);
                                    instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(10);
                                    instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<Status>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(ApprovalRequest)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (ApprovalRequest)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                trackingQuery: True, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalStep instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalStep);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(13) ? default(object) : (object)dataReader.GetGuid(13) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalStep)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(13) ? default(Guid) : dataReader.GetGuid(13);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(14) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(14);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(16) ? default(Guid) : dataReader.GetGuid(16);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(21) ? default(bool) : dataReader.GetBoolean(21);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(23) ? default(int) : dataReader.GetInt32(23);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
            fixup: (namelessParameter{9}, namelessParameter{10}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                    entity: namelessParameter{9}, 
                    value: namelessParameter{10}, 
                    forMaterialization: True);
                return namelessParameter{10}.<ApprovalRequest>k__BackingField = namelessParameter{9};
            }, 
            trackingQuery: True);
        return IsTrue(resultCoordinator.ResultReady)
         ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 17:00:34.416 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:00:34.417 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:00:34.417 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:34.417 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:34.417 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:00:34.417 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:00:34.419 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-13 17:00:34.420 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:00:34.423 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:00:34.441 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:34.464 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:34.473 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:34.473 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:34.473 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 50ms reading results.
2025-06-13 17:00:34.474 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:34.474 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:34.475 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:00:34.475 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:00:34.475 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:00:34.475 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:00:34.475 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:00:34.475 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:00:34.518 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 179.6221ms
2025-06-13 17:00:34.521 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:34.521 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:00:34.523 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:00:34.524 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:34.524 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:34.525 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 216.5541ms
2025-06-13 17:00:36.322 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:00:36.324 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:00:36.325 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:00:36.325 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:36.326 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:00:36.326 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:36.326 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:00:36.327 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:00:36.327 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:00:36.327 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:00:36.327 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:00:36.327 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:00:36.327 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:00:36.329 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:00:36.329 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:00:36.329 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:00:36.329 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:00:36.329 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:00:36.329 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:00:36.330 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:00:36.365 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:00:36.368 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:00:36.368 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:00:36.368 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:36.368 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:36.368 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:00:36.368 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:00:36.368 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:00:36.368 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:00:36.369 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:00:36.369 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:36.370 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:36.370 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:36.370 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:36.370 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 17:00:36.370 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:36.370 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:36.370 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:00:36.371 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:00:36.371 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:00:36.371 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:00:36.371 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:00:36.371 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:00:36.371 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 44.3005ms
2025-06-13 17:00:36.371 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:36.371 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:00:36.372 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:00:36.372 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:36.372 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:36.372 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 49.6679ms
2025-06-13 17:00:39.306 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:00:39.306 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:00:39.306 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:00:39.306 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:39.308 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:00:39.308 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:39.308 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:00:39.308 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:00:39.308 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:00:39.309 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:00:39.309 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:00:39.309 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:00:39.309 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:00:39.310 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:00:39.310 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:00:39.311 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:00:39.311 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:00:39.311 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:00:39.311 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:00:39.311 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:00:39.311 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:00:39.312 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:00:39.312 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:00:39.312 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:39.312 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:39.312 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:00:39.312 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:00:39.312 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:00:39.312 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:00:39.313 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:00:39.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:39.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:39.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:39.313 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:39.313 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:00:39.313 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:39.313 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:39.314 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:00:39.314 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:00:39.314 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:00:39.314 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:00:39.314 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:00:39.314 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:00:39.315 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 5.8123ms
2025-06-13 17:00:39.315 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:39.315 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:00:39.315 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:00:39.315 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:39.315 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:39.315 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 9.7137ms
2025-06-13 17:00:44.363 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:00:44.363 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:00:44.364 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:00:44.365 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:44.366 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:00:44.366 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:44.366 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:00:44.366 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:00:44.366 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:00:44.366 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:00:44.366 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:00:44.366 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:00:44.366 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:00:44.367 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:00:44.367 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:00:44.367 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:00:44.367 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:00:44.367 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:00:44.367 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:00:44.367 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:00:44.367 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:00:44.368 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:00:44.368 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:00:44.368 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:44.368 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:44.368 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:00:44.368 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:00:44.369 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:00:44.369 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:00:44.369 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:00:44.369 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:44.369 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:44.369 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:44.369 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:44.369 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:00:44.370 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:44.370 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:44.370 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:00:44.370 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:00:44.370 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:00:44.370 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:00:44.370 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:00:44.370 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:00:44.370 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 3.906ms
2025-06-13 17:00:44.370 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:44.370 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:00:44.371 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:00:44.371 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:44.371 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:44.371 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 7.7926ms
2025-06-13 17:00:45.677 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:00:45.678 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:00:45.678 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:00:45.678 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:45.679 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:00:45.680 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:45.680 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:00:45.680 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:00:45.680 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:00:45.680 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:00:45.680 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:00:45.680 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:00:45.681 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:00:45.681 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:00:45.681 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:00:45.681 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:00:45.681 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:00:45.681 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:00:45.681 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:00:45.681 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:00:45.682 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:00:45.682 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:00:45.682 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:00:45.682 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:45.682 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:45.682 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:00:45.682 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:00:45.682 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:00:45.683 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:00:45.683 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:00:45.684 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:45.684 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:45.685 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:45.685 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:45.685 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 17:00:45.685 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:45.685 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:45.685 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:00:45.685 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:00:45.685 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:00:45.685 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:00:45.686 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:00:45.686 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:00:45.686 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 5.3571ms
2025-06-13 17:00:45.686 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:45.686 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:00:45.687 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:00:45.687 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:45.687 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:45.687 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 9.9238ms
2025-06-13 17:00:51.266 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:00:51.267 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:00:51.267 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:00:51.267 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:51.267 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:00:51.267 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:51.267 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:00:51.267 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:00:51.267 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:00:51.267 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:00:51.267 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:00:51.267 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:00:51.267 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:00:51.268 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:00:51.268 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:00:51.268 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:00:51.268 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:00:51.268 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:00:51.268 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:00:51.268 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:00:51.268 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:00:51.269 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:00:51.269 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:00:51.269 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:51.270 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:51.270 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:00:51.270 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:00:51.270 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:00:51.271 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:00:51.272 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:00:51.272 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:51.273 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:51.273 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:00:51.273 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:51.273 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:00:51.273 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:00:51.273 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:51.273 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:00:51.274 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:00:51.274 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:00:51.274 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:00:51.274 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:00:51.274 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:00:51.274 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6.6352ms
2025-06-13 17:00:51.274 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:00:51.274 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:00:51.274 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:00:51.274 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:00:51.275 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:00:51.275 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 8.7047ms
2025-06-13 17:01:12.134 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - null null
2025-06-13 17:01:12.135 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 17:01:12.135 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 17:01:12.136 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:12.138 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:01:12.139 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:12.144 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 17:01:12.144 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:01:12.144 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:01:12.144 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:01:12.144 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:01:12.144 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:01:12.144 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 17:01:12.144 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 17:01:12.144 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 17:01:12.144 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 17:01:12.144 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:12.144 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:12.144 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 17:01:12.145 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:12.146 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:01:12.147 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)'
2025-06-13 17:01:12.149 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-13 17:01:12.161 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.MisKey (string), 7], [Property: ApprovalRequest.RequestContent (string), 8], [Property: ApprovalRequest.RequestTitle (string) Required, 9], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 10], [Property: ApprovalRequest.RespondedAt (DateTime?), 11], [Property: ApprovalRequest.Status (string) Required, 12] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: ApprovalStep.ActionDate (DateTime?), 14], [Property: ApprovalStep.ActionStatus (string), 15], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 16], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 17], [Property: ApprovalStep.ApproverName (string), 18], [Property: ApprovalStep.Comment (string), 19], [Property: ApprovalStep.Department (string), 20], [Property: ApprovalStep.IsFinalApprover (bool) Required, 21], [Property: ApprovalStep.Position (string), 22], [Property: ApprovalStep.Sequence (int) Required, 23], [Property: ApprovalStep.StepType (string), 24] }
            3 -> 13
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.MisKey (string), 7], [Property: ApprovalRequest.RequestContent (string), 8], [Property: ApprovalRequest.RequestTitle (string) Required, 9], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 10], [Property: ApprovalRequest.RespondedAt (DateTime?), 11], [Property: ApprovalRequest.Status (string) Required, 12] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: ApprovalStep.ActionDate (DateTime?), 14], [Property: ApprovalStep.ActionStatus (string), 15], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 16], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 17], [Property: ApprovalStep.ApproverName (string), 18], [Property: ApprovalStep.Comment (string), 19], [Property: ApprovalStep.Department (string), 20], [Property: ApprovalStep.IsFinalApprover (bool) Required, 21], [Property: ApprovalStep.Position (string), 22], [Property: ApprovalStep.Sequence (int) Required, 23], [Property: ApprovalStep.StepType (string), 24] }
            3 -> 13
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            ApprovalRequest entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                ApprovalRequest instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(ApprovalRequest);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (ApprovalRequest)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                            {
                                return 
                                {
                                    ApprovalRequest instance;
                                    instance = new ApprovalRequest();
                                    instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                    instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                    instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<MisKey>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<RequestContent>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<RequestTitle>k__BackingField = dataReader.GetString(9);
                                    instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(10);
                                    instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<Status>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(ApprovalRequest)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (ApprovalRequest)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                trackingQuery: True, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalStep instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalStep);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(13) ? default(object) : (object)dataReader.GetGuid(13) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalStep)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(13) ? default(Guid) : dataReader.GetGuid(13);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(14) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(14);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(16) ? default(Guid) : dataReader.GetGuid(16);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(21) ? default(bool) : dataReader.GetBoolean(21);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(23) ? default(int) : dataReader.GetInt32(23);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
            fixup: (namelessParameter{9}, namelessParameter{10}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                    entity: namelessParameter{9}, 
                    value: namelessParameter{10}, 
                    forMaterialization: True);
                return namelessParameter{10}.<ApprovalRequest>k__BackingField = namelessParameter{9};
            }, 
            trackingQuery: True);
        return IsTrue(resultCoordinator.ResultReady)
         ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 17:01:12.168 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:01:12.168 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:01:12.168 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:12.168 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:12.168 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:01:12.168 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:12.168 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:12.168 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 17:01:12.170 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 17:01:12.171 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.172 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.172 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.172 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.172 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.174 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.175 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.175 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.175 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.175 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.175 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.175 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.175 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.175 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.175 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:12.175 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:12.175 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-13 17:01:12.175 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:12.175 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:12.175 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:01:12.176 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:01:12.176 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:01:12.176 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:01:12.176 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:01:12.176 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:01:12.177 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 33.2207ms
2025-06-13 17:01:12.177 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:12.177 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:01:12.177 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:01:12.177 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:12.177 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:12.178 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - 200 null application/json; charset=utf-8 43.9083ms
2025-06-13 17:01:18.232 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:01:18.232 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:01:18.232 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:01:18.232 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:01:18.233 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:01:18.233 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:01:18.233 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:01:18.233 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:01:18.233 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:01:18.233 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:01:18.233 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:01:18.233 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:01:18.233 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:01:18.234 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:01:18.234 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:01:18.235 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:01:18.235 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:01:18.235 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:01:18.235 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:01:18.239 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:01:18.240 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:01:18.240 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:01:18.240 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:01:18.240 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:18.241 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:18.241 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:01:18.241 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:18.241 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:18.241 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:01:18.241 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:01:18.241 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:18.241 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:18.241 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:18.241 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:18.241 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:01:18.242 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:18.242 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:18.242 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:01:18.242 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:01:18.242 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:01:18.242 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:01:18.242 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:01:18.242 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:01:18.242 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.7813ms
2025-06-13 17:01:18.242 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:01:18.242 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:01:18.242 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:01:18.242 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:18.242 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:18.243 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 10.7426ms
2025-06-13 17:01:19.411 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - null null
2025-06-13 17:01:19.413 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 17:01:19.413 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 17:01:19.413 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:19.413 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:01:19.413 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:19.413 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 17:01:19.414 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:01:19.414 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:01:19.414 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:01:19.414 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:01:19.414 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:01:19.414 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 17:01:19.415 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 17:01:19.415 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 17:01:19.415 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 17:01:19.415 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:19.415 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:19.416 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 17:01:19.416 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:19.416 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:01:19.417 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:01:19.417 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:01:19.417 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:19.417 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:19.417 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:01:19.417 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:19.418 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:19.418 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 17:01:19.418 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 17:01:19.418 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.419 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.419 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.419 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.420 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.420 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.421 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.422 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.422 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.423 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.423 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.423 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.424 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.424 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.424 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:19.424 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:19.424 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 5ms reading results.
2025-06-13 17:01:19.424 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:19.425 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:19.425 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:01:19.425 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:01:19.425 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:01:19.425 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:01:19.425 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:01:19.425 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:01:19.426 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 11.4943ms
2025-06-13 17:01:19.426 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:19.426 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:01:19.426 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:01:19.426 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:19.427 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-13 17:01:19.428 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - 200 null application/json; charset=utf-8 16.6392ms
2025-06-13 17:01:20.875 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:01:20.875 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:01:20.876 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:01:20.876 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:01:20.876 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:01:20.877 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:01:20.877 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:01:20.877 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:01:20.877 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:01:20.877 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:01:20.878 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:01:20.878 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:01:20.878 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:01:20.878 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:01:20.878 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:01:20.878 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:01:20.879 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:01:20.879 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:01:20.879 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:01:20.879 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:01:20.880 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:01:20.881 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:01:20.881 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:01:20.881 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:20.881 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:20.882 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:01:20.882 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:20.883 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:20.883 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:01:20.883 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:01:20.884 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:20.885 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:20.885 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:20.885 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:20.885 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 17:01:20.885 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:20.886 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:20.886 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:01:20.887 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:01:20.887 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:01:20.887 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:01:20.887 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:01:20.888 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:01:20.888 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 10.4481ms
2025-06-13 17:01:20.888 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:01:20.888 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:01:20.889 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:01:20.889 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:20.889 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:20.889 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 14.7401ms
2025-06-13 17:01:24.694 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - null null
2025-06-13 17:01:24.696 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 17:01:24.696 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 17:01:24.696 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:24.697 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:01:24.697 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:24.697 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 17:01:24.697 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:01:24.697 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:01:24.697 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:01:24.697 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:01:24.697 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:01:24.697 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 17:01:24.699 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 17:01:24.699 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 17:01:24.700 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 17:01:24.700 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:24.700 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:24.700 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 17:01:24.701 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:24.702 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:01:24.703 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:01:24.703 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:01:24.703 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:24.703 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:24.703 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:01:24.703 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:24.703 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:24.704 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 17:01:24.705 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 17:01:24.706 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.706 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.706 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.706 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.706 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.706 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.707 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.707 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.707 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.708 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.708 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.708 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.708 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.708 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.708 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:24.708 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:24.709 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-13 17:01:24.709 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:24.710 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-13 17:01:24.711 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:01:24.711 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:01:24.711 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:01:24.711 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:01:24.711 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:01:24.711 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:01:24.712 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 14.5056ms
2025-06-13 17:01:24.712 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:24.712 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:01:24.712 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:01:24.712 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:24.712 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:24.712 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - 200 null application/json; charset=utf-8 18.636ms
2025-06-13 17:01:28.082 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:01:28.082 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:01:28.082 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:01:28.082 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:01:28.083 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:01:28.083 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:01:28.083 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:01:28.083 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:01:28.083 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:01:28.083 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:01:28.083 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:01:28.083 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:01:28.083 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:01:28.083 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:01:28.083 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:01:28.083 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:01:28.083 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:01:28.083 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:01:28.083 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:01:28.084 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:01:28.085 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:01:28.085 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:01:28.085 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:01:28.085 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:28.085 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:28.085 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:01:28.085 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:28.085 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:28.086 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:01:28.086 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:01:28.086 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.086 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.086 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.086 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:28.086 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:01:28.086 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:28.086 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:28.087 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:01:28.087 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:01:28.087 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:01:28.087 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:01:28.087 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:01:28.087 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:01:28.088 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.5474ms
2025-06-13 17:01:28.088 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:01:28.088 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:01:28.088 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:01:28.088 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:28.088 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:28.088 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 5.9798ms
2025-06-13 17:01:28.828 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - null null
2025-06-13 17:01:28.828 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 17:01:28.829 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 17:01:28.829 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:28.829 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:01:28.830 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:28.830 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 17:01:28.830 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:01:28.830 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:01:28.830 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:01:28.830 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:01:28.830 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:01:28.830 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 17:01:28.831 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 17:01:28.831 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 17:01:28.831 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 17:01:28.831 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:28.831 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:28.831 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 17:01:28.831 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:28.831 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:01:28.832 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:01:28.832 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:01:28.832 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:28.832 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:28.832 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:01:28.832 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:28.832 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:28.832 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 17:01:28.834 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 17:01:28.834 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.835 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.835 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.835 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.835 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.836 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.836 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.836 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.836 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.837 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.837 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.837 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.838 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.839 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.839 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:28.839 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:28.839 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-13 17:01:28.839 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:28.840 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:28.840 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:01:28.840 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:01:28.840 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:01:28.840 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:01:28.840 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:01:28.840 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:01:28.841 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 10.4218ms
2025-06-13 17:01:28.841 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:28.841 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:01:28.841 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:01:28.841 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:28.841 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:28.841 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - 200 null application/json; charset=utf-8 13.2692ms
2025-06-13 17:01:30.384 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:01:30.384 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:01:30.385 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:01:30.387 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:01:30.388 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:01:30.388 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:01:30.388 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:01:30.388 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:01:30.388 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:01:30.388 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:01:30.389 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:01:30.389 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:01:30.389 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:01:30.389 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:01:30.390 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:01:30.390 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:01:30.390 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:01:30.390 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:01:30.390 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:01:30.391 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:01:30.391 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:01:30.392 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:01:30.392 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:01:30.392 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:30.393 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:30.393 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:01:30.393 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:30.393 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:30.394 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:01:30.394 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:01:30.394 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:30.395 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:30.395 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:30.396 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:30.396 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 17:01:30.396 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:30.396 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:30.396 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:01:30.397 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:01:30.397 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:01:30.397 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:01:30.397 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:01:30.397 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:01:30.397 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.2111ms
2025-06-13 17:01:30.397 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:01:30.397 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:01:30.397 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:01:30.397 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:30.398 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:30.398 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 13.7607ms
2025-06-13 17:01:31.495 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - null null
2025-06-13 17:01:31.496 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 17:01:31.496 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 17:01:31.497 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:31.497 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:01:31.497 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:31.498 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 17:01:31.498 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:01:31.499 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:01:31.499 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:01:31.499 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:01:31.500 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:01:31.500 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 17:01:31.500 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 17:01:31.500 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 17:01:31.501 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 17:01:31.501 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:31.501 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:31.501 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 17:01:31.501 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 17:01:31.502 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:01:31.504 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:01:31.504 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:01:31.504 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:31.504 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:31.505 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:01:31.505 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:31.505 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:01:31.506 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 17:01:31.506 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 17:01:31.506 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.506 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:01:31.508 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:31.508 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 17:01:31.508 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:01:31.508 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:31.509 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:01:31.509 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:01:31.509 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:01:31.509 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:01:31.509 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:01:31.509 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:01:31.510 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 9.5327ms
2025-06-13 17:01:31.510 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 17:01:31.510 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:01:31.510 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:01:31.511 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:01:31.511 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:01:31.512 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - 200 null application/json; charset=utf-8 16.3514ms
2025-06-13 17:02:02.469 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:02:02.471 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:02:02.472 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:02:02.472 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:02:02.474 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:02:02.478 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:02:02.489 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:02:02.512 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:02:02.513 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:02:02.513 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:02:02.513 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:02:02.513 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:02:02.513 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:02:02.518 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:02:02.521 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:02:02.526 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:02:02.526 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:02:02.526 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:02:02.528 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:02:02.528 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:02:02.529 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:02:02.530 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:02:02.531 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:02:02.531 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:02:02.531 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:02:02.531 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:02:02.531 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:02:02.531 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:02:02.532 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:02:02.532 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:02:02.532 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:02:02.533 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:02:02.533 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:02:02.533 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:02:02.533 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 17:02:02.533 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:02:02.534 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:02:02.534 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:02:02.534 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:02:02.534 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:02:02.534 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:02:02.534 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:02:02.534 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:02:02.535 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 21.324ms
2025-06-13 17:02:02.535 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:02:02.535 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:02:02.536 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:02:02.536 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:02:02.536 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:02:02.536 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 69.0004ms
2025-06-13 17:02:05.200 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/be21de64-00f2-4b98-baa5-fd302db5f4e2 - null null
2025-06-13 17:02:05.200 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/be21de64-00f2-4b98-baa5-fd302db5f4e2'
2025-06-13 17:02:05.200 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/be21de64-00f2-4b98-baa5-fd302db5f4e2'
2025-06-13 17:02:05.200 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 17:02:05.200 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:02:05.201 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 17:02:05.208 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:02:05.208 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:02:05.208 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:02:05.208 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:02:05.208 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:02:05.208 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:02:05.209 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:02:05.209 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:02:05.209 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 17:02:05.209 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-13 17:02:05.209 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 17:02:05.209 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 17:02:05.209 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 17:02:05.209 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-13 17:02:05.212 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:02:05.213 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-13 17:02:05.214 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-13 17:02:05.214 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-13 17:02:05.228 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-13 17:02:05.238 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.MisKey (string), 7], [Property: ApprovalRequest.RequestContent (string), 8], [Property: ApprovalRequest.RequestTitle (string) Required, 9], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 10], [Property: ApprovalRequest.RespondedAt (DateTime?), 11], [Property: ApprovalRequest.Status (string) Required, 12] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: ApprovalStep.ActionDate (DateTime?), 14], [Property: ApprovalStep.ActionStatus (string), 15], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 16], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 17], [Property: ApprovalStep.ApproverName (string), 18], [Property: ApprovalStep.Comment (string), 19], [Property: ApprovalStep.Department (string), 20], [Property: ApprovalStep.IsFinalApprover (bool) Required, 21], [Property: ApprovalStep.Position (string), 22], [Property: ApprovalStep.Sequence (int) Required, 23], [Property: ApprovalStep.StepType (string), 24] }
                3 -> 13
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 25], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 26], [Property: ApprovalAttachment.FileName (string) Required, 27], [Property: ApprovalAttachment.FilePath (string) Required, 28], [Property: ApprovalAttachment.FileSize (long?), 29], [Property: ApprovalAttachment.FileType (string), 30], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 31], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 32] }
                5 -> 25
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.MisKey (string), 7], [Property: ApprovalRequest.RequestContent (string), 8], [Property: ApprovalRequest.RequestTitle (string) Required, 9], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 10], [Property: ApprovalRequest.RespondedAt (DateTime?), 11], [Property: ApprovalRequest.Status (string) Required, 12] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: ApprovalStep.ActionDate (DateTime?), 14], [Property: ApprovalStep.ActionStatus (string), 15], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 16], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 17], [Property: ApprovalStep.ApproverName (string), 18], [Property: ApprovalStep.Comment (string), 19], [Property: ApprovalStep.Department (string), 20], [Property: ApprovalStep.IsFinalApprover (bool) Required, 21], [Property: ApprovalStep.Position (string), 22], [Property: ApprovalStep.Sequence (int) Required, 23], [Property: ApprovalStep.StepType (string), 24] }
                3 -> 13
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 25], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 26], [Property: ApprovalAttachment.FileName (string) Required, 27], [Property: ApprovalAttachment.FilePath (string) Required, 28], [Property: ApprovalAttachment.FileSize (long?), 29], [Property: ApprovalAttachment.FileType (string), 30], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 31], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 32] }
                5 -> 25
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(9);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(10);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                        instance.<Status>k__BackingField = dataReader.GetString(12);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(13) ? default(object) : (object)dataReader.GetGuid(13) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(13) ? default(Guid) : dataReader.GetGuid(13);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(14) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(14);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(16) ? default(Guid) : dataReader.GetGuid(16);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(21) ? default(bool) : dataReader.GetBoolean(21);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(23) ? default(int) : dataReader.GetInt32(23);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(13) ? default(Guid?) : (Guid?)dataReader.GetGuid(13) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(25) ? default(Guid?) : (Guid?)dataReader.GetGuid(25) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(25) ? default(object) : (object)dataReader.GetGuid(25) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(25) ? default(Guid) : dataReader.GetGuid(25);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(26) ? default(Guid) : dataReader.GetGuid(26);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(28) ? default(string) : dataReader.GetString(28);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(29) ? default(long?) : (long?)dataReader.GetInt64(29);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(31) ? default(DateTime) : dataReader.GetDateTime(31);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 17:02:05.242 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:02:05.242 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:02:05.242 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:02:05.242 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:02:05.243 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:02:05.243 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:02:05.243 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:02:05.243 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 17:02:05.244 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 17:02:05.245 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:02:05.247 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:02:05.248 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:02:05.248 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:02:05.248 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 17:02:05.248 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:02:05.248 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:02:05.248 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:02:05.248 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:02:05.248 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:02:05.248 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:02:05.248 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:02:05.248 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 17:02:05.249 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 40.2136ms
2025-06-13 17:02:05.249 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 17:02:05.249 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:02:05.249 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:02:05.249 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:02:05.249 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:02:05.249 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/be21de64-00f2-4b98-baa5-fd302db5f4e2 - 200 null application/json; charset=utf-8 49.3797ms
2025-06-13 17:02:09.685 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:02:09.686 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:02:09.687 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:02:09.687 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:02:09.688 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:02:09.688 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:02:09.688 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:02:09.689 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:02:09.689 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:02:09.689 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:02:09.689 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:02:09.689 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:02:09.689 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:02:09.689 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:02:09.690 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:02:09.690 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:02:09.690 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:02:09.690 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:02:09.690 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:02:09.690 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:02:09.690 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:02:09.691 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:02:09.691 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:02:09.691 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:02:09.691 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:02:09.691 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:02:09.691 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:02:09.692 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:02:09.692 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:02:09.692 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:02:09.692 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:02:09.693 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:02:09.693 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:02:09.693 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:02:09.693 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:02:09.693 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:02:09.693 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:02:09.693 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:02:09.693 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:02:09.693 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:02:09.693 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:02:09.693 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:02:09.693 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:02:09.694 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.4739ms
2025-06-13 17:02:09.694 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:02:09.694 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" completed keep alive response.
2025-06-13 17:02:09.694 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:02:09.694 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:02:09.694 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:02:09.694 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 9.6022ms
2025-06-13 17:02:49.268 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" received FIN.
2025-06-13 17:02:49.273 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 17:02:49.277 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" disconnecting.
2025-06-13 17:02:49.280 +09:00 [DBG] Connection id "0HNDAA1G1B3CV" stopped.
2025-06-13 17:04:56.097 +09:00 [DBG] Connection id "0HNDAA1G1B3D0" accepted.
2025-06-13 17:04:56.097 +09:00 [DBG] Connection id "0HNDAA1G1B3D0" started.
2025-06-13 17:04:56.123 +09:00 [DBG] Connection 0HNDAA1G1B3D0 established using the following protocol: "Tls12"
2025-06-13 17:04:56.179 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-13 17:04:56.180 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-13 17:04:56.180 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-13 17:04:56.180 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 17:04:56.180 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:04:56.180 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 17:04:56.184 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequest) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:04:56.185 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:04:56.185 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:04:56.185 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:04:56.185 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:04:56.185 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:04:56.185 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:04:56.185 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:04:56.186 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequest' ...
2025-06-13 17:04:56.186 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequest' using the name '' in request data ...
2025-06-13 17:04:56.187 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-13 17:04:56.194 +09:00 [DBG] Connection id "0HNDAA1G1B3D0", Request id "0HNDAA1G1B3D0:00000001": started reading request body.
2025-06-13 17:04:56.195 +09:00 [DBG] Connection id "0HNDAA1G1B3D0", Request id "0HNDAA1G1B3D0:00000001": done reading request body.
2025-06-13 17:04:56.208 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequest'
2025-06-13 17:04:56.208 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 17:04:56.208 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 17:04:56.208 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequest' ...
2025-06-13 17:04:56.212 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 17:04:56.213 +09:00 [INF] Creating a new approval request.
2025-06-13 17:04:56.214 +09:00 [DBG] Approval Request Details: {"ApprovalId":"61cb69c5-a244-4a1e-a6a3-cdaf711cdbe8","RequestTitle":"이제 진짜 Professional Interview Bible 완성!","RequestContent":"🎯 이제 진짜 Professional Interview Bible 완성!\r\n\t•\t📌 전체 100 패턴 학습 완료\r\n\t•\t📌 모든 패턴에 실전 인터뷰 변형 예시 확보\r\n\t•\t📌 모든 패턴 문법/용법까지 마스터\r\n\r\n⸻\r\n\r\n🚀 다음 단계\r\n\r\n이제부터 본격 실전 인터뷰 시뮬레이션 훈련 가능합니다:\r\n\t•\t👉 실제 예상 질문 생성\r\n\t•\t👉 각 질문에 대해 여러 패턴으로 답변 확장\r\n\t•\t👉 AI 기반 인터뷰 반복 훈련 가능","ApplicantEmployeeNumber":"EMP0006","ApplicantName":"User 6","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-13T08:04:56.0322220Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0002","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 2","Position":"Team Leader","Department":"HR","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0004","Sequence":2,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 4","Position":"Staff","Department":"HR","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequest"}
2025-06-13 17:04:56.217 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:04:56.230 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.233 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.235 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.235 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.235 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.237 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-13 17:04:56.238 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-13 17:04:56.245 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-13 17:04:56.278 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:04:56.278 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:04:56.278 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:04:56.278 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:04:56.279 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-13 17:04:56.281 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-13 17:04:56.282 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:04:56.282 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:04:56.282 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:04:56.282 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (Size = 245), @p9='?' (Size = 38), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-06-13 17:04:56.283 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (Size = 245), @p9='?' (Size = 38), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-06-13 17:04:56.284 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:04:56.284 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 17:04:56.284 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:04:56.285 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:04:56.285 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:04:56.285 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 11), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 17:04:56.285 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 11), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 17:04:56.285 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:04:56.286 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:04:56.286 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:04:56.286 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:04:56.286 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:04:56.286 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 17:04:56.286 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 17:04:56.286 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:04:56.286 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:04:56.287 +09:00 [DBG] Committing transaction.
2025-06-13 17:04:56.288 +09:00 [DBG] Committed transaction.
2025-06-13 17:04:56.289 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:04:56.289 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:04:56.289 +09:00 [DBG] Disposing transaction.
2025-06-13 17:04:56.292 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.293 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.293 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.293 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 3 entities written to the database.
2025-06-13 17:04:56.293 +09:00 [INF] Approval request created successfully with ID: "61cb69c5-a244-4a1e-a6a3-cdaf711cdbe8"
2025-06-13 17:04:56.293 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:04:56.294 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:04:56.294 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:04:56.294 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:04:56.294 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:04:56.294 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 17:04:56.302 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] for address (approvalId=[61cb69c5-a244-4a1e-a6a3-cdaf711cdbe8],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-13 17:04:56.303 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) resulting in /api/ApprovalRequest/61cb69c5-a244-4a1e-a6a3-cdaf711cdbe8 and 
2025-06-13 17:04:56.303 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] with result /api/ApprovalRequest/61cb69c5-a244-4a1e-a6a3-cdaf711cdbe8
2025-06-13 17:04:56.304 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API) in 118.6794ms
2025-06-13 17:04:56.304 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 17:04:56.304 +09:00 [DBG] Connection id "0HNDAA1G1B3D0" completed keep alive response.
2025-06-13 17:04:56.304 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:04:56.304 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:04:56.304 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:04:56.304 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 124.5752ms
2025-06-13 17:04:56.319 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:04:56.319 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:04:56.319 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:04:56.319 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:04:56.319 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:04:56.319 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:04:56.319 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:04:56.319 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:04:56.319 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:04:56.319 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:04:56.319 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:04:56.320 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:04:56.320 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:04:56.320 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:04:56.320 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:04:56.320 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:04:56.320 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:04:56.320 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:04:56.320 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:04:56.320 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:04:56.320 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:04:56.321 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:04:56.321 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:04:56.321 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:04:56.321 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:04:56.321 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:04:56.321 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:04:56.321 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:04:56.321 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:04:56.321 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:04:56.322 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.322 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.322 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.322 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.322 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.322 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:56.322 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:04:56.322 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:04:56.323 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:04:56.323 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:04:56.323 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:04:56.323 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:04:56.323 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:04:56.323 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:04:56.323 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:04:56.323 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:04:56.324 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 3.9974ms
2025-06-13 17:04:56.324 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:04:56.324 +09:00 [DBG] Connection id "0HNDAA1G1B3D0" completed keep alive response.
2025-06-13 17:04:56.324 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:04:56.324 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:04:56.324 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:04:56.324 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 5.0277ms
2025-06-13 17:04:58.286 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/61cb69c5-a244-4a1e-a6a3-cdaf711cdbe8 - null null
2025-06-13 17:04:58.287 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/61cb69c5-a244-4a1e-a6a3-cdaf711cdbe8'
2025-06-13 17:04:58.287 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/61cb69c5-a244-4a1e-a6a3-cdaf711cdbe8'
2025-06-13 17:04:58.287 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 17:04:58.287 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:04:58.287 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 17:04:58.287 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:04:58.287 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:04:58.287 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:04:58.287 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:04:58.287 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:04:58.287 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:04:58.287 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:04:58.287 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:04:58.287 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 17:04:58.288 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-13 17:04:58.288 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 17:04:58.288 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 17:04:58.288 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 17:04:58.288 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-13 17:04:58.288 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:04:58.288 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:04:58.288 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:04:58.288 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:04:58.288 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:04:58.289 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:04:58.289 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:04:58.289 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:04:58.289 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 17:04:58.289 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 17:04:58.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:58.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:58.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:04:58.289 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:04:58.289 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:04:58.289 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:04:58.289 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:04:58.290 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:04:58.290 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:04:58.290 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:04:58.290 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:04:58.290 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:04:58.290 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 17:04:58.290 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 2.6125ms
2025-06-13 17:04:58.290 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 17:04:58.290 +09:00 [DBG] Connection id "0HNDAA1G1B3D0" completed keep alive response.
2025-06-13 17:04:58.290 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:04:58.290 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:04:58.290 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:04:58.290 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/61cb69c5-a244-4a1e-a6a3-cdaf711cdbe8 - 200 null application/json; charset=utf-8 3.7565ms
2025-06-13 17:05:58.262 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:05:58.262 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:05:58.263 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:05:58.263 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:05:58.263 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:05:58.263 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:05:58.264 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:05:58.264 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:05:58.264 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:05:58.264 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:05:58.264 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:05:58.264 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:05:58.265 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:05:58.271 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:05:58.271 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:05:58.272 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:05:58.272 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:05:58.272 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:05:58.272 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:05:58.272 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:05:58.274 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:05:58.277 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:05:58.278 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-13 17:05:58.278 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:05:58.279 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:05:58.279 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:05:58.279 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:05:58.279 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:05:58.280 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:05:58.280 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:05:58.280 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:05:58.281 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:05:58.282 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:05:58.282 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:05:58.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:05:58.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:05:58.283 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:05:58.283 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 17:05:58.283 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:05:58.283 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:05:58.284 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:05:58.284 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:05:58.284 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:05:58.284 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:05:58.284 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:05:58.284 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:05:58.286 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 20.913ms
2025-06-13 17:05:58.286 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:05:58.286 +09:00 [DBG] Connection id "0HNDAA1G1B3D0" completed keep alive response.
2025-06-13 17:05:58.286 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:05:58.286 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:05:58.286 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:05:58.287 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 24.785ms
2025-06-13 17:06:09.172 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:06:09.175 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:06:09.175 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:06:09.176 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:06:09.177 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:06:09.177 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:06:09.178 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:06:09.178 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:06:09.178 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:06:09.179 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:06:09.179 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:06:09.179 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:06:09.179 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:06:09.179 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:06:09.180 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:06:09.180 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:06:09.180 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:06:09.180 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:06:09.181 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:06:09.181 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:06:09.182 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:06:09.183 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:06:09.183 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:06:09.183 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:06:09.184 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:06:09.184 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:06:09.184 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:06:09.184 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:06:09.184 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:06:09.185 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:06:09.185 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:06:09.185 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:06:09.185 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:06:09.185 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:06:09.185 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:06:09.186 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:06:09.186 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:06:09.186 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:06:09.186 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:06:09.186 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:06:09.186 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:06:09.186 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:06:09.186 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:06:09.186 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:06:09.186 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:06:09.186 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:06:09.187 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.7559ms
2025-06-13 17:06:09.187 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:06:09.187 +09:00 [DBG] Connection id "0HNDAA1G1B3D0" completed keep alive response.
2025-06-13 17:06:09.187 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:06:09.187 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:06:09.187 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:06:09.187 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 15.3117ms
2025-06-13 17:07:11.099 +09:00 [DBG] Connection id "0HNDAA1G1B3D0" received FIN.
2025-06-13 17:07:11.103 +09:00 [DBG] Connection id "0HNDAA1G1B3D0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 17:07:11.105 +09:00 [DBG] Connection id "0HNDAA1G1B3D0" disconnecting.
2025-06-13 17:07:11.105 +09:00 [DBG] Connection id "0HNDAA1G1B3D0" stopped.
2025-06-13 17:07:39.890 +09:00 [DBG] Connection id "0HNDAA1G1B3D1" accepted.
2025-06-13 17:07:39.890 +09:00 [DBG] Connection id "0HNDAA1G1B3D1" started.
2025-06-13 17:07:39.917 +09:00 [DBG] Connection 0HNDAA1G1B3D1 established using the following protocol: "Tls12"
2025-06-13 17:07:39.920 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:07:39.921 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:07:39.921 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:07:39.921 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:07:39.921 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:07:39.922 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:07:39.922 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:07:39.922 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:07:39.922 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:07:39.922 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:07:39.922 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:07:39.922 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:07:39.922 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:07:39.923 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:07:39.923 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:07:39.923 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:07:39.923 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:07:39.923 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:07:39.923 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:07:39.924 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:07:39.926 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:07:39.927 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:07:39.927 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:07:39.927 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:07:39.927 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:07:39.928 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:07:39.928 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:07:39.928 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:07:39.928 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:07:39.928 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:07:39.929 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:07:39.930 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:07:39.930 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:07:39.930 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:07:39.930 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:07:39.930 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:07:39.931 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:07:39.931 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 17:07:39.931 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:07:39.931 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:07:39.931 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:07:39.931 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:07:39.931 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:07:39.931 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:07:39.931 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:07:39.931 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:07:39.932 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 9.3367ms
2025-06-13 17:07:39.932 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:07:39.932 +09:00 [DBG] Connection id "0HNDAA1G1B3D1" completed keep alive response.
2025-06-13 17:07:39.932 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:07:39.932 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:07:39.932 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:07:39.932 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 11.6366ms
2025-06-13 17:08:54.897 +09:00 [DBG] Connection id "0HNDAA1G1B3D1" received FIN.
2025-06-13 17:08:54.907 +09:00 [DBG] Connection id "0HNDAA1G1B3D1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 17:08:54.911 +09:00 [DBG] Connection id "0HNDAA1G1B3D1" disconnecting.
2025-06-13 17:08:54.915 +09:00 [DBG] Connection id "0HNDAA1G1B3D1" stopped.
2025-06-13 17:18:46.274 +09:00 [INF] Application is shutting down...
2025-06-13 17:18:46.278 +09:00 [DBG] Hosting stopping
2025-06-13 17:18:46.299 +09:00 [DBG] Hosting stopped
2025-06-13 17:19:06.605 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-13 17:19:06.732 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-13 17:19:07.019 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:19:07.024 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:19:07.030 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-13 17:19:07.033 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:19:07.039 +09:00 [DBG] An error occurred using the connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:19:07.040 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:19:07.043 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:19:07.043 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:19:07.044 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:19:07.044 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:19:07.048 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.050 +09:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-13 17:19:07.052 +09:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-06-13 17:19:07.052 +09:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-06-13 17:19:07.055 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-06-13 17:19:07.071 +09:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-06-13 17:19:07.073 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.074 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-13 17:19:07.128 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:19:07.128 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.128 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-13 17:19:07.130 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-13 17:19:07.130 +09:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-13 17:19:07.130 +09:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-13 17:19:07.130 +09:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-13 17:19:07.131 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ApprovalRequests" (
    "ApprovalId" TEXT NOT NULL CONSTRAINT "PK_ApprovalRequests" PRIMARY KEY,
    "RequestTitle" TEXT NOT NULL,
    "RequestContent" TEXT NULL,
    "ApplicantEmployeeNumber" TEXT NOT NULL,
    "ApplicantName" TEXT NOT NULL,
    "ApplicantPosition" TEXT NULL,
    "ApplicantDepartment" TEXT NULL,
    "Status" TEXT NOT NULL,
    "RequestedAt" TEXT NOT NULL,
    "RespondedAt" TEXT NULL,
    "ApproverComment" TEXT NULL,
    "ApprovalType" TEXT NULL,
    "CurrentStep" INTEGER NOT NULL,
    "CurrentApproverEmployeeNumber" TEXT NULL,
    "MisKey" TEXT NULL
);
2025-06-13 17:19:07.131 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ApprovalRequests" (
    "ApprovalId" TEXT NOT NULL CONSTRAINT "PK_ApprovalRequests" PRIMARY KEY,
    "RequestTitle" TEXT NOT NULL,
    "RequestContent" TEXT NULL,
    "ApplicantEmployeeNumber" TEXT NOT NULL,
    "ApplicantName" TEXT NOT NULL,
    "ApplicantPosition" TEXT NULL,
    "ApplicantDepartment" TEXT NULL,
    "Status" TEXT NOT NULL,
    "RequestedAt" TEXT NOT NULL,
    "RespondedAt" TEXT NULL,
    "ApproverComment" TEXT NULL,
    "ApprovalType" TEXT NULL,
    "CurrentStep" INTEGER NOT NULL,
    "CurrentApproverEmployeeNumber" TEXT NULL,
    "MisKey" TEXT NULL
);
2025-06-13 17:19:07.131 +09:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-13 17:19:07.131 +09:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-13 17:19:07.131 +09:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-13 17:19:07.131 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ApprovalTemplates" (
    "TemplateId" TEXT NOT NULL CONSTRAINT "PK_ApprovalTemplates" PRIMARY KEY,
    "TemplateName" TEXT NOT NULL,
    "TemplateContent" TEXT NULL,
    "CreatedByEmployeeNumber" TEXT NOT NULL,
    "CreatedAt" TEXT NOT NULL
);
2025-06-13 17:19:07.131 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ApprovalTemplates" (
    "TemplateId" TEXT NOT NULL CONSTRAINT "PK_ApprovalTemplates" PRIMARY KEY,
    "TemplateName" TEXT NOT NULL,
    "TemplateContent" TEXT NULL,
    "CreatedByEmployeeNumber" TEXT NOT NULL,
    "CreatedAt" TEXT NOT NULL
);
2025-06-13 17:19:07.131 +09:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-13 17:19:07.132 +09:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-13 17:19:07.132 +09:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-13 17:19:07.132 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ApprovalAttachments" (
    "AttachmentId" TEXT NOT NULL CONSTRAINT "PK_ApprovalAttachments" PRIMARY KEY,
    "ApprovalId" TEXT NOT NULL,
    "FileName" TEXT NOT NULL,
    "FilePath" TEXT NOT NULL,
    "FileSize" INTEGER NULL,
    "FileType" TEXT NULL,
    "UploadedAt" TEXT NOT NULL,
    "UploadedByEmployeeNumber" TEXT NOT NULL,
    CONSTRAINT "FK_ApprovalAttachments_ApprovalRequests_ApprovalId" FOREIGN KEY ("ApprovalId") REFERENCES "ApprovalRequests" ("ApprovalId") ON DELETE CASCADE
);
2025-06-13 17:19:07.132 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ApprovalAttachments" (
    "AttachmentId" TEXT NOT NULL CONSTRAINT "PK_ApprovalAttachments" PRIMARY KEY,
    "ApprovalId" TEXT NOT NULL,
    "FileName" TEXT NOT NULL,
    "FilePath" TEXT NOT NULL,
    "FileSize" INTEGER NULL,
    "FileType" TEXT NULL,
    "UploadedAt" TEXT NOT NULL,
    "UploadedByEmployeeNumber" TEXT NOT NULL,
    CONSTRAINT "FK_ApprovalAttachments_ApprovalRequests_ApprovalId" FOREIGN KEY ("ApprovalId") REFERENCES "ApprovalRequests" ("ApprovalId") ON DELETE CASCADE
);
2025-06-13 17:19:07.132 +09:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-13 17:19:07.132 +09:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-13 17:19:07.132 +09:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-13 17:19:07.132 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ApprovalSteps" (
    "StepId" TEXT NOT NULL CONSTRAINT "PK_ApprovalSteps" PRIMARY KEY,
    "ApprovalId" TEXT NOT NULL,
    "ApproverEmployeeNumber" TEXT NOT NULL,
    "Sequence" INTEGER NOT NULL,
    "IsFinalApprover" INTEGER NOT NULL,
    "ActionStatus" TEXT NULL,
    "ActionDate" TEXT NULL,
    "Comment" TEXT NULL,
    "ApproverName" TEXT NULL,
    "Position" TEXT NULL,
    "Department" TEXT NULL,
    "StepType" TEXT NULL,
    CONSTRAINT "FK_ApprovalSteps_ApprovalRequests_ApprovalId" FOREIGN KEY ("ApprovalId") REFERENCES "ApprovalRequests" ("ApprovalId") ON DELETE CASCADE
);
2025-06-13 17:19:07.132 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ApprovalSteps" (
    "StepId" TEXT NOT NULL CONSTRAINT "PK_ApprovalSteps" PRIMARY KEY,
    "ApprovalId" TEXT NOT NULL,
    "ApproverEmployeeNumber" TEXT NOT NULL,
    "Sequence" INTEGER NOT NULL,
    "IsFinalApprover" INTEGER NOT NULL,
    "ActionStatus" TEXT NULL,
    "ActionDate" TEXT NULL,
    "Comment" TEXT NULL,
    "ApproverName" TEXT NULL,
    "Position" TEXT NULL,
    "Department" TEXT NULL,
    "StepType" TEXT NULL,
    CONSTRAINT "FK_ApprovalSteps_ApprovalRequests_ApprovalId" FOREIGN KEY ("ApprovalId") REFERENCES "ApprovalRequests" ("ApprovalId") ON DELETE CASCADE
);
2025-06-13 17:19:07.132 +09:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-13 17:19:07.132 +09:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-13 17:19:07.132 +09:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-13 17:19:07.132 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_ApprovalAttachments_ApprovalId" ON "ApprovalAttachments" ("ApprovalId");
2025-06-13 17:19:07.132 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_ApprovalAttachments_ApprovalId" ON "ApprovalAttachments" ("ApprovalId");
2025-06-13 17:19:07.133 +09:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-13 17:19:07.133 +09:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-13 17:19:07.133 +09:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-13 17:19:07.133 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_ApprovalSteps_ApprovalId" ON "ApprovalSteps" ("ApprovalId");
2025-06-13 17:19:07.133 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_ApprovalSteps_ApprovalId" ON "ApprovalSteps" ("ApprovalId");
2025-06-13 17:19:07.134 +09:00 [DBG] Committing transaction.
2025-06-13 17:19:07.135 +09:00 [DBG] Committed transaction.
2025-06-13 17:19:07.135 +09:00 [DBG] Disposing transaction.
2025-06-13 17:19:07.135 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.135 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:19:07.138 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:19:07.138 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:19:07.138 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:19:07.139 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.140 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:19:07.140 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:19:07.140 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 17:19:07.141 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 17:19:07.141 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 17:19:07.141 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:19:07.141 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.141 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 17:19:07.142 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 17:19:07.142 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.143 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:19:07.162 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-13 17:19:07.237 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 17:19:07.248 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:19:07.249 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.249 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:19:07.249 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.249 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.249 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 17:19:07.250 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 17:19:07.252 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.252 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 17:19:07.253 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.253 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:19:07.295 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.304 +09:00 [DBG] The navigation 'ApprovalAttachment.ApprovalRequest' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.310 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.311 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.311 +09:00 [DBG] The navigation 'ApprovalAttachment.ApprovalRequest' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.311 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.321 +09:00 [DBG] The navigation 'ApprovalStep.ApprovalRequest' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.321 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.322 +09:00 [DBG] The navigation 'ApprovalStep.ApprovalRequest' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.322 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.326 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalTemplate' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.327 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-13 17:19:07.328 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-13 17:19:07.339 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-13 17:19:07.363 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:19:07.363 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.363 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-13 17:19:07.364 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-13 17:19:07.364 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:19:07.364 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.365 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.366 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 5), @p2='?' (Size = 7), @p3='?' (Size = 11), @p4='?' (Size = 5), @p5='?' (Size = 2), @p6='?', @p7='?', @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 9), @p11='?' (Size = 5), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-13 17:19:07.367 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 5), @p2='?' (Size = 7), @p3='?' (Size = 11), @p4='?' (Size = 5), @p5='?' (Size = 2), @p6='?', @p7='?', @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 9), @p11='?' (Size = 5), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-13 17:19:07.368 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.368 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 17:19:07.369 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:19:07.369 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.369 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.369 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 9), @p2='?' (Size = 7), @p3='?' (Size = 12), @p4='?' (Size = 12), @p5='?' (Size = 2), @p6='?', @p7='?', @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 14), @p11='?' (Size = 8), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-13 17:19:07.369 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 9), @p2='?' (Size = 7), @p3='?' (Size = 12), @p4='?' (Size = 12), @p5='?' (Size = 2), @p6='?', @p7='?', @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 14), @p11='?' (Size = 8), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-13 17:19:07.369 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.369 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:19:07.369 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:19:07.369 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.369 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.370 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 5), @p3='?' (Size = 16), @p4='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalTemplates" ("TemplateId", "CreatedAt", "CreatedByEmployeeNumber", "TemplateContent", "TemplateName")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 17:19:07.370 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 5), @p3='?' (Size = 16), @p4='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalTemplates" ("TemplateId", "CreatedAt", "CreatedByEmployeeNumber", "TemplateContent", "TemplateName")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 17:19:07.370 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.370 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:19:07.370 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:19:07.370 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.370 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.370 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 9), @p3='?' (Size = 22), @p4='?' (DbType = Int64), @p5='?' (Size = 71), @p6='?' (DbType = DateTime), @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalAttachments" ("AttachmentId", "ApprovalId", "FileName", "FilePath", "FileSize", "FileType", "UploadedAt", "UploadedByEmployeeNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 17:19:07.370 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 9), @p3='?' (Size = 22), @p4='?' (DbType = Int64), @p5='?' (Size = 71), @p6='?' (DbType = DateTime), @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalAttachments" ("AttachmentId", "ApprovalId", "FileName", "FilePath", "FileSize", "FileType", "UploadedAt", "UploadedByEmployeeNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 17:19:07.370 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.370 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:19:07.370 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:19:07.370 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.370 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.370 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 9), @p3='?' (Size = 22), @p4='?' (DbType = Int64), @p5='?' (Size = 15), @p6='?' (DbType = DateTime), @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalAttachments" ("AttachmentId", "ApprovalId", "FileName", "FilePath", "FileSize", "FileType", "UploadedAt", "UploadedByEmployeeNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 17:19:07.371 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 9), @p3='?' (Size = 22), @p4='?' (DbType = Int64), @p5='?' (Size = 15), @p6='?' (DbType = DateTime), @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalAttachments" ("AttachmentId", "ApprovalId", "FileName", "FilePath", "FileSize", "FileType", "UploadedAt", "UploadedByEmployeeNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 17:19:07.371 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.371 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:19:07.371 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:19:07.371 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.371 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.371 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Boolean), @p9='?', @p10='?' (DbType = Int32), @p11='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 17:19:07.371 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Boolean), @p9='?', @p10='?' (DbType = Int32), @p11='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 17:19:07.371 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.371 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:19:07.371 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:19:07.372 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.372 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:07.372 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Boolean), @p9='?', @p10='?' (DbType = Int32), @p11='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 17:19:07.372 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Boolean), @p9='?', @p10='?' (DbType = Int32), @p11='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 17:19:07.372 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.372 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:19:07.373 +09:00 [DBG] Committing transaction.
2025-06-13 17:19:07.374 +09:00 [DBG] Committed transaction.
2025-06-13 17:19:07.375 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:07.375 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:19:07.376 +09:00 [DBG] Disposing transaction.
2025-06-13 17:19:07.379 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.379 +09:00 [DBG] An entity of type 'ApprovalAttachment' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.379 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.380 +09:00 [DBG] An entity of type 'ApprovalAttachment' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.380 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.380 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.380 +09:00 [DBG] An entity of type 'ApprovalTemplate' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 17:19:07.380 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 7 entities written to the database.
2025-06-13 17:19:07.381 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:19:07.381 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:19:07.381 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:19:07.383 +09:00 [DBG] Hosting starting
2025-06-13 17:19:07.401 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-13 17:19:07.402 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-13 17:19:07.690 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-13 17:19:07.690 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-13 17:19:07.690 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-13 17:19:07.690 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-13 17:19:07.691 +09:00 [INF] Hosting environment: Development
2025-06-13 17:19:07.691 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-13 17:19:07.692 +09:00 [DBG] Hosting started
2025-06-13 17:19:22.765 +09:00 [DBG] Connection id "0HNDAAC0BJ4B3" accepted.
2025-06-13 17:19:22.765 +09:00 [DBG] Connection id "0HNDAAC0BJ4B3" started.
2025-06-13 17:19:22.802 +09:00 [DBG] Connection 0HNDAAC0BJ4B3 established using the following protocol: "Tls12"
2025-06-13 17:19:22.828 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 17:19:22.839 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:19:22.842 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 17:19:22.843 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:19:22.856 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 17:19:22.857 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:19:22.865 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 17:19:22.866 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 17:19:22.866 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 17:19:22.866 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 17:19:22.866 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 17:19:22.866 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 17:19:22.867 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:19:22.867 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 17:19:22.870 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 17:19:22.871 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 17:19:22.871 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:19:22.871 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 17:19:22.871 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 17:19:22.875 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 17:19:22.886 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 17:19:22.894 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(request => EF.Property<string>(request, "ApplicantEmployeeNumber") == __userId_0)
    .Include(request => request.Steps)
    .OrderByDescending(request => request.RequestedAt)'
2025-06-13 17:19:22.901 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-13 17:19:22.954 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
            3 -> 15
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
            3 -> 15
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            ApprovalRequest entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                ApprovalRequest instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(ApprovalRequest);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (ApprovalRequest)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                            {
                                return 
                                {
                                    ApprovalRequest instance;
                                    instance = new ApprovalRequest();
                                    instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                    instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                    instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                    instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                    instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                    instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                    instance.<Status>k__BackingField = dataReader.GetString(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(ApprovalRequest)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (ApprovalRequest)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                trackingQuery: True, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalStep instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalStep);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalStep)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
            fixup: (namelessParameter{9}, namelessParameter{10}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                    entity: namelessParameter{9}, 
                    value: namelessParameter{10}, 
                    forMaterialization: True);
                return namelessParameter{10}.<ApprovalRequest>k__BackingField = namelessParameter{9};
            }, 
            trackingQuery: True);
        return IsTrue(resultCoordinator.ResultReady)
         ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 17:19:22.962 +09:00 [DBG] Creating DbConnection.
2025-06-13 17:19:22.962 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 17:19:22.962 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:19:22.963 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:22.963 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 17:19:22.963 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:22.963 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 17:19:22.963 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:19:22.963 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 17:19:22.963 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:22.963 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 17:19:22.964 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 17:19:22.964 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:19:22.964 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 17:19:22.965 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 17:19:22.965 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 17:19:22.965 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 17:19:22.965 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 17:19:22.965 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 17:19:23.006 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 138.8555ms
2025-06-13 17:19:23.009 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 17:19:23.009 +09:00 [DBG] Connection id "0HNDAAC0BJ4B3" completed keep alive response.
2025-06-13 17:19:23.010 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 17:19:23.011 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 17:19:23.011 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 17:19:23.011 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 184.7989ms
2025-06-13 17:20:37.770 +09:00 [DBG] Connection id "0HNDAAC0BJ4B3" received FIN.
2025-06-13 17:20:37.776 +09:00 [DBG] Connection id "0HNDAAC0BJ4B3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 17:20:37.783 +09:00 [DBG] Connection id "0HNDAAC0BJ4B3" disconnecting.
2025-06-13 17:20:37.787 +09:00 [DBG] Connection id "0HNDAAC0BJ4B3" stopped.
2025-06-13 18:24:49.369 +09:00 [DBG] Connection id "0HNDAAC0BJ4B4" accepted.
2025-06-13 18:24:49.370 +09:00 [DBG] Connection id "0HNDAAC0BJ4B4" started.
2025-06-13 18:24:49.395 +09:00 [DBG] Connection 0HNDAAC0BJ4B4 established using the following protocol: "Tls12"
2025-06-13 18:24:49.405 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 18:24:49.409 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 18:24:49.410 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 18:24:49.410 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 18:24:49.415 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 18:24:49.416 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 18:24:49.418 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 18:24:49.418 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 18:24:49.418 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 18:24:49.418 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 18:24:49.419 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 18:24:49.419 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 18:24:49.419 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 18:24:49.422 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 18:24:49.423 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 18:24:49.423 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 18:24:49.423 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 18:24:49.423 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 18:24:49.423 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 18:24:49.424 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 18:24:49.466 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 18:24:49.471 +09:00 [DBG] Creating DbConnection.
2025-06-13 18:24:49.472 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 18:24:49.472 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:24:49.476 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:24:49.477 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 18:24:49.478 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-06-13 18:24:49.478 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-13 18:24:49.478 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 18:24:49.482 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 18:24:49.482 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:24:49.482 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 18:24:49.483 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:24:49.483 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:24:49.483 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 18:24:49.483 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 18:24:49.483 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 18:24:49.483 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 18:24:49.483 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 18:24:49.483 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 18:24:49.484 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 65.1476ms
2025-06-13 18:24:49.484 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 18:24:49.484 +09:00 [DBG] Connection id "0HNDAAC0BJ4B4" completed keep alive response.
2025-06-13 18:24:49.484 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 18:24:49.484 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:24:49.484 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:24:49.484 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 79.324ms
2025-06-13 18:25:09.780 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - null null
2025-06-13 18:25:09.781 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 18:25:09.781 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 18:25:09.781 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 18:25:09.788 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 18:25:09.789 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 18:25:09.798 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 18:25:09.799 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 18:25:09.799 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 18:25:09.799 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 18:25:09.799 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 18:25:09.799 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 18:25:09.799 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 18:25:09.800 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 18:25:09.800 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 18:25:09.800 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 18:25:09.800 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 18:25:09.800 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 18:25:09.800 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 18:25:09.801 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 18:25:09.805 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 18:25:09.807 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)'
2025-06-13 18:25:09.814 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-13 18:25:09.833 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
            3 -> 15
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
            3 -> 15
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            ApprovalRequest entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                ApprovalRequest instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(ApprovalRequest);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (ApprovalRequest)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                            {
                                return 
                                {
                                    ApprovalRequest instance;
                                    instance = new ApprovalRequest();
                                    instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                    instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                    instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                    instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                    instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                    instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                    instance.<Status>k__BackingField = dataReader.GetString(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(ApprovalRequest)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (ApprovalRequest)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                trackingQuery: True, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalStep instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalStep);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalStep)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
            fixup: (namelessParameter{9}, namelessParameter{10}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                    entity: namelessParameter{9}, 
                    value: namelessParameter{10}, 
                    forMaterialization: True);
                return namelessParameter{10}.<ApprovalRequest>k__BackingField = namelessParameter{9};
            }, 
            trackingQuery: True);
        return IsTrue(resultCoordinator.ResultReady)
         ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 18:25:09.841 +09:00 [DBG] Creating DbConnection.
2025-06-13 18:25:09.841 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 18:25:09.841 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:25:09.842 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:25:09.842 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 18:25:09.842 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 18:25:09.842 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 18:25:09.842 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 18:25:09.843 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 18:25:09.844 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:25:09.844 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 18:25:09.844 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:25:09.844 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:25:09.844 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 18:25:09.844 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 18:25:09.844 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 18:25:09.844 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 18:25:09.844 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 18:25:09.844 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 18:25:09.844 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 45.1465ms
2025-06-13 18:25:09.844 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 18:25:09.845 +09:00 [DBG] Connection id "0HNDAAC0BJ4B4" completed keep alive response.
2025-06-13 18:25:09.845 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 18:25:09.845 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:25:09.845 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:25:09.845 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - 200 null application/json; charset=utf-8 65.2133ms
2025-06-13 18:25:10.961 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 18:25:10.962 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 18:25:10.962 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 18:25:10.962 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 18:25:10.962 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 18:25:10.963 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 18:25:10.963 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 18:25:10.963 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 18:25:10.963 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 18:25:10.964 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 18:25:10.964 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 18:25:10.964 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 18:25:10.964 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 18:25:10.966 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 18:25:10.967 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 18:25:10.967 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 18:25:10.967 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 18:25:10.967 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 18:25:10.967 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 18:25:10.968 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 18:25:10.969 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 18:25:10.969 +09:00 [DBG] Creating DbConnection.
2025-06-13 18:25:10.969 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 18:25:10.969 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:25:10.969 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:25:10.970 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 18:25:10.970 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 18:25:10.970 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 18:25:10.970 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 18:25:10.970 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 18:25:10.970 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:25:10.970 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 18:25:10.971 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:25:10.971 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:25:10.971 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 18:25:10.971 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 18:25:10.971 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 18:25:10.971 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 18:25:10.971 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 18:25:10.971 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 18:25:10.971 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.4509ms
2025-06-13 18:25:10.972 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 18:25:10.972 +09:00 [DBG] Connection id "0HNDAAC0BJ4B4" completed keep alive response.
2025-06-13 18:25:10.972 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 18:25:10.972 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:25:10.972 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:25:10.972 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 11.1229ms
2025-06-13 18:25:14.926 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 18:25:14.927 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 18:25:14.927 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 18:25:14.928 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 18:25:14.928 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 18:25:14.928 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 18:25:14.929 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 18:25:14.929 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 18:25:14.929 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 18:25:14.929 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 18:25:14.929 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 18:25:14.930 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 18:25:14.930 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 18:25:14.930 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 18:25:14.930 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 18:25:14.931 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 18:25:14.931 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 18:25:14.931 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 18:25:14.931 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 18:25:14.931 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 18:25:14.932 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 18:25:14.933 +09:00 [DBG] Creating DbConnection.
2025-06-13 18:25:14.933 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 18:25:14.933 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:25:14.933 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:25:14.934 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 18:25:14.934 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 18:25:14.934 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 18:25:14.934 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 18:25:14.934 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId"
2025-06-13 18:25:14.935 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:25:14.935 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 18:25:14.935 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:25:14.935 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:25:14.935 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 18:25:14.935 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 18:25:14.935 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 18:25:14.935 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 18:25:14.935 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 18:25:14.936 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 18:25:14.936 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6.2794ms
2025-06-13 18:25:14.936 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 18:25:14.936 +09:00 [DBG] Connection id "0HNDAAC0BJ4B4" completed keep alive response.
2025-06-13 18:25:14.937 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 18:25:14.937 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:25:14.937 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:25:14.937 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 10.7973ms
2025-06-13 18:26:19.365 +09:00 [DBG] Connection id "0HNDAAC0BJ4B4" received FIN.
2025-06-13 18:26:19.368 +09:00 [DBG] Connection id "0HNDAAC0BJ4B4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 18:26:19.369 +09:00 [DBG] Connection id "0HNDAAC0BJ4B4" disconnecting.
2025-06-13 18:26:19.371 +09:00 [DBG] Connection id "0HNDAAC0BJ4B4" stopped.
2025-06-13 18:26:38.060 +09:00 [INF] Application is shutting down...
2025-06-13 18:26:38.061 +09:00 [DBG] Hosting stopping
2025-06-13 18:26:38.073 +09:00 [DBG] Hosting stopped
2025-06-13 18:32:46.576 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-13 18:32:46.670 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-13 18:32:46.934 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 18:32:46.937 +09:00 [DBG] Creating DbConnection.
2025-06-13 18:32:46.943 +09:00 [DBG] Created DbConnection. (4ms).
2025-06-13 18:32:46.947 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:32:46.954 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:32:46.956 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:32:46.957 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:32:46.959 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 18:32:46.960 +09:00 [DBG] Creating DbConnection.
2025-06-13 18:32:46.960 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 18:32:46.963 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-13 18:32:46.963 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-13 18:32:46.963 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:32:46.964 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:32:46.967 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 18:32:46.981 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 18:32:46.982 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:32:46.984 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-13 18:32:46.986 +09:00 [DBG] Creating DbConnection.
2025-06-13 18:32:46.986 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 18:32:46.986 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:32:46.986 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:32:46.986 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:32:46.986 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:32:46.987 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 18:32:46.987 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 18:32:46.987 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 18:32:46.987 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:32:46.987 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:32:46.987 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 18:32:46.987 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 18:32:46.987 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:32:46.987 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:32:47.007 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-13 18:32:47.104 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 18:32:47.116 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:32:47.117 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:32:47.117 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 18:32:47.117 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 18:32:47.117 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 18:32:47.117 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 18:32:47.118 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 18:32:47.120 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:32:47.120 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 18:32:47.121 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:32:47.121 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:32:47.122 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 18:32:47.122 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:32:47.122 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:32:47.124 +09:00 [DBG] Hosting starting
2025-06-13 18:32:47.137 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-13 18:32:47.137 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-13 18:32:47.373 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-13 18:32:47.374 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-13 18:32:47.374 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-13 18:32:47.374 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-13 18:32:47.374 +09:00 [INF] Hosting environment: Development
2025-06-13 18:32:47.374 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-13 18:32:47.375 +09:00 [DBG] Hosting started
2025-06-13 18:32:49.917 +09:00 [DBG] Connection id "0HNDABL1PFEFR" accepted.
2025-06-13 18:32:49.918 +09:00 [DBG] Connection id "0HNDABL1PFEFR" started.
2025-06-13 18:32:49.957 +09:00 [DBG] Connection 0HNDABL1PFEFR established using the following protocol: "Tls12"
2025-06-13 18:32:49.977 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 18:32:49.988 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 18:32:49.990 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 18:32:49.990 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 18:32:50.001 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 18:32:50.001 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 18:32:50.010 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 18:32:50.011 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 18:32:50.011 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 18:32:50.012 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 18:32:50.012 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 18:32:50.012 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 18:32:50.013 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 18:32:50.013 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 18:32:50.018 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 18:32:50.018 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 18:32:50.019 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 18:32:50.019 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 18:32:50.019 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 18:32:50.020 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 18:32:50.027 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 18:32:50.034 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-13 18:32:50.063 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 18:32:50.071 +09:00 [DBG] Creating DbConnection.
2025-06-13 18:32:50.071 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 18:32:50.071 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:32:50.071 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:32:50.071 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 18:32:50.071 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 18:32:50.072 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 18:32:50.073 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 18:32:50.074 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 18:32:50.075 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:32:50.075 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 18:32:50.075 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 18:32:50.075 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:32:50.075 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 18:32:50.076 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 18:32:50.076 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 18:32:50.076 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 18:32:50.077 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 18:32:50.077 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 18:32:50.112 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 98.625ms
2025-06-13 18:32:50.114 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 18:32:50.114 +09:00 [DBG] Connection id "0HNDABL1PFEFR" completed keep alive response.
2025-06-13 18:32:50.115 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 18:32:50.116 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 18:32:50.116 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 18:32:50.117 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 141.0962ms
2025-06-13 18:34:00.233 +09:00 [DBG] Connection id "0HNDABL1PFEFR" received FIN.
2025-06-13 18:34:00.239 +09:00 [DBG] Connection id "0HNDABL1PFEFR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 18:34:00.247 +09:00 [DBG] Connection id "0HNDABL1PFEFR" disconnecting.
2025-06-13 18:34:00.250 +09:00 [DBG] Connection id "0HNDABL1PFEFR" stopped.
2025-06-13 19:19:17.095 +09:00 [INF] Application is shutting down...
2025-06-13 19:19:17.098 +09:00 [DBG] Hosting stopping
2025-06-13 19:19:17.120 +09:00 [DBG] Hosting stopped
2025-06-13 19:21:50.538 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-13 19:21:50.679 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-13 19:21:51.126 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:21:51.131 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:21:51.141 +09:00 [DBG] Created DbConnection. (6ms).
2025-06-13 19:21:51.144 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:21:51.151 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:21:51.152 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:21:51.157 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:21:51.160 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 19:21:51.161 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:21:51.161 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:21:51.165 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2025-06-13 19:21:51.166 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2025-06-13 19:21:51.166 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:21:51.167 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:21:51.171 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 19:21:51.192 +09:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 19:21:51.193 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:21:51.194 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-13 19:21:51.200 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:21:51.200 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:21:51.200 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:21:51.201 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:21:51.201 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:21:51.201 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:21:51.201 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 19:21:51.201 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 19:21:51.201 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 19:21:51.201 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:21:51.201 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:21:51.201 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 19:21:51.202 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 19:21:51.202 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:21:51.202 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:21:51.241 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-13 19:21:51.341 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 19:21:51.353 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:21:51.354 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:21:51.354 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:21:51.354 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:21:51.354 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:21:51.355 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 19:21:51.356 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 19:21:51.358 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:21:51.358 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 19:21:51.359 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:21:51.359 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:21:51.360 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:21:51.360 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:21:51.360 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:21:51.362 +09:00 [DBG] Hosting starting
2025-06-13 19:21:51.381 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-13 19:21:51.382 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-13 19:21:51.698 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-13 19:21:51.698 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-13 19:21:51.699 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-13 19:21:51.699 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-13 19:21:51.699 +09:00 [INF] Hosting environment: Development
2025-06-13 19:21:51.700 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-13 19:21:51.700 +09:00 [DBG] Hosting started
2025-06-13 19:21:55.630 +09:00 [DBG] Connection id "0HNDACGFLVDT3" accepted.
2025-06-13 19:21:55.630 +09:00 [DBG] Connection id "0HNDACGFLVDT3" started.
2025-06-13 19:21:55.682 +09:00 [DBG] Connection 0HNDACGFLVDT3 established using the following protocol: "Tls12"
2025-06-13 19:21:55.700 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 19:21:55.712 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:21:55.713 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:21:55.713 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:21:55.726 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:21:55.726 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:21:55.737 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:21:55.737 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:21:55.738 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:21:55.739 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:21:55.739 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:21:55.740 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:21:55.741 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:21:55.742 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:21:55.744 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 19:21:55.745 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 19:21:55.745 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:21:55.745 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:21:55.746 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 19:21:55.753 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 19:21:55.813 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:21:55.820 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-13 19:21:55.849 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 19:21:55.858 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:21:55.858 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:21:55.858 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:21:55.858 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:21:55.858 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:21:55.858 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:21:55.859 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:21:55.859 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:21:55.861 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:21:55.861 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:21:55.861 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 19:21:55.861 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:21:55.862 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:21:55.862 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:21:55.863 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:21:55.863 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:21:55.863 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:21:55.863 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:21:55.863 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:21:55.898 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 157.0498ms
2025-06-13 19:21:55.900 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:21:55.900 +09:00 [DBG] Connection id "0HNDACGFLVDT3" completed keep alive response.
2025-06-13 19:21:55.901 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:21:55.902 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:21:55.903 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:21:55.904 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 205.0206ms
2025-06-13 19:22:37.479 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-13 19:22:37.482 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-13 19:22:37.483 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-13 19:22:37.483 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 19:22:37.484 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:22:37.484 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 19:22:37.491 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:22:37.492 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:22:37.492 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:22:37.492 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:22:37.492 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:22:37.492 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:22:37.492 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:22:37.494 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:22:37.494 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 19:22:37.495 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-13 19:22:37.495 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-13 19:22:37.502 +09:00 [DBG] Connection id "0HNDACGFLVDT3", Request id "0HNDACGFLVDT3:00000002": started reading request body.
2025-06-13 19:22:37.503 +09:00 [DBG] Connection id "0HNDACGFLVDT3", Request id "0HNDACGFLVDT3:00000002": done reading request body.
2025-06-13 19:22:37.520 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-13 19:22:37.520 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 19:22:37.520 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 19:22:37.520 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 19:22:37.529 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 19:22:37.530 +09:00 [INF] Creating a new approval request.
2025-06-13 19:22:37.531 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":null,"CurrentActionStatus":null,"ApprovalId":"61731c9a-5c2b-4af6-8903-e4696e2cea2b","RequestTitle":"testt","RequestContent":"test","ApplicantEmployeeNumber":"EMP0006","ApplicantName":"User 6","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-13T10:22:37.4428280Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":null,"MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0001","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 1","Position":"System Administrator","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-13 19:22:37.560 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:22:37.563 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API) in 70.6392ms
2025-06-13 19:22:37.563 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 19:22:37.563 +09:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Cannot create a DbSet for 'ApprovalRequestWithCurrentStepDto' because this type is not included in the model for the context.
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
   at ApprovalService.Infrastructure.Repositories.ApprovalRequestRepository`1.CreateApprovalRequestAsync(T entity) in /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/Infrastructure/Repositories/ApprovalRequestRepository.cs:line 33
   at ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest(ApprovalRequestWithCurrentStepDto approvalRequest) in /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Controllers/ApprovalRequestController.cs:line 133
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-13 19:22:37.575 +09:00 [DBG] Connection id "0HNDACGFLVDT3" completed keep alive response.
2025-06-13 19:22:37.575 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:22:37.575 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 500 null text/plain; charset=utf-8 96.6107ms
2025-06-13 19:22:42.391 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 19:22:42.392 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:22:42.392 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:22:42.392 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:22:42.395 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:22:42.396 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:22:42.396 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:22:42.396 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:22:42.396 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:22:42.397 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:22:42.397 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:22:42.397 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:22:42.397 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:22:42.400 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:22:42.400 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 19:22:42.401 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 19:22:42.401 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:22:42.401 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:22:42.401 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 19:22:42.401 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 19:22:42.403 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:22:42.410 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:22:42.410 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:22:42.410 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:22:42.410 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:22:42.410 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:22:42.410 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:22:42.410 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:22:42.410 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:22:42.411 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:22:42.411 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:22:42.411 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 19:22:42.411 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:22:42.411 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:22:42.411 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:22:42.412 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:22:42.412 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:22:42.412 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:22:42.412 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:22:42.412 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:22:42.412 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 14.7947ms
2025-06-13 19:22:42.412 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:22:42.412 +09:00 [DBG] Connection id "0HNDACGFLVDT3" completed keep alive response.
2025-06-13 19:22:42.412 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:22:42.412 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:22:42.412 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:22:42.413 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 21.1703ms
2025-06-13 19:22:45.359 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - null null
2025-06-13 19:22:45.360 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 19:22:45.360 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0006'
2025-06-13 19:22:45.360 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 19:22:45.360 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:22:45.360 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 19:22:45.366 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 19:22:45.366 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:22:45.366 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:22:45.366 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:22:45.367 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:22:45.367 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:22:45.367 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 19:22:45.367 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 19:22:45.367 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 19:22:45.368 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 19:22:45.368 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 19:22:45.368 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 19:22:45.368 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 19:22:45.368 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 19:22:45.371 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:22:45.376 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)'
2025-06-13 19:22:45.386 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-13 19:22:45.439 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
            3 -> 15
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
            3 -> 15
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            ApprovalRequest entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                ApprovalRequest instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(ApprovalRequest);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (ApprovalRequest)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                            {
                                return 
                                {
                                    ApprovalRequest instance;
                                    instance = new ApprovalRequest();
                                    instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                    instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                    instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                    instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                    instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                    instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                    instance.<Status>k__BackingField = dataReader.GetString(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(ApprovalRequest)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (ApprovalRequest)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                trackingQuery: True, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalStep instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalStep);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalStep)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
            fixup: (namelessParameter{9}, namelessParameter{10}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                    entity: namelessParameter{9}, 
                    value: namelessParameter{10}, 
                    forMaterialization: True);
                return namelessParameter{10}.<ApprovalRequest>k__BackingField = namelessParameter{9};
            }, 
            trackingQuery: True);
        return IsTrue(resultCoordinator.ResultReady)
         ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 19:22:45.442 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:22:45.442 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:22:45.442 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:22:45.442 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:22:45.442 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:22:45.442 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:22:45.442 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:22:45.442 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 19:22:45.443 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 19:22:45.443 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:22:45.443 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 19:22:45.443 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:22:45.443 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:22:45.443 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:22:45.443 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:22:45.443 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:22:45.444 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:22:45.444 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:22:45.444 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:22:45.444 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 77.3267ms
2025-06-13 19:22:45.444 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 19:22:45.444 +09:00 [DBG] Connection id "0HNDACGFLVDT3" completed keep alive response.
2025-06-13 19:22:45.444 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:22:45.444 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:22:45.445 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:22:45.445 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0006 - 200 null application/json; charset=utf-8 86.1823ms
2025-06-13 19:22:47.392 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 19:22:47.392 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:22:47.392 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:22:47.393 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:22:47.393 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:22:47.393 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:22:47.393 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:22:47.395 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:22:47.395 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:22:47.395 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:22:47.399 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:22:47.399 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:22:47.399 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:22:47.399 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:22:47.400 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 19:22:47.400 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 19:22:47.400 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:22:47.400 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:22:47.400 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 19:22:47.400 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 19:22:47.401 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:22:47.401 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:22:47.402 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:22:47.402 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:22:47.402 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:22:47.402 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:22:47.402 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:22:47.402 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:22:47.403 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:22:47.403 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:22:47.403 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:22:47.403 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 19:22:47.403 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:22:47.404 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:22:47.405 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:22:47.405 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:22:47.405 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:22:47.405 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:22:47.406 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:22:47.406 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:22:47.412 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 13.3599ms
2025-06-13 19:22:47.413 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:22:47.413 +09:00 [DBG] Connection id "0HNDACGFLVDT3" completed keep alive response.
2025-06-13 19:22:47.413 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:22:47.413 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:22:47.413 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:22:47.414 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 21.5689ms
2025-06-13 19:22:57.626 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 19:22:57.627 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:22:57.627 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:22:57.627 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:22:57.627 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:22:57.628 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:22:57.628 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:22:57.628 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:22:57.628 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:22:57.631 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:22:57.631 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:22:57.631 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:22:57.632 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:22:57.633 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:22:57.633 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 19:22:57.634 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 19:22:57.634 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:22:57.634 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:22:57.634 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 19:22:57.634 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 19:22:57.636 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:22:57.637 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:22:57.639 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-13 19:22:57.639 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:22:57.639 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:22:57.639 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:22:57.640 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:22:57.640 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:22:57.640 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:22:57.640 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:22:57.641 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:22:57.641 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 19:22:57.641 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:22:57.641 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:22:57.641 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:22:57.641 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:22:57.642 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:22:57.642 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:22:57.642 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:22:57.642 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:22:57.642 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 10.5234ms
2025-06-13 19:22:57.642 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:22:57.643 +09:00 [DBG] Connection id "0HNDACGFLVDT3" completed keep alive response.
2025-06-13 19:22:57.643 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:22:57.643 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:22:57.643 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:22:57.643 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 16.7405ms
2025-06-13 19:23:40.540 +09:00 [DBG] Connection id "0HNDACGFLVDT4" accepted.
2025-06-13 19:23:40.542 +09:00 [DBG] Connection id "0HNDACGFLVDT4" started.
2025-06-13 19:23:40.542 +09:00 [DBG] Connection id "0HNDACGFLVDT5" accepted.
2025-06-13 19:23:40.543 +09:00 [DBG] Connection id "0HNDACGFLVDT5" started.
2025-06-13 19:23:40.600 +09:00 [DBG] Connection 0HNDACGFLVDT5 established using the following protocol: "Tls12"
2025-06-13 19:23:40.600 +09:00 [DBG] Connection id "0HNDACGFLVDT4" received FIN.
2025-06-13 19:23:40.600 +09:00 [DBG] Connection 0HNDACGFLVDT4 established using the following protocol: "Tls12"
2025-06-13 19:23:40.604 +09:00 [DBG] Connection id "0HNDACGFLVDT4" is closed. The last processed stream ID was 0.
2025-06-13 19:23:40.604 +09:00 [DBG] Connection id "0HNDACGFLVDT4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 19:23:40.611 +09:00 [DBG] The connection queue processing loop for 0HNDACGFLVDT4 completed.
2025-06-13 19:23:40.613 +09:00 [DBG] Connection id "0HNDACGFLVDT4" stopped.
2025-06-13 19:23:40.614 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 19:23:40.615 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:23:40.615 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:23:40.615 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:23:40.615 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:23:40.615 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:23:40.616 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:23:40.616 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:23:40.616 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:23:40.617 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:23:40.617 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:23:40.617 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:23:40.617 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:23:40.618 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:23:40.619 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 19:23:40.619 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 19:23:40.619 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:23:40.619 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:23:40.619 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 19:23:40.619 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 19:23:40.623 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:23:40.624 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:23:40.625 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:23:40.625 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:23:40.625 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:23:40.625 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:23:40.625 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:23:40.625 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:23:40.625 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:23:40.625 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:23:40.625 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:23:40.626 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 19:23:40.626 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:23:40.626 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:23:40.626 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:23:40.631 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:23:40.631 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:23:40.631 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:23:40.631 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:23:40.631 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:23:40.632 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 14.9697ms
2025-06-13 19:23:40.632 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:23:40.632 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:23:40.632 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:23:40.632 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:23:40.633 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 18.3175ms
2025-06-13 19:23:40.753 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/favicon.ico - null null
2025-06-13 19:23:40.753 +09:00 [DBG] No candidates found for the request path '/favicon.ico'
2025-06-13 19:23:40.753 +09:00 [DBG] Request did not match any endpoints
2025-06-13 19:23:40.753 +09:00 [DBG] The request path  does not match the path filter
2025-06-13 19:23:40.754 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/favicon.ico - 404 0 null 0.8588ms
2025-06-13 19:23:40.754 +09:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:5001/favicon.ico, Response status code: 404
2025-06-13 19:23:43.461 +09:00 [DBG] Connection id "0HNDACGFLVDT5" received FIN.
2025-06-13 19:23:43.462 +09:00 [DBG] Connection id "0HNDACGFLVDT5" is closed. The last processed stream ID was 3.
2025-06-13 19:23:43.463 +09:00 [DBG] Connection id "0HNDACGFLVDT5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 19:23:43.463 +09:00 [DBG] The connection queue processing loop for 0HNDACGFLVDT5 completed.
2025-06-13 19:23:43.465 +09:00 [DBG] Connection id "0HNDACGFLVDT5" stopped.
2025-06-13 19:24:10.624 +09:00 [DBG] Connection id "0HNDACGFLVDT3" received FIN.
2025-06-13 19:24:10.626 +09:00 [DBG] Connection id "0HNDACGFLVDT3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 19:24:10.627 +09:00 [DBG] Connection id "0HNDACGFLVDT3" disconnecting.
2025-06-13 19:24:10.628 +09:00 [DBG] Connection id "0HNDACGFLVDT3" stopped.
2025-06-13 19:25:11.573 +09:00 [DBG] Connection id "0HNDACGFLVDT6" accepted.
2025-06-13 19:25:11.576 +09:00 [DBG] Connection id "0HNDACGFLVDT6" started.
2025-06-13 19:25:11.612 +09:00 [DBG] Connection 0HNDACGFLVDT6 established using the following protocol: "Tls12"
2025-06-13 19:25:11.618 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 19:25:11.618 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:25:11.619 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:25:11.619 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:25:11.619 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:25:11.619 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:25:11.620 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:25:11.620 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:25:11.620 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:25:11.620 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:25:11.620 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:25:11.620 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:25:11.620 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:25:11.620 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:25:11.621 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 19:25:11.621 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 19:25:11.621 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:25:11.621 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:25:11.621 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 19:25:11.621 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 19:25:11.625 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:25:11.626 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:25:11.627 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:25:11.627 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:25:11.627 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:25:11.628 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:25:11.628 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:25:11.628 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:25:11.628 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:25:11.629 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:25:11.631 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:25:11.632 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 19:25:11.632 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:25:11.632 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:25:11.632 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:25:11.633 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:25:11.633 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:25:11.633 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:25:11.633 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:25:11.633 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:25:11.635 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 15.0005ms
2025-06-13 19:25:11.635 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:25:11.636 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:25:11.636 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:25:11.636 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:25:11.640 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 20.3285ms
2025-06-13 19:25:13.469 +09:00 [DBG] Connection id "0HNDACGFLVDT6" received FIN.
2025-06-13 19:25:13.470 +09:00 [DBG] Connection id "0HNDACGFLVDT6" is closed. The last processed stream ID was 1.
2025-06-13 19:25:13.470 +09:00 [DBG] Connection id "0HNDACGFLVDT6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 19:25:13.470 +09:00 [DBG] The connection queue processing loop for 0HNDACGFLVDT6 completed.
2025-06-13 19:25:13.470 +09:00 [DBG] Connection id "0HNDACGFLVDT6" stopped.
2025-06-13 19:25:30.058 +09:00 [DBG] Connection id "0HNDACGFLVDT7" accepted.
2025-06-13 19:25:30.064 +09:00 [DBG] Connection id "0HNDACGFLVDT7" started.
2025-06-13 19:25:30.088 +09:00 [DBG] Connection 0HNDACGFLVDT7 established using the following protocol: "Tls12"
2025-06-13 19:25:30.089 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger - null null
2025-06-13 19:25:30.089 +09:00 [DBG] No candidates found for the request path '/swagger'
2025-06-13 19:25:30.089 +09:00 [DBG] Request did not match any endpoints
2025-06-13 19:25:30.090 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger - 301 0 null 1.0307ms
2025-06-13 19:25:30.096 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null
2025-06-13 19:25:30.096 +09:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-06-13 19:25:30.097 +09:00 [DBG] Request did not match any endpoints
2025-06-13 19:25:30.153 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 56.8615ms
2025-06-13 19:25:30.180 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui.css - null null
2025-06-13 19:25:30.181 +09:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2025-06-13 19:25:30.181 +09:00 [DBG] Request did not match any endpoints
2025-06-13 19:25:30.182 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.css - null null
2025-06-13 19:25:30.182 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui-bundle.js - null null
2025-06-13 19:25:30.182 +09:00 [DBG] No candidates found for the request path '/swagger/index.css'
2025-06-13 19:25:30.182 +09:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2025-06-13 19:25:30.182 +09:00 [DBG] Request did not match any endpoints
2025-06-13 19:25:30.182 +09:00 [DBG] Request did not match any endpoints
2025-06-13 19:25:30.183 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui-standalone-preset.js - null null
2025-06-13 19:25:30.183 +09:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2025-06-13 19:25:30.183 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.js - null null
2025-06-13 19:25:30.183 +09:00 [DBG] Request did not match any endpoints
2025-06-13 19:25:30.183 +09:00 [DBG] No candidates found for the request path '/swagger/index.js'
2025-06-13 19:25:30.183 +09:00 [DBG] Request did not match any endpoints
2025-06-13 19:25:30.184 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.js - 200 null application/javascript;charset=utf-8 0.9812ms
2025-06-13 19:25:30.186 +09:00 [INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
2025-06-13 19:25:30.187 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.css - 200 202 text/css 4.7732ms
2025-06-13 19:25:30.200 +09:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-06-13 19:25:30.201 +09:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-06-13 19:25:30.203 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/swagger-ui-standalone-preset.js - 200 229223 text/javascript 20.1124ms
2025-06-13 19:25:30.203 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/swagger-ui.css - 200 154949 text/css 22.4952ms
2025-06-13 19:25:30.212 +09:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-06-13 19:25:30.213 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/swagger-ui-bundle.js - 200 1484234 text/javascript 30.666ms
2025-06-13 19:25:30.335 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2025-06-13 19:25:30.335 +09:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-13 19:25:30.336 +09:00 [DBG] Request did not match any endpoints
2025-06-13 19:25:30.340 +09:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-06-13 19:25:30.351 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/favicon-32x32.png - null null
2025-06-13 19:25:30.351 +09:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2025-06-13 19:25:30.352 +09:00 [DBG] Request did not match any endpoints
2025-06-13 19:25:30.352 +09:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-06-13 19:25:30.352 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/favicon-32x32.png - 200 628 image/png 1.1272ms
2025-06-13 19:25:30.423 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 87.8632ms
2025-06-13 19:25:33.985 +09:00 [DBG] Connection id "0HNDACGFLVDT7" received FIN.
2025-06-13 19:25:33.985 +09:00 [DBG] Connection id "0HNDACGFLVDT7" is closed. The last processed stream ID was 17.
2025-06-13 19:25:33.986 +09:00 [DBG] Connection id "0HNDACGFLVDT7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 19:25:33.986 +09:00 [DBG] The connection queue processing loop for 0HNDACGFLVDT7 completed.
2025-06-13 19:25:33.987 +09:00 [DBG] Connection id "0HNDACGFLVDT7" stopped.
2025-06-13 19:26:30.354 +09:00 [DBG] Connection id "0HNDACGFLVDT8" accepted.
2025-06-13 19:26:30.355 +09:00 [DBG] Connection id "0HNDACGFLVDT8" started.
2025-06-13 19:26:30.389 +09:00 [DBG] Connection 0HNDACGFLVDT8 established using the following protocol: "Tls12"
2025-06-13 19:26:30.396 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Approval/my-requests/EC20505	 - null null
2025-06-13 19:26:30.399 +09:00 [DBG] 1 candidate(s) found for the request path '/api/Approval/my-requests/EC20505	'
2025-06-13 19:26:30.399 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovalRequests (ApprovalService.API)' with route pattern 'api/Approval/my-requests/{approverId}' is valid for the request path '/api/Approval/my-requests/EC20505	'
2025-06-13 19:26:30.401 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovalRequests (ApprovalService.API)'
2025-06-13 19:26:30.403 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:26:30.404 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovalRequests (ApprovalService.API)'
2025-06-13 19:26:30.409 +09:00 [INF] Route matched with {action = "GetMyApprovalRequests", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovalRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 19:26:30.409 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:26:30.409 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:26:30.409 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:26:30.409 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:26:30.409 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:26:30.410 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 19:26:30.414 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 19:26:30.416 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 19:26:30.416 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 19:26:30.416 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 19:26:30.416 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 19:26:30.416 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 19:26:30.417 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 19:26:30.418 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:26:30.419 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:26:30.419 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:26:30.419 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:26:30.420 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:26:30.420 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:26:30.420 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:26:30.420 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:26:30.420 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 19:26:30.420 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 19:26:30.421 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:26:30.421 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 19:26:30.421 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:26:30.421 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:26:30.421 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:26:30.421 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:26:30.421 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:26:30.421 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:26:30.421 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:26:30.421 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:26:30.422 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovalRequests (ApprovalService.API) in 12.1579ms
2025-06-13 19:26:30.422 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovalRequests (ApprovalService.API)'
2025-06-13 19:26:30.422 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:26:30.422 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:26:30.422 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:26:30.422 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Approval/my-requests/EC20505	 - 200 null application/json; charset=utf-8 25.7439ms
2025-06-13 19:26:33.990 +09:00 [DBG] Connection id "0HNDACGFLVDT8" received FIN.
2025-06-13 19:26:33.990 +09:00 [DBG] Connection id "0HNDACGFLVDT8" is closed. The last processed stream ID was 1.
2025-06-13 19:26:33.990 +09:00 [DBG] Connection id "0HNDACGFLVDT8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 19:26:33.990 +09:00 [DBG] The connection queue processing loop for 0HNDACGFLVDT8 completed.
2025-06-13 19:26:33.990 +09:00 [DBG] Connection id "0HNDACGFLVDT8" stopped.
2025-06-13 19:31:00.134 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-13 19:31:00.273 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-13 19:31:35.996 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:31:36.002 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:31:36.008 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-13 19:31:36.011 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:31:36.018 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:31:36.021 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:31:36.023 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:31:36.024 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 19:31:36.025 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:31:36.025 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:31:36.027 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-13 19:31:36.027 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-13 19:31:36.027 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:31:36.028 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:31:36.031 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 19:31:36.044 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 19:31:36.045 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:31:36.047 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-13 19:31:36.050 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:31:36.050 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:31:36.050 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:31:36.050 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:31:36.050 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:31:36.050 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:31:36.050 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 19:31:36.050 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 19:31:36.050 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 19:31:36.050 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:31:36.050 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:31:36.050 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 19:31:36.051 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 19:31:36.051 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:31:36.051 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:31:36.073 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-13 19:31:36.174 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 19:31:36.221 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:31:36.221 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:31:36.221 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:31:36.221 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:31:36.221 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:31:36.222 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 19:31:36.223 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 19:31:36.230 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:31:36.231 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 19:31:36.232 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:31:36.233 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:31:36.234 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:31:36.234 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:31:36.234 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:31:36.236 +09:00 [DBG] Hosting starting
2025-06-13 19:31:36.273 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-13 19:31:36.273 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-13 19:31:36.555 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-13 19:31:36.555 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-13 19:31:36.555 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-13 19:31:36.555 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-13 19:31:36.556 +09:00 [INF] Hosting environment: Development
2025-06-13 19:31:36.556 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-13 19:31:36.556 +09:00 [DBG] Hosting started
2025-06-13 19:32:09.775 +09:00 [DBG] Connection id "0HNDACM6MTNLD" accepted.
2025-06-13 19:32:09.776 +09:00 [DBG] Connection id "0HNDACM6MTNLD" started.
2025-06-13 19:32:09.818 +09:00 [DBG] Connection 0HNDACM6MTNLD established using the following protocol: "Tls12"
2025-06-13 19:32:09.841 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 19:32:09.852 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:32:09.854 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:32:09.854 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:32:09.872 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:32:09.872 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:32:09.886 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:32:09.887 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:32:09.887 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:32:09.887 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:32:09.887 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:32:09.887 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:32:09.888 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:32:09.889 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:32:09.894 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 19:32:09.895 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 19:32:09.895 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:32:09.895 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:32:09.895 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 19:32:09.898 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 19:32:14.295 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:32:14.306 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-13 19:32:14.340 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 19:32:14.391 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:32:14.391 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:32:14.391 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:32:14.392 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:32:14.392 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:32:14.393 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:32:14.395 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-06-13 19:32:14.396 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:32:14.398 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:32:14.398 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:32:14.398 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 19:32:14.398 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:32:14.399 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:32:14.400 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:32:14.401 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:32:14.401 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:32:14.401 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:32:14.401 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:32:14.401 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:32:14.440 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4550.8712ms
2025-06-13 19:32:14.444 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:32:14.444 +09:00 [DBG] Connection id "0HNDACM6MTNLD" completed keep alive response.
2025-06-13 19:32:14.446 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:32:14.448 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:32:14.448 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:32:14.449 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 4609.3688ms
2025-06-13 19:32:34.076 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 19:32:34.081 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:32:34.081 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:32:34.082 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:32:34.084 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:32:34.085 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:32:34.087 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:32:34.090 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:32:34.090 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:32:34.090 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:32:34.090 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:32:34.090 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:32:34.091 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:32:34.093 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:32:34.093 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 19:32:34.094 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 19:32:34.094 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:32:34.094 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:32:34.094 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 19:32:34.094 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 19:32:51.687 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:32:51.691 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:32:51.691 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:32:51.692 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:32:51.692 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:32:51.692 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:32:51.692 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:32:51.692 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:32:51.692 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:32:51.692 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:32:51.693 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:32:51.693 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 19:32:51.693 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:32:51.693 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:32:51.693 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:32:51.693 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:32:51.693 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:32:51.693 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:32:51.694 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:32:51.694 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:32:51.694 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 17604.1124ms
2025-06-13 19:32:51.694 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:32:51.695 +09:00 [DBG] Connection id "0HNDACM6MTNLD" completed keep alive response.
2025-06-13 19:32:51.695 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:32:51.695 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:32:51.695 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:32:51.695 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 17619.4593ms
2025-06-13 19:33:59.253 +09:00 [DBG] Connection id "0HNDACM6MTNLD" received FIN.
2025-06-13 19:33:59.328 +09:00 [DBG] Connection id "0HNDACM6MTNLD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 19:33:59.328 +09:00 [DBG] Connection id "0HNDACM6MTNLE" accepted.
2025-06-13 19:33:59.329 +09:00 [DBG] Connection id "0HNDACM6MTNLE" started.
2025-06-13 19:33:59.333 +09:00 [DBG] Connection id "0HNDACM6MTNLD" disconnecting.
2025-06-13 19:33:59.335 +09:00 [DBG] Connection id "0HNDACM6MTNLD" stopped.
2025-06-13 19:33:59.353 +09:00 [DBG] Connection 0HNDACM6MTNLE established using the following protocol: "Tls12"
2025-06-13 19:33:59.357 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 19:33:59.357 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:33:59.357 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:33:59.357 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:33:59.359 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:33:59.359 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:33:59.359 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:33:59.359 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:33:59.359 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:33:59.359 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:33:59.359 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:33:59.359 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:33:59.359 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:33:59.361 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:33:59.361 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 19:33:59.362 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 19:33:59.362 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:33:59.362 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:33:59.362 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 19:33:59.362 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 19:34:03.534 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:34:03.538 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:34:03.538 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:34:03.538 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:34:03.538 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:34:03.539 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:34:03.539 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:34:03.539 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:34:03.539 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:34:03.540 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:34:03.541 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:34:03.541 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 19:34:03.541 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:34:03.541 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:34:03.541 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:34:03.541 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:34:03.541 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:34:03.542 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:34:03.542 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:34:03.542 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:34:03.543 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4183.4529ms
2025-06-13 19:34:03.543 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:34:03.543 +09:00 [DBG] Connection id "0HNDACM6MTNLE" completed keep alive response.
2025-06-13 19:34:03.544 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:34:03.544 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:34:03.544 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:34:03.544 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 4187.2364ms
2025-06-13 19:35:14.214 +09:00 [DBG] Connection id "0HNDACM6MTNLE" received FIN.
2025-06-13 19:35:14.242 +09:00 [DBG] Connection id "0HNDACM6MTNLE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 19:35:14.243 +09:00 [DBG] Connection id "0HNDACM6MTNLE" disconnecting.
2025-06-13 19:35:14.295 +09:00 [DBG] Connection id "0HNDACM6MTNLE" stopped.
2025-06-13 19:39:58.268 +09:00 [DBG] Connection id "0HNDACM6MTNLF" accepted.
2025-06-13 19:39:58.274 +09:00 [DBG] Connection id "0HNDACM6MTNLF" started.
2025-06-13 19:39:58.302 +09:00 [DBG] Connection 0HNDACM6MTNLF established using the following protocol: "Tls12"
2025-06-13 19:39:58.305 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - null null
2025-06-13 19:39:58.306 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:39:58.306 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0006'
2025-06-13 19:39:58.306 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:39:58.306 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:39:58.306 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:39:58.307 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:39:58.307 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:39:58.307 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:39:58.307 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:39:58.307 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:39:58.307 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:39:58.307 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:39:58.308 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:39:58.308 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 19:39:58.308 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 19:39:58.308 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:39:58.308 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:39:58.308 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 19:39:58.308 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 19:40:40.926 +09:00 [DBG] Connection id "0HNDACM6MTNLG" accepted.
2025-06-13 19:40:40.926 +09:00 [DBG] Connection id "0HNDACM6MTNLG" started.
2025-06-13 19:40:40.929 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:40:40.941 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:40:40.941 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:40:40.941 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:40:40.948 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:40:40.948 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:40:40.948 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:40:40.948 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:40:40.948 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:40:40.952 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:40:40.952 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:40:40.952 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 19:40:40.952 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:40:40.952 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:40:40.953 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:40:40.953 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:40:40.953 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:40:40.953 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:40:40.953 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:40:40.953 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:40:40.954 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 42647.9272ms
2025-06-13 19:40:40.954 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:40:40.955 +09:00 [DBG] Connection id "0HNDACM6MTNLF" completed keep alive response.
2025-06-13 19:40:40.955 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:40:40.955 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:40:40.955 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:40:40.956 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0006 - 200 null application/json; charset=utf-8 42650.9246ms
2025-06-13 19:40:40.956 +09:00 [DBG] Connection 0HNDACM6MTNLG established using the following protocol: "Tls12"
2025-06-13 19:40:40.965 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-13 19:40:40.965 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 19:40:40.966 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 19:40:40.966 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:40:40.970 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:40:40.970 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:40:40.971 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:40:40.971 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:40:40.971 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:40:40.971 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:40:40.971 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:40:40.971 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:40:40.972 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:40:40.972 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:40:40.972 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 19:40:40.972 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 19:40:40.973 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:40:40.973 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:40:40.973 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 19:40:40.973 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 19:40:42.513 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:40:42.513 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:40:42.514 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:40:42.514 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:40:42.514 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:40:42.514 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:40:42.514 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:40:42.514 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:40:42.514 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:40:42.515 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:40:42.529 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:40:42.529 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 14ms reading results.
2025-06-13 19:40:42.529 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:40:42.529 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:40:42.530 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:40:42.530 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:40:42.530 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:40:42.530 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:40:42.530 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:40:42.530 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:40:42.542 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 1570.0458ms
2025-06-13 19:40:42.542 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:40:42.542 +09:00 [DBG] Connection id "0HNDACM6MTNLF" completed keep alive response.
2025-06-13 19:40:42.542 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:40:42.542 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:40:42.542 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:40:42.542 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 1577.0877ms
2025-06-13 19:41:44.752 +09:00 [DBG] Connection id "0HNDACM6MTNLF" received FIN.
2025-06-13 19:41:44.838 +09:00 [DBG] Connection id "0HNDACM6MTNLG" received FIN.
2025-06-13 19:41:44.811 +09:00 [DBG] Connection id "0HNDACM6MTNLF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 19:41:44.839 +09:00 [DBG] Connection id "0HNDACM6MTNLF" disconnecting.
2025-06-13 19:41:44.839 +09:00 [DBG] Connection id "0HNDACM6MTNLG" disconnecting.
2025-06-13 19:41:44.865 +09:00 [DBG] Connection id "0HNDACM6MTNLG" stopped.
2025-06-13 19:41:44.865 +09:00 [DBG] Connection id "0HNDACM6MTNLF" stopped.
2025-06-13 19:41:44.868 +09:00 [DBG] Connection id "0HNDACM6MTNLG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 19:48:13.033 +09:00 [DBG] Connection id "0HNDACM6MTNLH" accepted.
2025-06-13 19:48:13.038 +09:00 [DBG] Connection id "0HNDACM6MTNLH" started.
2025-06-13 19:48:13.065 +09:00 [DBG] Connection 0HNDACM6MTNLH established using the following protocol: "Tls12"
2025-06-13 19:48:13.070 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-13 19:48:13.070 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 19:48:13.070 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 19:48:13.070 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:48:13.071 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:48:13.071 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:48:13.072 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:48:13.072 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:48:13.072 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:48:13.072 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:48:13.072 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:48:13.072 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:48:13.072 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:48:13.073 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:48:13.073 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 19:48:13.073 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 19:48:13.073 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:48:13.073 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:48:13.073 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 19:48:13.074 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 19:48:20.915 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:48:20.917 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:48:20.917 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:48:20.918 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:48:20.920 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:48:20.920 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:48:20.920 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:48:20.920 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:48:20.920 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:48:20.927 +09:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:48:20.928 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:48:20.928 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 19:48:20.928 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:48:20.928 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:48:20.929 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:48:20.929 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:48:20.930 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:48:20.930 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:48:20.930 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:48:20.930 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:48:20.985 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7913.003ms
2025-06-13 19:48:20.988 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:48:20.992 +09:00 [DBG] Connection id "0HNDACM6MTNLH" completed keep alive response.
2025-06-13 19:48:20.993 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:48:20.994 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:48:20.994 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:48:20.994 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 7924.7587ms
2025-06-13 19:49:30.054 +09:00 [DBG] Connection id "0HNDACM6MTNLH" received FIN.
2025-06-13 19:49:30.087 +09:00 [DBG] Connection id "0HNDACM6MTNLH" disconnecting.
2025-06-13 19:49:30.088 +09:00 [DBG] Connection id "0HNDACM6MTNLH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 19:49:30.143 +09:00 [DBG] Connection id "0HNDACM6MTNLH" stopped.
2025-06-13 19:49:30.143 +09:00 [DBG] Connection id "0HNDACM6MTNLI" accepted.
2025-06-13 19:49:30.143 +09:00 [DBG] Connection id "0HNDACM6MTNLI" started.
2025-06-13 19:49:30.166 +09:00 [DBG] Connection 0HNDACM6MTNLI established using the following protocol: "Tls12"
2025-06-13 19:49:30.169 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-13 19:49:30.170 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 19:49:30.170 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 19:49:30.170 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:49:30.171 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:49:30.171 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:49:30.171 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:49:30.171 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:49:30.171 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:49:30.172 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:49:30.172 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:49:30.172 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:49:30.172 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:49:30.172 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:49:30.173 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 19:49:30.173 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 19:49:30.173 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:49:30.173 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 19:49:30.173 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 19:49:30.173 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 19:50:49.487 +09:00 [DBG] Connection id "0HNDACM6MTNLJ" accepted.
2025-06-13 19:50:49.489 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:50:49.490 +09:00 [DBG] Connection id "0HNDACM6MTNLJ" started.
2025-06-13 19:50:49.492 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:50:49.492 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:50:49.492 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:50:49.492 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:50:49.493 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:50:49.493 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:50:49.493 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:50:49.493 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:50:49.494 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 19:50:49.494 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:50:49.494 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 19:50:49.494 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:50:49.495 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:50:49.495 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 19:50:49.495 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 19:50:49.495 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 19:50:49.495 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 19:50:49.495 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 19:50:49.495 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 19:50:49.499 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 79329.6596ms
2025-06-13 19:50:49.499 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 19:50:49.499 +09:00 [DBG] Connection id "0HNDACM6MTNLI" completed keep alive response.
2025-06-13 19:50:49.499 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:50:49.499 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:50:49.499 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:50:49.499 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 79332.5231ms
2025-06-13 19:50:49.514 +09:00 [DBG] Connection 0HNDACM6MTNLJ established using the following protocol: "Tls12"
2025-06-13 19:50:49.527 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-13 19:50:49.528 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-13 19:50:49.528 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-13 19:50:49.528 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 19:50:49.528 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:50:49.528 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 19:50:49.537 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:50:49.537 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:50:49.537 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:50:49.537 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:50:49.537 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:50:49.537 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:50:49.537 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:50:49.538 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:50:49.540 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 19:50:49.542 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-13 19:50:49.543 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-13 19:50:49.551 +09:00 [DBG] Connection id "0HNDACM6MTNLJ", Request id "0HNDACM6MTNLJ:00000001": started reading request body.
2025-06-13 19:50:49.554 +09:00 [DBG] Connection id "0HNDACM6MTNLJ", Request id "0HNDACM6MTNLJ:00000001": done reading request body.
2025-06-13 19:50:49.568 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-13 19:50:49.569 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 19:50:49.569 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 19:50:49.569 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 19:50:49.574 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 19:50:50.436 +09:00 [INF] Creating a new approval request.
2025-06-13 19:50:50.443 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"c40f9bf2-5dfd-4efc-916f-d974ccfd2e5a","RequestTitle":"test","RequestContent":"test","ApplicantEmployeeNumber":"EC20505","ApplicantName":"User 6","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-13T10:50:43.4368110Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0001","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 1","Position":"System Administrator","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0003","Sequence":2,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 3","Position":"Staff","Department":"IT","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-13 19:50:50.449 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:58:42.392 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-13 19:58:42.526 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-13 19:58:52.987 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 19:58:52.993 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:58:52.999 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-13 19:58:53.002 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:58:53.009 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:58:53.011 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:58:53.013 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:58:53.015 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 19:58:53.015 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:58:53.015 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:58:53.017 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-13 19:58:53.018 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-13 19:58:53.018 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:58:53.019 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:58:53.022 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 19:58:53.038 +09:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 19:58:53.039 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:58:53.041 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-13 19:58:53.044 +09:00 [DBG] Creating DbConnection.
2025-06-13 19:58:53.045 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 19:58:53.045 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:58:53.045 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:58:53.045 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:58:53.045 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:58:53.045 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 19:58:53.045 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 19:58:53.045 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 19:58:53.045 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:58:53.045 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:58:53.046 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 19:58:53.046 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 19:58:53.046 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:58:53.046 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:58:53.072 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-13 19:58:53.182 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 19:58:53.196 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:58:53.196 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:58:53.196 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 19:58:53.196 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:58:53.197 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 19:58:53.197 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 19:58:53.198 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 19:58:53.201 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:58:53.201 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 19:58:53.202 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 19:58:53.202 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:58:53.203 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 19:58:53.203 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 19:58:53.203 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 19:58:53.206 +09:00 [DBG] Hosting starting
2025-06-13 19:58:53.242 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-13 19:58:53.242 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-13 19:58:53.508 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-13 19:58:53.508 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-13 19:58:53.508 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-13 19:58:53.508 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-13 19:58:53.509 +09:00 [INF] Hosting environment: Development
2025-06-13 19:58:53.509 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-13 19:58:53.509 +09:00 [DBG] Hosting started
2025-06-13 19:59:48.457 +09:00 [DBG] Connection id "0HNDAD5L1B6C9" accepted.
2025-06-13 19:59:48.458 +09:00 [DBG] Connection id "0HNDAD5L1B6C9" started.
2025-06-13 19:59:48.501 +09:00 [DBG] Connection 0HNDAD5L1B6C9 established using the following protocol: "Tls12"
2025-06-13 19:59:48.529 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-13 19:59:48.544 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-13 19:59:48.546 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-13 19:59:48.547 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 19:59:48.580 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 19:59:48.581 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 19:59:48.596 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 19:59:48.597 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 19:59:48.597 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 19:59:48.597 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 19:59:48.597 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 19:59:48.597 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 19:59:48.598 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:59:48.599 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 19:59:48.605 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 19:59:48.607 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-13 19:59:48.607 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-13 19:59:48.644 +09:00 [DBG] Connection id "0HNDAD5L1B6C9", Request id "0HNDAD5L1B6C9:00000001": started reading request body.
2025-06-13 19:59:48.645 +09:00 [DBG] Connection id "0HNDAD5L1B6C9", Request id "0HNDAD5L1B6C9:00000001": done reading request body.
2025-06-13 19:59:48.658 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-13 19:59:48.659 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 19:59:48.659 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 19:59:48.659 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 19:59:48.667 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 19:59:50.693 +09:00 [INF] Creating a new approval request.
2025-06-13 19:59:50.700 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"8e68a0ac-60ea-46ba-ba8c-f2abccad249d","RequestTitle":"test","RequestContent":"test","ApplicantEmployeeNumber":"EC20505","ApplicantName":"User 6","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-13T10:59:48.4233020Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0001","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 1","Position":"System Administrator","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0003","Sequence":2,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 3","Position":"Staff","Department":"IT","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-13 19:59:51.559 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:05:28.514 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-13 20:05:28.636 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-13 20:05:29.047 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:05:29.058 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:05:29.072 +09:00 [DBG] Created DbConnection. (12ms).
2025-06-13 20:05:29.082 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:05:29.092 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:05:29.094 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:05:29.097 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:05:29.099 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 20:05:29.100 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:05:29.100 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:05:29.103 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-13 20:05:29.104 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-13 20:05:29.104 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:05:29.105 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:05:29.109 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:05:29.134 +09:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:05:29.136 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:05:29.137 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-13 20:05:29.140 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:05:29.140 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:05:29.140 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:05:29.140 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:05:29.141 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:05:29.141 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:05:29.141 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 20:05:29.141 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 20:05:29.141 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 20:05:29.141 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:05:29.141 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:05:29.141 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:05:29.142 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:05:29.142 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:05:29.143 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:05:29.180 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-13 20:05:29.290 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 20:05:29.304 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:05:29.305 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:05:29.305 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:05:29.305 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:05:29.305 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:05:29.305 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 20:05:29.307 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 20:05:29.309 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:05:29.310 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 20:05:29.310 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:05:29.311 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:05:29.311 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:05:29.312 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:05:29.312 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:05:29.313 +09:00 [DBG] Hosting starting
2025-06-13 20:05:29.345 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-13 20:05:29.345 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-13 20:05:29.595 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-13 20:05:29.595 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-13 20:05:29.595 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-13 20:05:29.596 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-13 20:05:29.596 +09:00 [INF] Hosting environment: Development
2025-06-13 20:05:29.596 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-13 20:05:29.596 +09:00 [DBG] Hosting started
2025-06-13 20:05:48.228 +09:00 [DBG] Connection id "0HNDAD908AIDB" accepted.
2025-06-13 20:05:48.230 +09:00 [DBG] Connection id "0HNDAD908AIDB" started.
2025-06-13 20:05:48.374 +09:00 [DBG] Connection 0HNDAD908AIDB established using the following protocol: "Tls12"
2025-06-13 20:05:48.439 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-13 20:05:48.475 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 20:05:48.478 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 20:05:48.479 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:05:48.492 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:05:48.492 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:05:48.504 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:05:48.504 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:05:48.505 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:05:48.505 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:05:48.505 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:05:48.505 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:05:48.506 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:05:48.507 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:05:48.512 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:05:48.513 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:05:48.514 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:05:48.514 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:05:48.514 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:05:48.516 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:05:51.195 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:05:51.206 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-13 20:05:51.245 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 20:05:51.257 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:05:51.257 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:05:51.257 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:05:51.257 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:05:51.257 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:05:51.258 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:05:51.258 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:05:51.260 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:05:51.263 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:05:51.266 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:05:51.266 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-13 20:05:51.266 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:05:51.267 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:05:51.269 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:05:51.270 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:05:51.270 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:05:51.270 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:05:51.271 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:05:51.271 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:05:51.318 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 2810.9503ms
2025-06-13 20:05:51.321 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:05:51.321 +09:00 [DBG] Connection id "0HNDAD908AIDB" completed keep alive response.
2025-06-13 20:05:51.323 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:05:51.324 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:05:51.325 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:05:51.326 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 2888.585ms
2025-06-13 20:06:11.289 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-13 20:06:11.293 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-13 20:06:11.295 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-13 20:06:11.296 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:06:11.301 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:06:11.302 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:06:11.311 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:06:11.311 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:06:11.311 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:06:11.311 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:06:11.311 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:06:11.311 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:06:11.312 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:06:11.313 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:06:11.314 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 20:06:11.315 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-13 20:06:11.316 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-13 20:06:11.324 +09:00 [DBG] Connection id "0HNDAD908AIDB", Request id "0HNDAD908AIDB:00000002": started reading request body.
2025-06-13 20:06:11.326 +09:00 [DBG] Connection id "0HNDAD908AIDB", Request id "0HNDAD908AIDB:00000002": done reading request body.
2025-06-13 20:06:11.342 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-13 20:06:11.342 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:06:11.342 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:06:11.342 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 20:06:11.363 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:06:18.093 +09:00 [INF] Creating a new approval request.
2025-06-13 20:06:18.103 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"8b7461e5-d252-418d-8fb4-f28718297199","RequestTitle":"test","RequestContent":"test","ApplicantEmployeeNumber":"EC20505","ApplicantName":"User 6","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-13T11:06:11.2680920Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0001","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 1","Position":"System Administrator","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EC20507","Sequence":2,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 7","Position":"Staff","Department":"Sales","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-13 20:06:22.606 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:06:22.714 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:06:22.717 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:06:22.736 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:06:22.736 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:06:22.736 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:06:22.738 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-13 20:06:22.739 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-13 20:06:22.750 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-13 20:06:22.785 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:06:22.785 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:06:22.786 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:06:22.786 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:06:22.786 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-13 20:06:22.789 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-13 20:06:22.791 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:06:22.791 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:06:22.792 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:06:22.792 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 4), @p11='?' (Size = 4), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-13 20:06:22.794 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?', @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 4), @p11='?' (Size = 4), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-13 20:06:22.795 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:06:22.795 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 20:06:22.796 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:06:22.796 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:06:22.796 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:06:22.796 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 5), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 20:06:22.797 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 5), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 20:06:22.797 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:06:22.797 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:06:22.798 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:06:22.798 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:06:22.798 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:06:22.798 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 20:06:22.799 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 20:06:22.799 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:06:22.799 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:06:22.800 +09:00 [DBG] Committing transaction.
2025-06-13 20:06:22.801 +09:00 [DBG] Committed transaction.
2025-06-13 20:06:22.802 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:06:22.803 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:06:22.803 +09:00 [DBG] Disposing transaction.
2025-06-13 20:06:22.807 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:06:22.807 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:06:22.807 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:06:22.808 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 3 entities written to the database.
2025-06-13 20:06:22.808 +09:00 [INF] Approval request created successfully with ID: "8b7461e5-d252-418d-8fb4-f28718297199"
2025-06-13 20:06:22.808 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:06:22.808 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:06:22.808 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:06:22.808 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:06:22.809 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:06:22.809 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:06:22.817 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] for address (approvalId=[8b7461e5-d252-418d-8fb4-f28718297199],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-13 20:06:22.818 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) resulting in /api/ApprovalRequest/8b7461e5-d252-418d-8fb4-f28718297199 and 
2025-06-13 20:06:22.818 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] with result /api/ApprovalRequest/8b7461e5-d252-418d-8fb4-f28718297199
2025-06-13 20:06:22.820 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API) in 11508.8222ms
2025-06-13 20:06:22.820 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:06:22.820 +09:00 [DBG] Connection id "0HNDAD908AIDB" completed keep alive response.
2025-06-13 20:06:22.820 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:06:22.820 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:06:22.820 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:06:22.820 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 11532.5097ms
2025-06-13 20:06:24.406 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-13 20:06:24.406 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 20:06:24.406 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 20:06:24.407 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:06:24.409 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:06:24.409 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:06:24.409 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:06:24.409 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:06:24.409 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:06:24.409 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:06:24.409 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:06:24.409 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:06:24.409 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:06:24.411 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:06:24.411 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:06:24.411 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:06:24.411 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:06:24.411 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:06:24.411 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:06:24.411 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:06:31.475 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:06:31.482 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:06:31.482 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:06:31.482 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:06:31.483 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:06:31.483 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:06:31.483 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:06:31.483 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:06:31.483 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:06:31.483 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:06:31.484 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:06:31.484 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:06:31.484 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:06:31.484 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:06:31.484 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:06:31.484 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:06:31.484 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:06:31.484 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:06:31.484 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:06:31.484 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:06:31.485 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7076.051ms
2025-06-13 20:06:31.485 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:06:31.485 +09:00 [DBG] Connection id "0HNDAD908AIDB" completed keep alive response.
2025-06-13 20:06:31.485 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:06:31.485 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:06:31.485 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:06:31.485 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 7079.7032ms
2025-06-13 20:06:43.882 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - null null
2025-06-13 20:06:43.883 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-13 20:06:43.883 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-13 20:06:43.885 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:06:43.886 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:06:43.886 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:06:43.891 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:06:43.891 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:06:43.891 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:06:43.891 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:06:43.891 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:06:43.891 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:06:43.891 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:06:43.891 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:06:43.892 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:06:43.892 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-13 20:06:43.892 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:06:43.892 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:06:43.893 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:06:43.893 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:06:46.934 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:14:12.589 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 448716.2623ms
2025-06-13 20:14:12.594 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:14:12.596 +09:00 [DBG] Connection id "0HNDAD908AIDB" reset.
2025-06-13 20:14:12.597 +09:00 [DBG] Connection id "0HNDAD908AIDB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:14:12.599 +09:00 [DBG] Connection id "0HNDAD908AIDB" disconnecting.
2025-06-13 20:14:12.599 +09:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Cannot create a DbSet for 'ApprovalRequestWithCurrentStepDto' because this type is not included in the model for the context.
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.Include[TEntity,TProperty](IQueryable`1 source, Expression`1 navigationPropertyPath)
   at ApprovalService.Infrastructure.Repositories.ApprovalRequestRepository`1.GetRequestByIdAsync(Guid id) in /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/Infrastructure/Repositories/ApprovalRequestRepository.cs:line 119
   at ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById(Guid approvalId) in /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Controllers/ApprovalRequestController.cs:line 92
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-13 20:14:12.627 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:14:12.627 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - 500 null text/plain; charset=utf-8 448762.8555ms
2025-06-13 20:14:12.639 +09:00 [DBG] Connection id "0HNDAD908AIDB" stopped.
2025-06-13 20:18:54.579 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-13 20:18:54.708 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-13 20:18:55.031 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:18:55.037 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:18:55.043 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-13 20:18:55.047 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:18:55.055 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:18:55.057 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:18:55.059 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:18:55.062 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 20:18:55.062 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:18:55.062 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:18:55.064 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-13 20:18:55.065 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-13 20:18:55.065 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:18:55.066 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:18:55.069 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:18:55.082 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:18:55.083 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:18:55.085 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-13 20:18:55.087 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:18:55.087 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:18:55.087 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:18:55.088 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:18:55.088 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:18:55.088 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:18:55.088 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 20:18:55.088 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 20:18:55.088 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 20:18:55.088 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:18:55.088 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:18:55.088 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:18:55.089 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:18:55.089 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:18:55.089 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:18:55.111 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-13 20:18:55.210 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 20:18:55.223 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:18:55.224 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:18:55.224 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:18:55.224 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:18:55.224 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:18:55.224 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 20:18:55.225 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 20:18:55.228 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:18:55.228 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 20:18:55.229 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:18:55.229 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:18:55.230 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:18:55.230 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:18:55.230 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:18:55.232 +09:00 [DBG] Hosting starting
2025-06-13 20:18:55.266 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-13 20:18:55.267 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-13 20:18:55.541 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-13 20:18:55.541 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-13 20:18:55.541 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-13 20:18:55.542 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-13 20:18:55.542 +09:00 [INF] Hosting environment: Development
2025-06-13 20:18:55.542 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-13 20:18:55.543 +09:00 [DBG] Hosting started
2025-06-13 20:19:20.829 +09:00 [DBG] Connection id "0HNDADGIDUKCV" accepted.
2025-06-13 20:19:20.830 +09:00 [DBG] Connection id "0HNDADGIDUKCV" started.
2025-06-13 20:19:20.934 +09:00 [DBG] Connection 0HNDADGIDUKCV established using the following protocol: "Tls12"
2025-06-13 20:19:20.962 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - null null
2025-06-13 20:19:20.975 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-13 20:19:20.977 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-13 20:19:20.978 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:19:20.990 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:19:20.991 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:19:21.000 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:19:21.001 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:19:21.001 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:19:21.001 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:19:21.001 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:19:21.002 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:19:21.002 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:19:21.003 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:19:21.010 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:19:21.011 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-13 20:19:21.012 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:19:21.012 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:19:21.012 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:19:21.013 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:19:29.461 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:19:29.471 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-13 20:19:29.484 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-13 20:19:29.484 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-13 20:19:29.540 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-13 20:19:29.554 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(27) ? default(Guid?) : (Guid?)dataReader.GetGuid(27) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(27) ? default(object) : (object)dataReader.GetGuid(27) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(27) ? default(Guid) : dataReader.GetGuid(27);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(28) ? default(Guid) : dataReader.GetGuid(28);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(29) ? default(string) : dataReader.GetString(29);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(31) ? default(long?) : (long?)dataReader.GetInt64(31);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(33) ? default(DateTime) : dataReader.GetDateTime(33);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(34) ? default(string) : dataReader.GetString(34);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 20:19:29.572 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:19:29.572 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:19:29.572 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:19:29.572 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:19:29.572 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:19:29.572 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:19:29.574 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-13 20:19:29.575 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:19:29.577 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:19:29.595 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:19:29.620 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:19:29.629 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:19:29.629 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:19:29.630 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 52ms reading results.
2025-06-13 20:19:29.630 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:19:29.630 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:19:30.937 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:19:30.939 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:19:30.939 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:19:30.939 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:19:30.941 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:19:30.941 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 20:19:31.019 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 10016.3831ms
2025-06-13 20:19:31.022 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:19:31.023 +09:00 [DBG] Connection id "0HNDADGIDUKCV" completed keep alive response.
2025-06-13 20:19:31.024 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:19:31.025 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:19:31.025 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:19:31.026 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - 200 null application/json; charset=utf-8 10065.1594ms
2025-06-13 20:19:42.743 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-13 20:19:42.748 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 20:19:42.748 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 20:19:42.749 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:19:42.752 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:19:42.753 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:19:42.763 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:19:42.764 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:19:42.764 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:19:42.764 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:19:42.764 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:19:42.764 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:19:42.765 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:19:42.767 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:19:42.770 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:19:42.770 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:19:42.771 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:19:42.771 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:19:42.771 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:19:42.775 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:19:49.164 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:19:49.171 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-13 20:19:49.185 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 20:19:49.191 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:19:49.191 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:19:49.191 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:19:49.191 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:19:49.191 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:19:49.191 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:19:49.191 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:19:49.191 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:19:49.192 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:19:49.192 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:19:49.193 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:19:49.193 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:19:49.193 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:19:49.193 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:19:49.193 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:19:49.193 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:19:49.193 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:19:49.194 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:19:49.194 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:19:49.197 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6432.6969ms
2025-06-13 20:19:49.197 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:19:49.197 +09:00 [DBG] Connection id "0HNDADGIDUKCV" completed keep alive response.
2025-06-13 20:19:49.197 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:19:49.197 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:19:49.197 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:19:49.198 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 6455.5502ms
2025-06-13 20:19:55.748 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-13 20:19:55.749 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-13 20:19:55.749 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-13 20:19:55.749 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:19:55.753 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:19:55.753 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:19:55.759 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 20:19:55.759 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:19:55.759 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:19:55.759 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:19:55.759 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:19:55.759 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:19:55.759 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 20:20:47.749 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 20:20:47.850 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 20:20:47.850 +09:00 [DBG] Connection id "0HNDADGIDUKD0" accepted.
2025-06-13 20:20:47.851 +09:00 [DBG] Connection id "0HNDADGIDUKD0" started.
2025-06-13 20:20:47.851 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 20:20:47.851 +09:00 [DBG] Connection id "0HNDADGIDUKD1" accepted.
2025-06-13 20:20:47.851 +09:00 [DBG] Connection id "0HNDADGIDUKD1" started.
2025-06-13 20:20:47.851 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 20:20:47.851 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 20:20:47.851 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 20:20:47.855 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 20:20:47.867 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:20:47.869 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)'
2025-06-13 20:20:47.870 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-13 20:20:47.880 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
            3 -> 15
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
            3 -> 15
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            ApprovalRequest entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                ApprovalRequest instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(ApprovalRequest);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (ApprovalRequest)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                            {
                                return 
                                {
                                    ApprovalRequest instance;
                                    instance = new ApprovalRequest();
                                    instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                    instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                    instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                    instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                    instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                    instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                    instance.<Status>k__BackingField = dataReader.GetString(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(ApprovalRequest)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (ApprovalRequest)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                trackingQuery: True, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalStep instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalStep);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalStep)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
            fixup: (namelessParameter{9}, namelessParameter{10}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                    entity: namelessParameter{9}, 
                    value: namelessParameter{10}, 
                    forMaterialization: True);
                return namelessParameter{10}.<ApprovalRequest>k__BackingField = namelessParameter{9};
            }, 
            trackingQuery: True);
        return IsTrue(resultCoordinator.ResultReady)
         ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 20:20:47.887 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:20:47.888 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-13 20:20:47.888 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:20:47.888 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:20:47.888 +09:00 [DBG] Connection 0HNDADGIDUKD1 established using the following protocol: "Tls12"
2025-06-13 20:20:47.889 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:20:47.889 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:20:47.889 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:20:47.890 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 20:20:47.892 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 20:20:47.893 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:20:47.893 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:20:47.893 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:20:47.894 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:20:47.894 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:20:47.894 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:20:47.894 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:20:47.894 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:20:47.894 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:20:47.894 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:20:47.895 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 52138.0715ms
2025-06-13 20:20:47.896 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:20:47.896 +09:00 [DBG] Connection id "0HNDADGIDUKCV" completed keep alive response.
2025-06-13 20:20:47.896 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:20:47.896 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:20:47.896 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:20:47.896 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 52150.4646ms
2025-06-13 20:20:47.896 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-13 20:20:47.898 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-13 20:20:47.898 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-13 20:20:47.898 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:20:47.901 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:20:47.901 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:20:47.903 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 20:20:47.903 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:20:47.904 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:20:47.904 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:20:47.904 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:20:47.904 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:20:47.905 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 20:20:49.458 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-13 20:20:49.459 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 20:20:49.460 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 20:20:49.460 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:20:49.460 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:20:49.460 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:20:49.460 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:20:49.460 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:20:49.460 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:20:49.460 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:20:49.460 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:20:49.461 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:20:49.461 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:20:49.463 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 20:20:49.465 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:20:49.465 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 20:20:49.465 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:20:49.465 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:20:49.465 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:20:49.465 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:20:49.465 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:20:49.466 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 20:20:49.466 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:20:49.467 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 20:20:49.467 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 20:20:49.467 +09:00 [DBG] Connection 0HNDADGIDUKD0 established using the following protocol: "Tls12"
2025-06-13 20:20:56.047 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 20:20:56.048 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 20:20:57.072 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:20:57.074 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:20:57.077 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:20:57.077 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:20:57.077 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:20:57.077 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:20:57.077 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:20:57.078 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:20:57.078 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:20:57.078 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 20:20:57.078 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 20:20:57.078 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:20:57.078 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:20:57.078 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:20:57.078 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:20:57.079 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:20:57.078 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:20:57.080 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-13 20:20:57.080 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:20:57.080 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:20:57.080 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:20:57.080 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:20:57.080 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:20:57.081 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:20:57.081 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:20:57.081 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:20:57.081 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:20:57.081 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:20:57.081 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:20:57.081 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 9177.3303ms
2025-06-13 20:20:57.081 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:20:57.081 +09:00 [DBG] Connection id "0HNDADGIDUKD1" completed keep alive response.
2025-06-13 20:20:57.081 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:20:57.081 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:20:57.081 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:20:57.081 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 9185.3476ms
2025-06-13 20:20:57.082 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:20:57.083 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:20:57.083 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:20:57.083 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:20:57.083 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:20:57.083 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:20:57.083 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:20:57.083 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:20:57.083 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:20:57.084 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:20:57.084 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:20:57.085 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7624.5516ms
2025-06-13 20:20:57.085 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:20:57.086 +09:00 [DBG] Connection id "0HNDADGIDUKCV" completed keep alive response.
2025-06-13 20:20:57.086 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:20:57.086 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:20:57.086 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:20:57.086 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 7628.0277ms
2025-06-13 20:21:28.489 +09:00 [DBG] Connection id "0HNDADGIDUKCV" received FIN.
2025-06-13 20:21:28.542 +09:00 [DBG] Connection id "0HNDADGIDUKCV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:21:28.547 +09:00 [DBG] Connection id "0HNDADGIDUKCV" disconnecting.
2025-06-13 20:21:28.550 +09:00 [DBG] Connection id "0HNDADGIDUKCV" stopped.
2025-06-13 20:21:58.463 +09:00 [DBG] Connection id "0HNDADGIDUKD1" received FIN.
2025-06-13 20:21:58.467 +09:00 [DBG] Connection id "0HNDADGIDUKD0" received FIN.
2025-06-13 20:21:58.470 +09:00 [DBG] Connection id "0HNDADGIDUKD0" disconnecting.
2025-06-13 20:21:58.470 +09:00 [DBG] Connection id "0HNDADGIDUKD1" disconnecting.
2025-06-13 20:21:58.472 +09:00 [DBG] Connection id "0HNDADGIDUKD0" stopped.
2025-06-13 20:21:58.472 +09:00 [DBG] Connection id "0HNDADGIDUKD1" stopped.
2025-06-13 20:21:58.472 +09:00 [DBG] Connection id "0HNDADGIDUKD0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:21:58.476 +09:00 [DBG] Connection id "0HNDADGIDUKD1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:23:25.813 +09:00 [DBG] Connection id "0HNDADGIDUKD2" accepted.
2025-06-13 20:23:25.839 +09:00 [DBG] Connection id "0HNDADGIDUKD2" started.
2025-06-13 20:23:25.862 +09:00 [DBG] Connection 0HNDADGIDUKD2 established using the following protocol: "Tls12"
2025-06-13 20:23:25.870 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-13 20:23:25.870 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:23:25.870 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:23:25.870 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:23:25.871 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:23:25.871 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:23:25.872 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:23:25.872 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:23:25.872 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:23:25.872 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:23:25.872 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:23:25.872 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:23:25.872 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:23:25.873 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:23:25.873 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:23:25.873 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:23:25.873 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:23:25.873 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:23:25.873 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:23:25.873 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:23:43.144 +09:00 [DBG] Connection id "0HNDADGIDUKD3" accepted.
2025-06-13 20:23:43.145 +09:00 [DBG] Connection id "0HNDADGIDUKD3" started.
2025-06-13 20:23:43.146 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:23:43.148 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:23:43.148 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:23:43.148 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:23:43.148 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:23:43.149 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:23:43.149 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:23:43.149 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:23:43.149 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:23:43.150 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:23:43.150 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:23:43.150 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:23:43.150 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:23:43.151 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:23:43.151 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:23:43.151 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:23:43.151 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:23:43.151 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:23:43.151 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:23:43.152 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:23:43.152 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 17280.7498ms
2025-06-13 20:23:43.152 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:23:43.152 +09:00 [DBG] Connection id "0HNDADGIDUKD2" completed keep alive response.
2025-06-13 20:23:43.152 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:23:43.152 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:23:43.152 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:23:43.152 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 17283.5234ms
2025-06-13 20:23:43.156 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-13 20:23:43.156 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:23:43.156 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:23:43.156 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:23:43.156 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:23:43.157 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:23:43.157 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:23:43.157 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:23:43.157 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:23:43.157 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:23:43.157 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:23:43.157 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:23:43.157 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:23:43.157 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:23:43.157 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:23:43.158 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:23:43.158 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:23:43.158 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:23:43.158 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:23:43.158 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:23:45.010 +09:00 [DBG] Connection 0HNDADGIDUKD3 established using the following protocol: "Tls12"
2025-06-13 20:23:45.011 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:23:45.012 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:23:45.012 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:23:45.012 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:23:45.012 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:23:45.012 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:23:45.012 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:23:45.013 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:23:45.013 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:23:45.013 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:23:45.013 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:23:45.013 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:23:45.013 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:23:45.013 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:23:45.013 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:23:45.014 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:23:45.014 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:23:45.014 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:23:45.014 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:23:45.014 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:23:45.014 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 1857.123ms
2025-06-13 20:23:45.014 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:23:45.014 +09:00 [DBG] Connection id "0HNDADGIDUKD2" completed keep alive response.
2025-06-13 20:23:45.014 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:23:45.014 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:23:45.014 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:23:45.014 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 1858.3913ms
2025-06-13 20:24:37.683 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-13 20:24:37.690 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-13 20:24:37.691 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-13 20:24:37.692 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:24:37.694 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:24:37.695 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:24:37.701 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:24:37.702 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:24:37.702 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:24:37.702 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:24:37.702 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:24:37.702 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:24:37.702 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:24:37.703 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:24:37.705 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 20:24:37.706 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-13 20:24:37.707 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-13 20:24:37.716 +09:00 [DBG] Connection id "0HNDADGIDUKD3", Request id "0HNDADGIDUKD3:00000001": started reading request body.
2025-06-13 20:24:37.720 +09:00 [DBG] Connection id "0HNDADGIDUKD3", Request id "0HNDADGIDUKD3:00000001": done reading request body.
2025-06-13 20:24:37.737 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-13 20:24:37.738 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:24:37.738 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:24:37.738 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 20:24:37.746 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:24:39.909 +09:00 [INF] Creating a new approval request.
2025-06-13 20:24:39.915 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"ca6c3fee-5637-48ea-82d8-133eda7f96a4","RequestTitle":"UUU","RequestContent":"UUU","ApplicantEmployeeNumber":"EC20507","ApplicantName":"User 7","ApplicantPosition":null,"ApplicantDepartment":"Sales","Status":"Pending","RequestedAt":"2025-06-13T11:24:37.6380910Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-13 20:24:39.918 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:24:39.918 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:24:39.918 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:24:39.918 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:24:39.918 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-13 20:24:39.918 +09:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-06-13 20:24:39.920 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API) in 2218.0715ms
2025-06-13 20:24:39.920 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:24:39.920 +09:00 [DBG] Connection id "0HNDADGIDUKD3" completed keep alive response.
2025-06-13 20:24:39.920 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 400 null text/plain; charset=utf-8 2237.0914ms
2025-06-13 20:24:46.534 +09:00 [DBG] Connection id "0HNDADGIDUKD2" received FIN.
2025-06-13 20:24:46.534 +09:00 [DBG] Connection id "0HNDADGIDUKD2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:24:46.534 +09:00 [DBG] Connection id "0HNDADGIDUKD2" disconnecting.
2025-06-13 20:24:46.537 +09:00 [DBG] Connection id "0HNDADGIDUKD2" stopped.
2025-06-13 20:24:56.122 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-13 20:24:56.122 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-13 20:24:56.122 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-13 20:24:56.122 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:24:56.122 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:24:56.123 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:24:56.123 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:24:56.123 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:24:56.123 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:24:56.123 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:24:56.123 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:24:56.123 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:24:56.123 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:24:56.124 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:24:56.124 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 20:24:56.124 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-13 20:24:56.124 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-13 20:24:56.125 +09:00 [DBG] Connection id "0HNDADGIDUKD3", Request id "0HNDADGIDUKD3:00000002": started reading request body.
2025-06-13 20:24:56.125 +09:00 [DBG] Connection id "0HNDADGIDUKD3", Request id "0HNDADGIDUKD3:00000002": done reading request body.
2025-06-13 20:24:56.125 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-13 20:24:56.125 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:24:56.125 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:24:56.125 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 20:24:56.125 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:25:12.467 +09:00 [INF] Creating a new approval request.
2025-06-13 20:25:12.494 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"0e82701d-f78b-4851-b541-9f3103c961e2","RequestTitle":"UUU","RequestContent":"UUU","ApplicantEmployeeNumber":"EC20507","ApplicantName":"User 7","ApplicantPosition":null,"ApplicantDepartment":"Sales","Status":"Pending","RequestedAt":"2025-06-13T11:24:56.1122490Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-13 20:25:12.494 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:25:12.495 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:25:12.495 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:25:12.495 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:25:12.495 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-13 20:25:12.495 +09:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-06-13 20:25:12.496 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API) in 16372.9758ms
2025-06-13 20:25:12.496 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:25:12.497 +09:00 [DBG] Connection id "0HNDADGIDUKD3" completed keep alive response.
2025-06-13 20:25:12.497 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 400 null text/plain; charset=utf-8 16376.0835ms
2025-06-13 20:27:22.727 +09:00 [DBG] Connection id "0HNDADGIDUKD3" received FIN.
2025-06-13 20:27:22.778 +09:00 [DBG] Connection id "0HNDADGIDUKD3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:27:22.779 +09:00 [DBG] Connection id "0HNDADGIDUKD3" disconnecting.
2025-06-13 20:27:22.803 +09:00 [DBG] Connection id "0HNDADGIDUKD3" stopped.
2025-06-13 20:27:50.225 +09:00 [DBG] Connection id "0HNDADGIDUKD4" accepted.
2025-06-13 20:27:50.251 +09:00 [DBG] Connection id "0HNDADGIDUKD4" started.
2025-06-13 20:27:50.276 +09:00 [DBG] Connection 0HNDADGIDUKD4 established using the following protocol: "Tls12"
2025-06-13 20:27:50.283 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-13 20:27:50.283 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:27:50.283 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:27:50.283 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:27:50.284 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:27:50.284 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:27:50.284 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:27:50.284 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:27:50.284 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:27:50.284 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:27:50.284 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:27:50.284 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:27:50.284 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:27:50.287 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:27:50.288 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:27:50.289 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:27:50.289 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:27:50.289 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:27:50.289 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:27:50.290 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:27:57.457 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:27:57.459 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:27:57.459 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:27:57.459 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:27:57.460 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:27:57.460 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:27:57.460 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:27:57.460 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:27:57.461 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:27:57.462 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:27:57.462 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:27:57.463 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:27:57.463 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:27:57.463 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:27:57.463 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:27:57.463 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:27:57.464 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:27:57.464 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:27:57.464 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:27:57.464 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:27:57.465 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7180.707ms
2025-06-13 20:27:57.465 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:27:57.465 +09:00 [DBG] Connection id "0HNDADGIDUKD4" completed keep alive response.
2025-06-13 20:27:57.465 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:27:57.465 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:27:57.465 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:27:57.466 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 7183.2986ms
2025-06-13 20:28:08.339 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-13 20:28:08.340 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-13 20:28:08.340 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-13 20:28:08.340 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:28:08.340 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:28:08.340 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:28:08.341 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 20:28:08.341 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:28:08.341 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:28:08.341 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:28:08.341 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:28:08.341 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:28:08.341 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 20:28:13.903 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 20:28:13.903 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 20:28:13.903 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 20:28:13.904 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 20:28:13.904 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 20:28:13.904 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 20:28:13.904 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 20:28:13.905 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:28:13.906 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:28:13.906 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:28:13.906 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:28:13.907 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:28:13.907 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:28:13.907 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:28:13.907 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:28:13.907 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 20:28:13.908 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 20:28:13.909 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:28:13.968 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:28:14.013 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:28:14.014 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:28:14.015 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:28:14.015 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:28:14.016 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:28:14.016 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:28:14.016 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 108ms reading results.
2025-06-13 20:28:14.016 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:28:14.017 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:28:14.017 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:28:14.017 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:28:14.017 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:28:14.017 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:28:14.017 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:28:14.017 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:28:14.024 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 5683.18ms
2025-06-13 20:28:14.024 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:28:14.025 +09:00 [DBG] Connection id "0HNDADGIDUKD4" completed keep alive response.
2025-06-13 20:28:14.025 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:28:14.025 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:28:14.025 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:28:14.025 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 5686.1092ms
2025-06-13 20:29:20.201 +09:00 [DBG] Connection id "0HNDADGIDUKD4" received FIN.
2025-06-13 20:29:20.232 +09:00 [DBG] Connection id "0HNDADGIDUKD4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:29:20.234 +09:00 [DBG] Connection id "0HNDADGIDUKD4" disconnecting.
2025-06-13 20:29:20.237 +09:00 [DBG] Connection id "0HNDADGIDUKD4" stopped.
2025-06-13 20:30:06.629 +09:00 [DBG] Connection id "0HNDADGIDUKD5" accepted.
2025-06-13 20:30:06.634 +09:00 [DBG] Connection id "0HNDADGIDUKD5" started.
2025-06-13 20:30:06.660 +09:00 [DBG] Connection 0HNDADGIDUKD5 established using the following protocol: "Tls12"
2025-06-13 20:30:06.666 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-13 20:30:06.667 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:30:06.667 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:30:06.667 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:30:06.668 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:30:06.668 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:30:06.669 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:30:06.669 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:30:06.669 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:30:06.669 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:30:06.669 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:30:06.669 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:30:06.669 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:30:06.670 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:30:06.670 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:30:06.670 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:30:06.670 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:30:06.670 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:30:06.670 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:30:06.670 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:30:13.456 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:30:13.459 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:30:13.459 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:30:13.459 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:30:13.459 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:30:13.460 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:30:13.460 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:30:13.460 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:30:13.460 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:30:13.462 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:30:13.463 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:30:13.463 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:30:13.463 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:30:13.463 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:30:13.464 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:30:13.464 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:30:13.464 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:30:13.464 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:30:13.464 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:30:13.464 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:30:13.465 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6796.4175ms
2025-06-13 20:30:13.465 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:30:13.465 +09:00 [DBG] Connection id "0HNDADGIDUKD5" completed keep alive response.
2025-06-13 20:30:13.466 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:30:13.466 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:30:13.467 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:30:13.468 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 6800.9937ms
2025-06-13 20:31:24.048 +09:00 [DBG] Connection id "0HNDADGIDUKD5" received FIN.
2025-06-13 20:31:24.098 +09:00 [DBG] Connection id "0HNDADGIDUKD5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:31:24.099 +09:00 [DBG] Connection id "0HNDADGIDUKD5" disconnecting.
2025-06-13 20:31:24.100 +09:00 [DBG] Connection id "0HNDADGIDUKD5" stopped.
2025-06-13 20:33:28.849 +09:00 [DBG] Connection id "0HNDADGIDUKD6" accepted.
2025-06-13 20:33:28.876 +09:00 [DBG] Connection id "0HNDADGIDUKD6" started.
2025-06-13 20:33:28.900 +09:00 [DBG] Connection 0HNDADGIDUKD6 established using the following protocol: "Tls12"
2025-06-13 20:33:28.904 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-13 20:33:28.905 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:33:28.905 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:33:28.905 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:33:28.906 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:33:28.906 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:33:28.906 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:33:28.906 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:33:28.906 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:33:28.906 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:33:28.906 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:33:28.906 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:33:28.906 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:33:28.907 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:33:28.907 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:33:28.907 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:33:28.907 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:33:28.907 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:33:28.907 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:33:28.908 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:33:36.544 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:33:36.546 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:33:36.546 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:33:36.546 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:33:36.548 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:33:36.548 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:33:36.548 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:33:36.548 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:33:36.549 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:33:36.550 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:33:36.551 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:33:36.551 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:33:36.551 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:33:36.551 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:33:36.551 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:33:36.551 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:33:36.551 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:33:36.551 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:33:36.551 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:33:36.551 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:33:36.552 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7645.8991ms
2025-06-13 20:33:36.552 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:33:36.552 +09:00 [DBG] Connection id "0HNDADGIDUKD6" completed keep alive response.
2025-06-13 20:33:36.552 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:33:36.552 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:33:36.552 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:33:36.553 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 7648.3595ms
2025-06-13 20:33:55.432 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-13 20:33:55.433 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-13 20:33:55.433 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-13 20:33:55.433 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:33:55.433 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:33:55.433 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:33:55.433 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:33:55.433 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:33:55.433 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:33:55.433 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:33:55.434 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:33:55.434 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:33:55.434 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:33:55.434 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:33:55.434 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 20:33:55.434 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-13 20:33:55.434 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-13 20:33:55.434 +09:00 [DBG] Connection id "0HNDADGIDUKD6", Request id "0HNDADGIDUKD6:00000002": started reading request body.
2025-06-13 20:33:55.434 +09:00 [DBG] Connection id "0HNDADGIDUKD6", Request id "0HNDADGIDUKD6:00000002": done reading request body.
2025-06-13 20:33:55.439 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-13 20:33:55.439 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:33:55.439 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:33:55.439 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 20:33:55.442 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:34:00.526 +09:00 [INF] Creating a new approval request.
2025-06-13 20:34:01.141 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"835b9df2-55e6-4037-a6b6-c17135435e17","RequestTitle":"test","RequestContent":"adfadf","ApplicantEmployeeNumber":"EC20507","ApplicantName":"User 7","ApplicantPosition":null,"ApplicantDepartment":"Sales","Status":"Pending","RequestedAt":"2025-06-13T11:33:55.4032080Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0001","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 1","Position":"System Administrator","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EC20505","Sequence":2,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 6","Position":"Staff","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-13 20:36:56.295 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-13 20:36:56.412 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-13 20:36:56.694 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:36:56.700 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:36:56.705 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-13 20:36:56.708 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:36:56.715 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:36:56.716 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:36:56.718 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:36:56.720 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 20:36:56.720 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:36:56.720 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:36:56.722 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-13 20:36:56.723 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-13 20:36:56.723 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:36:56.724 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:36:56.726 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:36:56.739 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:36:56.740 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:36:56.741 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-13 20:36:56.744 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:36:56.744 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:36:56.744 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:36:56.744 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:36:56.744 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:36:56.744 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:36:56.745 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 20:36:56.745 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 20:36:56.745 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 20:36:56.745 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:36:56.745 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:36:56.745 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:36:56.745 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:36:56.745 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:36:56.745 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:36:56.813 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-13 20:36:56.906 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 20:36:56.919 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:36:56.920 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:36:56.920 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:36:56.920 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:36:56.920 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:36:56.920 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 20:36:56.921 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 20:36:56.923 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:36:56.924 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 20:36:56.925 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:36:56.925 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:36:56.925 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:36:56.926 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:36:56.926 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:36:56.927 +09:00 [DBG] Hosting starting
2025-06-13 20:36:56.957 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-13 20:36:56.957 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-13 20:36:57.192 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-13 20:36:57.192 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-13 20:36:57.192 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-13 20:36:57.192 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-13 20:36:57.193 +09:00 [INF] Hosting environment: Development
2025-06-13 20:36:57.193 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-13 20:36:57.193 +09:00 [DBG] Hosting started
2025-06-13 20:37:23.962 +09:00 [DBG] Connection id "0HNDADQL7GL5D" accepted.
2025-06-13 20:37:23.963 +09:00 [DBG] Connection id "0HNDADQL7GL5D" started.
2025-06-13 20:37:24.009 +09:00 [DBG] Connection 0HNDADQL7GL5D established using the following protocol: "Tls12"
2025-06-13 20:37:24.066 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-13 20:37:24.081 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-13 20:37:24.083 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-13 20:37:24.084 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:37:24.095 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:37:24.095 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:37:24.107 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:37:24.108 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:37:24.109 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:37:24.109 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:37:24.109 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:37:24.109 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:37:24.111 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:37:24.113 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:37:24.119 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 20:37:24.120 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-13 20:37:24.120 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-13 20:37:24.158 +09:00 [DBG] Connection id "0HNDADQL7GL5D", Request id "0HNDADQL7GL5D:00000001": started reading request body.
2025-06-13 20:37:24.160 +09:00 [DBG] Connection id "0HNDADQL7GL5D", Request id "0HNDADQL7GL5D:00000001": done reading request body.
2025-06-13 20:37:24.172 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-13 20:37:24.172 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:37:24.172 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:37:24.172 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 20:37:24.179 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:37:27.788 +09:00 [INF] Creating a new approval request.
2025-06-13 20:37:27.794 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"363bb929-45f3-4722-a06f-e113dc3578af","RequestTitle":"test","RequestContent":"adfadf","ApplicantEmployeeNumber":"EC20507","ApplicantName":"User 7","ApplicantPosition":null,"ApplicantDepartment":"Sales","Status":"Pending","RequestedAt":"2025-06-13T11:37:23.9355150Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0001","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 1","Position":"System Administrator","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EC20505","Sequence":2,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 6","Position":"Staff","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-13 20:38:18.826 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-13 20:38:18.941 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-13 20:38:19.229 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:38:19.234 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:38:19.240 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-13 20:38:19.243 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:38:19.251 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:19.254 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:38:19.256 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:38:19.258 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 20:38:19.258 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:38:19.258 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:38:19.261 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-13 20:38:19.261 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-13 20:38:19.261 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:38:19.262 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:19.265 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:38:19.279 +09:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:38:19.280 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:19.282 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-13 20:38:19.284 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:38:19.284 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:38:19.284 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:38:19.285 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:19.285 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:38:19.285 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:38:19.285 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-13 20:38:19.285 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 20:38:19.285 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-13 20:38:19.285 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:38:19.285 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:19.285 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:38:19.285 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-13 20:38:19.285 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:19.286 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:38:19.307 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-13 20:38:19.405 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 20:38:19.418 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:38:19.419 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:19.419 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:38:19.419 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:38:19.419 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:38:19.419 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 20:38:19.420 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-13 20:38:19.423 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:19.423 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 20:38:19.424 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:19.424 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:38:19.425 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:38:19.425 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:38:19.425 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:38:19.427 +09:00 [DBG] Hosting starting
2025-06-13 20:38:19.457 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-13 20:38:19.458 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-13 20:38:19.703 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-13 20:38:19.703 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-13 20:38:19.703 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-13 20:38:19.703 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-13 20:38:19.704 +09:00 [INF] Hosting environment: Development
2025-06-13 20:38:19.704 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-13 20:38:19.704 +09:00 [DBG] Hosting started
2025-06-13 20:38:30.617 +09:00 [DBG] Connection id "0HNDADR936E3J" accepted.
2025-06-13 20:38:30.619 +09:00 [DBG] Connection id "0HNDADR936E3J" started.
2025-06-13 20:38:30.656 +09:00 [DBG] Connection 0HNDADR936E3J established using the following protocol: "Tls12"
2025-06-13 20:38:30.686 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-13 20:38:30.701 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-13 20:38:30.703 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-13 20:38:30.703 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:38:30.714 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:38:30.715 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:38:30.724 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:38:30.725 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:38:30.725 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:38:30.725 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:38:30.725 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:38:30.725 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:38:30.726 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:38:30.727 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:38:30.733 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 20:38:30.734 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-13 20:38:30.734 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-13 20:38:30.768 +09:00 [DBG] Connection id "0HNDADR936E3J", Request id "0HNDADR936E3J:00000001": started reading request body.
2025-06-13 20:38:30.769 +09:00 [DBG] Connection id "0HNDADR936E3J", Request id "0HNDADR936E3J:00000001": done reading request body.
2025-06-13 20:38:30.781 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-13 20:38:30.781 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:38:30.781 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:38:30.781 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-13 20:38:30.788 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:38:33.168 +09:00 [INF] Creating a new approval request.
2025-06-13 20:38:33.175 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"a63d9f45-7963-47c4-bd61-6ff361ff66c5","RequestTitle":"test","RequestContent":"adfadf","ApplicantEmployeeNumber":"EC20507","ApplicantName":"User 7","ApplicantPosition":null,"ApplicantDepartment":"Sales","Status":"Pending","RequestedAt":"2025-06-13T11:38:30.5990810Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0001","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 1","Position":"System Administrator","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EC20505","Sequence":2,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 6","Position":"Staff","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-13 20:38:44.598 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:38:44.666 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:38:44.669 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:38:44.685 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:38:44.686 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:38:44.686 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:38:44.687 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-13 20:38:44.688 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-13 20:38:44.699 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-13 20:38:44.732 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:38:44.733 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:38:44.733 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:38:44.733 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:44.733 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-13 20:38:44.735 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-13 20:38:44.736 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:38:44.736 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:38:44.737 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:38:44.738 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 5), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 6), @p11='?' (Size = 4), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-13 20:38:44.741 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 5), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 6), @p11='?' (Size = 4), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-13 20:38:44.742 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:44.742 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 20:38:44.743 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:38:44.743 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:38:44.743 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:38:44.743 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 20:38:44.743 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 20:38:44.743 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:44.743 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:38:44.744 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:38:44.744 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:38:44.744 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:38:44.744 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 20:38:44.744 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 20:38:44.744 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:44.744 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:38:44.746 +09:00 [DBG] Committing transaction.
2025-06-13 20:38:44.747 +09:00 [DBG] Committed transaction.
2025-06-13 20:38:44.748 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:44.748 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:38:44.749 +09:00 [DBG] Disposing transaction.
2025-06-13 20:38:44.752 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:38:44.752 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:38:44.752 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:38:44.752 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 3 entities written to the database.
2025-06-13 20:38:44.753 +09:00 [INF] Approval request created successfully with ID: "a63d9f45-7963-47c4-bd61-6ff361ff66c5"
2025-06-13 20:38:44.754 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:38:44.755 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:38:44.755 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:38:44.755 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:38:44.755 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:38:44.755 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-13 20:38:44.764 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] for address (approvalId=[a63d9f45-7963-47c4-bd61-6ff361ff66c5],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-13 20:38:44.765 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) resulting in /api/ApprovalRequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 and 
2025-06-13 20:38:44.765 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] with result /api/ApprovalRequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5
2025-06-13 20:38:44.781 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API) in 14054.5045ms
2025-06-13 20:38:44.783 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-13 20:38:44.783 +09:00 [DBG] Connection id "0HNDADR936E3J" completed keep alive response.
2025-06-13 20:38:44.784 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:38:44.786 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:38:44.786 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:38:44.787 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 14102.8712ms
2025-06-13 20:38:47.338 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-13 20:38:47.341 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:38:47.341 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:38:47.341 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:38:47.349 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:38:47.349 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:38:47.356 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:38:47.356 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:38:47.356 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:38:47.356 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:38:47.356 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:38:47.356 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:38:47.356 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:38:47.358 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:38:47.358 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:38:47.359 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:38:47.359 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:38:47.359 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:38:47.360 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:38:47.361 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:38:52.543 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:38:52.558 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-13 20:38:52.603 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 20:38:52.615 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:38:52.615 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:38:52.615 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:38:52.615 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:52.616 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:38:52.616 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:38:52.616 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:38:52.616 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:38:52.616 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:38:52.620 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:52.620 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-13 20:38:52.620 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:52.620 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:38:52.620 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:38:52.620 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:38:52.620 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:38:52.620 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:38:52.620 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:38:52.621 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:38:52.621 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 5265.2526ms
2025-06-13 20:38:52.621 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:38:52.621 +09:00 [DBG] Connection id "0HNDADR936E3J" completed keep alive response.
2025-06-13 20:38:52.622 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:38:52.622 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:38:52.622 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:38:52.622 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 5284.5166ms
2025-06-13 20:38:56.679 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - null null
2025-06-13 20:38:56.679 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:38:56.679 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:38:56.679 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:38:56.683 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:38:56.683 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:38:56.687 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:38:56.688 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:38:56.688 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:38:56.688 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:38:56.688 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:38:56.688 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:38:56.688 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:38:56.690 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:38:56.690 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:38:56.690 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-13 20:38:56.690 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:38:56.691 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:38:56.691 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:38:56.691 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:38:59.610 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:38:59.615 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-13 20:38:59.623 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-13 20:38:59.625 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-13 20:38:59.672 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-13 20:38:59.687 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(27) ? default(Guid?) : (Guid?)dataReader.GetGuid(27) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(27) ? default(object) : (object)dataReader.GetGuid(27) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(27) ? default(Guid) : dataReader.GetGuid(27);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(28) ? default(Guid) : dataReader.GetGuid(28);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(29) ? default(string) : dataReader.GetString(29);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(31) ? default(long?) : (long?)dataReader.GetInt64(31);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(33) ? default(DateTime) : dataReader.GetDateTime(33);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(34) ? default(string) : dataReader.GetString(34);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-13 20:38:59.694 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:38:59.694 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:38:59.694 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:38:59.695 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:59.695 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:38:59.695 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:38:59.695 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:38:59.695 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:38:59.696 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:38:59.699 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:38:59.703 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:38:59.704 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:38:59.704 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:59.704 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 8ms reading results.
2025-06-13 20:38:59.704 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:38:59.704 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:39:00.497 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:39:00.497 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:39:00.497 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:39:00.497 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:39:00.497 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:39:00.497 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 20:39:00.497 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 3809.718ms
2025-06-13 20:39:00.497 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:39:00.497 +09:00 [DBG] Connection id "0HNDADR936E3J" completed keep alive response.
2025-06-13 20:39:00.498 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:39:00.498 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:39:00.498 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:39:00.498 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - 200 null application/json; charset=utf-8 3818.7648ms
2025-06-13 20:39:35.888 +09:00 [DBG] Connection id "0HNDADR936E3K" accepted.
2025-06-13 20:39:35.913 +09:00 [DBG] Connection id "0HNDADR936E3K" started.
2025-06-13 20:39:35.939 +09:00 [DBG] Connection 0HNDADR936E3K established using the following protocol: "Tls12"
2025-06-13 20:39:35.943 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - null null
2025-06-13 20:39:35.943 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:39:35.943 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:39:35.943 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:39:35.944 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:39:35.944 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:39:35.945 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:39:35.945 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:39:35.945 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:39:35.945 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:39:35.945 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:39:35.945 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:39:35.945 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:39:35.946 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:39:35.946 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:39:35.946 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-13 20:39:35.947 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:39:35.947 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:39:35.947 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:39:35.947 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:39:38.968 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:39:38.972 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:39:38.972 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:39:38.972 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:39:38.973 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:39:38.973 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:39:38.973 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:39:38.973 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:39:38.973 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:39:38.974 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:39:38.974 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:39:38.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:39:38.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:39:38.976 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:39:38.976 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 20:39:38.976 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:39:38.977 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:39:39.654 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:39:39.654 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:39:39.654 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:39:39.654 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:39:39.654 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:39:39.654 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 20:39:39.656 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 3710.305ms
2025-06-13 20:39:39.656 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:39:39.656 +09:00 [DBG] Connection id "0HNDADR936E3K" completed keep alive response.
2025-06-13 20:39:39.656 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:39:39.657 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:39:39.657 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:39:39.657 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - 200 null application/json; charset=utf-8 3714.3266ms
2025-06-13 20:39:56.693 +09:00 [DBG] Connection id "0HNDADR936E3K" received FIN.
2025-06-13 20:39:56.693 +09:00 [DBG] Connection id "0HNDADR936E3J" received FIN.
2025-06-13 20:39:56.726 +09:00 [DBG] Connection id "0HNDADR936E3J" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:39:56.726 +09:00 [DBG] Connection id "0HNDADR936E3K" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:39:56.731 +09:00 [DBG] Connection id "0HNDADR936E3J" disconnecting.
2025-06-13 20:39:56.731 +09:00 [DBG] Connection id "0HNDADR936E3K" disconnecting.
2025-06-13 20:39:56.737 +09:00 [DBG] Connection id "0HNDADR936E3K" stopped.
2025-06-13 20:39:56.737 +09:00 [DBG] Connection id "0HNDADR936E3J" stopped.
2025-06-13 20:40:19.433 +09:00 [DBG] Connection id "0HNDADR936E3L" accepted.
2025-06-13 20:40:19.434 +09:00 [DBG] Connection id "0HNDADR936E3L" started.
2025-06-13 20:40:19.456 +09:00 [DBG] Connection 0HNDADR936E3L established using the following protocol: "Tls12"
2025-06-13 20:40:19.462 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - null null
2025-06-13 20:40:19.462 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:40:19.462 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:40:19.462 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:40:19.463 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:40:19.463 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:40:19.463 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:40:19.463 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:40:19.464 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:40:19.464 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:40:19.464 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:40:19.464 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:40:19.464 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:40:19.464 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:40:19.465 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:40:19.465 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-13 20:40:19.465 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:40:19.465 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:40:19.465 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:40:19.465 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:40:21.683 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:40:21.685 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:40:21.685 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:40:21.685 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:40:21.687 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:40:21.688 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:40:21.688 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:40:21.688 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:40:21.689 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:40:21.690 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:40:21.691 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:40:21.692 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:40:21.693 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:40:21.693 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:40:21.693 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 20:40:21.693 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:40:21.693 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:40:22.396 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:40:22.396 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:40:22.396 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:40:22.396 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:40:22.396 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:40:22.396 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 20:40:22.397 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 2933.4486ms
2025-06-13 20:40:22.397 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:40:22.397 +09:00 [DBG] Connection id "0HNDADR936E3L" completed keep alive response.
2025-06-13 20:40:22.397 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:40:22.397 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:40:22.398 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:40:22.398 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - 200 null application/json; charset=utf-8 2936.19ms
2025-06-13 20:41:34.438 +09:00 [DBG] Connection id "0HNDADR936E3L" received FIN.
2025-06-13 20:41:34.495 +09:00 [DBG] Connection id "0HNDADR936E3L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:41:34.497 +09:00 [DBG] Connection id "0HNDADR936E3L" disconnecting.
2025-06-13 20:41:34.529 +09:00 [DBG] Connection id "0HNDADR936E3L" stopped.
2025-06-13 20:42:06.255 +09:00 [DBG] Connection id "0HNDADR936E3M" accepted.
2025-06-13 20:42:06.257 +09:00 [DBG] Connection id "0HNDADR936E3M" started.
2025-06-13 20:42:06.306 +09:00 [DBG] Connection 0HNDADR936E3M established using the following protocol: "Tls12"
2025-06-13 20:42:06.312 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-13 20:42:06.313 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-13 20:42:06.317 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-13 20:42:06.317 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:42:06.319 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:42:06.319 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:42:06.323 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 20:42:06.323 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:42:06.323 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:42:06.323 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:42:06.323 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:42:06.324 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:42:06.324 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 20:42:08.667 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 20:42:08.668 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 20:42:08.668 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 20:42:08.669 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 20:42:08.669 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 20:42:08.669 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 20:42:08.670 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 20:42:08.678 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:42:08.680 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)'
2025-06-13 20:42:08.682 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-13 20:42:08.701 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
            3 -> 15
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
            3 -> 15
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            ApprovalRequest entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                ApprovalRequest instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(ApprovalRequest);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (ApprovalRequest)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                            {
                                return 
                                {
                                    ApprovalRequest instance;
                                    instance = new ApprovalRequest();
                                    instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                    instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                    instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                    instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                    instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                    instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                    instance.<Status>k__BackingField = dataReader.GetString(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(ApprovalRequest)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (ApprovalRequest)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                trackingQuery: True, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalStep instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalStep);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalStep)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
            fixup: (namelessParameter{9}, namelessParameter{10}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                    entity: namelessParameter{9}, 
                    value: namelessParameter{10}, 
                    forMaterialization: True);
                return namelessParameter{10}.<ApprovalRequest>k__BackingField = namelessParameter{9};
            }, 
            trackingQuery: True);
        return IsTrue(resultCoordinator.ResultReady)
         ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-13 20:42:08.710 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:42:08.710 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:42:08.710 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:42:08.710 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:42:08.710 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:42:08.710 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:42:08.710 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:42:08.710 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 20:42:08.711 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 20:42:08.711 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:42:08.715 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:42:08.718 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:42:08.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:42:08.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:42:08.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:42:08.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:42:08.719 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:42:08.719 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 8ms reading results.
2025-06-13 20:42:08.719 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:42:08.719 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:42:08.720 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:42:08.720 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:42:08.720 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:42:08.720 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:42:08.720 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:42:08.720 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:42:08.721 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 2397.4812ms
2025-06-13 20:42:08.721 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:42:08.721 +09:00 [DBG] Connection id "0HNDADR936E3M" completed keep alive response.
2025-06-13 20:42:08.721 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:42:08.721 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:42:08.721 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:42:08.721 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 2409.381ms
2025-06-13 20:42:24.331 +09:00 [DBG] Connection id "0HNDADR936E3N" accepted.
2025-06-13 20:42:24.331 +09:00 [DBG] Connection id "0HNDADR936E3N" started.
2025-06-13 20:42:24.353 +09:00 [DBG] Connection 0HNDADR936E3N established using the following protocol: "Tls12"
2025-06-13 20:42:24.356 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-13 20:42:24.356 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:42:24.356 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:42:24.356 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:42:24.356 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:42:24.356 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:42:24.357 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:42:24.357 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:42:24.357 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:42:24.357 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:42:24.357 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:42:24.357 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:42:24.357 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:42:24.357 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:42:24.357 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:42:24.358 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:42:24.358 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:42:24.358 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:42:24.358 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:42:24.358 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:42:27.309 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:42:27.312 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:42:27.312 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:42:27.312 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:42:27.312 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:42:27.312 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:42:27.312 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:42:27.312 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:42:27.312 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:42:27.313 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:42:27.313 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:42:27.314 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:42:27.314 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:42:27.314 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:42:27.314 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:42:27.314 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:42:27.314 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:42:27.315 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:42:27.315 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:42:27.315 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:42:27.315 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 2958.2484ms
2025-06-13 20:42:27.315 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:42:27.315 +09:00 [DBG] Connection id "0HNDADR936E3N" completed keep alive response.
2025-06-13 20:42:27.315 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:42:27.315 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:42:27.315 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:42:27.315 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 2959.6576ms
2025-06-13 20:42:32.564 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - null null
2025-06-13 20:42:32.565 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:42:32.565 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:42:32.565 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:42:32.566 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:42:32.566 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:42:32.566 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:42:32.567 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:42:32.567 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:42:32.567 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:42:32.567 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:42:32.567 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:42:32.567 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:42:32.568 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:42:32.568 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:42:32.569 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-13 20:42:32.569 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:42:32.569 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:42:32.569 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:42:32.571 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:42:34.181 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:42:34.183 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:42:34.183 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:42:34.183 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:42:34.184 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:42:34.184 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:42:34.184 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:42:34.184 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:42:34.184 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:42:34.185 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:42:34.186 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:42:34.187 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:42:34.188 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:42:34.188 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:42:34.188 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 20:42:34.188 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:42:34.188 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:42:34.811 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:42:34.811 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:42:34.811 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:42:34.811 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:42:34.812 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:42:34.812 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 20:42:34.812 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 2245.8292ms
2025-06-13 20:42:34.812 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:42:34.813 +09:00 [DBG] Connection id "0HNDADR936E3N" completed keep alive response.
2025-06-13 20:42:34.813 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:42:34.813 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:42:34.813 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:42:34.813 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - 200 null application/json; charset=utf-8 2248.5328ms
2025-06-13 20:43:21.256 +09:00 [DBG] Connection id "0HNDADR936E3M" received FIN.
2025-06-13 20:43:21.262 +09:00 [DBG] Connection id "0HNDADR936E3M" disconnecting.
2025-06-13 20:43:21.265 +09:00 [DBG] Connection id "0HNDADR936E3M" stopped.
2025-06-13 20:43:21.265 +09:00 [DBG] Connection id "0HNDADR936E3M" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:43:39.333 +09:00 [DBG] Connection id "0HNDADR936E3N" received FIN.
2025-06-13 20:43:39.333 +09:00 [DBG] Connection id "0HNDADR936E3N" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:43:39.334 +09:00 [DBG] Connection id "0HNDADR936E3N" disconnecting.
2025-06-13 20:43:39.337 +09:00 [DBG] Connection id "0HNDADR936E3N" stopped.
2025-06-13 20:48:51.797 +09:00 [DBG] Connection id "0HNDADR936E3O" accepted.
2025-06-13 20:48:51.825 +09:00 [DBG] Connection id "0HNDADR936E3O" started.
2025-06-13 20:48:51.875 +09:00 [DBG] Connection 0HNDADR936E3O established using the following protocol: "Tls12"
2025-06-13 20:48:51.884 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - null null
2025-06-13 20:48:51.884 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:48:51.884 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:48:51.884 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:48:51.885 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:48:51.885 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:48:51.886 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:48:51.886 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:48:51.886 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:48:51.886 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:48:51.886 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:48:51.886 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:48:51.886 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:48:51.887 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:48:51.887 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:48:51.888 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-13 20:48:51.888 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:48:51.888 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:48:51.888 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:48:51.888 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:48:54.313 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:48:54.315 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:48:54.315 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:48:54.315 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:48:54.316 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:48:54.316 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:48:54.316 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:48:54.316 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:48:54.317 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:48:54.318 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:48:54.319 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:48:54.320 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:48:54.320 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:48:54.320 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:48:54.321 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 20:48:54.321 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:48:54.321 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:48:55.065 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:48:55.065 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:48:55.065 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:48:55.065 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:48:55.066 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:48:55.066 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 20:48:55.067 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 3181.0732ms
2025-06-13 20:48:55.068 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:48:55.068 +09:00 [DBG] Connection id "0HNDADR936E3O" completed keep alive response.
2025-06-13 20:48:55.068 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:48:55.070 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:48:55.074 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (3ms).
2025-06-13 20:48:55.074 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - 200 null application/json; charset=utf-8 3190.3126ms
2025-06-13 20:49:24.735 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - null null
2025-06-13 20:49:24.737 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:49:24.738 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:49:24.738 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:49:24.747 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:49:24.747 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:49:24.750 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:49:24.750 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:49:24.750 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:49:24.751 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:49:24.751 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:49:24.751 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:49:24.752 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:49:24.755 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:49:24.762 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:49:24.766 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-13 20:49:24.767 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:49:24.767 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:49:24.767 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:49:24.768 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:49:26.924 +09:00 [DBG] Connection id "0HNDADR936E3P" accepted.
2025-06-13 20:49:26.924 +09:00 [DBG] Connection id "0HNDADR936E3P" started.
2025-06-13 20:49:26.952 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:49:26.954 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:49:26.954 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:49:26.955 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:49:26.955 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:49:26.955 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:49:26.956 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:49:26.956 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:49:26.957 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:49:26.958 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:49:26.960 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:49:26.961 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:49:26.961 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:49:26.962 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:49:26.962 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-13 20:49:26.962 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:49:26.962 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:49:26.963 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:49:26.963 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:49:26.963 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:49:26.963 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:49:26.963 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:49:26.963 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 20:49:26.964 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 2212.9209ms
2025-06-13 20:49:26.964 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:49:26.964 +09:00 [DBG] Connection id "0HNDADR936E3O" completed keep alive response.
2025-06-13 20:49:26.964 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:49:26.965 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:49:26.965 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:49:26.965 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - 200 null application/json; charset=utf-8 2229.6554ms
2025-06-13 20:49:26.974 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - null null
2025-06-13 20:49:26.974 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:49:26.975 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:49:26.975 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:49:26.975 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:49:26.975 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:49:26.975 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:49:26.975 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:49:26.975 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:49:26.975 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:49:26.975 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:49:26.975 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:49:26.975 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:49:26.976 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:49:26.976 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:49:26.976 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-13 20:49:26.976 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:49:26.976 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:49:26.976 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:49:26.976 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:49:28.109 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:49:28.110 +09:00 [DBG] Connection 0HNDADR936E3P established using the following protocol: "Tls12"
2025-06-13 20:49:28.111 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:49:28.111 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:49:28.111 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:49:28.111 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:49:28.112 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:49:28.112 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:49:28.112 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:49:28.112 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:49:28.112 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:49:28.113 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:49:28.113 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:49:28.114 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:49:28.114 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:49:28.114 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 20:49:28.114 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:49:28.114 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:49:28.114 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:49:28.114 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:49:28.114 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:49:28.115 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:49:28.115 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:49:28.115 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 20:49:28.115 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 1139.6367ms
2025-06-13 20:49:28.115 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:49:28.115 +09:00 [DBG] Connection id "0HNDADR936E3O" completed keep alive response.
2025-06-13 20:49:28.115 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:49:28.115 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:49:28.116 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:49:28.116 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - 200 null application/json; charset=utf-8 1142.1852ms
2025-06-13 20:50:09.660 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - null null
2025-06-13 20:50:09.661 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:50:09.662 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-13 20:50:09.662 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:50:09.666 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:50:09.666 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:50:09.668 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:50:09.669 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:50:09.669 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:50:09.670 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:50:09.670 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:50:09.670 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:50:09.670 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:50:09.673 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:50:09.678 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:50:09.684 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-13 20:50:09.685 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:50:09.685 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:50:09.685 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-13 20:50:09.686 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-13 20:50:11.764 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:50:11.767 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:50:11.767 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:50:11.767 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:50:11.768 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:50:11.768 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:50:11.768 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:50:11.769 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:50:11.769 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:50:11.770 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-13 20:50:11.771 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:50:11.772 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:50:11.773 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:50:11.773 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:50:11.773 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-13 20:50:11.773 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:50:11.773 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:50:11.774 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:50:11.774 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:50:11.774 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:50:11.774 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:50:11.774 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:50:11.774 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-13 20:50:11.775 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 2105.2584ms
2025-06-13 20:50:11.775 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-13 20:50:11.776 +09:00 [DBG] Connection id "0HNDADR936E3P" completed keep alive response.
2025-06-13 20:50:11.776 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:50:11.776 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:50:11.776 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:50:11.776 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - 200 null application/json; charset=utf-8 2116.1233ms
2025-06-13 20:50:36.803 +09:00 [DBG] Connection id "0HNDADR936E3O" received FIN.
2025-06-13 20:50:36.838 +09:00 [DBG] Connection id "0HNDADR936E3O" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:50:36.839 +09:00 [DBG] Connection id "0HNDADR936E3O" disconnecting.
2025-06-13 20:50:36.870 +09:00 [DBG] Connection id "0HNDADR936E3O" stopped.
2025-06-13 20:51:18.794 +09:00 [DBG] Connection id "0HNDADR936E3Q" accepted.
2025-06-13 20:51:18.799 +09:00 [DBG] Connection id "0HNDADR936E3Q" started.
2025-06-13 20:51:18.845 +09:00 [DBG] Connection 0HNDADR936E3Q established using the following protocol: "Tls12"
2025-06-13 20:51:18.848 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-13 20:51:18.848 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:51:18.848 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-13 20:51:18.848 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:51:18.849 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:51:18.849 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:51:18.849 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:51:18.849 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:51:18.849 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:51:18.849 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:51:18.849 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:51:18.849 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:51:18.850 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:51:18.850 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:51:18.850 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:51:18.850 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:51:18.850 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:51:18.850 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:51:18.850 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:51:18.851 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:51:21.776 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:51:21.779 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:51:21.779 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:51:21.779 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:51:21.779 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:51:21.780 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:51:21.780 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:51:21.780 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:51:21.780 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:51:21.782 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:51:21.786 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:51:21.786 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-13 20:51:21.787 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:51:21.787 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:51:21.790 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:51:21.791 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:51:21.791 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:51:21.791 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:51:21.791 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:51:21.792 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:51:21.797 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 2948.0052ms
2025-06-13 20:51:21.798 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:51:21.798 +09:00 [DBG] Connection id "0HNDADR936E3Q" completed keep alive response.
2025-06-13 20:51:21.798 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:51:21.798 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:51:21.798 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:51:21.798 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 2950.4879ms
2025-06-13 20:51:21.802 +09:00 [DBG] Connection id "0HNDADR936E3P" received FIN.
2025-06-13 20:51:21.802 +09:00 [DBG] Connection id "0HNDADR936E3P" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-13 20:51:21.803 +09:00 [DBG] Connection id "0HNDADR936E3P" disconnecting.
2025-06-13 20:51:21.803 +09:00 [DBG] Connection id "0HNDADR936E3P" stopped.
2025-06-13 20:51:44.184 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-13 20:51:44.186 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-13 20:51:44.186 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-13 20:51:44.187 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:51:44.188 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:51:44.189 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:51:44.190 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 20:51:44.191 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:51:44.191 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:51:44.191 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:51:44.191 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:51:44.191 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:51:44.191 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 20:51:46.177 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 20:51:46.180 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 20:51:46.181 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 20:51:46.183 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 20:51:46.183 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 20:51:46.183 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 20:51:46.183 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 20:51:46.186 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:51:46.192 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:51:46.192 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:51:46.192 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:51:46.192 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:51:46.192 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:51:46.193 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:51:46.193 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:51:46.193 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 20:51:46.194 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 20:51:46.195 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:51:46.196 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:51:46.196 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:51:46.196 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:51:46.196 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:51:46.197 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:51:46.197 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:51:46.197 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:51:46.197 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-13 20:51:46.197 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:51:46.197 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:51:46.197 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:51:46.197 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:51:46.197 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:51:46.198 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:51:46.198 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:51:46.198 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:51:46.199 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 2007.5973ms
2025-06-13 20:51:46.199 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:51:46.199 +09:00 [DBG] Connection id "0HNDADR936E3Q" completed keep alive response.
2025-06-13 20:51:46.199 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:51:46.199 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:51:46.199 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:51:46.199 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 2015.8283ms
2025-06-13 20:52:36.129 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-13 20:52:36.133 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 20:52:36.135 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 20:52:36.136 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:52:36.139 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:52:36.139 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:52:36.140 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:52:36.140 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:52:36.140 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:52:36.141 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:52:36.141 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:52:36.141 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:52:36.141 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:52:36.142 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:52:36.142 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:52:36.143 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:52:36.143 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:52:36.143 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:52:36.143 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:52:36.143 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:52:38.673 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:52:38.675 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:52:38.675 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:52:38.675 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:52:38.676 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:52:38.676 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:52:38.676 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:52:38.676 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:52:38.676 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:52:38.677 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:52:38.678 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:52:38.678 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-13 20:52:38.678 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:52:38.679 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:52:38.679 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:52:38.679 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:52:38.679 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:52:38.679 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:52:38.679 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:52:38.679 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:52:38.681 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 2540.2675ms
2025-06-13 20:52:38.681 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:52:38.681 +09:00 [DBG] Connection id "0HNDADR936E3Q" completed keep alive response.
2025-06-13 20:52:38.681 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:52:38.681 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:52:38.682 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:52:38.682 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 2552.8413ms
2025-06-13 20:52:40.544 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-13 20:52:40.546 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 20:52:40.552 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-13 20:52:40.553 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:52:40.554 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:52:40.554 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:52:40.554 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-13 20:52:40.554 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:52:40.554 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:52:40.554 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:52:40.555 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:52:40.555 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:52:40.555 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:52:40.556 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-13 20:52:40.557 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-13 20:52:40.558 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-13 20:52:40.558 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:52:40.558 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-13 20:52:40.558 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-13 20:52:40.559 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-13 20:52:43.158 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:52:43.158 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:52:43.159 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:52:43.159 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:52:43.159 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:52:43.159 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:52:43.159 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:52:43.159 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:52:43.159 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:52:43.159 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-13 20:52:43.160 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:52:43.160 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-13 20:52:43.160 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:52:43.160 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:52:43.160 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:52:43.160 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:52:43.160 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:52:43.160 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:52:43.160 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:52:43.160 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:52:43.161 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 2606.2056ms
2025-06-13 20:52:43.161 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-13 20:52:43.161 +09:00 [DBG] Connection id "0HNDADR936E3Q" completed keep alive response.
2025-06-13 20:52:43.161 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:52:43.161 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:52:43.161 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:52:43.161 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 2617.1321ms
2025-06-13 20:52:49.775 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-13 20:52:49.776 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-13 20:52:49.776 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-13 20:52:49.777 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:52:49.777 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-13 20:52:49.777 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:52:49.778 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-13 20:52:49.778 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-13 20:52:49.778 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-13 20:52:49.778 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-13 20:52:49.778 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-13 20:52:49.778 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-13 20:52:49.779 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 20:52:51.091 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-13 20:52:51.092 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-13 20:52:51.092 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-13 20:52:51.092 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 20:52:51.093 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-13 20:52:51.093 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-13 20:52:51.093 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-13 20:52:51.094 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-13 20:52:51.096 +09:00 [DBG] Creating DbConnection.
2025-06-13 20:52:51.096 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-13 20:52:51.096 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:52:51.096 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:52:51.097 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-13 20:52:51.097 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:52:51.097 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-13 20:52:51.097 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 20:52:51.098 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-13 20:52:51.099 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:52:51.100 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:52:51.101 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-13 20:52:51.101 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:52:51.101 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-13 20:52:51.101 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-13 20:52:51.101 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:52:51.102 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-13 20:52:51.102 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-13 20:52:51.102 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-13 20:52:51.102 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-13 20:52:51.102 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-13 20:52:51.102 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-13 20:52:51.103 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 1324.3541ms
2025-06-13 20:52:51.103 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-13 20:52:51.103 +09:00 [DBG] Connection id "0HNDADR936E3Q" completed keep alive response.
2025-06-13 20:52:51.103 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-13 20:52:51.103 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-13 20:52:51.104 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-13 20:52:51.104 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 1328.6164ms
2025-06-13 20:53:31.815 +09:00 [DBG] Connection id "0HNDADR936E3Q" received FIN.
2025-06-13 20:53:31.817 +09:00 [DBG] Connection id "0HNDADR936E3Q" disconnecting.
2025-06-13 20:53:31.847 +09:00 [DBG] Connection id "0HNDADR936E3Q" stopped.
2025-06-13 20:53:31.847 +09:00 [DBG] Connection id "0HNDADR936E3Q" sending FIN because: "The Socket transport's send loop completed gracefully."
