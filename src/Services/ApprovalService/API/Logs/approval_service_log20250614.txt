2025-06-14 06:24:41.896 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 06:24:42.021 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 06:24:42.370 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:24:42.385 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:24:42.395 +09:00 [DBG] Created DbConnection. (9ms).
2025-06-14 06:24:42.399 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:24:42.408 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:24:42.411 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:24:42.415 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:24:42.421 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 06:24:42.422 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:24:42.422 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:24:42.436 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (4ms).
2025-06-14 06:24:42.438 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (19ms).
2025-06-14 06:24:42.439 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:24:42.443 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:24:42.449 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 06:24:42.473 +09:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 06:24:42.475 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:24:42.478 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (2ms).
2025-06-14 06:24:42.482 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:24:42.482 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:24:42.482 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:24:42.482 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:24:42.482 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:24:42.482 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:24:42.483 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 06:24:42.483 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 06:24:42.483 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 06:24:42.483 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:24:42.483 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:24:42.483 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 06:24:42.483 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 06:24:42.483 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:24:42.483 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:24:42.528 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 06:24:42.648 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 06:24:42.661 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:24:42.662 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:24:42.662 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:24:42.662 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:24:42.662 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:24:42.663 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 06:24:42.664 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 06:24:42.667 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:24:42.667 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 06:24:42.668 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:24:42.668 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:24:42.669 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:24:42.669 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:24:42.669 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:24:42.671 +09:00 [DBG] Hosting starting
2025-06-14 06:24:42.704 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 06:24:42.704 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 06:24:43.067 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 06:24:43.068 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 06:24:43.068 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 06:24:43.068 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 06:24:43.069 +09:00 [INF] Hosting environment: Development
2025-06-14 06:24:43.069 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 06:24:43.069 +09:00 [DBG] Hosting started
2025-06-14 06:25:35.007 +09:00 [DBG] Connection id "0HNDAO3AP4QAR" accepted.
2025-06-14 06:25:35.008 +09:00 [DBG] Connection id "0HNDAO3AP4QAR" started.
2025-06-14 06:25:35.054 +09:00 [DBG] Connection 0HNDAO3AP4QAR established using the following protocol: "Tls12"
2025-06-14 06:25:35.091 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 06:25:35.107 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:25:35.110 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:25:35.110 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:25:35.123 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:25:35.124 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:25:35.139 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 06:25:35.140 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:25:35.140 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:25:35.140 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:25:35.141 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:25:35.141 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:25:35.142 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:25:37.980 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:25:37.988 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 06:25:37.989 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 06:25:37.990 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:25:37.990 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:25:37.990 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 06:25:37.992 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 06:25:38.002 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:25:38.010 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)'
2025-06-14 06:25:38.025 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-14 06:25:38.089 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequest>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
            3 -> 15
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
            3 -> 15
        SELECT a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            ApprovalRequest entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                ApprovalRequest instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(ApprovalRequest);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (ApprovalRequest)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                            {
                                return 
                                {
                                    ApprovalRequest instance;
                                    instance = new ApprovalRequest();
                                    instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                    instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                    instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                    instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                    instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                    instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                    instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                    instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                    instance.<Status>k__BackingField = dataReader.GetString(14);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(ApprovalRequest)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (ApprovalRequest)(resultContext.Values[0]), 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                trackingQuery: True, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalStep instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalStep);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalStep)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
            fixup: (namelessParameter{9}, namelessParameter{10}) => 
            {
                [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                    entity: namelessParameter{9}, 
                    value: namelessParameter{10}, 
                    forMaterialization: True);
                return namelessParameter{10}.<ApprovalRequest>k__BackingField = namelessParameter{9};
            }, 
            trackingQuery: True);
        return IsTrue(resultCoordinator.ResultReady)
         ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 06:25:38.104 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:25:38.104 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:25:38.104 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:25:38.104 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:25:38.104 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:25:38.104 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:25:38.105 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:25:38.106 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:25:38.109 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:25:38.127 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:25:38.151 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:25:38.159 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:25:38.159 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:25:38.160 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 50ms reading results.
2025-06-14 06:25:38.160 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:25:38.160 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:25:38.161 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 06:25:38.162 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 06:25:38.162 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 06:25:38.162 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 06:25:38.162 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 06:25:38.162 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 06:25:38.212 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 3070.2759ms
2025-06-14 06:25:38.216 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:25:38.217 +09:00 [DBG] Connection id "0HNDAO3AP4QAR" completed keep alive response.
2025-06-14 06:25:38.218 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:25:38.219 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:25:38.219 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:25:38.220 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 3130.7435ms
2025-06-14 06:26:18.958 +09:00 [DBG] Connection id "0HNDAO3AP4QAS" accepted.
2025-06-14 06:26:18.959 +09:00 [DBG] Connection id "0HNDAO3AP4QAS" started.
2025-06-14 06:26:18.993 +09:00 [DBG] Connection 0HNDAO3AP4QAS established using the following protocol: "Tls12"
2025-06-14 06:26:18.998 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 06:26:19.000 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:26:19.000 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:26:19.001 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:26:19.056 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:26:19.056 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:26:19.058 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 06:26:19.058 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:26:19.058 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:26:19.058 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:26:19.059 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:26:19.059 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:26:19.059 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:26:19.063 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:26:19.063 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 06:26:19.064 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 06:26:19.064 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:26:19.064 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:26:19.064 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 06:26:19.067 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 06:26:19.105 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:26:19.109 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:26:19.109 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:26:19.109 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:26:19.109 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:26:19.109 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:26:19.109 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:26:19.109 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:26:19.110 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:26:19.110 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:26:19.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:26:19.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:26:19.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:26:19.112 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:26:19.112 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 06:26:19.112 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:26:19.112 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:26:19.113 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 06:26:19.113 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 06:26:19.113 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 06:26:19.113 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 06:26:19.113 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 06:26:19.113 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 06:26:19.115 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 56.2662ms
2025-06-14 06:26:19.115 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:26:19.115 +09:00 [DBG] Connection id "0HNDAO3AP4QAS" completed keep alive response.
2025-06-14 06:26:19.115 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:26:19.116 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:26:19.116 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:26:19.116 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 118.154ms
2025-06-14 06:26:49.989 +09:00 [DBG] Connection id "0HNDAO3AP4QAR" received FIN.
2025-06-14 06:26:50.020 +09:00 [DBG] Connection id "0HNDAO3AP4QAR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 06:26:50.024 +09:00 [DBG] Connection id "0HNDAO3AP4QAR" disconnecting.
2025-06-14 06:26:50.026 +09:00 [DBG] Connection id "0HNDAO3AP4QAR" stopped.
2025-06-14 06:27:33.932 +09:00 [DBG] Connection id "0HNDAO3AP4QAS" received FIN.
2025-06-14 06:27:33.962 +09:00 [DBG] Connection id "0HNDAO3AP4QAS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 06:27:33.963 +09:00 [DBG] Connection id "0HNDAO3AP4QAS" disconnecting.
2025-06-14 06:27:33.969 +09:00 [DBG] Connection id "0HNDAO3AP4QAS" stopped.
2025-06-14 06:28:23.218 +09:00 [DBG] Connection id "0HNDAO3AP4QAT" accepted.
2025-06-14 06:28:23.248 +09:00 [DBG] Connection id "0HNDAO3AP4QAT" started.
2025-06-14 06:28:23.272 +09:00 [DBG] Connection 0HNDAO3AP4QAT established using the following protocol: "Tls12"
2025-06-14 06:28:23.275 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 06:28:23.275 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:28:23.275 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:28:23.276 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:28:23.286 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:28:23.286 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:28:23.288 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 06:28:23.288 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:28:23.289 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:28:23.289 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:28:23.289 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:28:23.289 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:28:23.289 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:28:23.291 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:28:23.292 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 06:28:23.292 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 06:28:23.292 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:28:23.292 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:28:23.292 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 06:28:23.292 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 06:28:23.294 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:28:23.295 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:28:23.295 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:28:23.295 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:28:23.296 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:28:23.296 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:28:23.296 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:28:23.296 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:28:23.296 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:28:23.297 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:28:23.298 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:28:23.298 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:28:23.298 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:28:23.298 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:28:23.298 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 06:28:23.298 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:28:23.298 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:28:23.299 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 06:28:23.299 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 06:28:23.299 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 06:28:23.299 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 06:28:23.299 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 06:28:23.299 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 06:28:23.300 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 10.5637ms
2025-06-14 06:28:23.300 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:28:23.300 +09:00 [DBG] Connection id "0HNDAO3AP4QAT" completed keep alive response.
2025-06-14 06:28:23.300 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:28:23.300 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:28:23.300 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:28:23.300 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 25.2707ms
2025-06-14 06:28:38.512 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 06:28:38.512 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:28:38.512 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:28:38.512 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:28:38.513 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:28:38.513 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:28:38.513 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 06:28:38.513 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:28:38.513 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:28:38.513 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:28:38.513 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:28:38.513 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:28:38.513 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:28:38.514 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:28:38.515 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 06:28:38.515 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 06:28:38.515 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:28:38.515 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:28:38.515 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 06:28:38.515 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 06:28:38.516 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:28:38.516 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:28:38.516 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:28:38.517 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:28:38.517 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:28:38.517 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:28:38.517 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:28:38.517 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:28:38.517 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:28:38.517 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:28:38.518 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:28:38.518 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:28:38.518 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:28:38.518 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:28:38.518 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 06:28:38.518 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:28:38.519 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:28:38.519 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 06:28:38.519 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 06:28:38.519 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 06:28:38.519 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 06:28:38.519 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 06:28:38.519 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 06:28:38.519 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 6.083ms
2025-06-14 06:28:38.519 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:28:38.520 +09:00 [DBG] Connection id "0HNDAO3AP4QAT" completed keep alive response.
2025-06-14 06:28:38.520 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:28:38.520 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:28:38.520 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:28:38.520 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 8.139ms
2025-06-14 06:29:08.271 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 06:29:08.272 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:29:08.272 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:29:08.272 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:29:08.273 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:29:08.273 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:29:08.274 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 06:29:08.274 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:29:08.274 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:29:08.275 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:29:08.275 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:29:08.275 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:29:08.275 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:29:08.276 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:29:08.276 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 06:29:08.276 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 06:29:08.277 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:29:08.277 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:29:08.277 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 06:29:08.278 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 06:29:08.281 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:29:08.283 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:29:08.283 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:29:08.283 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:29:08.283 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:29:08.283 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:29:08.283 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:29:08.283 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:29:08.284 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:29:08.284 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:29:08.285 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:29:08.286 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:29:08.286 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:29:08.286 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:29:08.286 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 06:29:08.286 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:29:08.286 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:29:08.287 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 06:29:08.287 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 06:29:08.287 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 06:29:08.287 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 06:29:08.287 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 06:29:08.287 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 06:29:08.288 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 13.1614ms
2025-06-14 06:29:08.288 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:29:08.288 +09:00 [DBG] Connection id "0HNDAO3AP4QAT" completed keep alive response.
2025-06-14 06:29:08.288 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:29:08.288 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:29:08.288 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:29:08.288 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 17.1927ms
2025-06-14 06:29:11.027 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - null null
2025-06-14 06:29:11.028 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-14 06:29:11.028 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-14 06:29:11.028 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 06:29:11.028 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:29:11.028 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 06:29:11.033 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 06:29:11.033 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:29:11.033 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:29:11.033 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:29:11.033 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:29:11.033 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:29:11.033 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 06:29:11.035 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 06:29:11.035 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 06:29:11.035 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 06:29:11.036 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 06:29:11.036 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 06:29:11.036 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 06:29:11.037 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 06:29:13.389 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:29:13.391 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-14 06:29:13.393 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-14 06:29:13.394 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-14 06:29:13.415 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-14 06:29:13.430 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(27) ? default(Guid?) : (Guid?)dataReader.GetGuid(27) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(27) ? default(object) : (object)dataReader.GetGuid(27) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(27) ? default(Guid) : dataReader.GetGuid(27);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(28) ? default(Guid) : dataReader.GetGuid(28);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(29) ? default(string) : dataReader.GetString(29);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(31) ? default(long?) : (long?)dataReader.GetInt64(31);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(33) ? default(DateTime) : dataReader.GetDateTime(33);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(34) ? default(string) : dataReader.GetString(34);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 06:29:13.437 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:29:13.437 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:29:13.437 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:29:13.438 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:29:13.438 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:29:13.438 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:29:13.438 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:29:13.438 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 06:29:13.438 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 06:29:13.439 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:29:13.442 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:29:13.444 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:29:13.444 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:29:13.444 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 5ms reading results.
2025-06-14 06:29:13.444 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:29:13.444 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:29:13.444 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 06:29:13.444 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 06:29:13.444 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 06:29:13.444 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 06:29:13.445 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 06:29:13.445 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 06:29:13.445 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 2411.5814ms
2025-06-14 06:29:13.445 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 06:29:13.445 +09:00 [DBG] Connection id "0HNDAO3AP4QAT" completed keep alive response.
2025-06-14 06:29:13.445 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:29:13.445 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:29:13.445 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:29:13.445 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - 200 null application/json; charset=utf-8 2418.2599ms
2025-06-14 06:29:47.723 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 06:29:47.726 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:29:47.727 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:29:47.730 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:29:47.732 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:29:47.732 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:29:47.732 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 06:29:47.733 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:29:47.733 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:29:47.733 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:29:47.733 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:29:47.733 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:29:47.733 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:29:47.734 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:29:47.735 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 06:29:47.735 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 06:29:47.735 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:29:47.735 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:29:47.735 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 06:29:47.735 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 06:29:47.737 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:29:47.738 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:29:47.738 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:29:47.738 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:29:47.738 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:29:47.738 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:29:47.738 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:29:47.738 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:29:47.738 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:29:47.739 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:29:47.739 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:29:47.744 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:29:47.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:29:47.745 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:29:47.745 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 6ms reading results.
2025-06-14 06:29:47.745 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:29:47.745 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:29:47.746 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 06:29:47.746 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 06:29:47.746 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 06:29:47.746 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 06:29:47.747 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 06:29:47.747 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 06:29:47.750 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 17.0889ms
2025-06-14 06:29:47.750 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:29:47.750 +09:00 [DBG] Connection id "0HNDAO3AP4QAT" completed keep alive response.
2025-06-14 06:29:47.751 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:29:47.751 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:29:47.751 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:29:47.751 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 27.4781ms
2025-06-14 06:30:38.216 +09:00 [DBG] Connection id "0HNDAO3AP4QAT" received FIN.
2025-06-14 06:30:38.242 +09:00 [DBG] Connection id "0HNDAO3AP4QAT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 06:30:38.243 +09:00 [DBG] Connection id "0HNDAO3AP4QAT" disconnecting.
2025-06-14 06:30:38.295 +09:00 [DBG] Connection id "0HNDAO3AP4QAT" stopped.
2025-06-14 06:50:14.920 +09:00 [DBG] Connection id "0HNDAO3AP4QAU" accepted.
2025-06-14 06:50:14.922 +09:00 [DBG] Connection id "0HNDAO3AP4QAU" started.
2025-06-14 06:50:14.998 +09:00 [DBG] Connection 0HNDAO3AP4QAU established using the following protocol: "Tls12"
2025-06-14 06:50:15.003 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 06:50:15.004 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:50:15.004 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:50:15.004 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:50:15.005 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:50:15.005 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:50:15.006 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 06:50:15.006 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:50:15.006 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:50:15.006 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:50:15.006 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:50:15.006 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:50:15.006 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:50:15.007 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:50:15.007 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 06:50:15.007 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 06:50:15.007 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:50:15.008 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:50:15.008 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 06:50:15.008 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 06:50:15.009 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:50:15.011 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:50:15.011 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:50:15.011 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:50:15.013 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:50:15.013 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:50:15.013 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:50:15.013 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:50:15.013 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:50:15.015 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:50:15.016 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:50:15.017 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:50:15.017 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:50:15.017 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:50:15.018 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 06:50:15.018 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:50:15.018 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:50:15.018 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 06:50:15.018 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 06:50:15.018 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 06:50:15.018 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 06:50:15.018 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 06:50:15.018 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 06:50:15.019 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 13.4343ms
2025-06-14 06:50:15.020 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:50:15.020 +09:00 [DBG] Connection id "0HNDAO3AP4QAU" completed keep alive response.
2025-06-14 06:50:15.020 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:50:15.020 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:50:15.020 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:50:15.020 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 17.0861ms
2025-06-14 06:51:29.902 +09:00 [DBG] Connection id "0HNDAO3AP4QAU" received FIN.
2025-06-14 06:51:29.930 +09:00 [DBG] Connection id "0HNDAO3AP4QAU" disconnecting.
2025-06-14 06:51:29.930 +09:00 [DBG] Connection id "0HNDAO3AP4QAU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 06:51:29.933 +09:00 [DBG] Connection id "0HNDAO3AP4QAU" stopped.
2025-06-14 06:54:28.737 +09:00 [DBG] Connection id "0HNDAO3AP4QAV" accepted.
2025-06-14 06:54:28.738 +09:00 [DBG] Connection id "0HNDAO3AP4QAV" started.
2025-06-14 06:54:28.765 +09:00 [DBG] Connection 0HNDAO3AP4QAV established using the following protocol: "Tls12"
2025-06-14 06:54:28.769 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 06:54:28.769 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:54:28.769 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:54:28.769 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:54:28.771 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:54:28.771 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:54:28.774 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 06:54:28.774 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:54:28.774 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:54:28.774 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:54:28.774 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:54:28.774 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:54:28.774 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:54:28.775 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:54:28.775 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 06:54:28.775 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 06:54:28.775 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:54:28.775 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:54:28.775 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 06:54:28.776 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 06:54:28.777 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:54:28.778 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:54:28.778 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:54:28.778 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:54:28.779 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:54:28.779 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:54:28.779 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:54:28.779 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:54:28.779 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:54:28.780 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:54:28.780 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:54:28.781 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:54:28.781 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:54:28.781 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:54:28.781 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 06:54:28.781 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:54:28.782 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:54:28.782 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 06:54:28.782 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 06:54:28.782 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 06:54:28.782 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 06:54:28.782 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 06:54:28.782 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 06:54:28.783 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.5903ms
2025-06-14 06:54:28.783 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:54:28.783 +09:00 [DBG] Connection id "0HNDAO3AP4QAV" completed keep alive response.
2025-06-14 06:54:28.783 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:54:28.783 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:54:28.783 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:54:28.783 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 14.4572ms
2025-06-14 06:54:40.456 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 06:54:40.456 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:54:40.456 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:54:40.456 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:54:40.456 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:54:40.456 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:54:40.457 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 06:54:40.457 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:54:40.457 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:54:40.457 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:54:40.457 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:54:40.458 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:54:40.458 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:54:40.458 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:54:40.458 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 06:54:40.460 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 06:54:40.460 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:54:40.460 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:54:40.460 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 06:54:40.460 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 06:54:40.461 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:54:40.462 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:54:40.462 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:54:40.462 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:54:40.462 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:54:40.462 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:54:40.462 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:54:40.462 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:54:40.462 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:54:40.463 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:54:40.463 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:54:40.464 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:54:40.465 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:54:40.465 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:54:40.465 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 06:54:40.465 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:54:40.466 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:54:40.466 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 06:54:40.467 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 06:54:40.467 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 06:54:40.467 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 06:54:40.467 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 06:54:40.467 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 06:54:40.467 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 9.4605ms
2025-06-14 06:54:40.467 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:54:40.467 +09:00 [DBG] Connection id "0HNDAO3AP4QAV" completed keep alive response.
2025-06-14 06:54:40.467 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:54:40.467 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:54:40.467 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:54:40.468 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 12.0162ms
2025-06-14 06:55:20.522 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 06:55:20.524 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 06:55:20.524 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 06:55:20.524 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 06:55:20.524 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:55:20.524 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 06:55:20.527 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 06:55:20.527 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:55:20.528 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:55:20.528 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:55:20.528 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:55:20.528 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:55:20.528 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 06:55:20.528 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 06:55:20.528 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 06:55:20.528 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 06:55:20.528 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 06:55:20.528 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 06:55:20.528 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 06:55:20.530 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 06:55:23.113 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:55:23.116 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 06:55:23.124 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 06:55:23.126 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:55:23.126 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:55:23.126 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:55:23.126 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:55:23.126 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:55:23.126 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:55:23.126 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:55:23.126 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 06:55:23.126 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 06:55:23.127 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:55:23.127 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 06:55:23.127 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:55:23.128 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:55:23.128 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 06:55:23.128 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 06:55:23.128 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 06:55:23.128 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 06:55:23.128 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 06:55:23.128 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 06:55:23.131 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 2603.4204ms
2025-06-14 06:55:23.131 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 06:55:23.131 +09:00 [DBG] Connection id "0HNDAO3AP4QAV" completed keep alive response.
2025-06-14 06:55:23.131 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:55:23.131 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:55:23.131 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:55:23.131 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 2609.6727ms
2025-06-14 06:55:28.169 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 06:55:28.170 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 06:55:28.170 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 06:55:28.170 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 06:55:28.170 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:55:28.171 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 06:55:28.171 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 06:55:28.171 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:55:28.171 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:55:28.171 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:55:28.171 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:55:28.171 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:55:28.171 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 06:55:28.174 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 06:55:28.176 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 06:55:28.176 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 06:55:28.176 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 06:55:28.176 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 06:55:28.176 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 06:55:28.176 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 06:55:30.934 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:55:30.936 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:55:30.936 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:55:30.937 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:55:30.937 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:55:30.937 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:55:30.937 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:55:30.937 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:55:30.937 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 06:55:30.937 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 06:55:30.937 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:55:30.937 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 06:55:30.937 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:55:30.937 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:55:30.937 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 06:55:30.937 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 06:55:30.937 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 06:55:30.937 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 06:55:30.937 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 06:55:30.937 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 06:55:30.938 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 2766.8457ms
2025-06-14 06:55:30.938 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 06:55:30.938 +09:00 [DBG] Connection id "0HNDAO3AP4QAV" completed keep alive response.
2025-06-14 06:55:30.938 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:55:30.938 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:55:30.938 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:55:30.938 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 2768.6597ms
2025-06-14 06:55:33.030 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 06:55:33.030 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:55:33.030 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 06:55:33.030 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:55:33.030 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:55:33.030 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:55:33.030 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 06:55:33.030 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:55:33.030 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:55:33.030 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:55:33.030 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:55:33.030 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:55:33.031 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:55:33.031 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 06:55:33.031 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 06:55:33.031 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 06:55:33.031 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:55:33.031 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 06:55:33.032 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 06:55:33.032 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 06:55:33.032 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 06:55:33.033 +09:00 [DBG] Creating DbConnection.
2025-06-14 06:55:33.033 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 06:55:33.033 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:55:33.033 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:55:33.033 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 06:55:33.033 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:55:33.033 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 06:55:33.033 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:55:33.034 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType"
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 06:55:33.034 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:55:33.034 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:55:33.034 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 06:55:33.035 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:55:33.035 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 06:55:33.035 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 06:55:33.035 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:55:33.035 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 06:55:33.035 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 06:55:33.035 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 06:55:33.035 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 06:55:33.035 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 06:55:33.035 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequest, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 06:55:33.037 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 5.778ms
2025-06-14 06:55:33.038 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 06:55:33.039 +09:00 [DBG] Connection id "0HNDAO3AP4QAV" completed keep alive response.
2025-06-14 06:55:33.039 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 06:55:33.039 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 06:55:33.039 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 06:55:33.040 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 9.8351ms
2025-06-14 06:56:43.715 +09:00 [DBG] Connection id "0HNDAO3AP4QAV" received FIN.
2025-06-14 06:56:43.720 +09:00 [DBG] Connection id "0HNDAO3AP4QAV" disconnecting.
2025-06-14 06:56:43.720 +09:00 [DBG] Connection id "0HNDAO3AP4QAV" stopped.
2025-06-14 06:56:43.723 +09:00 [DBG] Connection id "0HNDAO3AP4QAV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 06:59:59.848 +09:00 [DBG] Connection id "0HNDAO3AP4QB0" accepted.
2025-06-14 06:59:59.849 +09:00 [DBG] Connection id "0HNDAO3AP4QB0" started.
2025-06-14 06:59:59.904 +09:00 [DBG] Connection 0HNDAO3AP4QB0 established using the following protocol: "Tls12"
2025-06-14 06:59:59.909 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 06:59:59.909 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 06:59:59.911 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 06:59:59.912 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 06:59:59.912 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 06:59:59.912 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 06:59:59.913 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 06:59:59.913 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 06:59:59.913 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 06:59:59.913 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 06:59:59.913 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 06:59:59.913 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 06:59:59.913 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 06:59:59.914 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 06:59:59.915 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 06:59:59.915 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 06:59:59.915 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 06:59:59.915 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 06:59:59.915 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 06:59:59.916 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 07:00:02.993 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:00:02.995 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:00:02.996 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:00:02.996 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:00:02.997 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:00:02.997 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:00:02.997 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:00:02.997 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:00:02.998 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:00:03.001 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:00:03.001 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:00:03.001 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 07:00:03.001 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:00:03.002 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:00:03.002 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:00:03.002 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:00:03.003 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:00:03.003 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:00:03.003 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:00:03.003 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:00:03.003 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 3090.3499ms
2025-06-14 07:00:03.004 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:00:03.004 +09:00 [DBG] Connection id "0HNDAO3AP4QB0" completed keep alive response.
2025-06-14 07:00:03.004 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:00:03.004 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:00:03.004 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:00:03.004 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 3095.1943ms
2025-06-14 07:01:14.851 +09:00 [DBG] Connection id "0HNDAO3AP4QB0" received FIN.
2025-06-14 07:01:14.888 +09:00 [DBG] Connection id "0HNDAO3AP4QB0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:01:14.892 +09:00 [DBG] Connection id "0HNDAO3AP4QB0" disconnecting.
2025-06-14 07:01:14.892 +09:00 [DBG] Connection id "0HNDAO3AP4QB0" stopped.
2025-06-14 07:14:30.774 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 07:14:30.870 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 07:14:31.100 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:14:31.104 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:14:31.110 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-14 07:14:31.112 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:31.119 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:31.120 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:31.122 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:31.124 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 07:14:31.124 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:14:31.124 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:14:31.126 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-14 07:14:31.126 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-14 07:14:31.126 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:31.127 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:31.129 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:14:31.143 +09:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:14:31.143 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:31.145 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 07:14:31.147 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:14:31.147 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:14:31.147 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:31.147 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:31.147 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:31.147 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:31.148 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 07:14:31.148 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 07:14:31.148 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 07:14:31.148 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:31.148 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:31.148 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:14:31.148 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:14:31.148 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:31.148 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:31.167 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 07:14:31.254 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 07:14:31.265 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:31.265 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:31.266 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:14:31.266 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:14:31.266 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:14:31.266 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 07:14:31.267 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 07:14:31.268 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:31.269 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 07:14:31.270 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:31.270 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:31.271 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:14:31.271 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:31.271 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:31.272 +09:00 [DBG] Hosting starting
2025-06-14 07:14:31.289 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 07:14:31.290 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 07:14:31.641 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 07:14:31.641 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 07:14:31.641 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 07:14:31.641 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 07:14:31.641 +09:00 [INF] Hosting environment: Development
2025-06-14 07:14:31.641 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 07:14:31.642 +09:00 [DBG] Hosting started
2025-06-14 07:14:39.465 +09:00 [DBG] Connection id "0HNDAOUO9MC4B" accepted.
2025-06-14 07:14:39.466 +09:00 [DBG] Connection id "0HNDAOUO9MC4B" started.
2025-06-14 07:14:39.511 +09:00 [DBG] Connection 0HNDAOUO9MC4B established using the following protocol: "Tls12"
2025-06-14 07:14:39.532 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 07:14:39.544 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:14:39.545 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:14:39.545 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:39.563 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:14:39.563 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:39.571 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 07:14:39.572 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:14:39.572 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:14:39.572 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:14:39.572 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:14:39.572 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:14:39.573 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:14:39.573 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:14:39.576 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 07:14:39.576 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 07:14:39.577 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:14:39.577 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:14:39.577 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 07:14:39.579 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 07:14:39.585 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:14:39.593 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 07:14:39.621 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 07:14:39.629 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:14:39.630 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:14:39.630 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:39.630 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:39.630 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:14:39.630 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:14:39.631 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:14:39.631 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:14:39.634 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:14:39.636 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:39.637 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 07:14:39.637 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:39.637 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:39.638 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:14:39.639 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:14:39.639 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:14:39.639 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:14:39.640 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:14:39.640 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:14:39.681 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 107.5323ms
2025-06-14 07:14:39.683 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:39.684 +09:00 [DBG] Connection id "0HNDAOUO9MC4B" completed keep alive response.
2025-06-14 07:14:39.684 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:14:39.686 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:39.686 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:39.686 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 155.2076ms
2025-06-14 07:14:41.208 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 07:14:41.210 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:14:41.210 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:14:41.210 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:41.212 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:14:41.212 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:41.212 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 07:14:41.212 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:14:41.212 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:14:41.212 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:14:41.212 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:14:41.213 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:14:41.213 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:14:41.214 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:14:41.215 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 07:14:41.215 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 07:14:41.215 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:14:41.215 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:14:41.215 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 07:14:41.215 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 07:14:41.246 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:14:41.248 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:14:41.248 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:14:41.248 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:41.248 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:41.248 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:14:41.249 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:14:41.249 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:14:41.249 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:14:41.249 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:14:41.249 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:41.249 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 07:14:41.249 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:41.249 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:41.250 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:14:41.250 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:14:41.250 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:14:41.250 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:14:41.250 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:14:41.250 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:14:41.250 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 37.5608ms
2025-06-14 07:14:41.250 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:41.250 +09:00 [DBG] Connection id "0HNDAOUO9MC4B" completed keep alive response.
2025-06-14 07:14:41.250 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:14:41.251 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:41.251 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:41.251 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 43.3681ms
2025-06-14 07:14:41.892 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 07:14:41.892 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:14:41.892 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:14:41.892 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:41.895 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:14:41.895 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:41.895 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 07:14:41.895 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:14:41.895 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:14:41.896 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:14:41.896 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:14:41.896 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:14:41.896 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:14:41.899 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:14:41.899 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 07:14:41.899 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 07:14:41.899 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:14:41.899 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:14:41.899 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 07:14:41.900 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 07:14:41.900 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:14:41.901 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:14:41.901 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:14:41.901 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:41.902 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:41.902 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:14:41.902 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:14:41.902 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:14:41.902 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:14:41.903 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:14:41.903 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:41.904 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 07:14:41.904 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:41.904 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:41.904 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:14:41.905 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:14:41.905 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:14:41.905 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:14:41.905 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:14:41.905 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:14:41.905 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 9.3553ms
2025-06-14 07:14:41.906 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:41.906 +09:00 [DBG] Connection id "0HNDAOUO9MC4B" completed keep alive response.
2025-06-14 07:14:41.906 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:14:41.906 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:41.906 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:41.906 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 14.6842ms
2025-06-14 07:14:43.490 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 07:14:43.491 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:14:43.491 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:14:43.491 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:43.491 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:14:43.492 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:43.492 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 07:14:43.494 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:14:43.495 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:14:43.495 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:14:43.495 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:14:43.495 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:14:43.496 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:14:43.496 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:14:43.497 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 07:14:43.497 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 07:14:43.497 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:14:43.497 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:14:43.498 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 07:14:43.498 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 07:14:43.498 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:14:43.499 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:14:43.499 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:14:43.499 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:43.499 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:43.499 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:14:43.499 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:14:43.500 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:14:43.500 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:14:43.500 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:14:43.501 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:43.502 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 07:14:43.502 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:43.502 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:43.503 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:14:43.503 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:14:43.504 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:14:43.504 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:14:43.504 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:14:43.504 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:14:43.505 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 9.222ms
2025-06-14 07:14:43.505 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:43.505 +09:00 [DBG] Connection id "0HNDAOUO9MC4B" completed keep alive response.
2025-06-14 07:14:43.505 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:14:43.505 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:43.506 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:43.506 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 15.5206ms
2025-06-14 07:14:44.406 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 07:14:44.407 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:14:44.407 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:14:44.407 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:44.408 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:14:44.408 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:44.408 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 07:14:44.408 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:14:44.408 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:14:44.408 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:14:44.408 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:14:44.409 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:14:44.409 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:14:44.409 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:14:44.409 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 07:14:44.410 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 07:14:44.410 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:14:44.410 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:14:44.410 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 07:14:44.411 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 07:14:44.412 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:14:44.412 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:14:44.412 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:14:44.412 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:44.413 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:44.413 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:14:44.413 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:14:44.413 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:14:44.413 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:14:44.414 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:14:44.414 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:44.414 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 07:14:44.414 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:14:44.414 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:44.414 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:14:44.414 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:14:44.415 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:14:44.415 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:14:44.415 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:14:44.415 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:14:44.415 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6.4167ms
2025-06-14 07:14:44.415 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:14:44.415 +09:00 [DBG] Connection id "0HNDAOUO9MC4B" completed keep alive response.
2025-06-14 07:14:44.415 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:14:44.415 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:14:44.415 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:14:44.416 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 9.162ms
2025-06-14 07:15:12.594 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 07:15:12.595 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:15:12.596 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:15:12.596 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:15:12.599 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:15:12.599 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:15:12.600 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 07:15:12.601 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:15:12.601 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:15:12.603 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:15:12.603 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:15:12.603 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:15:12.603 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:15:12.605 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:15:12.605 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 07:15:12.606 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 07:15:12.606 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:15:12.606 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:15:12.606 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 07:15:12.607 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 07:15:12.615 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:15:12.616 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:15:12.616 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:15:12.617 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:15:12.617 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:15:12.617 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:15:12.617 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:15:12.617 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:15:12.617 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:15:12.618 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:15:12.619 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:15:12.620 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 07:15:12.620 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:15:12.621 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:15:12.621 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:15:12.621 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:15:12.621 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:15:12.621 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:15:12.621 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:15:12.622 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:15:12.624 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 20.353ms
2025-06-14 07:15:12.624 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:15:12.624 +09:00 [DBG] Connection id "0HNDAOUO9MC4B" completed keep alive response.
2025-06-14 07:15:12.625 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:15:12.625 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:15:12.625 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:15:12.626 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 31.7191ms
2025-06-14 07:15:48.098 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 07:15:48.099 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:15:48.099 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:15:48.099 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:15:48.100 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:15:48.100 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:15:48.100 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 07:15:48.100 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:15:48.101 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:15:48.101 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:15:48.101 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:15:48.101 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:15:48.101 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:15:48.102 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:15:48.102 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 07:15:48.103 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 07:15:48.103 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:15:48.103 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:15:48.103 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 07:15:48.103 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 07:15:48.107 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:15:48.108 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:15:48.108 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:15:48.109 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:15:48.109 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:15:48.109 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:15:48.109 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:15:48.110 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:15:48.110 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:15:48.110 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:15:48.111 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:15:48.111 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 07:15:48.111 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:15:48.111 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:15:48.112 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:15:48.112 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:15:48.112 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:15:48.112 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:15:48.113 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:15:48.113 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:15:48.114 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 12.7492ms
2025-06-14 07:15:48.114 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:15:48.114 +09:00 [DBG] Connection id "0HNDAOUO9MC4B" completed keep alive response.
2025-06-14 07:15:48.114 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:15:48.114 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:15:48.114 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:15:48.114 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 16.7933ms
2025-06-14 07:16:10.520 +09:00 [DBG] Connection id "0HNDAOUO9MC4B" received FIN.
2025-06-14 07:16:10.522 +09:00 [DBG] Connection id "0HNDAOUO9MC4B" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:16:10.524 +09:00 [DBG] Connection id "0HNDAOUO9MC4B" disconnecting.
2025-06-14 07:16:10.526 +09:00 [DBG] Connection id "0HNDAOUO9MC4B" stopped.
2025-06-14 07:16:23.004 +09:00 [DBG] Connection id "0HNDAOUO9MC4C" accepted.
2025-06-14 07:16:23.004 +09:00 [DBG] Connection id "0HNDAOUO9MC4C" started.
2025-06-14 07:16:23.027 +09:00 [DBG] Connection 0HNDAOUO9MC4C established using the following protocol: "Tls12"
2025-06-14 07:16:23.032 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 07:16:23.032 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:16:23.032 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:16:23.033 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:16:23.033 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:16:23.033 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:16:23.037 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:16:23.037 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:16:23.037 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:16:23.037 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:16:23.038 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:16:23.038 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:16:23.038 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:16:23.039 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 1.1925ms
2025-06-14 07:16:23.039 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:16:23.039 +09:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'ApprovalService.Domain.Interfaces.IApprovalRepository`1[ApprovalService.Domain.Entities.ApprovalRequest]' while attempting to activate 'ApprovalService.API.Controllers.ApprovalController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method29(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-14 07:16:23.048 +09:00 [DBG] Connection id "0HNDAOUO9MC4C" completed keep alive response.
2025-06-14 07:16:23.048 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 500 null text/plain; charset=utf-8 15.9234ms
2025-06-14 07:16:56.597 +09:00 [DBG] Connection id "0HNDAOUO9MC4C" received FIN.
2025-06-14 07:16:56.598 +09:00 [DBG] Connection id "0HNDAOUO9MC4C" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:16:56.599 +09:00 [DBG] Connection id "0HNDAOUO9MC4C" disconnecting.
2025-06-14 07:16:56.599 +09:00 [DBG] Connection id "0HNDAOUO9MC4C" stopped.
2025-06-14 07:17:16.189 +09:00 [DBG] Connection id "0HNDAOUO9MC4D" accepted.
2025-06-14 07:17:16.189 +09:00 [DBG] Connection id "0HNDAOUO9MC4D" started.
2025-06-14 07:17:16.213 +09:00 [DBG] Connection 0HNDAOUO9MC4D established using the following protocol: "Tls12"
2025-06-14 07:17:16.218 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 07:17:16.219 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:17:16.219 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 07:17:16.219 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:17:16.220 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:17:16.220 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:17:16.220 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 07:17:16.220 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:17:16.220 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:17:16.221 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:17:16.221 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:17:16.221 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:17:16.221 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:17:16.221 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:17:16.222 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 07:17:16.222 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 07:17:16.224 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:17:16.224 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:17:16.225 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 07:17:16.225 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 07:17:16.227 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:17:16.228 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:17:16.228 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:17:16.228 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:17:16.228 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:17:16.228 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:17:16.228 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:17:16.228 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:17:16.228 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:17:16.229 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:17:16.229 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:17:16.229 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 07:17:16.229 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:17:16.229 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:17:16.229 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:17:16.229 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:17:16.229 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:17:16.229 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:17:16.229 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:17:16.229 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:17:16.230 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.9607ms
2025-06-14 07:17:16.230 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:17:16.230 +09:00 [DBG] Connection id "0HNDAOUO9MC4D" completed keep alive response.
2025-06-14 07:17:16.230 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:17:16.230 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:17:16.230 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:17:16.230 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 11.5642ms
2025-06-14 07:17:17.609 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 07:17:17.611 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:17:17.611 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:17:17.611 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:17:17.611 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:17:17.611 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:17:17.611 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:17:17.611 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:17:17.611 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:17:17.612 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:17:17.612 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:17:17.612 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:17:17.612 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:17:17.613 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 0.6156ms
2025-06-14 07:17:17.613 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:17:17.613 +09:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'ApprovalService.Domain.Interfaces.IApprovalRepository`1[ApprovalService.Domain.Entities.ApprovalRequest]' while attempting to activate 'ApprovalService.API.Controllers.ApprovalController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method29(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-14 07:17:17.616 +09:00 [DBG] Connection id "0HNDAOUO9MC4D" completed keep alive response.
2025-06-14 07:17:17.616 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 500 null text/plain; charset=utf-8 7.6367ms
2025-06-14 07:18:12.948 +09:00 [DBG] Connection id "0HNDAOUO9MC4D" received FIN.
2025-06-14 07:18:12.950 +09:00 [DBG] Connection id "0HNDAOUO9MC4D" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:18:12.950 +09:00 [DBG] Connection id "0HNDAOUO9MC4D" disconnecting.
2025-06-14 07:18:12.952 +09:00 [DBG] Connection id "0HNDAOUO9MC4D" stopped.
2025-06-14 07:18:41.471 +09:00 [DBG] Connection id "0HNDAOUO9MC4E" accepted.
2025-06-14 07:18:41.481 +09:00 [DBG] Connection id "0HNDAOUO9MC4E" started.
2025-06-14 07:18:41.508 +09:00 [DBG] Connection 0HNDAOUO9MC4E established using the following protocol: "Tls12"
2025-06-14 07:18:41.513 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 07:18:41.514 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:18:41.514 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:18:41.514 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:18:41.515 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:18:41.515 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:18:41.515 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:18:41.515 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:18:41.515 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:18:41.515 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:18:41.515 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:18:41.515 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:18:41.515 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:18:41.516 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 0.5118ms
2025-06-14 07:18:41.516 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:18:41.516 +09:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'ApprovalService.Domain.Interfaces.IApprovalRepository`1[ApprovalService.Domain.Entities.ApprovalRequest]' while attempting to activate 'ApprovalService.API.Controllers.ApprovalController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method29(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-14 07:18:41.517 +09:00 [DBG] Connection id "0HNDAOUO9MC4E" completed keep alive response.
2025-06-14 07:18:41.517 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 500 null text/plain; charset=utf-8 3.7097ms
2025-06-14 07:19:04.265 +09:00 [DBG] Connection id "0HNDAOUO9MC4F" accepted.
2025-06-14 07:19:04.267 +09:00 [DBG] Connection id "0HNDAOUO9MC4F" started.
2025-06-14 07:19:04.324 +09:00 [DBG] Connection 0HNDAOUO9MC4F established using the following protocol: "Tls12"
2025-06-14 07:19:04.336 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 07:19:04.339 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:19:04.339 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:19:04.339 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:19:04.340 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:19:04.340 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:19:04.340 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:19:04.340 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:19:04.340 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:19:04.340 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:19:04.340 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:19:04.340 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:19:04.340 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:19:04.341 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 0.3353ms
2025-06-14 07:19:04.341 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:19:04.341 +09:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'ApprovalService.Domain.Interfaces.IApprovalRepository`1[ApprovalService.Domain.Entities.ApprovalRequest]' while attempting to activate 'ApprovalService.API.Controllers.ApprovalController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method29(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-14 07:19:04.361 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 500 null text/html; charset=utf-8 24.6888ms
2025-06-14 07:19:09.085 +09:00 [DBG] Connection id "0HNDAOUO9MC4F" received FIN.
2025-06-14 07:19:09.087 +09:00 [DBG] Connection id "0HNDAOUO9MC4F" is closed. The last processed stream ID was 1.
2025-06-14 07:19:09.087 +09:00 [DBG] The connection queue processing loop for 0HNDAOUO9MC4F completed.
2025-06-14 07:19:09.087 +09:00 [DBG] Connection id "0HNDAOUO9MC4F" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:19:09.088 +09:00 [DBG] Connection id "0HNDAOUO9MC4F" stopped.
2025-06-14 07:19:16.357 +09:00 [INF] Application is shutting down...
2025-06-14 07:19:16.359 +09:00 [DBG] Hosting stopping
2025-06-14 07:19:16.370 +09:00 [DBG] Connection id "0HNDAOUO9MC4E" disconnecting.
2025-06-14 07:19:16.370 +09:00 [DBG] Connection id "0HNDAOUO9MC4E" stopped.
2025-06-14 07:19:16.370 +09:00 [DBG] Connection id "0HNDAOUO9MC4E" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:19:16.374 +09:00 [DBG] Hosting stopped
2025-06-14 07:19:26.485 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 07:19:26.597 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 07:19:26.879 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:19:26.884 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:19:26.890 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-14 07:19:26.892 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:19:26.899 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:19:26.901 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:19:26.903 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:19:26.905 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 07:19:26.905 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:19:26.905 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:19:26.907 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-14 07:19:26.908 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-14 07:19:26.908 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:19:26.909 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:19:26.911 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:19:26.926 +09:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:19:26.927 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:19:26.928 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 07:19:26.931 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:19:26.931 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:19:26.931 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:19:26.932 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:19:26.932 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:19:26.932 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:19:26.932 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 07:19:26.932 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 07:19:26.932 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 07:19:26.932 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:19:26.932 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:19:26.932 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:19:26.932 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:19:26.932 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:19:26.933 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:19:26.954 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 07:19:27.063 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 07:19:27.076 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:19:27.077 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:19:27.077 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:19:27.077 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:19:27.077 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:19:27.077 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 07:19:27.078 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 07:19:27.080 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:19:27.080 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 07:19:27.081 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:19:27.081 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:19:27.082 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:19:27.082 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:19:27.082 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:19:27.084 +09:00 [DBG] Hosting starting
2025-06-14 07:19:27.118 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 07:19:27.118 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 07:19:27.374 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 07:19:27.374 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 07:19:27.374 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 07:19:27.375 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 07:19:27.375 +09:00 [INF] Hosting environment: Development
2025-06-14 07:19:27.375 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 07:19:27.375 +09:00 [DBG] Hosting started
2025-06-14 07:19:30.962 +09:00 [DBG] Connection id "0HNDAP1F5K6TV" accepted.
2025-06-14 07:19:30.964 +09:00 [DBG] Connection id "0HNDAP1F5K6TV" started.
2025-06-14 07:19:31.027 +09:00 [DBG] Connection 0HNDAP1F5K6TV established using the following protocol: "Tls12"
2025-06-14 07:19:31.065 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 07:19:31.077 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:19:31.079 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:19:31.079 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:19:31.092 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:19:31.092 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:19:31.104 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:19:31.104 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:19:31.104 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:19:31.105 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:19:31.105 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:19:31.105 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:19:31.106 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:19:31.109 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 2.3096ms
2025-06-14 07:19:31.111 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:19:31.111 +09:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'ApprovalService.Domain.Interfaces.IApprovalRepository`1[ApprovalService.Domain.Entities.ApprovalRequest]' while attempting to activate 'ApprovalService.API.Controllers.ApprovalController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-14 07:19:31.145 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 500 null text/html; charset=utf-8 80.748ms
2025-06-14 07:19:34.087 +09:00 [DBG] Connection id "0HNDAP1F5K6TV" received FIN.
2025-06-14 07:19:34.088 +09:00 [DBG] Connection id "0HNDAP1F5K6TV" is closed. The last processed stream ID was 1.
2025-06-14 07:19:34.088 +09:00 [DBG] Connection id "0HNDAP1F5K6TV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:19:34.092 +09:00 [DBG] The connection queue processing loop for 0HNDAP1F5K6TV completed.
2025-06-14 07:19:34.094 +09:00 [DBG] Connection id "0HNDAP1F5K6TV" stopped.
2025-06-14 07:19:43.219 +09:00 [DBG] Connection id "0HNDAP1F5K6U0" accepted.
2025-06-14 07:19:43.219 +09:00 [DBG] Connection id "0HNDAP1F5K6U0" started.
2025-06-14 07:19:43.264 +09:00 [DBG] Connection 0HNDAP1F5K6U0 established using the following protocol: "Tls12"
2025-06-14 07:19:43.266 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 07:19:43.269 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:19:43.270 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:19:43.270 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:19:43.273 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:19:43.273 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:19:43.274 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:19:43.274 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:19:43.274 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:19:43.274 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:19:43.274 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:19:43.274 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:19:43.274 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:19:43.275 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 0.4225ms
2025-06-14 07:19:43.275 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:19:43.276 +09:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'ApprovalService.Domain.Interfaces.IApprovalRepository`1[ApprovalService.Domain.Entities.ApprovalRequest]' while attempting to activate 'ApprovalService.API.Controllers.ApprovalController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-14 07:19:43.281 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 500 null text/html; charset=utf-8 14.9217ms
2025-06-14 07:19:44.087 +09:00 [DBG] Connection id "0HNDAP1F5K6U0" received FIN.
2025-06-14 07:19:44.088 +09:00 [DBG] Connection id "0HNDAP1F5K6U0" is closed. The last processed stream ID was 1.
2025-06-14 07:19:44.088 +09:00 [DBG] The connection queue processing loop for 0HNDAP1F5K6U0 completed.
2025-06-14 07:19:44.088 +09:00 [DBG] Connection id "0HNDAP1F5K6U0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:19:44.089 +09:00 [DBG] Connection id "0HNDAP1F5K6U0" stopped.
2025-06-14 07:19:46.428 +09:00 [DBG] Connection id "0HNDAP1F5K6U1" accepted.
2025-06-14 07:19:46.428 +09:00 [DBG] Connection id "0HNDAP1F5K6U1" started.
2025-06-14 07:19:46.451 +09:00 [DBG] Connection 0HNDAP1F5K6U1 established using the following protocol: "Tls12"
2025-06-14 07:19:46.453 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 07:19:46.454 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:19:46.454 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:19:46.454 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:19:46.456 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:19:46.457 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:19:46.457 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:19:46.457 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:19:46.457 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:19:46.457 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:19:46.457 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:19:46.457 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:19:46.457 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:19:46.458 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 0.5477ms
2025-06-14 07:19:46.458 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:19:46.458 +09:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'ApprovalService.Domain.Interfaces.IApprovalRepository`1[ApprovalService.Domain.Entities.ApprovalRequest]' while attempting to activate 'ApprovalService.API.Controllers.ApprovalController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-14 07:19:46.462 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 500 null text/html; charset=utf-8 9.2751ms
2025-06-14 07:19:49.087 +09:00 [DBG] Connection id "0HNDAP1F5K6U1" received FIN.
2025-06-14 07:19:49.087 +09:00 [DBG] Connection id "0HNDAP1F5K6U1" is closed. The last processed stream ID was 1.
2025-06-14 07:19:49.088 +09:00 [DBG] Connection id "0HNDAP1F5K6U1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:19:49.088 +09:00 [DBG] The connection queue processing loop for 0HNDAP1F5K6U1 completed.
2025-06-14 07:19:49.088 +09:00 [DBG] Connection id "0HNDAP1F5K6U1" stopped.
2025-06-14 07:20:38.662 +09:00 [DBG] Connection id "0HNDAP1F5K6U2" accepted.
2025-06-14 07:20:38.691 +09:00 [DBG] Connection id "0HNDAP1F5K6U2" started.
2025-06-14 07:20:38.771 +09:00 [DBG] Connection 0HNDAP1F5K6U2 established using the following protocol: "Tls12"
2025-06-14 07:20:38.774 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 07:20:38.774 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:20:38.775 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:20:38.775 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:20:38.776 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:20:38.776 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:20:38.784 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:20:38.785 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:20:38.785 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:20:38.786 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:20:38.786 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:20:38.787 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:20:38.788 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:20:38.790 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 3.5138ms
2025-06-14 07:20:38.791 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:20:38.792 +09:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'ApprovalService.Domain.Interfaces.IApprovalRepository`1[ApprovalService.Domain.Entities.ApprovalRequest]' while attempting to activate 'ApprovalService.API.Controllers.ApprovalController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-14 07:20:38.798 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 500 null text/html; charset=utf-8 24.5827ms
2025-06-14 07:20:39.094 +09:00 [DBG] Connection id "0HNDAP1F5K6U2" received FIN.
2025-06-14 07:20:39.094 +09:00 [DBG] Connection id "0HNDAP1F5K6U2" is closed. The last processed stream ID was 1.
2025-06-14 07:20:39.094 +09:00 [DBG] Connection id "0HNDAP1F5K6U2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:20:39.094 +09:00 [DBG] The connection queue processing loop for 0HNDAP1F5K6U2 completed.
2025-06-14 07:20:39.094 +09:00 [DBG] Connection id "0HNDAP1F5K6U2" stopped.
2025-06-14 07:21:20.968 +09:00 [DBG] Connection id "0HNDAP1F5K6U3" accepted.
2025-06-14 07:21:20.969 +09:00 [DBG] Connection id "0HNDAP1F5K6U3" started.
2025-06-14 07:21:20.994 +09:00 [DBG] Connection 0HNDAP1F5K6U3 established using the following protocol: "Tls12"
2025-06-14 07:21:24.099 +09:00 [DBG] Connection id "0HNDAP1F5K6U3" received FIN.
2025-06-14 07:21:24.100 +09:00 [DBG] Connection id "0HNDAP1F5K6U3" is closed. The last processed stream ID was 0.
2025-06-14 07:21:24.100 +09:00 [DBG] Connection id "0HNDAP1F5K6U3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:21:24.130 +09:00 [DBG] The connection queue processing loop for 0HNDAP1F5K6U3 completed.
2025-06-14 07:21:24.131 +09:00 [DBG] Connection id "0HNDAP1F5K6U3" stopped.
2025-06-14 07:21:27.909 +09:00 [DBG] Connection id "0HNDAP1F5K6U4" accepted.
2025-06-14 07:21:27.909 +09:00 [DBG] Connection id "0HNDAP1F5K6U4" started.
2025-06-14 07:21:27.994 +09:00 [DBG] Connection 0HNDAP1F5K6U4 established using the following protocol: "Tls12"
2025-06-14 07:21:28.009 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 07:21:28.009 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:21:28.009 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:21:28.009 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:21:28.014 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:21:28.014 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:21:28.015 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:21:28.015 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:21:28.015 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:21:28.015 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:21:28.015 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:21:28.015 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:21:28.016 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:21:28.016 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 0.5852ms
2025-06-14 07:21:28.016 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:21:28.017 +09:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'ApprovalService.Domain.Interfaces.IApprovalRepository`1[ApprovalService.Domain.Entities.ApprovalRequest]' while attempting to activate 'ApprovalService.API.Controllers.ApprovalController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-14 07:21:28.020 +09:00 [DBG] Connection id "0HNDAP1F5K6U4" completed keep alive response.
2025-06-14 07:21:28.020 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 500 null text/plain; charset=utf-8 16.2197ms
2025-06-14 07:21:57.951 +09:00 [DBG] Connection id "0HNDAP1F5K6U5" accepted.
2025-06-14 07:21:57.962 +09:00 [DBG] Connection id "0HNDAP1F5K6U5" started.
2025-06-14 07:21:58.018 +09:00 [DBG] Connection 0HNDAP1F5K6U5 established using the following protocol: "Tls12"
2025-06-14 07:21:58.140 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null
2025-06-14 07:21:58.141 +09:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-14 07:21:58.141 +09:00 [DBG] Request did not match any endpoints
2025-06-14 07:21:58.149 +09:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-06-14 07:21:58.220 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 79.5935ms
2025-06-14 07:21:59.103 +09:00 [DBG] Connection id "0HNDAP1F5K6U5" received FIN.
2025-06-14 07:21:59.103 +09:00 [DBG] Connection id "0HNDAP1F5K6U5" is closed. The last processed stream ID was 1.
2025-06-14 07:21:59.103 +09:00 [DBG] Connection id "0HNDAP1F5K6U5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:21:59.104 +09:00 [DBG] The connection queue processing loop for 0HNDAP1F5K6U5 completed.
2025-06-14 07:21:59.104 +09:00 [DBG] Connection id "0HNDAP1F5K6U5" stopped.
2025-06-14 07:22:09.227 +09:00 [DBG] Connection id "0HNDAP1F5K6U6" accepted.
2025-06-14 07:22:09.227 +09:00 [DBG] Connection id "0HNDAP1F5K6U6" started.
2025-06-14 07:22:09.255 +09:00 [DBG] Connection 0HNDAP1F5K6U6 established using the following protocol: "Tls12"
2025-06-14 07:22:09.256 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Approval/my-approvals/EC20505 - null null
2025-06-14 07:22:09.256 +09:00 [DBG] 1 candidate(s) found for the request path '/api/Approval/my-approvals/EC20505'
2025-06-14 07:22:09.256 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/Approval/my-approvals/EC20505'
2025-06-14 07:22:09.256 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:22:09.257 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:22:09.257 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:22:09.257 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:22:09.257 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:22:09.257 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:22:09.257 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:22:09.257 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:22:09.257 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:22:09.258 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:22:09.258 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 0.6149ms
2025-06-14 07:22:09.259 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:22:09.259 +09:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'ApprovalService.Domain.Interfaces.IApprovalRepository`1[ApprovalService.Domain.Entities.ApprovalRequest]' while attempting to activate 'ApprovalService.API.Controllers.ApprovalController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method17(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-14 07:22:09.262 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Approval/my-approvals/EC20505 - 500 null text/plain; charset=utf-8 5.7293ms
2025-06-14 07:22:14.105 +09:00 [DBG] Connection id "0HNDAP1F5K6U6" received FIN.
2025-06-14 07:22:14.105 +09:00 [DBG] Connection id "0HNDAP1F5K6U6" is closed. The last processed stream ID was 1.
2025-06-14 07:22:14.105 +09:00 [DBG] Connection id "0HNDAP1F5K6U6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:22:14.106 +09:00 [DBG] The connection queue processing loop for 0HNDAP1F5K6U6 completed.
2025-06-14 07:22:14.107 +09:00 [DBG] Connection id "0HNDAP1F5K6U6" stopped.
2025-06-14 07:22:28.314 +09:00 [DBG] Connection id "0HNDAP1F5K6U4" received FIN.
2025-06-14 07:22:28.315 +09:00 [DBG] Connection id "0HNDAP1F5K6U4" disconnecting.
2025-06-14 07:22:28.316 +09:00 [DBG] Connection id "0HNDAP1F5K6U4" stopped.
2025-06-14 07:22:28.316 +09:00 [DBG] Connection id "0HNDAP1F5K6U4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:25:37.211 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 07:25:37.331 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 07:25:37.619 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:25:37.624 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:25:37.630 +09:00 [DBG] Created DbConnection. (4ms).
2025-06-14 07:25:37.632 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:25:37.643 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:25:37.645 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:25:37.647 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:25:37.649 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 07:25:37.649 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:25:37.649 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:25:37.652 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-14 07:25:37.652 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-14 07:25:37.652 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:25:37.653 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:25:37.656 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:25:37.669 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:25:37.670 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:25:37.671 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 07:25:37.674 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:25:37.674 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:25:37.674 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:25:37.674 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:25:37.674 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:25:37.674 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:25:37.675 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 07:25:37.675 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 07:25:37.675 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 07:25:37.675 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:25:37.675 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:25:37.675 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:25:37.676 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:25:37.676 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:25:37.676 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:25:37.698 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 07:25:37.798 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 07:25:37.810 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:25:37.811 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:25:37.811 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:25:37.811 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:25:37.811 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:25:37.811 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 07:25:37.812 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 07:25:37.814 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:25:37.815 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 07:25:37.816 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:25:37.816 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:25:37.816 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:25:37.817 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:25:37.817 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:25:37.818 +09:00 [DBG] Hosting starting
2025-06-14 07:25:37.852 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 07:25:37.853 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 07:25:38.102 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 07:25:38.103 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 07:25:38.103 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 07:25:38.103 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 07:25:38.104 +09:00 [INF] Hosting environment: Development
2025-06-14 07:25:38.104 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 07:25:38.104 +09:00 [DBG] Hosting started
2025-06-14 07:25:46.960 +09:00 [DBG] Connection id "0HNDAP4V7DOJT" accepted.
2025-06-14 07:25:46.961 +09:00 [DBG] Connection id "0HNDAP4V7DOJT" started.
2025-06-14 07:25:46.998 +09:00 [DBG] Connection 0HNDAP4V7DOJT established using the following protocol: "Tls12"
2025-06-14 07:25:47.041 +09:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Approval/my-approvals/EC20505 - null null
2025-06-14 07:25:47.055 +09:00 [DBG] 1 candidate(s) found for the request path '/api/Approval/my-approvals/EC20505'
2025-06-14 07:25:47.057 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/Approval/my-approvals/EC20505'
2025-06-14 07:25:47.058 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:25:47.073 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:25:47.074 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:25:47.084 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:25:47.084 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:25:47.084 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:25:47.085 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:25:47.085 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:25:47.085 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:25:47.086 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:25:47.086 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:25:47.093 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 07:25:47.093 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 07:25:47.094 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 07:25:47.094 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 07:25:47.094 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 07:25:47.096 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 07:25:50.563 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:25:50.575 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 07:25:50.622 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a1.ApproverName
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a2.ApproverEmployeeNumber
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a3.ActionStatus
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a1.ApproverName
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a2.ApproverEmployeeNumber
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a3.ActionStatus
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0)), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 07:25:50.633 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:25:50.633 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:25:50.633 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:25:50.634 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:25:50.634 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:25:50.634 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:25:50.635 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-14 07:25:50.636 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a1"."ApproverName"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a2"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a3"."ActionStatus"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
2025-06-14 07:25:50.639 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a1"."ApproverName"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a2"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a3"."ActionStatus"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
2025-06-14 07:25:50.643 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:25:50.643 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 07:25:50.643 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:25:50.643 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:25:50.645 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:25:50.646 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:25:50.646 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:25:50.646 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:25:50.646 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:25:50.647 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:25:50.699 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 3608.7892ms
2025-06-14 07:25:50.701 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:25:50.703 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:25:50.704 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:25:50.704 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:25:50.705 +09:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 3665.1187ms
2025-06-14 07:25:54.136 +09:00 [DBG] Connection id "0HNDAP4V7DOJT" received FIN.
2025-06-14 07:25:54.140 +09:00 [DBG] Connection id "0HNDAP4V7DOJT" is closed. The last processed stream ID was 1.
2025-06-14 07:25:54.140 +09:00 [DBG] Connection id "0HNDAP4V7DOJT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:25:54.143 +09:00 [DBG] The connection queue processing loop for 0HNDAP4V7DOJT completed.
2025-06-14 07:25:54.152 +09:00 [DBG] Connection id "0HNDAP4V7DOJT" stopped.
2025-06-14 07:26:04.364 +09:00 [DBG] Connection id "0HNDAP4V7DOJU" accepted.
2025-06-14 07:26:04.365 +09:00 [DBG] Connection id "0HNDAP4V7DOJU" started.
2025-06-14 07:26:04.389 +09:00 [DBG] Connection 0HNDAP4V7DOJU established using the following protocol: "Tls12"
2025-06-14 07:26:04.397 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 07:26:04.399 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:26:04.399 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 07:26:04.399 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:26:04.401 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:26:04.401 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:26:04.402 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:26:04.402 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:26:04.402 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:26:04.402 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:26:04.402 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:26:04.402 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:26:04.402 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:26:04.405 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:26:04.405 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 07:26:04.406 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 07:26:04.406 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 07:26:04.406 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 07:26:04.406 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 07:26:04.406 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 07:26:10.653 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:26:10.658 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:26:10.658 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:26:10.658 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:26:10.659 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:26:10.659 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:26:10.659 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:26:10.659 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:26:10.659 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a1"."ApproverName"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a2"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a3"."ActionStatus"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
2025-06-14 07:26:10.660 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a1"."ApproverName"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a2"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a3"."ActionStatus"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
2025-06-14 07:26:10.660 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:26:10.660 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 07:26:10.660 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:26:10.660 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:26:10.661 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:26:10.661 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:26:10.661 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:26:10.661 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:26:10.661 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:26:10.661 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:26:10.663 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 6260.9628ms
2025-06-14 07:26:10.663 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:26:10.663 +09:00 [DBG] Connection id "0HNDAP4V7DOJU" completed keep alive response.
2025-06-14 07:26:10.664 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:26:10.664 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:26:10.664 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:26:10.664 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 6266.697ms
2025-06-14 07:26:50.283 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 07:26:50.284 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 07:26:50.284 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 07:26:50.284 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:26:50.287 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:26:50.287 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:26:50.292 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 07:26:50.292 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:26:50.292 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:26:50.292 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:26:50.292 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:26:50.292 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:26:50.292 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:26:50.294 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:26:50.294 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 07:26:50.294 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 07:26:50.294 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:26:50.294 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:26:50.294 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 07:26:50.295 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 07:26:54.807 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:26:54.808 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 07:26:54.814 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 07:26:54.815 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:26:54.815 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:26:54.816 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:26:54.816 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:26:54.817 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:26:54.817 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:26:54.817 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:26:54.817 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:26:54.817 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:26:54.818 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:26:54.818 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 07:26:54.818 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:26:54.818 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:26:54.818 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:26:54.818 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:26:54.818 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:26:54.818 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:26:54.818 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:26:54.818 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:26:54.820 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4527.3985ms
2025-06-14 07:26:54.821 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:26:54.821 +09:00 [DBG] Connection id "0HNDAP4V7DOJU" completed keep alive response.
2025-06-14 07:26:54.821 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:26:54.821 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:26:54.821 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:26:54.821 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 4538.5925ms
2025-06-14 07:27:00.517 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 07:27:00.521 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 07:27:00.521 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 07:27:00.521 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:27:00.521 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:27:00.521 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:27:00.522 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 07:27:00.522 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:27:00.522 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:27:00.522 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:27:00.522 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:27:00.522 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:27:00.522 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:27:00.523 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:27:00.523 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 07:27:00.523 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 07:27:00.523 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:27:00.523 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:27:00.523 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 07:27:00.523 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 07:27:05.741 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:27:05.742 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:27:05.742 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:27:05.742 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:27:05.742 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:27:05.742 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:27:05.743 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:27:05.743 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:27:05.743 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:27:05.743 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:27:05.743 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:27:05.743 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 07:27:05.744 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:27:05.744 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:27:05.744 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:27:05.744 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:27:05.744 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:27:05.744 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:27:05.744 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:27:05.744 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:27:05.745 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 5222.9442ms
2025-06-14 07:27:05.745 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:27:05.745 +09:00 [DBG] Connection id "0HNDAP4V7DOJU" completed keep alive response.
2025-06-14 07:27:05.745 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:27:05.745 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:27:05.745 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:27:05.745 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 5228.0551ms
2025-06-14 07:27:18.610 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 07:27:18.610 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 07:27:18.610 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 07:27:18.610 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:27:18.611 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:27:18.611 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:27:18.611 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:27:18.611 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:27:18.611 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:27:18.611 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:27:18.611 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:27:18.611 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:27:18.611 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:27:18.615 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:27:18.615 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 07:27:18.615 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 07:27:18.616 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 07:27:18.616 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 07:27:18.616 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 07:27:18.616 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 07:27:23.591 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:27:23.591 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:27:23.592 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:27:23.592 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:27:23.592 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:27:23.593 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:27:23.593 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:27:23.593 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:27:23.593 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a1"."ApproverName"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a2"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a3"."ActionStatus"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
2025-06-14 07:27:23.594 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a1"."ApproverName"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a2"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a3"."ActionStatus"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
2025-06-14 07:27:23.594 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:27:23.594 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 07:27:23.594 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:27:23.594 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:27:23.595 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:27:23.595 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:27:23.595 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:27:23.595 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:27:23.595 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:27:23.595 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:27:23.596 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 4984.3344ms
2025-06-14 07:27:23.596 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:27:23.596 +09:00 [DBG] Connection id "0HNDAP4V7DOJU" completed keep alive response.
2025-06-14 07:27:23.596 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:27:23.596 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:27:23.596 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:27:23.596 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 4986.4536ms
2025-06-14 07:28:05.244 +09:00 [DBG] Connection id "0HNDAP4V7DOJU" received FIN.
2025-06-14 07:28:05.301 +09:00 [DBG] Connection id "0HNDAP4V7DOJU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 07:28:05.302 +09:00 [DBG] Connection id "0HNDAP4V7DOJU" disconnecting.
2025-06-14 07:28:05.304 +09:00 [DBG] Connection id "0HNDAP4V7DOJU" stopped.
2025-06-14 07:29:10.963 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 07:29:11.044 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 07:29:11.278 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:29:11.282 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:29:11.287 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-14 07:29:11.291 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:11.298 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:11.300 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:11.302 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:29:11.303 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 07:29:11.304 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:29:11.304 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:29:11.306 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-14 07:29:11.307 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-14 07:29:11.307 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:11.308 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:11.310 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:29:11.326 +09:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:29:11.326 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:11.328 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 07:29:11.330 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:29:11.330 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:29:11.330 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:11.330 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:11.330 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:11.330 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:29:11.330 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 07:29:11.330 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 07:29:11.330 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 07:29:11.331 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:11.331 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:11.331 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:29:11.331 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 07:29:11.331 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:11.331 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:29:11.350 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 07:29:11.440 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 07:29:11.452 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:11.452 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:11.452 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:29:11.452 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:29:11.452 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:29:11.453 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 07:29:11.453 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 07:29:11.456 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:11.457 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 07:29:11.458 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:11.458 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:29:11.458 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:29:11.459 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:11.459 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:29:11.460 +09:00 [DBG] Hosting starting
2025-06-14 07:29:11.472 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 07:29:11.472 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 07:29:11.697 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 07:29:11.698 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 07:29:11.698 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 07:29:11.698 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 07:29:11.698 +09:00 [INF] Hosting environment: Development
2025-06-14 07:29:11.698 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 07:29:11.698 +09:00 [DBG] Hosting started
2025-06-14 07:29:18.877 +09:00 [DBG] Connection id "0HNDAP6UCDNQ3" accepted.
2025-06-14 07:29:18.878 +09:00 [DBG] Connection id "0HNDAP6UCDNQ3" started.
2025-06-14 07:29:18.913 +09:00 [DBG] Connection 0HNDAP6UCDNQ3 established using the following protocol: "Tls12"
2025-06-14 07:29:18.928 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 07:29:18.939 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 07:29:18.941 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 07:29:18.941 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:29:18.951 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:29:18.952 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:29:18.961 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:29:18.962 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:29:18.962 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:29:18.962 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:29:18.962 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:29:18.962 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:29:18.963 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:29:18.963 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:29:18.965 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 07:29:18.966 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 07:29:18.966 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 07:29:18.966 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 07:29:18.966 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 07:29:18.968 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 07:29:18.976 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:29:18.985 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 07:29:19.047 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: ApprovalStep.ActionDate (DateTime?), 4], [Property: ApprovalStep.ActionStatus (string), 5], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 6], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 7], [Property: ApprovalStep.ApproverName (string), 8], [Property: ApprovalStep.Comment (string), 9], [Property: ApprovalStep.Department (string), 10], [Property: ApprovalStep.IsFinalApprover (bool) Required, 11], [Property: ApprovalStep.Position (string), 12], [Property: ApprovalStep.Sequence (int) Required, 13], [Property: ApprovalStep.StepType (string), 14] }
            4 -> 3
            5 -> 15
            6 -> 16
            7 -> 17
            8 -> 18
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: ApprovalStep.ActionDate (DateTime?), 4], [Property: ApprovalStep.ActionStatus (string), 5], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 6], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 7], [Property: ApprovalStep.ApproverName (string), 8], [Property: ApprovalStep.Comment (string), 9], [Property: ApprovalStep.Department (string), 10], [Property: ApprovalStep.IsFinalApprover (bool) Required, 11], [Property: ApprovalStep.Position (string), 12], [Property: ApprovalStep.Sequence (int) Required, 13], [Property: ApprovalStep.StepType (string), 14] }
            4 -> 3
            5 -> 15
            6 -> 16
            7 -> 17
            8 -> 18
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            List<ApprovalStep> namelessParameter{0};
            int? value5;
            string value6;
            string value7;
            string value8;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value5 = (int?)dataReader.GetInt32(15);
            value6 = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
            value7 = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
            value8 = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                namelessParameter{0}, 
                (object)value5, 
                value6, 
                value7, 
                value8 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(3) ? default(Guid?) : (Guid?)dataReader.GetGuid(3) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(3) ? default(object) : (object)dataReader.GetGuid(3) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(3) ? default(Guid) : dataReader.GetGuid(3);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(6) ? default(Guid) : dataReader.GetGuid(6);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(11) ? default(bool) : dataReader.GetBoolean(11);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(13) ? default(int) : dataReader.GetInt32(13);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[3]), 
            CurrentStep = (int)(int?)(resultContext.Values[4]), 
            CurrentApproverName = (string)(resultContext.Values[5]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[6]), 
            CurrentActionStatus = (string)(resultContext.Values[7]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 07:29:19.058 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:29:19.058 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:29:19.058 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:19.058 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:19.058 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:29:19.058 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:29:19.059 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:29:19.060 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 07:29:19.063 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 07:29:19.080 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 07:29:19.095 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 07:29:19.095 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 07:29:19.095 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 07:29:19.095 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:19.095 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 32ms reading results.
2025-06-14 07:29:19.096 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:19.096 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:29:19.096 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:29:19.097 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:29:19.097 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:29:19.097 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:29:19.097 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:29:19.097 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:29:19.140 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 176.4836ms
2025-06-14 07:29:19.143 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:29:19.143 +09:00 [DBG] Connection id "0HNDAP6UCDNQ3" completed keep alive response.
2025-06-14 07:29:19.144 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:29:19.145 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:19.145 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:29:19.145 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 217.8995ms
2025-06-14 07:29:37.582 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 07:29:37.584 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 07:29:37.584 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 07:29:37.585 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:29:37.587 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:29:37.587 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:29:37.594 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 07:29:37.594 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:29:37.595 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:29:37.595 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:29:37.595 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:29:37.595 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:29:37.596 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:29:37.599 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:29:37.602 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 07:29:37.602 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 07:29:37.602 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:29:37.602 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 07:29:37.602 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 07:29:37.603 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 07:29:37.641 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:29:37.642 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 07:29:37.647 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 07:29:37.648 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:29:37.649 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:29:37.649 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:37.649 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:37.649 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:29:37.649 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:29:37.649 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:29:37.649 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:29:37.649 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 07:29:37.649 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:37.649 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 07:29:37.650 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:37.650 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:29:37.650 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:29:37.650 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:29:37.650 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:29:37.650 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:29:37.650 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:29:37.650 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:29:37.650 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 54.6735ms
2025-06-14 07:29:37.650 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 07:29:37.651 +09:00 [DBG] Connection id "0HNDAP6UCDNQ3" completed keep alive response.
2025-06-14 07:29:37.651 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:29:37.651 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:37.651 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:29:37.651 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 69.1402ms
2025-06-14 07:29:40.784 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - null null
2025-06-14 07:29:40.786 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-14 07:29:40.786 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-14 07:29:40.786 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 07:29:40.787 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:29:40.787 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 07:29:40.792 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 07:29:40.792 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:29:40.793 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:29:40.793 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:29:40.793 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:29:40.793 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:29:40.793 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:29:40.794 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 07:29:40.794 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 07:29:40.795 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 07:29:40.795 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 07:29:40.796 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 07:29:40.796 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 07:29:40.797 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 07:29:40.801 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:29:40.802 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-14 07:29:40.804 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-14 07:29:40.804 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-14 07:29:40.817 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-14 07:29:40.829 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(27) ? default(Guid?) : (Guid?)dataReader.GetGuid(27) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(27) ? default(object) : (object)dataReader.GetGuid(27) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(27) ? default(Guid) : dataReader.GetGuid(27);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(28) ? default(Guid) : dataReader.GetGuid(28);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(29) ? default(string) : dataReader.GetString(29);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(31) ? default(long?) : (long?)dataReader.GetInt64(31);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(33) ? default(DateTime) : dataReader.GetDateTime(33);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(34) ? default(string) : dataReader.GetString(34);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 07:29:40.834 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:29:40.834 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:29:40.834 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:40.834 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:40.834 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:29:40.835 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:29:40.835 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:29:40.835 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 07:29:40.837 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 07:29:40.842 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 07:29:40.859 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 07:29:40.860 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 07:29:40.860 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:40.860 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 23ms reading results.
2025-06-14 07:29:40.860 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:40.861 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:29:40.861 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:29:40.861 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:29:40.861 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:29:40.861 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:29:40.861 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:29:40.861 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 07:29:40.861 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 68.058ms
2025-06-14 07:29:40.861 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 07:29:40.861 +09:00 [DBG] Connection id "0HNDAP6UCDNQ3" completed keep alive response.
2025-06-14 07:29:40.861 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:29:40.861 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:40.861 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:29:40.861 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - 200 null application/json; charset=utf-8 77.6537ms
2025-06-14 07:29:50.734 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 07:29:50.736 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 07:29:50.740 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 07:29:50.740 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:29:50.744 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 07:29:50.744 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:29:50.744 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 07:29:50.744 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 07:29:50.745 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 07:29:50.745 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 07:29:50.745 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 07:29:50.745 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 07:29:50.746 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:29:50.748 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 07:29:50.749 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 07:29:50.749 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 07:29:50.749 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 07:29:50.749 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 07:29:50.749 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 07:29:50.750 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 07:29:50.751 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 07:29:50.754 +09:00 [DBG] Creating DbConnection.
2025-06-14 07:29:50.754 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 07:29:50.755 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:50.755 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:50.755 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 07:29:50.755 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:29:50.755 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 07:29:50.756 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 07:29:50.756 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 07:29:50.756 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 07:29:50.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 07:29:50.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 07:29:50.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 07:29:50.757 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:50.757 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 07:29:50.757 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 07:29:50.757 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:29:50.757 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 07:29:50.757 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 07:29:50.757 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 07:29:50.758 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 07:29:50.758 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 07:29:50.758 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 07:29:50.759 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.6862ms
2025-06-14 07:29:50.759 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 07:29:50.759 +09:00 [DBG] Connection id "0HNDAP6UCDNQ3" completed keep alive response.
2025-06-14 07:29:50.759 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 07:29:50.759 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 07:29:50.759 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 07:29:50.760 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 25.6941ms
2025-06-14 08:24:04.339 +09:00 [DBG] Connection id "0HNDAP6UCDNQ3" received FIN.
2025-06-14 08:24:04.345 +09:00 [DBG] Connection id "0HNDAP6UCDNQ3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 08:24:04.355 +09:00 [DBG] Connection id "0HNDAP6UCDNQ3" disconnecting.
2025-06-14 08:24:04.361 +09:00 [DBG] Connection id "0HNDAP6UCDNQ3" stopped.
2025-06-14 08:25:59.266 +09:00 [INF] Application is shutting down...
2025-06-14 08:25:59.267 +09:00 [DBG] Hosting stopping
2025-06-14 08:25:59.283 +09:00 [DBG] Hosting stopped
2025-06-14 08:26:04.611 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 08:26:04.951 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 08:26:05.367 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:26:05.378 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:26:05.388 +09:00 [DBG] Created DbConnection. (8ms).
2025-06-14 08:26:05.394 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:26:05.402 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:26:05.407 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:26:05.411 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (2ms).
2025-06-14 08:26:05.413 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 08:26:05.413 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:26:05.413 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:26:05.416 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-14 08:26:05.417 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-14 08:26:05.417 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:26:05.418 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:26:05.426 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 08:26:05.450 +09:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 08:26:05.451 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:26:05.452 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 08:26:05.457 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:26:05.457 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:26:05.457 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:26:05.458 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:26:05.458 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:26:05.458 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:26:05.458 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 08:26:05.458 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 08:26:05.458 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 08:26:05.459 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:26:05.459 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:26:05.459 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 08:26:05.459 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 08:26:05.460 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:26:05.460 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:26:05.490 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 08:26:05.610 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 08:26:05.624 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:26:05.625 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:26:05.625 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:26:05.625 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:26:05.625 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:26:05.626 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 08:26:05.627 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 08:26:05.629 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:26:05.629 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 08:26:05.630 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:26:05.630 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:26:05.631 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:26:05.631 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:26:05.631 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:26:05.633 +09:00 [DBG] Hosting starting
2025-06-14 08:26:05.650 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 08:26:05.651 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 08:26:05.907 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 08:26:05.907 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 08:26:05.908 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 08:26:05.908 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 08:26:05.908 +09:00 [INF] Hosting environment: Development
2025-06-14 08:26:05.908 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 08:26:05.908 +09:00 [DBG] Hosting started
2025-06-14 08:26:44.463 +09:00 [DBG] Connection id "0HNDAQ718330F" accepted.
2025-06-14 08:26:44.465 +09:00 [DBG] Connection id "0HNDAQ718330F" started.
2025-06-14 08:26:44.503 +09:00 [DBG] Connection 0HNDAQ718330F established using the following protocol: "Tls12"
2025-06-14 08:26:44.526 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:26:44.537 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:26:44.539 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:26:44.540 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:26:44.567 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:26:44.570 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:26:44.676 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:26:44.676 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:26:44.676 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:26:44.677 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:26:44.677 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:26:44.677 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:26:44.677 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:26:44.678 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:26:44.680 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:26:44.681 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:26:44.682 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:26:44.682 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:26:44.682 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:26:44.690 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:26:44.700 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:26:44.711 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantName = r.ApplicantName, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 08:26:44.776 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: ApprovalStep.ActionDate (DateTime?), 7], [Property: ApprovalStep.ActionStatus (string), 8], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 9], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 10], [Property: ApprovalStep.ApproverName (string), 11], [Property: ApprovalStep.Comment (string), 12], [Property: ApprovalStep.Department (string), 13], [Property: ApprovalStep.IsFinalApprover (bool) Required, 14], [Property: ApprovalStep.Position (string), 15], [Property: ApprovalStep.Sequence (int) Required, 16], [Property: ApprovalStep.StepType (string), 17] }
            7 -> 6
            8 -> 18
            9 -> 19
            10 -> 20
            11 -> 21
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: ApprovalStep.ActionDate (DateTime?), 7], [Property: ApprovalStep.ActionStatus (string), 8], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 9], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 10], [Property: ApprovalStep.ApproverName (string), 11], [Property: ApprovalStep.Comment (string), 12], [Property: ApprovalStep.Department (string), 13], [Property: ApprovalStep.IsFinalApprover (bool) Required, 14], [Property: ApprovalStep.Position (string), 15], [Property: ApprovalStep.Sequence (int) Required, 16], [Property: ApprovalStep.StepType (string), 17] }
            7 -> 6
            8 -> 18
            9 -> 19
            10 -> 20
            11 -> 21
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            string value4;
            string value5;
            string value6;
            List<ApprovalStep> namelessParameter{0};
            int? value8;
            string value9;
            string value10;
            string value11;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.GetString(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value8 = (int?)dataReader.GetInt32(18);
            value9 = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
            value10 = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
            value11 = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                value4, 
                value5, 
                value6, 
                namelessParameter{0}, 
                (object)value8, 
                value9, 
                value10, 
                value11 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(6) ? default(Guid?) : (Guid?)dataReader.GetGuid(6) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(6) ? default(object) : (object)dataReader.GetGuid(6) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(6) ? default(Guid) : dataReader.GetGuid(6);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(7) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(7);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(14) ? default(bool) : dataReader.GetBoolean(14);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(16) ? default(int) : dataReader.GetInt32(16);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[3]), 
            ApplicantName = (string)(resultContext.Values[4]), 
            Status = (string)(resultContext.Values[5]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[6]), 
            CurrentStep = (int)(int?)(resultContext.Values[7]), 
            CurrentApproverName = (string)(resultContext.Values[8]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[9]), 
            CurrentActionStatus = (string)(resultContext.Values[10]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 08:26:44.789 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:26:44.789 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:26:44.789 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:26:44.789 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:26:44.789 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:26:44.789 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:26:44.790 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:26:44.791 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:26:44.793 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:26:44.810 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:26:44.827 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:26:44.827 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:26:44.827 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:26:44.827 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:26:44.827 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 33ms reading results.
2025-06-14 08:26:44.827 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:26:44.827 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:26:44.828 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:26:44.829 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:26:44.829 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:26:44.829 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:26:44.829 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:26:44.829 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:26:44.879 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 200.9026ms
2025-06-14 08:26:44.882 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:26:44.882 +09:00 [DBG] Connection id "0HNDAQ718330F" completed keep alive response.
2025-06-14 08:26:44.883 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:26:44.884 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:26:44.885 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:26:44.885 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 360.5472ms
2025-06-14 08:27:07.768 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:27:07.771 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:27:07.771 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:27:07.771 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:27:07.773 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:27:07.773 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:27:07.774 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:27:07.774 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:27:07.774 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:27:07.774 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:27:07.774 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:27:07.774 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:27:07.774 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:27:07.776 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:27:07.776 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:27:07.776 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:27:07.776 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:27:07.776 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:27:07.776 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:27:07.777 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:27:07.806 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:27:07.810 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:27:07.810 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:27:07.810 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:27:07.810 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:27:07.810 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:27:07.810 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:27:07.810 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:27:07.810 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:27:07.811 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:27:07.812 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:27:07.812 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:27:07.812 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:27:07.812 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:27:07.812 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:27:07.812 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:27:07.812 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:27:07.812 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:27:07.813 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:27:07.813 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:27:07.813 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:27:07.813 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:27:07.813 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:27:07.813 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:27:07.814 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 39.1288ms
2025-06-14 08:27:07.814 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:27:07.814 +09:00 [DBG] Connection id "0HNDAQ718330F" completed keep alive response.
2025-06-14 08:27:07.814 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:27:07.814 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:27:07.814 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:27:07.814 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 46.4348ms
2025-06-14 08:27:28.074 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:27:28.080 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:27:28.082 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:27:28.083 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:27:28.096 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:27:28.097 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:27:28.098 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:27:28.101 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:27:28.101 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:27:28.102 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:27:28.102 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:27:28.102 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:27:28.102 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:27:28.104 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:27:28.104 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:27:28.104 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:27:28.105 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:27:28.105 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:27:28.105 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:27:28.105 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:27:28.106 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:27:28.108 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:27:28.108 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:27:28.108 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:27:28.108 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:27:28.108 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:27:28.108 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:27:28.108 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:27:28.109 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:27:28.109 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:27:28.109 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:27:28.109 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:27:28.109 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:27:28.110 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:27:28.110 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:27:28.110 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:27:28.110 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:27:28.110 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:27:28.110 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:27:28.110 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:27:28.110 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:27:28.110 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:27:28.110 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:27:28.110 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:27:28.111 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.7987ms
2025-06-14 08:27:28.111 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:27:28.111 +09:00 [DBG] Connection id "0HNDAQ718330F" completed keep alive response.
2025-06-14 08:27:28.111 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:27:28.111 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:27:28.111 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:27:28.111 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 38.0154ms
2025-06-14 08:28:29.482 +09:00 [DBG] Connection id "0HNDAQ718330F" received FIN.
2025-06-14 08:28:29.494 +09:00 [DBG] Connection id "0HNDAQ718330F" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 08:28:29.509 +09:00 [DBG] Connection id "0HNDAQ718330F" disconnecting.
2025-06-14 08:28:29.525 +09:00 [DBG] Connection id "0HNDAQ718330F" stopped.
2025-06-14 08:29:27.061 +09:00 [DBG] Connection id "0HNDAQ718330G" accepted.
2025-06-14 08:29:27.062 +09:00 [DBG] Connection id "0HNDAQ718330G" started.
2025-06-14 08:29:27.087 +09:00 [DBG] Connection 0HNDAQ718330G established using the following protocol: "Tls12"
2025-06-14 08:29:27.097 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:29:27.097 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:29:27.098 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:29:27.098 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:29:27.098 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:29:27.098 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:29:27.099 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:29:27.099 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:29:27.099 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:29:27.099 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:29:27.099 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:29:27.099 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:29:27.099 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:29:27.100 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:29:27.100 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:29:27.100 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:29:27.100 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:29:27.100 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:29:27.100 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:29:27.101 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:29:27.102 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:29:27.105 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:29:27.106 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:29:27.106 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:29:27.106 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:29:27.106 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:29:27.106 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:29:27.106 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:29:27.106 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:29:27.107 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:29:27.107 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:29:27.108 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:29:27.108 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:29:27.109 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:29:27.109 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:29:27.109 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 08:29:27.109 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:29:27.109 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:29:27.109 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:29:27.109 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:29:27.109 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:29:27.109 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:29:27.109 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:29:27.110 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:29:27.110 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 10.7334ms
2025-06-14 08:29:27.110 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:29:27.110 +09:00 [DBG] Connection id "0HNDAQ718330G" completed keep alive response.
2025-06-14 08:29:27.110 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:29:27.110 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:29:27.111 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:29:27.111 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 13.4747ms
2025-06-14 08:30:33.337 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:30:33.339 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:30:33.339 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:30:33.341 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:30:33.345 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:30:33.345 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:30:33.346 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:30:33.346 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:30:33.346 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:30:33.347 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:30:33.347 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:30:33.347 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:30:33.347 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:30:33.348 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:30:33.348 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:30:33.349 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:30:33.349 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:30:33.349 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:30:33.349 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:30:33.350 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:30:33.357 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:30:33.360 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:30:33.361 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:30:33.361 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:30:33.361 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:30:33.361 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:30:33.362 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:30:33.362 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:30:33.362 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:30:33.362 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:30:33.363 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:30:33.363 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:30:33.363 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:30:33.363 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:30:33.363 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:30:33.363 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:30:33.363 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:30:33.364 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:30:33.364 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:30:33.364 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:30:33.364 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:30:33.364 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:30:33.364 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:30:33.364 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:30:33.365 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 17.7218ms
2025-06-14 08:30:33.365 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:30:33.365 +09:00 [DBG] Connection id "0HNDAQ718330G" completed keep alive response.
2025-06-14 08:30:33.365 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:30:33.365 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:30:33.365 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:30:33.365 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 28.7757ms
2025-06-14 08:30:39.559 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:30:39.559 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:30:39.560 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:30:39.560 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:30:39.560 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:30:39.560 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:30:39.560 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:30:39.560 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:30:39.560 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:30:39.560 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:30:39.560 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:30:39.560 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:30:39.561 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:30:39.561 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:30:39.561 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:30:39.561 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:30:39.561 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:30:39.561 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:30:39.561 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:30:39.561 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:30:39.562 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:30:39.562 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:30:39.562 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:30:39.562 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:30:39.563 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:30:39.563 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:30:39.563 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:30:39.563 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:30:39.563 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:30:39.563 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:30:39.563 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:30:39.564 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:30:39.564 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:30:39.564 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:30:39.564 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:30:39.564 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:30:39.564 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:30:39.564 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:30:39.564 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:30:39.564 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:30:39.564 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:30:39.564 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:30:39.564 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:30:39.564 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:30:39.565 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 4.6556ms
2025-06-14 08:30:39.565 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:30:39.565 +09:00 [DBG] Connection id "0HNDAQ718330G" completed keep alive response.
2025-06-14 08:30:39.565 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:30:39.565 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:30:39.565 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:30:39.566 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 6.5947ms
2025-06-14 08:31:42.060 +09:00 [DBG] Connection id "0HNDAQ718330G" received FIN.
2025-06-14 08:31:42.064 +09:00 [DBG] Connection id "0HNDAQ718330G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 08:31:42.066 +09:00 [DBG] Connection id "0HNDAQ718330G" disconnecting.
2025-06-14 08:31:42.068 +09:00 [DBG] Connection id "0HNDAQ718330G" stopped.
2025-06-14 08:33:23.072 +09:00 [DBG] Connection id "0HNDAQ718330H" accepted.
2025-06-14 08:33:23.074 +09:00 [DBG] Connection id "0HNDAQ718330H" started.
2025-06-14 08:33:23.079 +09:00 [DBG] Connection id "0HNDAQ718330I" accepted.
2025-06-14 08:33:23.079 +09:00 [DBG] Connection id "0HNDAQ718330I" started.
2025-06-14 08:33:23.103 +09:00 [DBG] Connection 0HNDAQ718330I established using the following protocol: "Tls12"
2025-06-14 08:33:23.109 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:33:23.109 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:33:23.110 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:33:23.110 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:33:23.110 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:33:23.110 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:33:23.111 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:33:23.111 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:33:23.111 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:33:23.111 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:33:23.111 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:33:23.111 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:33:23.111 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:33:23.112 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:33:23.112 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:33:23.112 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:33:23.112 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:33:23.112 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:33:23.112 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:33:23.112 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:33:23.113 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:33:23.114 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:33:23.114 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:33:23.114 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:33:23.115 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:33:23.115 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:33:23.115 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:33:23.115 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:33:23.115 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:33:23.116 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:33:23.117 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:23.118 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:23.118 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:23.118 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:23.118 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:33:23.118 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 08:33:23.118 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:33:23.118 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:33:23.119 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:33:23.119 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:33:23.119 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:33:23.119 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:33:23.119 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:33:23.120 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:33:23.121 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 9.709ms
2025-06-14 08:33:23.121 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:33:23.121 +09:00 [DBG] Connection id "0HNDAQ718330I" completed keep alive response.
2025-06-14 08:33:23.121 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:33:23.121 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:33:23.121 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:33:23.121 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 12.4847ms
2025-06-14 08:33:23.123 +09:00 [DBG] Connection 0HNDAQ718330H established using the following protocol: "Tls12"
2025-06-14 08:33:23.124 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:33:23.124 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:33:23.124 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:33:23.124 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:33:23.125 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:33:23.125 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:33:23.125 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:33:23.125 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:33:23.125 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:33:23.125 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:33:23.125 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:33:23.125 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:33:23.125 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:33:23.126 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:33:23.127 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:33:23.127 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:33:23.127 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:33:23.127 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:33:23.127 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:33:23.127 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:33:23.127 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:33:23.128 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:33:23.128 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:33:23.128 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:33:23.128 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:33:23.128 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:33:23.128 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:33:23.128 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:33:23.128 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:33:23.129 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:33:23.129 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:23.129 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:23.129 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:23.129 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:23.129 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:33:23.129 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:33:23.129 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:33:23.129 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:33:23.130 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:33:23.130 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:33:23.130 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:33:23.130 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:33:23.130 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:33:23.130 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:33:23.130 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 4.9362ms
2025-06-14 08:33:23.130 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:33:23.130 +09:00 [DBG] Connection id "0HNDAQ718330I" completed keep alive response.
2025-06-14 08:33:23.130 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:33:23.131 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:33:23.131 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:33:23.131 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 7.1231ms
2025-06-14 08:33:27.715 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:33:27.715 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:33:27.715 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:33:27.715 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:33:27.715 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:33:27.715 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:33:27.715 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:33:27.715 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:33:27.715 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:33:27.716 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:33:27.716 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:33:27.716 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:33:27.716 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:33:27.716 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:33:27.716 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:33:27.716 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:33:27.716 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:33:27.716 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:33:27.716 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:33:27.716 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:33:27.717 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:33:27.717 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:33:27.717 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:33:27.717 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:33:27.717 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:33:27.717 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:33:27.717 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:33:27.717 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:33:27.717 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:33:27.718 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:33:27.718 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:27.718 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:27.718 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:27.718 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:27.719 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:33:27.719 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:33:27.719 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:33:27.719 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:33:27.719 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:33:27.719 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:33:27.719 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:33:27.719 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:33:27.719 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:33:27.719 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:33:27.720 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 3.9278ms
2025-06-14 08:33:27.720 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:33:27.720 +09:00 [DBG] Connection id "0HNDAQ718330H" completed keep alive response.
2025-06-14 08:33:27.720 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:33:27.720 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:33:27.720 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:33:27.721 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 5.9488ms
2025-06-14 08:33:43.110 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:33:43.110 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:33:43.110 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:33:43.110 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:33:43.111 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:33:43.111 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:33:43.111 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:33:43.112 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:33:43.112 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:33:43.112 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:33:43.112 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:33:43.112 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:33:43.112 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:33:43.113 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:33:43.114 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:33:43.114 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:33:43.114 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:33:43.114 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:33:43.114 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:33:43.114 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:33:43.116 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:33:43.118 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:33:43.118 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:33:43.119 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:33:43.119 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:33:43.120 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:33:43.120 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:33:43.120 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:33:43.120 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:33:43.122 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:33:43.124 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:43.124 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:43.124 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:43.124 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:33:43.124 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:33:43.125 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 08:33:43.125 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:33:43.125 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:33:43.125 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:33:43.125 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:33:43.125 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:33:43.125 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:33:43.126 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:33:43.126 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:33:43.127 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 15.062ms
2025-06-14 08:33:43.127 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:33:43.127 +09:00 [DBG] Connection id "0HNDAQ718330H" completed keep alive response.
2025-06-14 08:33:43.127 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:33:43.128 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:33:43.128 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:33:43.128 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 18.3166ms
2025-06-14 08:34:01.179 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:34:01.181 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:34:01.181 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:34:01.182 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:34:01.186 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:34:01.186 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:34:01.188 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:34:01.188 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:34:01.188 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:34:01.188 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:34:01.188 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:34:01.189 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:34:01.189 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:34:01.191 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:34:01.191 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:34:01.191 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:34:01.191 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:34:01.191 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:34:01.191 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:34:01.192 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:34:01.193 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:34:01.194 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:34:01.194 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:34:01.194 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:34:01.195 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:34:01.195 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:34:01.195 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:34:01.195 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:34:01.195 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:34:01.195 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:34:01.196 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:34:01.197 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:34:01.198 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:34:01.198 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:34:01.198 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:34:01.198 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 08:34:01.198 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:34:01.198 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:34:01.198 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:34:01.199 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:34:01.199 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:34:01.199 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:34:01.199 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:34:01.199 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:34:01.200 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 10.8192ms
2025-06-14 08:34:01.200 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:34:01.200 +09:00 [DBG] Connection id "0HNDAQ718330H" completed keep alive response.
2025-06-14 08:34:01.200 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:34:01.200 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:34:01.200 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:34:01.200 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 22.328ms
2025-06-14 08:34:16.992 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:34:16.992 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:34:16.992 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:34:16.992 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:34:16.993 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:34:16.993 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:34:16.993 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:34:16.993 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:34:16.993 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:34:16.993 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:34:16.993 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:34:16.993 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:34:16.993 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:34:16.993 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:34:16.993 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:34:16.993 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:34:16.993 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:34:16.994 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:34:16.994 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:34:16.994 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:34:16.994 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:34:16.994 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:34:16.994 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:34:16.994 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:34:16.994 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:34:16.994 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:34:16.995 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:34:16.995 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:34:16.995 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:34:16.995 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:34:16.995 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:34:16.995 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:34:16.995 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:34:16.995 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:34:16.995 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:34:16.995 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:34:16.995 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:34:16.995 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:34:16.995 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:34:16.996 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:34:16.996 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:34:16.996 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:34:16.996 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:34:16.996 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:34:16.996 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 2.8001ms
2025-06-14 08:34:16.996 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:34:16.996 +09:00 [DBG] Connection id "0HNDAQ718330H" completed keep alive response.
2025-06-14 08:34:16.996 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:34:16.996 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:34:16.996 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:34:16.996 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 4.3701ms
2025-06-14 08:34:38.065 +09:00 [DBG] Connection id "0HNDAQ718330I" received FIN.
2025-06-14 08:34:38.065 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:34:38.066 +09:00 [DBG] Connection id "0HNDAQ718330I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 08:34:38.066 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:34:38.066 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:34:38.066 +09:00 [DBG] Connection id "0HNDAQ718330I" disconnecting.
2025-06-14 08:34:38.066 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:34:38.066 +09:00 [DBG] Connection id "0HNDAQ718330I" stopped.
2025-06-14 08:34:38.067 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:34:38.067 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:34:38.067 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:34:38.067 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:34:38.067 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:34:38.067 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:34:38.067 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:34:38.067 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:34:38.068 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:34:38.068 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:34:38.069 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:34:38.069 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:34:38.069 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:34:38.069 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:34:38.069 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:34:38.069 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:34:38.070 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:34:38.073 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:34:38.073 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:34:38.073 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:34:38.073 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:34:38.073 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:34:38.074 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:34:38.074 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:34:38.074 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:34:38.074 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:34:38.074 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:34:38.075 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:34:38.075 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:34:38.075 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:34:38.075 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:34:38.075 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:34:38.075 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:34:38.075 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:34:38.075 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:34:38.075 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:34:38.075 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:34:38.075 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:34:38.076 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:34:38.076 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:34:38.076 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.7872ms
2025-06-14 08:34:38.076 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:34:38.076 +09:00 [DBG] Connection id "0HNDAQ718330H" completed keep alive response.
2025-06-14 08:34:38.077 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:34:38.077 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:34:38.077 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:34:38.077 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 11.9094ms
2025-06-14 08:35:38.074 +09:00 [DBG] Connection id "0HNDAQ718330H" received FIN.
2025-06-14 08:35:38.076 +09:00 [DBG] Connection id "0HNDAQ718330H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 08:35:38.077 +09:00 [DBG] Connection id "0HNDAQ718330H" disconnecting.
2025-06-14 08:35:38.078 +09:00 [DBG] Connection id "0HNDAQ718330H" stopped.
2025-06-14 08:35:47.941 +09:00 [DBG] Connection id "0HNDAQ718330J" accepted.
2025-06-14 08:35:47.941 +09:00 [DBG] Connection id "0HNDAQ718330J" started.
2025-06-14 08:35:47.964 +09:00 [DBG] Connection 0HNDAQ718330J established using the following protocol: "Tls12"
2025-06-14 08:35:47.967 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:35:47.967 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:35:47.967 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:35:47.967 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:35:47.967 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:35:47.967 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:35:47.968 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:35:47.968 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:35:47.968 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:35:47.968 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:35:47.968 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:35:47.968 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:35:47.969 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:35:47.970 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:35:47.970 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:35:47.970 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:35:47.970 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:35:47.970 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:35:47.971 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:35:47.971 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:35:47.972 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:35:47.972 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:35:47.973 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:35:47.973 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:35:47.973 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:35:47.973 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:35:47.973 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:35:47.973 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:35:47.973 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:35:47.975 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:35:47.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:35:47.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:35:47.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:35:47.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:35:47.976 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:35:47.976 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:35:47.976 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:35:47.976 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:35:47.976 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:35:47.977 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:35:47.977 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:35:47.977 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:35:47.977 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:35:47.977 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:35:47.977 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.3847ms
2025-06-14 08:35:47.977 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:35:47.977 +09:00 [DBG] Connection id "0HNDAQ718330J" completed keep alive response.
2025-06-14 08:35:47.977 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:35:47.977 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:35:47.977 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:35:47.977 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 10.849ms
2025-06-14 08:35:56.019 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:35:56.020 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:35:56.020 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:35:56.020 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:35:56.020 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:35:56.020 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:35:56.021 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:35:56.021 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:35:56.021 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:35:56.021 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:35:56.021 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:35:56.021 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:35:56.021 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:35:56.022 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:35:56.022 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:35:56.022 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:35:56.022 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:35:56.022 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:35:56.022 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:35:56.022 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:35:56.023 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:35:56.023 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:35:56.023 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:35:56.023 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:35:56.023 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:35:56.023 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:35:56.023 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:35:56.023 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:35:56.024 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:35:56.024 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:35:56.025 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:35:56.025 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:35:56.025 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:35:56.025 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:35:56.025 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:35:56.025 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:35:56.026 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:35:56.026 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:35:56.026 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:35:56.026 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:35:56.026 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:35:56.026 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:35:56.026 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:35:56.026 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:35:56.027 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 5.3218ms
2025-06-14 08:35:56.027 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:35:56.027 +09:00 [DBG] Connection id "0HNDAQ718330J" completed keep alive response.
2025-06-14 08:35:56.027 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:35:56.027 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:35:56.027 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:35:56.027 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 8.067ms
2025-06-14 08:36:05.994 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:36:05.994 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:36:05.995 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:36:05.995 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:36:05.995 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:36:05.995 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:36:05.995 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:36:05.995 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:36:05.995 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:36:05.995 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:36:05.995 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:36:05.995 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:36:05.996 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:36:05.996 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:36:05.996 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:36:05.996 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:36:05.997 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:36:05.997 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:36:05.997 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:36:05.997 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:36:05.997 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:36:05.998 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:36:05.998 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:36:05.998 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:36:05.998 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:36:05.998 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:36:05.998 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:36:05.998 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:36:05.998 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:36:05.999 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:36:05.999 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:36:05.999 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:36:05.999 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:36:06.000 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:36:06.000 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:36:06.000 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 08:36:06.000 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:36:06.000 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:36:06.000 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:36:06.000 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:36:06.001 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:36:06.001 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:36:06.001 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:36:06.001 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:36:06.001 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 5.5636ms
2025-06-14 08:36:06.001 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:36:06.001 +09:00 [DBG] Connection id "0HNDAQ718330J" completed keep alive response.
2025-06-14 08:36:06.001 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:36:06.002 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:36:06.002 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:36:06.002 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 7.8667ms
2025-06-14 08:36:12.032 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:36:12.032 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:36:12.033 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:36:12.033 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:36:12.033 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:36:12.033 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:36:12.034 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:36:12.034 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:36:12.034 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:36:12.034 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:36:12.034 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:36:12.034 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:36:12.035 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:36:12.036 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:36:12.036 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:36:12.036 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:36:12.037 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:36:12.037 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:36:12.037 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:36:12.038 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:36:12.039 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:36:12.040 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:36:12.040 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:36:12.040 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:36:12.040 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:36:12.040 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:36:12.040 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:36:12.040 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:36:12.040 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:36:12.041 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:36:12.041 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:36:12.041 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:36:12.041 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:36:12.041 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:36:12.041 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:36:12.042 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:36:12.042 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:36:12.042 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:36:12.042 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:36:12.042 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:36:12.042 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:36:12.042 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:36:12.042 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:36:12.043 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:36:12.043 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.3097ms
2025-06-14 08:36:12.043 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:36:12.043 +09:00 [DBG] Connection id "0HNDAQ718330J" completed keep alive response.
2025-06-14 08:36:12.043 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:36:12.043 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:36:12.043 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:36:12.044 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 11.7939ms
2025-06-14 08:37:17.951 +09:00 [DBG] Connection id "0HNDAQ718330J" received FIN.
2025-06-14 08:37:17.953 +09:00 [DBG] Connection id "0HNDAQ718330J" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 08:37:17.955 +09:00 [DBG] Connection id "0HNDAQ718330J" disconnecting.
2025-06-14 08:37:17.956 +09:00 [DBG] Connection id "0HNDAQ718330J" stopped.
2025-06-14 08:37:22.523 +09:00 [DBG] Connection id "0HNDAQ718330K" accepted.
2025-06-14 08:37:22.523 +09:00 [DBG] Connection id "0HNDAQ718330K" started.
2025-06-14 08:37:22.546 +09:00 [DBG] Connection 0HNDAQ718330K established using the following protocol: "Tls12"
2025-06-14 08:37:22.553 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 08:37:22.554 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 08:37:22.554 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 08:37:22.554 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 08:37:22.557 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:37:22.557 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 08:37:22.568 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 08:37:22.568 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:37:22.569 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:37:22.569 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:37:22.569 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:37:22.569 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:37:22.569 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 08:37:22.571 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 08:37:22.571 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 08:37:22.572 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 08:37:22.572 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 08:37:22.572 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 08:37:22.572 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 08:37:22.572 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 08:37:22.575 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:37:22.576 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 08:37:22.582 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 08:37:22.584 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:37:22.584 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:37:22.584 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:37:22.584 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:22.584 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:37:22.584 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:37:22.584 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:37:22.584 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 08:37:22.585 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 08:37:22.585 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:22.585 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:37:22.585 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:22.585 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:37:22.585 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:37:22.585 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:37:22.585 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:37:22.585 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:37:22.585 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:37:22.585 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:37:22.586 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 16.2592ms
2025-06-14 08:37:22.586 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 08:37:22.586 +09:00 [DBG] Connection id "0HNDAQ718330K" completed keep alive response.
2025-06-14 08:37:22.586 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:37:22.586 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:37:22.587 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:37:22.587 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 33.8032ms
2025-06-14 08:37:26.064 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - null null
2025-06-14 08:37:26.066 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-14 08:37:26.066 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-14 08:37:26.066 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 08:37:26.066 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:37:26.066 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 08:37:26.071 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 08:37:26.071 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:37:26.071 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:37:26.071 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:37:26.071 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:37:26.071 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:37:26.071 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 08:37:26.072 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 08:37:26.072 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 08:37:26.072 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 08:37:26.072 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 08:37:26.072 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 08:37:26.072 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 08:37:26.073 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 08:37:26.075 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:37:26.077 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-14 08:37:26.079 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-14 08:37:26.080 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-14 08:37:26.095 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-14 08:37:26.106 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(27) ? default(Guid?) : (Guid?)dataReader.GetGuid(27) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(27) ? default(object) : (object)dataReader.GetGuid(27) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(27) ? default(Guid) : dataReader.GetGuid(27);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(28) ? default(Guid) : dataReader.GetGuid(28);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(29) ? default(string) : dataReader.GetString(29);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(31) ? default(long?) : (long?)dataReader.GetInt64(31);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(33) ? default(DateTime) : dataReader.GetDateTime(33);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(34) ? default(string) : dataReader.GetString(34);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 08:37:26.111 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:37:26.111 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:37:26.111 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:37:26.111 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:26.111 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:37:26.111 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:37:26.111 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:37:26.112 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 08:37:26.113 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 08:37:26.142 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:26.258 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:26.261 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:26.261 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:26.261 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 147ms reading results.
2025-06-14 08:37:26.261 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:26.262 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:37:26.262 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:37:26.262 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:37:26.262 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:37:26.262 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:37:26.262 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:37:26.262 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 08:37:26.262 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 191.1116ms
2025-06-14 08:37:26.262 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 08:37:26.263 +09:00 [DBG] Connection id "0HNDAQ718330K" completed keep alive response.
2025-06-14 08:37:26.263 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:37:26.263 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:37:26.263 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:37:26.263 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - 200 null application/json; charset=utf-8 198.9422ms
2025-06-14 08:37:29.638 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:37:29.638 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:37:29.638 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:37:29.638 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:37:29.639 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:37:29.639 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:37:29.639 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:37:29.639 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:37:29.639 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:37:29.639 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:37:29.639 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:37:29.639 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:37:29.640 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:37:29.640 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:37:29.640 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:37:29.641 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:37:29.641 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:37:29.641 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:37:29.641 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:37:29.641 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:37:29.643 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:37:29.644 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:37:29.644 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:37:29.644 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:37:29.644 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:29.645 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:37:29.646 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:37:29.646 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:37:29.646 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:37:29.647 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:37:29.648 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:29.648 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:29.648 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:29.648 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:29.648 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:29.649 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:37:29.649 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:29.649 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:37:29.649 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:37:29.649 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:37:29.649 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:37:29.649 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:37:29.649 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:37:29.649 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:37:29.650 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 10.097ms
2025-06-14 08:37:29.650 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:37:29.650 +09:00 [DBG] Connection id "0HNDAQ718330K" completed keep alive response.
2025-06-14 08:37:29.650 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:37:29.650 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:37:29.650 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:37:29.651 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 12.5981ms
2025-06-14 08:37:39.337 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - null null
2025-06-14 08:37:39.337 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 08:37:39.338 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 08:37:39.338 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 08:37:39.338 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:37:39.338 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 08:37:39.339 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 08:37:39.339 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:37:39.339 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:37:39.339 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:37:39.340 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:37:39.340 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:37:39.340 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 08:37:39.341 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 08:37:39.342 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 08:37:39.343 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 08:37:39.343 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 08:37:39.343 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 08:37:39.343 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 08:37:39.344 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 08:37:39.344 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:37:39.345 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:37:39.345 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:37:39.345 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:37:39.345 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:39.345 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:37:39.345 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:37:39.346 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:37:39.346 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 08:37:39.347 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 08:37:39.347 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:39.347 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:39.347 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:39.348 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:39.348 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 08:37:39.348 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:39.348 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:37:39.349 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:37:39.349 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:37:39.350 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:37:39.350 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:37:39.350 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:37:39.350 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 08:37:39.350 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 10.3181ms
2025-06-14 08:37:39.350 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 08:37:39.350 +09:00 [DBG] Connection id "0HNDAQ718330K" completed keep alive response.
2025-06-14 08:37:39.350 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:37:39.350 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:37:39.350 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:37:39.351 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - 200 null application/json; charset=utf-8 13.9411ms
2025-06-14 08:37:42.788 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 08:37:42.789 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 08:37:42.789 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 08:37:42.789 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 08:37:42.789 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:37:42.789 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 08:37:42.789 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 08:37:42.789 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:37:42.790 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:37:42.790 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:37:42.791 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:37:42.791 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:37:42.791 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 08:37:42.791 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 08:37:42.792 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 08:37:42.792 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 08:37:42.792 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 08:37:42.792 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 08:37:42.792 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 08:37:42.792 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 08:37:42.793 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:37:42.795 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:37:42.795 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:37:42.796 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:37:42.796 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:42.796 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:37:42.797 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:37:42.797 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:37:42.797 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 08:37:42.798 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 08:37:42.798 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:42.798 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:37:42.798 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:42.798 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:37:42.798 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:37:42.799 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:37:42.799 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:37:42.799 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:37:42.799 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:37:42.799 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:37:42.800 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.4868ms
2025-06-14 08:37:42.800 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 08:37:42.800 +09:00 [DBG] Connection id "0HNDAQ718330K" completed keep alive response.
2025-06-14 08:37:42.800 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:37:42.800 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:37:42.801 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:37:42.802 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 13.9153ms
2025-06-14 08:37:43.453 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:37:43.453 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:37:43.454 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:37:43.454 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:37:43.454 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:37:43.454 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:37:43.454 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:37:43.454 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:37:43.454 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:37:43.455 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:37:43.455 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:37:43.455 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:37:43.455 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:37:43.455 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:37:43.455 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:37:43.456 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:37:43.456 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:37:43.456 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:37:43.456 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:37:43.457 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:37:43.458 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:37:43.459 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:37:43.459 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:37:43.459 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:37:43.459 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:43.459 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:37:43.460 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:37:43.460 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:37:43.460 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:37:43.460 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:37:43.460 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:43.461 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:43.461 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:43.461 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:37:43.461 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:43.461 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:37:43.461 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:37:43.461 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:37:43.462 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:37:43.462 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:37:43.462 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:37:43.462 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:37:43.462 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:37:43.462 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:37:43.462 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 7.4535ms
2025-06-14 08:37:43.462 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:37:43.463 +09:00 [DBG] Connection id "0HNDAQ718330K" completed keep alive response.
2025-06-14 08:37:43.463 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:37:43.463 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:37:43.463 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:37:43.463 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 9.8504ms
2025-06-14 08:38:47.955 +09:00 [DBG] Connection id "0HNDAQ718330K" received FIN.
2025-06-14 08:38:47.959 +09:00 [DBG] Connection id "0HNDAQ718330K" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 08:38:47.960 +09:00 [DBG] Connection id "0HNDAQ718330K" disconnecting.
2025-06-14 08:38:47.961 +09:00 [DBG] Connection id "0HNDAQ718330K" stopped.
2025-06-14 08:46:22.093 +09:00 [DBG] Connection id "0HNDAQ718330L" accepted.
2025-06-14 08:46:22.093 +09:00 [DBG] Connection id "0HNDAQ718330L" started.
2025-06-14 08:46:22.117 +09:00 [DBG] Connection 0HNDAQ718330L established using the following protocol: "Tls12"
2025-06-14 08:46:22.122 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:46:22.122 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:46:22.123 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:46:22.124 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:46:22.128 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:46:22.128 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:46:22.130 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:46:22.130 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:46:22.130 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:46:22.131 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:46:22.131 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:46:22.131 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:46:22.131 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:46:22.132 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:46:22.132 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:46:22.133 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:46:22.133 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:46:22.133 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:46:22.133 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:46:22.133 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:46:22.137 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:46:22.140 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:46:22.140 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:46:22.140 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:46:22.144 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:46:22.144 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:46:22.144 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:46:22.144 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:46:22.144 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:46:22.147 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:46:22.148 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:46:22.148 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:46:22.148 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:46:22.148 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:46:22.148 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:46:22.148 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 08:46:22.149 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:46:22.149 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:46:22.149 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:46:22.150 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:46:22.150 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:46:22.150 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:46:22.150 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:46:22.150 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:46:22.151 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 19.7673ms
2025-06-14 08:46:22.151 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:46:22.151 +09:00 [DBG] Connection id "0HNDAQ718330L" completed keep alive response.
2025-06-14 08:46:22.151 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:46:22.151 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:46:22.151 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:46:22.151 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 28.9717ms
2025-06-14 08:47:37.097 +09:00 [DBG] Connection id "0HNDAQ718330L" received FIN.
2025-06-14 08:47:37.100 +09:00 [DBG] Connection id "0HNDAQ718330L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 08:47:37.100 +09:00 [DBG] Connection id "0HNDAQ718330L" disconnecting.
2025-06-14 08:47:37.101 +09:00 [DBG] Connection id "0HNDAQ718330L" stopped.
2025-06-14 08:49:09.397 +09:00 [INF] Application is shutting down...
2025-06-14 08:49:09.405 +09:00 [DBG] Hosting stopping
2025-06-14 08:49:09.424 +09:00 [DBG] Hosting stopped
2025-06-14 08:49:24.997 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 08:49:25.094 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 08:49:25.410 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:49:25.422 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:49:25.430 +09:00 [DBG] Created DbConnection. (8ms).
2025-06-14 08:49:25.434 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:49:25.443 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:49:25.445 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:49:25.447 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:49:25.448 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 08:49:25.449 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:49:25.449 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:49:25.452 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-14 08:49:25.453 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-14 08:49:25.453 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:49:25.454 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:49:25.458 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 08:49:25.479 +09:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 08:49:25.480 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:49:25.483 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (2ms).
2025-06-14 08:49:25.487 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:49:25.487 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:49:25.487 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:49:25.487 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:49:25.489 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:49:25.489 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:49:25.490 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 08:49:25.490 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 08:49:25.490 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 08:49:25.490 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:49:25.490 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:49:25.490 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 08:49:25.490 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 08:49:25.490 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:49:25.490 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:49:25.521 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 08:49:25.643 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 08:49:25.657 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:49:25.658 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:49:25.658 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:49:25.658 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:49:25.658 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:49:25.658 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 08:49:25.659 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 08:49:25.661 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:49:25.661 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 08:49:25.662 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:49:25.662 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:49:25.663 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:49:25.664 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:49:25.664 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:49:25.665 +09:00 [DBG] Hosting starting
2025-06-14 08:49:25.675 +09:00 [DBG] Middleware loaded
2025-06-14 08:49:25.676 +09:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16091 B).
2025-06-14 08:49:25.676 +09:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (776 B).
2025-06-14 08:49:25.695 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 08:49:25.695 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 08:49:25.695 +09:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-06-14 08:49:26.072 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 08:49:26.072 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 08:49:26.072 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 08:49:26.072 +09:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-06-14 08:49:26.072 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 08:49:26.072 +09:00 [INF] Hosting environment: Development
2025-06-14 08:49:26.073 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 08:49:26.073 +09:00 [DBG] Hosting started
2025-06-14 08:50:37.264 +09:00 [DBG] Connection id "0HNDAQKC8ATDP" accepted.
2025-06-14 08:50:37.265 +09:00 [DBG] Connection id "0HNDAQKC8ATDP" started.
2025-06-14 08:50:37.314 +09:00 [DBG] Connection 0HNDAQKC8ATDP established using the following protocol: "Tls12"
2025-06-14 08:50:37.333 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 08:50:37.346 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:50:37.348 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 08:50:37.348 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:50:37.360 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 08:50:37.360 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:50:37.371 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 08:50:37.371 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 08:50:37.371 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 08:50:37.372 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 08:50:37.372 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 08:50:37.372 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 08:50:37.372 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:50:37.373 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 08:50:37.375 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 08:50:37.376 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 08:50:37.377 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:50:37.377 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 08:50:37.377 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 08:50:37.378 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 08:50:37.389 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 08:50:37.397 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 08:50:37.460 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ApprovalStep.ActionDate (DateTime?), 8], [Property: ApprovalStep.ActionStatus (string), 9], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 10], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 11], [Property: ApprovalStep.ApproverName (string), 12], [Property: ApprovalStep.Comment (string), 13], [Property: ApprovalStep.Department (string), 14], [Property: ApprovalStep.IsFinalApprover (bool) Required, 15], [Property: ApprovalStep.Position (string), 16], [Property: ApprovalStep.Sequence (int) Required, 17], [Property: ApprovalStep.StepType (string), 18] }
            8 -> 7
            9 -> 19
            10 -> 20
            11 -> 21
            12 -> 22
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ApprovalStep.ActionDate (DateTime?), 8], [Property: ApprovalStep.ActionStatus (string), 9], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 10], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 11], [Property: ApprovalStep.ApproverName (string), 12], [Property: ApprovalStep.Comment (string), 13], [Property: ApprovalStep.Department (string), 14], [Property: ApprovalStep.IsFinalApprover (bool) Required, 15], [Property: ApprovalStep.Position (string), 16], [Property: ApprovalStep.Sequence (int) Required, 17], [Property: ApprovalStep.StepType (string), 18] }
            8 -> 7
            9 -> 19
            10 -> 20
            11 -> 21
            12 -> 22
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            string value4;
            string value5;
            string value6;
            string value7;
            List<ApprovalStep> namelessParameter{0};
            int? value9;
            string value10;
            string value11;
            string value12;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.GetString(3);
            value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value9 = (int?)dataReader.GetInt32(19);
            value10 = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
            value11 = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                value4, 
                value5, 
                value6, 
                value7, 
                namelessParameter{0}, 
                (object)value9, 
                value10, 
                value11, 
                value12 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(7) ? default(object) : (object)dataReader.GetGuid(7) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid) : dataReader.GetGuid(7);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(15) ? default(bool) : dataReader.GetBoolean(15);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[3]), 
            ApplicantDepartment = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            Status = (string)(resultContext.Values[6]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[7]), 
            CurrentStep = (int)(int?)(resultContext.Values[8]), 
            CurrentApproverName = (string)(resultContext.Values[9]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[10]), 
            CurrentActionStatus = (string)(resultContext.Values[11]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 08:50:37.471 +09:00 [DBG] Creating DbConnection.
2025-06-14 08:50:37.471 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 08:50:37.471 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:50:37.471 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:50:37.472 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 08:50:37.472 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:50:37.472 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 08:50:37.473 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:50:37.475 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 08:50:37.491 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:50:37.505 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:50:37.506 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:50:37.506 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 08:50:37.506 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:50:37.506 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 30ms reading results.
2025-06-14 08:50:37.506 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 08:50:37.506 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:50:37.507 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 08:50:37.507 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 08:50:37.507 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 08:50:37.507 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 08:50:37.508 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 08:50:37.508 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 08:50:37.548 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 174.9518ms
2025-06-14 08:50:37.550 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 08:50:37.551 +09:00 [DBG] Connection id "0HNDAQKC8ATDP" completed keep alive response.
2025-06-14 08:50:37.551 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 08:50:37.552 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 08:50:37.553 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 08:50:37.553 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 221.2422ms
2025-06-14 08:51:52.268 +09:00 [DBG] Connection id "0HNDAQKC8ATDP" received FIN.
2025-06-14 08:51:52.271 +09:00 [DBG] Connection id "0HNDAQKC8ATDP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 08:51:52.278 +09:00 [DBG] Connection id "0HNDAQKC8ATDP" disconnecting.
2025-06-14 08:51:52.282 +09:00 [DBG] Connection id "0HNDAQKC8ATDP" stopped.
2025-06-14 09:44:18.018 +09:00 [DBG] Connection id "0HNDAQKC8ATDQ" accepted.
2025-06-14 09:44:18.019 +09:00 [DBG] Connection id "0HNDAQKC8ATDQ" started.
2025-06-14 09:44:18.060 +09:00 [DBG] Connection 0HNDAQKC8ATDQ established using the following protocol: "Tls12"
2025-06-14 09:44:18.070 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 09:44:18.078 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:44:18.078 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:44:18.078 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:44:18.084 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 09:44:18.085 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:44:18.088 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 09:44:18.089 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 09:44:18.089 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 09:44:18.089 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 09:44:18.089 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 09:44:18.090 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 09:44:18.090 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:44:18.098 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:44:18.099 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 09:44:18.099 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 09:44:18.099 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:44:18.100 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:44:18.100 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 09:44:18.100 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 09:44:18.146 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 09:44:18.159 +09:00 [DBG] Creating DbConnection.
2025-06-14 09:44:18.159 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 09:44:18.160 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:44:18.163 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:44:18.163 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 09:44:18.163 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:44:18.163 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:44:18.163 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:44:18.168 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:44:18.168 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:18.169 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:18.169 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:18.170 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:18.171 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:44:18.171 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 09:44:18.171 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:44:18.172 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:44:18.172 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 09:44:18.172 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 09:44:18.172 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 09:44:18.172 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 09:44:18.173 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 09:44:18.173 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 09:44:18.174 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 83.741ms
2025-06-14 09:44:18.174 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:44:18.174 +09:00 [DBG] Connection id "0HNDAQKC8ATDQ" completed keep alive response.
2025-06-14 09:44:18.174 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 09:44:18.175 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:44:18.175 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:44:18.175 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 105.9255ms
2025-06-14 09:44:51.570 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 09:44:51.579 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:44:51.585 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:44:51.587 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:44:51.599 +09:00 [DBG] Connection id "0HNDAQKC8ATDR" accepted.
2025-06-14 09:44:51.599 +09:00 [DBG] Connection id "0HNDAQKC8ATDR" started.
2025-06-14 09:44:51.600 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 09:44:51.601 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:44:51.601 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 09:44:51.601 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 09:44:51.602 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 09:44:51.602 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 09:44:51.602 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 09:44:51.602 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 09:44:51.602 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:44:51.609 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:44:51.609 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 09:44:51.610 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 09:44:51.610 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:44:51.610 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:44:51.610 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 09:44:51.611 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 09:44:51.613 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 09:44:51.616 +09:00 [DBG] Creating DbConnection.
2025-06-14 09:44:51.616 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 09:44:51.617 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:44:51.617 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:44:51.618 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 09:44:51.618 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:44:51.618 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:44:51.618 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:44:51.618 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:44:51.619 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:51.619 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:51.619 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:51.620 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:51.620 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:44:51.620 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 09:44:51.620 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:44:51.620 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:44:51.620 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 09:44:51.620 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 09:44:51.620 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 09:44:51.620 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 09:44:51.620 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 09:44:51.620 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 09:44:51.621 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 18.8437ms
2025-06-14 09:44:51.621 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:44:51.621 +09:00 [DBG] Connection id "0HNDAQKC8ATDQ" completed keep alive response.
2025-06-14 09:44:51.621 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 09:44:51.621 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:44:51.621 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:44:51.622 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 53.9697ms
2025-06-14 09:44:51.626 +09:00 [DBG] Connection 0HNDAQKC8ATDR established using the following protocol: "Tls12"
2025-06-14 09:44:51.627 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 09:44:51.627 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:44:51.627 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:44:51.627 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:44:51.628 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 09:44:51.628 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:44:51.628 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 09:44:51.628 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 09:44:51.628 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 09:44:51.629 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 09:44:51.629 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 09:44:51.629 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 09:44:51.629 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:44:51.629 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:44:51.629 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 09:44:51.630 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 09:44:51.630 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:44:51.630 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:44:51.630 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 09:44:51.630 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 09:44:51.631 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 09:44:51.631 +09:00 [DBG] Creating DbConnection.
2025-06-14 09:44:51.631 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 09:44:51.631 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:44:51.631 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:44:51.631 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 09:44:51.631 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:44:51.631 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:44:51.631 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:44:51.632 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:44:51.632 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:51.632 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:51.632 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:51.632 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:51.632 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:44:51.632 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 09:44:51.632 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:44:51.632 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:44:51.632 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 09:44:51.633 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 09:44:51.633 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 09:44:51.633 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 09:44:51.633 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 09:44:51.633 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 09:44:51.633 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 4.0918ms
2025-06-14 09:44:51.633 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:44:51.633 +09:00 [DBG] Connection id "0HNDAQKC8ATDQ" completed keep alive response.
2025-06-14 09:44:51.633 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 09:44:51.634 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:44:51.634 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:44:51.634 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 7.0015ms
2025-06-14 09:44:54.315 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 09:44:54.317 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:44:54.319 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:44:54.319 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:44:54.320 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 09:44:54.320 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:44:54.320 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 09:44:54.321 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 09:44:54.321 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 09:44:54.321 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 09:44:54.321 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 09:44:54.321 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 09:44:54.321 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:44:54.322 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:44:54.323 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 09:44:54.323 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 09:44:54.323 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:44:54.323 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:44:54.323 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 09:44:54.323 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 09:44:54.324 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 09:44:54.325 +09:00 [DBG] Creating DbConnection.
2025-06-14 09:44:54.325 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 09:44:54.325 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:44:54.325 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:44:54.325 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 09:44:54.325 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:44:54.325 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:44:54.326 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:44:54.327 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:44:54.327 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:54.328 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:54.328 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:54.328 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:44:54.328 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:44:54.328 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 09:44:54.328 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:44:54.328 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:44:54.329 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 09:44:54.329 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 09:44:54.329 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 09:44:54.329 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 09:44:54.329 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 09:44:54.329 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 09:44:54.329 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.0163ms
2025-06-14 09:44:54.330 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:44:54.330 +09:00 [DBG] Connection id "0HNDAQKC8ATDQ" completed keep alive response.
2025-06-14 09:44:54.330 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 09:44:54.330 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:44:54.330 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:44:54.330 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 14.9615ms
2025-06-14 09:45:33.944 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 09:45:33.946 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:45:33.947 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:45:33.947 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:45:33.950 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 09:45:33.950 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:45:33.952 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 09:45:33.952 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 09:45:33.952 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 09:45:33.953 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 09:45:33.953 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 09:45:33.953 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 09:45:33.953 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:45:33.955 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:45:33.956 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 09:45:33.956 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 09:45:33.956 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:45:33.956 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:45:33.956 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 09:45:33.957 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 09:45:33.958 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 09:45:33.962 +09:00 [DBG] Creating DbConnection.
2025-06-14 09:45:33.962 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 09:45:33.962 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:45:33.962 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:45:33.963 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 09:45:33.963 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:45:33.963 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:45:33.963 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:45:33.964 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:45:33.965 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:45:33.965 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:45:33.965 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:45:33.965 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:45:33.965 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:45:33.965 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 09:45:33.965 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:45:33.965 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:45:33.965 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 09:45:33.965 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 09:45:33.965 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 09:45:33.965 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 09:45:33.965 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 09:45:33.965 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 09:45:33.966 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.784ms
2025-06-14 09:45:33.966 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:45:33.966 +09:00 [DBG] Connection id "0HNDAQKC8ATDQ" completed keep alive response.
2025-06-14 09:45:33.966 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 09:45:33.966 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:45:33.966 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:45:33.966 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 22.8164ms
2025-06-14 09:46:03.023 +09:00 [DBG] Connection id "0HNDAQKC8ATDR" received FIN.
2025-06-14 09:46:03.026 +09:00 [DBG] Connection id "0HNDAQKC8ATDR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 09:46:03.027 +09:00 [DBG] Connection id "0HNDAQKC8ATDR" disconnecting.
2025-06-14 09:46:03.030 +09:00 [DBG] Connection id "0HNDAQKC8ATDR" stopped.
2025-06-14 09:46:33.024 +09:00 [DBG] Connection id "0HNDAQKC8ATDQ" received FIN.
2025-06-14 09:46:33.025 +09:00 [DBG] Connection id "0HNDAQKC8ATDQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 09:46:33.026 +09:00 [DBG] Connection id "0HNDAQKC8ATDQ" disconnecting.
2025-06-14 09:46:33.026 +09:00 [DBG] Connection id "0HNDAQKC8ATDQ" stopped.
2025-06-14 09:47:01.937 +09:00 [DBG] Connection id "0HNDAQKC8ATDS" accepted.
2025-06-14 09:47:01.940 +09:00 [DBG] Connection id "0HNDAQKC8ATDS" started.
2025-06-14 09:47:01.974 +09:00 [DBG] Connection 0HNDAQKC8ATDS established using the following protocol: "Tls12"
2025-06-14 09:47:01.980 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 09:47:01.980 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:47:01.980 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:47:01.980 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:47:01.981 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 09:47:01.981 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:47:01.981 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 09:47:01.982 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 09:47:01.982 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 09:47:01.982 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 09:47:01.982 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 09:47:01.982 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 09:47:01.982 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:47:01.982 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:47:01.982 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 09:47:01.983 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 09:47:01.983 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:47:01.983 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:47:01.983 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 09:47:01.983 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 09:47:01.984 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 09:47:01.985 +09:00 [DBG] Creating DbConnection.
2025-06-14 09:47:01.985 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 09:47:01.986 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:47:01.986 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:47:01.986 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 09:47:01.986 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:47:01.987 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:47:01.987 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:47:01.988 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:47:01.992 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:47:01.993 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:47:01.993 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:47:01.993 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:47:01.993 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:47:01.993 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-14 09:47:01.993 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:47:01.993 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:47:01.994 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 09:47:01.994 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 09:47:01.994 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 09:47:01.994 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 09:47:01.994 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 09:47:01.994 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 09:47:01.994 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.5225ms
2025-06-14 09:47:01.994 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:47:01.995 +09:00 [DBG] Connection id "0HNDAQKC8ATDS" completed keep alive response.
2025-06-14 09:47:01.995 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 09:47:01.995 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:47:01.995 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:47:01.995 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 15.8164ms
2025-06-14 09:47:06.280 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 09:47:06.280 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:47:06.280 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:47:06.280 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:47:06.280 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 09:47:06.281 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:47:06.281 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 09:47:06.281 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 09:47:06.281 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 09:47:06.281 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 09:47:06.282 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 09:47:06.282 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 09:47:06.282 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:47:06.282 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:47:06.283 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 09:47:06.283 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 09:47:06.283 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:47:06.283 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:47:06.283 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 09:47:06.283 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 09:47:06.284 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 09:47:06.284 +09:00 [DBG] Creating DbConnection.
2025-06-14 09:47:06.285 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 09:47:06.285 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:47:06.285 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:47:06.285 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 09:47:06.285 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:47:06.285 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:47:06.286 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:47:06.286 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:47:06.286 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:47:06.287 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:47:06.287 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:47:06.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:47:06.288 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:47:06.288 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 09:47:06.288 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:47:06.289 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:47:06.289 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 09:47:06.289 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 09:47:06.289 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 09:47:06.289 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 09:47:06.289 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 09:47:06.289 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 09:47:06.290 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 7.9749ms
2025-06-14 09:47:06.290 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:47:06.290 +09:00 [DBG] Connection id "0HNDAQKC8ATDS" completed keep alive response.
2025-06-14 09:47:06.290 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 09:47:06.290 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:47:06.290 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:47:06.291 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 11.0937ms
2025-06-14 09:48:16.927 +09:00 [DBG] Connection id "0HNDAQKC8ATDS" received FIN.
2025-06-14 09:48:16.937 +09:00 [DBG] Connection id "0HNDAQKC8ATDS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 09:48:16.943 +09:00 [DBG] Connection id "0HNDAQKC8ATDS" disconnecting.
2025-06-14 09:48:16.945 +09:00 [DBG] Connection id "0HNDAQKC8ATDS" stopped.
2025-06-14 09:51:14.464 +09:00 [DBG] Connection id "0HNDAQKC8ATDT" accepted.
2025-06-14 09:51:14.466 +09:00 [DBG] Connection id "0HNDAQKC8ATDT" started.
2025-06-14 09:51:14.501 +09:00 [DBG] Connection 0HNDAQKC8ATDT established using the following protocol: "Tls12"
2025-06-14 09:51:14.504 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 09:51:14.505 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:51:14.505 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:51:14.505 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:51:14.506 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 09:51:14.506 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:51:14.508 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 09:51:14.509 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 09:51:14.509 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 09:51:14.509 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 09:51:14.509 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 09:51:14.509 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 09:51:14.509 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:51:14.510 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:51:14.510 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 09:51:14.510 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 09:51:14.510 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:51:14.511 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:51:14.511 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 09:51:14.511 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 09:51:14.512 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 09:51:14.513 +09:00 [DBG] Creating DbConnection.
2025-06-14 09:51:14.513 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 09:51:14.514 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:51:14.514 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:51:14.514 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 09:51:14.514 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:51:14.514 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:51:14.514 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:51:14.514 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:51:14.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:51:14.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:51:14.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:51:14.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:51:14.515 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:51:14.515 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 09:51:14.515 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:51:14.516 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:51:14.516 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 09:51:14.516 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 09:51:14.516 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 09:51:14.516 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 09:51:14.516 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 09:51:14.516 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 09:51:14.517 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 6.9385ms
2025-06-14 09:51:14.517 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:51:14.517 +09:00 [DBG] Connection id "0HNDAQKC8ATDT" completed keep alive response.
2025-06-14 09:51:14.517 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 09:51:14.517 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:51:14.519 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 09:51:14.519 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 14.2704ms
2025-06-14 09:51:49.364 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 09:51:49.366 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:51:49.367 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 09:51:49.367 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:51:49.369 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 09:51:49.369 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:51:49.370 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 09:51:49.370 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 09:51:49.371 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 09:51:49.371 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 09:51:49.371 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 09:51:49.371 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 09:51:49.371 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:51:49.381 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 09:51:49.382 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 09:51:49.383 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 09:51:49.383 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:51:49.383 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 09:51:49.383 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 09:51:49.383 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 09:51:49.390 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 09:51:49.393 +09:00 [DBG] Creating DbConnection.
2025-06-14 09:51:49.394 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 09:51:49.394 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:51:49.394 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:51:49.394 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 09:51:49.394 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 09:51:49.395 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-14 09:51:49.396 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:51:49.397 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 09:51:49.398 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:51:49.399 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:51:49.399 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:51:49.399 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 09:51:49.400 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:51:49.400 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 09:51:49.400 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 09:51:49.401 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:51:49.401 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 09:51:49.401 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 09:51:49.401 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 09:51:49.402 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 09:51:49.402 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 09:51:49.402 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 09:51:49.402 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 31.2154ms
2025-06-14 09:51:49.402 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 09:51:49.403 +09:00 [DBG] Connection id "0HNDAQKC8ATDT" completed keep alive response.
2025-06-14 09:51:49.403 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 09:51:49.403 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 09:51:49.403 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 09:51:49.403 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 39.0394ms
2025-06-14 09:52:59.452 +09:00 [DBG] Connection id "0HNDAQKC8ATDT" received FIN.
2025-06-14 09:52:59.454 +09:00 [DBG] Connection id "0HNDAQKC8ATDT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 09:52:59.454 +09:00 [DBG] Connection id "0HNDAQKC8ATDT" disconnecting.
2025-06-14 09:52:59.456 +09:00 [DBG] Connection id "0HNDAQKC8ATDT" stopped.
2025-06-14 10:05:22.706 +09:00 [DBG] Connection id "0HNDAQKC8ATDU" accepted.
2025-06-14 10:05:22.709 +09:00 [DBG] Connection id "0HNDAQKC8ATDU" started.
2025-06-14 10:05:22.710 +09:00 [DBG] Connection id "0HNDAQKC8ATDV" accepted.
2025-06-14 10:05:22.710 +09:00 [DBG] Connection id "0HNDAQKC8ATDV" started.
2025-06-14 10:05:22.733 +09:00 [DBG] Connection 0HNDAQKC8ATDU established using the following protocol: "Tls12"
2025-06-14 10:05:22.737 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:05:22.738 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:05:22.738 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:05:22.738 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:22.739 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:05:22.739 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:22.740 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:05:22.741 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:05:22.741 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:05:22.741 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:05:22.741 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:05:22.741 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:05:22.741 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:05:22.742 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:05:22.742 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:05:22.742 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:05:22.745 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:22.745 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:22.745 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:05:22.746 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:22.753 +09:00 [DBG] Connection 0HNDAQKC8ATDV established using the following protocol: "Tls12"
2025-06-14 10:05:22.755 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:05:22.758 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:05:22.758 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:05:22.758 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:05:22.758 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:22.759 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:05:22.759 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:22.759 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:05:22.759 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:05:22.759 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:05:22.760 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:05:22.760 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:05:22.760 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:05:22.760 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:05:22.761 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:05:22.762 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:05:22.762 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:05:22.762 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:05:22.766 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:05:22.766 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:05:22.770 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:22.772 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:22.772 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:05:22.772 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:22.773 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:05:22.781 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:05:22.781 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:05:22.781 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:05:22.783 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:22.784 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:22.786 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:05:22.790 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:05:22.790 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-06-14 10:05:22.790 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:05:22.792 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-06-14 10:05:22.792 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-06-14 10:05:22.792 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:05:22.794 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:05:22.811 +09:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:05:22.811 +09:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:05:22.813 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:22.813 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:22.814 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:22.814 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:22.816 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:22.816 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:22.817 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:22.817 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:22.817 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:22.817 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:22.817 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-14 10:05:22.817 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 5ms reading results.
2025-06-14 10:05:22.817 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:22.817 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:22.817 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:05:22.818 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:05:22.818 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:05:22.818 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:05:22.818 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:05:22.818 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:05:22.818 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:05:22.818 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:05:22.819 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:05:22.819 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:05:22.819 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:05:22.820 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:05:22.820 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:05:22.820 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:05:22.822 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 81.271ms
2025-06-14 10:05:22.822 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 62.4067ms
2025-06-14 10:05:22.823 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:22.823 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:22.823 +09:00 [DBG] Connection id "0HNDAQKC8ATDU" completed keep alive response.
2025-06-14 10:05:22.823 +09:00 [DBG] Connection id "0HNDAQKC8ATDV" completed keep alive response.
2025-06-14 10:05:22.823 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:05:22.823 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:05:22.823 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:05:22.823 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:05:22.823 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:05:22.823 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:05:22.823 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 65.4347ms
2025-06-14 10:05:22.823 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 86.1667ms
2025-06-14 10:05:48.274 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:05:48.274 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:05:48.281 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:05:48.282 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:05:48.283 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:05:48.283 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:05:48.285 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:48.285 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:48.296 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:05:48.296 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:05:48.296 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:48.296 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:48.297 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:05:48.297 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:05:48.297 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:05:48.297 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:05:48.297 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:05:48.297 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:05:48.297 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:05:48.298 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:05:48.298 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:05:48.298 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:05:48.298 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:05:48.298 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:05:48.298 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:05:48.298 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:05:48.299 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:05:48.299 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:05:48.299 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:05:48.299 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:05:48.299 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:05:48.299 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:05:48.299 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:48.299 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:48.299 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:48.299 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:05:48.299 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:48.300 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:05:48.300 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:48.300 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:48.303 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:05:48.303 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:05:48.305 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:05:48.305 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:05:48.306 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:05:48.306 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:05:48.306 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:05:48.306 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:05:48.306 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:48.306 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:48.306 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:05:48.306 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:05:48.306 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:05:48.306 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:05:48.306 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:05:48.306 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:05:48.307 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:05:48.307 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:05:48.309 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:05:48.309 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:05:48.309 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:48.309 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:48.309 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:48.309 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:48.309 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:48.310 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:48.310 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:48.310 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:48.310 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:48.310 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:48.310 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 10:05:48.310 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 10:05:48.310 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:48.310 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:48.310 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:05:48.310 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:05:48.310 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:05:48.310 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:05:48.310 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:05:48.310 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:05:48.310 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:05:48.310 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:05:48.310 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:05:48.310 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:05:48.310 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:05:48.311 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:05:48.311 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:05:48.311 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:05:48.312 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 13.4235ms
2025-06-14 10:05:48.312 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:48.312 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 14.1867ms
2025-06-14 10:05:48.312 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:48.312 +09:00 [DBG] Connection id "0HNDAQKC8ATDU" completed keep alive response.
2025-06-14 10:05:48.312 +09:00 [DBG] Connection id "0HNDAQKC8ATDV" completed keep alive response.
2025-06-14 10:05:48.312 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:05:48.312 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:05:48.312 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:05:48.312 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:05:48.312 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:05:48.312 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:05:48.312 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 38.6491ms
2025-06-14 10:05:48.313 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 38.7891ms
2025-06-14 10:05:54.262 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:05:54.264 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:05:54.267 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:05:54.270 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:54.270 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:05:54.271 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:05:54.274 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:54.275 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:05:54.275 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:05:54.275 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:05:54.277 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:05:54.277 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:54.277 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:05:54.277 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:05:54.278 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:05:54.278 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:54.278 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:05:54.278 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:05:54.278 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:05:54.280 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:05:54.280 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:05:54.280 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:05:54.280 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:05:54.280 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:05:54.282 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:05:54.284 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:05:54.282 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:05:54.284 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:05:54.286 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:05:54.287 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:05:54.289 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:54.289 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:54.290 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:05:54.290 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:05:54.290 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:54.292 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:05:54.292 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:54.292 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:54.292 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:05:54.293 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:05:54.295 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:05:54.297 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:05:54.297 +09:00 [DBG] Created DbConnection. (2ms).
2025-06-14 10:05:54.298 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:05:54.300 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:05:54.303 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:54.303 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:05:54.306 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:05:54.306 +09:00 [DBG] Created DbConnection. (2ms).
2025-06-14 10:05:54.309 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:05:54.309 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:54.309 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-06-14 10:05:54.313 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:05:54.313 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-06-14 10:05:54.316 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-06-14 10:05:54.317 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:05:54.321 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-06-14 10:05:54.321 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:05:54.324 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:05:54.324 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:54.325 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:54.325 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:05:54.326 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:54.326 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:54.328 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:54.329 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:54.329 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:54.329 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 5ms reading results.
2025-06-14 10:05:54.330 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:54.330 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:05:54.330 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:54.330 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:54.330 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:05:54.330 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 10:05:54.330 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:05:54.330 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:05:54.330 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:05:54.330 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:05:54.331 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:05:54.331 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:05:54.331 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:05:54.331 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:05:54.331 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:05:54.331 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:05:54.332 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:05:54.332 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:05:54.332 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:05:54.332 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:05:54.332 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 52.2482ms
2025-06-14 10:05:54.332 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 48.1602ms
2025-06-14 10:05:54.332 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:54.332 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:05:54.332 +09:00 [DBG] Connection id "0HNDAQKC8ATDV" completed keep alive response.
2025-06-14 10:05:54.332 +09:00 [DBG] Connection id "0HNDAQKC8ATDU" completed keep alive response.
2025-06-14 10:05:54.332 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:05:54.332 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:05:54.332 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:05:54.333 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:05:54.333 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:05:54.333 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:05:54.333 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 61.9037ms
2025-06-14 10:05:54.333 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 70.4569ms
2025-06-14 10:06:12.242 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:06:12.255 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:06:12.262 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:06:12.263 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:06:12.268 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:06:12.272 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:06:12.275 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:06:12.276 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:06:12.278 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:06:12.279 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:06:12.279 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:06:12.279 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:06:12.280 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:06:12.280 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:06:12.284 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:06:12.287 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:06:12.287 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:06:12.287 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:06:12.287 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:06:12.288 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:06:12.300 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:06:12.305 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:06:12.305 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:06:12.305 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:06:12.307 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:06:12.307 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:06:12.307 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:06:12.308 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:06:12.308 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:06:12.308 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:06:12.308 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:06:12.308 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:06:12.309 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:06:12.309 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:06:12.309 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:06:12.309 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:06:12.309 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:06:12.309 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:06:12.309 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:06:12.309 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:06:12.309 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:06:12.309 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:06:12.309 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:06:12.309 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:06:12.310 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:06:12.310 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:06:12.310 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:06:12.310 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:06:12.310 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:06:12.310 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:06:12.310 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:06:12.310 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:06:12.310 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:06:12.310 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:06:12.310 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:06:12.310 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 10:06:12.310 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:06:12.310 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:06:12.310 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:06:12.310 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:06:12.311 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:06:12.311 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:06:12.311 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:06:12.311 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:06:12.311 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:06:12.311 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:06:12.311 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:06:12.311 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:06:12.311 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 31.7609ms
2025-06-14 10:06:12.312 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:06:12.311 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:06:12.312 +09:00 [DBG] Connection id "0HNDAQKC8ATDV" completed keep alive response.
2025-06-14 10:06:12.312 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:06:12.312 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:06:12.312 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:06:12.312 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:06:12.312 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:06:12.312 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:06:12.312 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:06:12.312 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 72.437ms
2025-06-14 10:06:12.312 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:06:12.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:06:12.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:06:12.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:06:12.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:06:12.314 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:06:12.314 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 10:06:12.315 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:06:12.315 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:06:12.315 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:06:12.315 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:06:12.315 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:06:12.315 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:06:12.315 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:06:12.315 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:06:12.315 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 6.0509ms
2025-06-14 10:06:12.315 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:06:12.315 +09:00 [DBG] Connection id "0HNDAQKC8ATDU" completed keep alive response.
2025-06-14 10:06:12.316 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:06:12.316 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:06:12.316 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:06:12.316 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 8.1479ms
2025-06-14 10:07:22.715 +09:00 [DBG] Connection id "0HNDAQKC8ATDU" received FIN.
2025-06-14 10:07:22.716 +09:00 [DBG] Connection id "0HNDAQKC8ATDV" received FIN.
2025-06-14 10:07:22.717 +09:00 [DBG] Connection id "0HNDAQKC8ATDV" disconnecting.
2025-06-14 10:07:22.717 +09:00 [DBG] Connection id "0HNDAQKC8ATDU" disconnecting.
2025-06-14 10:07:22.717 +09:00 [DBG] Connection id "0HNDAQKC8ATDV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 10:07:22.717 +09:00 [DBG] Connection id "0HNDAQKC8ATDU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 10:07:22.719 +09:00 [DBG] Connection id "0HNDAQKC8ATDV" stopped.
2025-06-14 10:07:22.719 +09:00 [DBG] Connection id "0HNDAQKC8ATDU" stopped.
2025-06-14 10:11:21.834 +09:00 [DBG] Connection id "0HNDAQKC8ATE0" accepted.
2025-06-14 10:11:21.835 +09:00 [DBG] Connection id "0HNDAQKC8ATE0" started.
2025-06-14 10:11:21.859 +09:00 [DBG] Connection 0HNDAQKC8ATE0 established using the following protocol: "Tls12"
2025-06-14 10:11:21.863 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:11:21.864 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:11:21.864 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:11:21.864 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:11:21.865 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:11:21.865 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:11:21.865 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:11:21.865 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:11:21.866 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:11:21.866 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:11:21.866 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:11:21.866 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:11:21.866 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:11:21.866 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:11:21.867 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:11:21.867 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:11:21.867 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:11:21.867 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:11:21.867 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:11:21.867 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:11:21.870 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:11:21.871 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:11:21.872 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:11:21.872 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:11:21.872 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:11:21.872 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:11:21.873 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:11:21.873 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:11:21.873 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:11:21.874 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:11:21.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:11:21.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:11:21.876 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:11:21.876 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:11:21.876 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:11:21.876 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 10:11:21.877 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:11:21.877 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:11:21.877 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:11:21.877 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:11:21.877 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:11:21.878 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:11:21.878 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:11:21.878 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:11:21.878 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.2287ms
2025-06-14 10:11:21.878 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:11:21.878 +09:00 [DBG] Connection id "0HNDAQKC8ATE0" completed keep alive response.
2025-06-14 10:11:21.878 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:11:21.878 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:11:21.878 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:11:21.879 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 15.3902ms
2025-06-14 10:12:36.824 +09:00 [DBG] Connection id "0HNDAQKC8ATE0" received FIN.
2025-06-14 10:12:36.833 +09:00 [DBG] Connection id "0HNDAQKC8ATE0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 10:12:36.839 +09:00 [DBG] Connection id "0HNDAQKC8ATE0" disconnecting.
2025-06-14 10:12:36.842 +09:00 [DBG] Connection id "0HNDAQKC8ATE0" stopped.
2025-06-14 10:16:19.211 +09:00 [DBG] Connection id "0HNDAQKC8ATE1" accepted.
2025-06-14 10:16:19.212 +09:00 [DBG] Connection id "0HNDAQKC8ATE1" started.
2025-06-14 10:16:19.243 +09:00 [DBG] Connection id "0HNDAQKC8ATE2" accepted.
2025-06-14 10:16:19.243 +09:00 [DBG] Connection id "0HNDAQKC8ATE2" started.
2025-06-14 10:16:19.245 +09:00 [DBG] Connection 0HNDAQKC8ATE1 established using the following protocol: "Tls12"
2025-06-14 10:16:19.249 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:16:19.250 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:16:19.250 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:16:19.250 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:16:19.251 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:16:19.251 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:16:19.251 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:16:19.252 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:16:19.252 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:16:19.252 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:16:19.252 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:16:19.252 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:16:19.252 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:16:19.253 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:16:19.253 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:16:19.253 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:16:19.254 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:16:19.254 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:16:19.254 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:16:19.254 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:16:19.259 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:16:19.262 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:16:19.263 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:16:19.263 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:16:19.263 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:16:19.263 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:16:19.263 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:16:19.263 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:16:19.263 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:16:19.264 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:16:19.265 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:16:19.265 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:16:19.265 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:16:19.265 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:16:19.266 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:16:19.266 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 10:16:19.266 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:16:19.266 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:16:19.266 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:16:19.266 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:16:19.266 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:16:19.266 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:16:19.266 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:16:19.267 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:16:19.267 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 15.2072ms
2025-06-14 10:16:19.268 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:16:19.268 +09:00 [DBG] Connection id "0HNDAQKC8ATE1" completed keep alive response.
2025-06-14 10:16:19.268 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:16:19.269 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:16:19.269 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:16:19.269 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 20.2784ms
2025-06-14 10:16:19.269 +09:00 [DBG] Connection 0HNDAQKC8ATE2 established using the following protocol: "Tls12"
2025-06-14 10:16:19.272 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:16:19.272 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:16:19.272 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:16:19.272 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:16:19.272 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:16:19.272 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:16:19.272 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:16:19.273 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:16:19.273 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:16:19.274 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:16:19.274 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:16:19.274 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:16:19.275 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:16:19.275 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:16:19.275 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:16:19.276 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:16:19.276 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:16:19.277 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:16:19.277 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:16:19.277 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:16:19.278 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:16:19.279 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:16:19.279 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:16:19.279 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:16:19.283 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:16:19.283 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:16:19.283 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:16:19.283 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:16:19.285 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:16:19.286 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:16:19.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:16:19.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:16:19.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:16:19.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:16:19.289 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:16:19.289 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 10:16:19.289 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:16:19.291 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 10:16:19.291 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:16:19.291 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:16:19.291 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:16:19.291 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:16:19.292 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:16:19.292 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:16:19.292 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 17.4675ms
2025-06-14 10:16:19.292 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:16:19.293 +09:00 [DBG] Connection id "0HNDAQKC8ATE1" completed keep alive response.
2025-06-14 10:16:19.295 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:16:19.296 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:16:19.296 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:16:19.296 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 23.991ms
2025-06-14 10:16:30.556 +09:00 [DBG] Connection id "0HNDAQKC8ATE2" received FIN.
2025-06-14 10:16:30.556 +09:00 [DBG] Connection id "0HNDAQKC8ATE1" received FIN.
2025-06-14 10:16:30.557 +09:00 [DBG] Connection id "0HNDAQKC8ATE2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 10:16:30.557 +09:00 [DBG] Connection id "0HNDAQKC8ATE1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 10:16:30.557 +09:00 [DBG] Connection id "0HNDAQKC8ATE1" disconnecting.
2025-06-14 10:16:30.557 +09:00 [DBG] Connection id "0HNDAQKC8ATE2" disconnecting.
2025-06-14 10:16:30.557 +09:00 [DBG] Connection id "0HNDAQKC8ATE1" stopped.
2025-06-14 10:16:30.557 +09:00 [DBG] Connection id "0HNDAQKC8ATE2" stopped.
2025-06-14 10:16:46.463 +09:00 [DBG] Connection id "0HNDAQKC8ATE3" accepted.
2025-06-14 10:16:46.464 +09:00 [DBG] Connection id "0HNDAQKC8ATE3" started.
2025-06-14 10:16:46.488 +09:00 [DBG] Connection 0HNDAQKC8ATE3 established using the following protocol: "Tls12"
2025-06-14 10:16:46.496 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:16:46.496 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:16:46.497 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:16:46.497 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:16:46.497 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:16:46.497 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:16:46.497 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:16:46.498 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:16:46.498 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:16:46.498 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:16:46.498 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:16:46.498 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:16:46.498 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:16:46.499 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:16:46.499 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:16:46.500 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:16:46.500 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:16:46.500 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:16:46.500 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:16:46.500 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:16:46.502 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:16:46.505 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:16:46.506 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-14 10:16:46.506 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:16:46.507 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:16:46.511 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:16:46.511 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:16:46.512 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-14 10:16:46.513 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:16:46.514 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:16:46.516 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:16:46.516 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:16:46.516 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:16:46.517 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:16:46.517 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:16:46.517 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 10:16:46.517 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:16:46.517 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:16:46.517 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:16:46.517 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:16:46.517 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:16:46.518 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:16:46.518 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:16:46.518 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:16:46.518 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 20.0863ms
2025-06-14 10:16:46.518 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:16:46.519 +09:00 [DBG] Connection id "0HNDAQKC8ATE3" completed keep alive response.
2025-06-14 10:16:46.519 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:16:46.519 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:16:46.519 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:16:46.519 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 22.6939ms
2025-06-14 10:17:10.169 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:17:10.170 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:17:10.170 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:17:10.170 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:17:10.171 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:17:10.171 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:17:10.172 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:17:10.172 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:17:10.172 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:17:10.172 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:17:10.172 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:17:10.172 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:17:10.172 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:17:10.178 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:17:10.178 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:17:10.180 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:17:10.180 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:17:10.180 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:17:10.180 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:17:10.184 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:17:10.194 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:17:10.218 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:17:10.223 +09:00 [DBG] Created DbConnection. (4ms).
2025-06-14 10:17:10.223 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:17:10.223 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:17:10.223 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:17:10.229 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-06-14 10:17:10.236 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-06-14 10:17:10.236 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:17:10.243 +09:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:17:10.253 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:17:10.254 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:17:10.254 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:17:10.257 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:17:10.257 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:17:10.257 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 8ms reading results.
2025-06-14 10:17:10.263 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:17:10.263 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:17:10.268 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:17:10.268 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:17:10.268 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:17:10.274 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:17:10.274 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:17:10.274 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:17:10.289 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 116.4608ms
2025-06-14 10:17:10.289 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:17:10.289 +09:00 [DBG] Connection id "0HNDAQKC8ATE3" completed keep alive response.
2025-06-14 10:17:10.289 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:17:10.292 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:17:10.292 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:17:10.293 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 123.3642ms
2025-06-14 10:17:38.615 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:17:38.617 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:17:38.618 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:17:38.618 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:17:38.619 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:17:38.619 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:17:38.620 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:17:38.620 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:17:38.620 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:17:38.621 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:17:38.621 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:17:38.621 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:17:38.621 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:17:38.622 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:17:38.622 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:17:38.622 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:17:38.622 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:17:38.622 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:17:38.622 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:17:38.622 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:17:38.628 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:17:38.632 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:17:38.632 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:17:38.632 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:17:38.632 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:17:38.632 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:17:38.632 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:17:38.632 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:17:38.632 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:17:38.635 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:17:38.636 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:17:38.636 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:17:38.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:17:38.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:17:38.639 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:17:38.639 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 10:17:38.639 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:17:38.639 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:17:38.639 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:17:38.639 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:17:38.639 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:17:38.639 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:17:38.640 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:17:38.640 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:17:38.641 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 19.343ms
2025-06-14 10:17:38.641 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:17:38.642 +09:00 [DBG] Connection id "0HNDAQKC8ATE3" completed keep alive response.
2025-06-14 10:17:38.642 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:17:38.642 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:17:38.642 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:17:38.642 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 27.7815ms
2025-06-14 10:18:46.479 +09:00 [DBG] Connection id "0HNDAQKC8ATE3" received FIN.
2025-06-14 10:18:46.481 +09:00 [DBG] Connection id "0HNDAQKC8ATE3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 10:18:46.482 +09:00 [DBG] Connection id "0HNDAQKC8ATE3" disconnecting.
2025-06-14 10:18:46.483 +09:00 [DBG] Connection id "0HNDAQKC8ATE3" stopped.
2025-06-14 10:19:02.328 +09:00 [DBG] Connection id "0HNDAQKC8ATE4" accepted.
2025-06-14 10:19:02.328 +09:00 [DBG] Connection id "0HNDAQKC8ATE4" started.
2025-06-14 10:19:02.357 +09:00 [DBG] Connection 0HNDAQKC8ATE4 established using the following protocol: "Tls12"
2025-06-14 10:19:02.367 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:19:02.369 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:19:02.369 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:19:02.369 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:19:02.370 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:19:02.370 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:19:02.370 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:19:02.370 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:19:02.370 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:19:02.370 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:19:02.370 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:19:02.370 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:19:02.371 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:19:02.371 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:19:02.371 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:19:02.371 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:19:02.371 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:19:02.371 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:19:02.371 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:19:02.372 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:19:02.372 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:19:02.374 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:19:02.374 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:19:02.374 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:19:02.374 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:19:02.374 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:19:02.374 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:19:02.374 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:19:02.375 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:19:02.375 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:19:02.381 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:19:02.382 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:19:02.382 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:19:02.382 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:19:02.382 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:19:02.382 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 6ms reading results.
2025-06-14 10:19:02.383 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:19:02.383 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:19:02.384 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:19:02.384 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:19:02.384 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:19:02.384 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:19:02.385 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:19:02.385 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:19:02.385 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 14.6077ms
2025-06-14 10:19:02.385 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:19:02.385 +09:00 [DBG] Connection id "0HNDAQKC8ATE4" completed keep alive response.
2025-06-14 10:19:02.385 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:19:02.385 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:19:02.385 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:19:02.386 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 18.1802ms
2025-06-14 10:19:25.019 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:19:25.020 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:19:25.020 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:19:25.020 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:19:25.020 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:19:25.020 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:19:25.021 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:19:25.021 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:19:25.021 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:19:25.021 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:19:25.021 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:19:25.021 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:19:25.021 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:19:25.023 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:19:25.023 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:19:25.024 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:19:25.025 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:19:25.025 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:19:25.027 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:19:25.027 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:19:25.029 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:19:25.030 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:19:25.030 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:19:25.030 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:19:25.031 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:19:25.031 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:19:25.031 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:19:25.031 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:19:25.031 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:19:25.032 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:19:25.032 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:19:25.033 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:19:25.033 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:19:25.033 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:19:25.033 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:19:25.033 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 10:19:25.033 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:19:25.033 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:19:25.033 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:19:25.033 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:19:25.033 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:19:25.033 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:19:25.034 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:19:25.034 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:19:25.034 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.7145ms
2025-06-14 10:19:25.034 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:19:25.034 +09:00 [DBG] Connection id "0HNDAQKC8ATE4" completed keep alive response.
2025-06-14 10:19:25.034 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:19:25.034 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:19:25.034 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:19:25.034 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 15.0187ms
2025-06-14 10:19:29.783 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:19:29.783 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:19:29.784 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:19:29.784 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:19:29.784 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:19:29.784 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:19:29.785 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:19:29.785 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:19:29.785 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:19:29.785 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:19:29.785 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:19:29.785 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:19:29.785 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:19:29.785 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:19:29.786 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:19:29.787 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:19:29.787 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:19:29.787 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:19:29.787 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:19:29.787 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:19:29.788 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:19:29.789 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:19:29.789 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:19:29.790 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:19:29.790 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:19:29.790 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:19:29.791 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:19:29.791 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:19:29.791 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:19:29.791 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:19:29.792 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:19:29.793 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:19:29.794 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:19:29.794 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:19:29.794 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:19:29.794 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 10:19:29.795 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:19:29.795 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:19:29.795 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:19:29.796 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:19:29.796 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:19:29.797 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:19:29.797 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:19:29.797 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:19:29.798 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.2631ms
2025-06-14 10:19:29.798 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:19:29.798 +09:00 [DBG] Connection id "0HNDAQKC8ATE4" completed keep alive response.
2025-06-14 10:19:29.798 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:19:29.798 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:19:29.798 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:19:29.798 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 14.8519ms
2025-06-14 10:20:22.553 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 10:20:22.562 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:20:22.562 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 10:20:22.563 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:20:22.563 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:20:22.564 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:20:22.564 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:20:22.564 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:20:22.564 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:20:22.564 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:20:22.564 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:20:22.564 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:20:22.564 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:20:22.565 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:20:22.565 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:20:22.565 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:20:22.565 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:20:22.566 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:20:22.566 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:20:22.566 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:20:22.575 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:20:22.579 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:20:22.579 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:20:22.579 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:20:22.581 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:20:22.581 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:20:22.581 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:20:22.581 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:20:22.583 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:20:22.584 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:20:22.584 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:20:22.584 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:20:22.584 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:20:22.584 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:20:22.584 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:20:22.584 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 10:20:22.584 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:20:22.584 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:20:22.585 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:20:22.585 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:20:22.585 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:20:22.585 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:20:22.585 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:20:22.585 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:20:22.585 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 20.8055ms
2025-06-14 10:20:22.585 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:20:22.585 +09:00 [DBG] Connection id "0HNDAQKC8ATE4" completed keep alive response.
2025-06-14 10:20:22.586 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:20:22.586 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:20:22.586 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:20:22.586 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 33.9315ms
2025-06-14 10:21:17.338 +09:00 [DBG] Connection id "0HNDAQKC8ATE4" received FIN.
2025-06-14 10:21:17.340 +09:00 [DBG] Connection id "0HNDAQKC8ATE4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 10:21:17.341 +09:00 [DBG] Connection id "0HNDAQKC8ATE4" disconnecting.
2025-06-14 10:21:17.342 +09:00 [DBG] Connection id "0HNDAQKC8ATE4" stopped.
2025-06-14 10:25:19.253 +09:00 [DBG] Connection id "0HNDAQKC8ATE5" accepted.
2025-06-14 10:25:19.254 +09:00 [DBG] Connection id "0HNDAQKC8ATE5" started.
2025-06-14 10:25:19.282 +09:00 [DBG] Connection 0HNDAQKC8ATE5 established using the following protocol: "Tls12"
2025-06-14 10:25:19.285 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 10:25:19.286 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:25:19.286 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:25:19.286 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:25:19.287 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:25:19.287 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:25:19.287 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:25:19.287 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:25:19.287 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:25:19.287 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:25:19.287 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:25:19.288 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:25:19.288 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:25:19.288 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:25:19.288 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:25:19.289 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:25:19.289 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:25:19.289 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:25:19.289 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:25:19.289 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:25:19.291 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:25:19.291 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:25:19.292 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:25:19.292 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:25:19.292 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:25:19.293 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:25:19.293 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:25:19.293 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:25:19.293 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:25:19.294 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:25:19.295 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:25:19.295 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:25:19.295 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:25:19.295 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:25:19.295 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:25:19.295 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 10:25:19.295 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:25:19.295 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:25:19.296 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:25:19.296 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:25:19.296 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:25:19.296 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:25:19.296 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:25:19.296 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:25:19.297 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 9.0291ms
2025-06-14 10:25:19.297 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:25:19.297 +09:00 [DBG] Connection id "0HNDAQKC8ATE5" completed keep alive response.
2025-06-14 10:25:19.297 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:25:19.298 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:25:19.299 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 10:25:19.300 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 14.5487ms
2025-06-14 10:25:33.329 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - null null
2025-06-14 10:25:33.331 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 10:25:33.332 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 10:25:33.332 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 10:25:33.332 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:25:33.333 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 10:25:33.355 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 10:25:33.355 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:25:33.355 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:25:33.355 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:25:33.355 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:25:33.355 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:25:33.355 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 10:25:33.356 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 10:25:33.356 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 10:25:33.357 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 10:25:33.357 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 10:25:33.358 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 10:25:33.358 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 10:25:33.359 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 10:25:33.362 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:25:33.365 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-14 10:25:33.370 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-14 10:25:33.371 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-14 10:25:33.397 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-14 10:25:33.409 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(27) ? default(Guid?) : (Guid?)dataReader.GetGuid(27) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(27) ? default(object) : (object)dataReader.GetGuid(27) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(27) ? default(Guid) : dataReader.GetGuid(27);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(28) ? default(Guid) : dataReader.GetGuid(28);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(29) ? default(string) : dataReader.GetString(29);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(31) ? default(long?) : (long?)dataReader.GetInt64(31);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(33) ? default(DateTime) : dataReader.GetDateTime(33);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(34) ? default(string) : dataReader.GetString(34);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 10:25:33.415 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:25:33.415 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:25:33.415 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:25:33.415 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:25:33.415 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:25:33.415 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:25:33.416 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:25:33.416 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 10:25:33.417 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 10:25:33.420 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:25:33.438 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:25:33.439 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:25:33.439 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:25:33.439 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 21ms reading results.
2025-06-14 10:25:33.439 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:25:33.439 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:25:33.439 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:25:33.439 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:25:33.439 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:25:33.439 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:25:33.439 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:25:33.439 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 10:25:33.440 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 84.2347ms
2025-06-14 10:25:33.440 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 10:25:33.440 +09:00 [DBG] Connection id "0HNDAQKC8ATE5" completed keep alive response.
2025-06-14 10:25:33.440 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:25:33.440 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:25:33.440 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:25:33.440 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - 200 null application/json; charset=utf-8 110.6502ms
2025-06-14 10:25:56.063 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - null null
2025-06-14 10:25:56.068 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 10:25:56.068 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 10:25:56.068 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 10:25:56.069 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:25:56.069 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 10:25:56.069 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 10:25:56.069 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:25:56.069 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:25:56.070 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:25:56.070 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:25:56.070 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:25:56.070 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 10:25:56.070 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 10:25:56.071 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 10:25:56.071 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 10:25:56.071 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 10:25:56.071 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 10:25:56.071 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 10:25:56.071 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 10:25:56.073 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:25:56.074 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:25:56.074 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:25:56.074 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:25:56.074 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:25:56.075 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:25:56.075 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:25:56.075 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:25:56.075 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 10:25:56.076 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 10:25:56.076 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:25:56.076 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:25:56.076 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:25:56.076 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:25:56.076 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 10:25:56.077 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:25:56.077 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:25:56.077 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:25:56.077 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:25:56.077 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:25:56.077 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:25:56.077 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:25:56.077 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 10:25:56.077 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 7.4881ms
2025-06-14 10:25:56.077 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 10:25:56.078 +09:00 [DBG] Connection id "0HNDAQKC8ATE5" completed keep alive response.
2025-06-14 10:25:56.078 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:25:56.078 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:25:56.078 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:25:56.078 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - 200 null application/json; charset=utf-8 17.3425ms
2025-06-14 10:27:04.256 +09:00 [DBG] Connection id "0HNDAQKC8ATE5" received FIN.
2025-06-14 10:27:04.257 +09:00 [DBG] Connection id "0HNDAQKC8ATE5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 10:27:04.258 +09:00 [DBG] Connection id "0HNDAQKC8ATE5" disconnecting.
2025-06-14 10:27:04.258 +09:00 [DBG] Connection id "0HNDAQKC8ATE5" stopped.
2025-06-14 10:31:29.772 +09:00 [DBG] Connection id "0HNDAQKC8ATE6" accepted.
2025-06-14 10:31:29.773 +09:00 [DBG] Connection id "0HNDAQKC8ATE6" started.
2025-06-14 10:31:29.803 +09:00 [DBG] Connection 0HNDAQKC8ATE6 established using the following protocol: "Tls12"
2025-06-14 10:31:29.808 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 10:31:29.808 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:31:29.809 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:31:29.809 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:31:29.810 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:31:29.810 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:31:29.811 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:31:29.811 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:31:29.811 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:31:29.811 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:31:29.811 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:31:29.811 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:31:29.811 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:31:29.812 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:31:29.812 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:31:29.812 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:31:29.813 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:31:29.813 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:31:29.813 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:31:29.813 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:31:29.814 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:31:29.816 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:31:29.816 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:31:29.816 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:31:29.817 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:31:29.817 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:31:29.818 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:31:29.818 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:31:29.818 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:31:29.819 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:31:29.820 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:31:29.821 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:31:29.821 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:31:29.821 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:31:29.822 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:31:29.822 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 10:31:29.822 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:31:29.822 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:31:29.823 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:31:29.823 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:31:29.823 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:31:29.823 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:31:29.823 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:31:29.823 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:31:29.824 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.1301ms
2025-06-14 10:31:29.824 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:31:29.824 +09:00 [DBG] Connection id "0HNDAQKC8ATE6" completed keep alive response.
2025-06-14 10:31:29.824 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:31:29.824 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:31:29.824 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:31:29.824 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 16.3981ms
2025-06-14 10:32:44.759 +09:00 [DBG] Connection id "0HNDAQKC8ATE6" received FIN.
2025-06-14 10:32:44.762 +09:00 [DBG] Connection id "0HNDAQKC8ATE6" disconnecting.
2025-06-14 10:32:44.763 +09:00 [DBG] Connection id "0HNDAQKC8ATE6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 10:32:44.765 +09:00 [DBG] Connection id "0HNDAQKC8ATE6" stopped.
2025-06-14 10:35:45.684 +09:00 [DBG] Connection id "0HNDAQKC8ATE7" accepted.
2025-06-14 10:35:45.685 +09:00 [DBG] Connection id "0HNDAQKC8ATE7" started.
2025-06-14 10:35:45.717 +09:00 [DBG] Connection 0HNDAQKC8ATE7 established using the following protocol: "Tls12"
2025-06-14 10:35:45.722 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 10:35:45.723 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:35:45.723 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:35:45.723 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:35:45.723 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:35:45.724 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:35:45.724 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:35:45.724 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:35:45.724 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:35:45.724 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:35:45.724 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:35:45.724 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:35:45.724 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:35:45.725 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:35:45.725 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:35:45.725 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:35:45.725 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:35:45.725 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:35:45.725 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:35:45.725 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:35:45.731 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:35:45.732 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:35:45.732 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:35:45.732 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:35:45.732 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:35:45.733 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:35:45.733 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:35:45.733 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:35:45.733 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:35:45.733 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:35:45.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:35:45.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:35:45.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:35:45.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:35:45.734 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:35:45.734 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 10:35:45.734 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:35:45.734 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:35:45.735 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:35:45.735 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:35:45.735 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:35:45.735 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:35:45.735 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:35:45.735 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:35:45.735 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 10.7468ms
2025-06-14 10:35:45.735 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:35:45.735 +09:00 [DBG] Connection id "0HNDAQKC8ATE7" completed keep alive response.
2025-06-14 10:35:45.735 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:35:45.736 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:35:45.736 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:35:45.737 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 14.2258ms
2025-06-14 10:36:03.776 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 10:36:03.778 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:36:03.778 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:36:03.779 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:36:03.779 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:36:03.779 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:36:03.779 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:36:03.779 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:36:03.779 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:36:03.779 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:36:03.779 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:36:03.780 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:36:03.780 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:36:03.780 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:36:03.780 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:36:03.780 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:36:03.780 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:36:03.780 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:36:03.780 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:36:03.780 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:36:03.781 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:36:03.782 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:36:03.782 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:36:03.782 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:36:03.782 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:36:03.782 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:36:03.782 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:36:03.782 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:36:03.782 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:36:03.782 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:36:03.782 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:36:03.782 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:36:03.783 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:36:03.783 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:36:03.783 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:36:03.783 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 10:36:03.783 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:36:03.783 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:36:03.783 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:36:03.783 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:36:03.783 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:36:03.783 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:36:03.783 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:36:03.783 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:36:03.783 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 3.7576ms
2025-06-14 10:36:03.783 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:36:03.783 +09:00 [DBG] Connection id "0HNDAQKC8ATE7" completed keep alive response.
2025-06-14 10:36:03.784 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:36:03.784 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:36:03.784 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:36:03.784 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 7.5667ms
2025-06-14 10:36:09.879 +09:00 [DBG] Connection id "0HNDAQKC8ATE7" received FIN.
2025-06-14 10:36:09.879 +09:00 [DBG] Connection id "0HNDAQKC8ATE7" disconnecting.
2025-06-14 10:36:09.879 +09:00 [DBG] Connection id "0HNDAQKC8ATE7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 10:36:09.880 +09:00 [DBG] Connection id "0HNDAQKC8ATE7" stopped.
2025-06-14 10:36:53.959 +09:00 [DBG] Connection id "0HNDAQKC8ATE8" accepted.
2025-06-14 10:36:53.960 +09:00 [DBG] Connection id "0HNDAQKC8ATE8" started.
2025-06-14 10:36:53.990 +09:00 [DBG] Connection 0HNDAQKC8ATE8 established using the following protocol: "Tls12"
2025-06-14 10:36:53.997 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 10:36:53.998 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:36:53.998 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:36:53.998 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:36:53.999 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:36:53.999 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:36:53.999 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:36:53.999 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:36:53.999 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:36:53.999 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:36:53.999 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:36:53.999 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:36:54.000 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:36:54.000 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:36:54.000 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:36:54.000 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:36:54.000 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:36:54.000 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:36:54.000 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:36:54.000 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:36:54.001 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:36:54.002 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:36:54.002 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:36:54.002 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:36:54.002 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:36:54.002 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:36:54.003 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:36:54.003 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:36:54.003 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:36:54.004 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:36:54.005 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:36:54.005 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:36:54.005 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:36:54.005 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:36:54.005 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:36:54.005 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 10:36:54.005 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:36:54.005 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:36:54.005 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:36:54.005 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:36:54.006 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:36:54.006 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:36:54.006 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:36:54.006 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:36:54.006 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 6.3972ms
2025-06-14 10:36:54.006 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:36:54.006 +09:00 [DBG] Connection id "0HNDAQKC8ATE8" completed keep alive response.
2025-06-14 10:36:54.006 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:36:54.006 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:36:54.006 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:36:54.006 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 9.1486ms
2025-06-14 10:37:41.702 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 10:37:41.703 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:37:41.703 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:37:41.703 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:37:41.704 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:37:41.704 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:37:41.704 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:37:41.704 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:37:41.704 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:37:41.704 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:37:41.704 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:37:41.704 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:37:41.705 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:37:41.705 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:37:41.705 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:37:41.705 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:37:41.705 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:37:41.705 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:37:41.705 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:37:41.705 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:37:41.705 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:37:41.706 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:37:41.706 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:37:41.706 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:37:41.706 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:37:41.706 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:37:41.706 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:37:41.706 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:37:41.706 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:37:41.707 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:37:41.708 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:37:41.708 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:37:41.708 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:37:41.708 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:37:41.709 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:37:41.709 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 10:37:41.709 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:37:41.709 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:37:41.709 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:37:41.709 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:37:41.709 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:37:41.709 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:37:41.709 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:37:41.709 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:37:41.709 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 4.6389ms
2025-06-14 10:37:41.709 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:37:41.709 +09:00 [DBG] Connection id "0HNDAQKC8ATE8" completed keep alive response.
2025-06-14 10:37:41.709 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:37:41.709 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:37:41.709 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:37:41.709 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 7.1947ms
2025-06-14 10:37:47.859 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 10:37:47.860 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:37:47.860 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 10:37:47.860 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:37:47.861 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 10:37:47.861 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:37:47.861 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 10:37:47.862 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 10:37:47.862 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 10:37:47.862 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 10:37:47.862 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 10:37:47.862 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 10:37:47.863 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:37:47.863 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 10:37:47.863 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 10:37:47.863 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 10:37:47.864 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:37:47.864 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 10:37:47.864 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 10:37:47.864 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 10:37:47.864 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 10:37:47.865 +09:00 [DBG] Creating DbConnection.
2025-06-14 10:37:47.865 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 10:37:47.865 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:37:47.865 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:37:47.865 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 10:37:47.865 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:37:47.865 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 10:37:47.865 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:37:47.866 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 10:37:47.866 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:37:47.867 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:37:47.867 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:37:47.867 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 10:37:47.867 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:37:47.867 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 10:37:47.867 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 10:37:47.867 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:37:47.867 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 10:37:47.867 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 10:37:47.867 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 10:37:47.867 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 10:37:47.867 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 10:37:47.867 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 10:37:47.868 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 5.0477ms
2025-06-14 10:37:47.868 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 10:37:47.868 +09:00 [DBG] Connection id "0HNDAQKC8ATE8" completed keep alive response.
2025-06-14 10:37:47.868 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 10:37:47.868 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 10:37:47.868 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 10:37:47.868 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 9.1723ms
2025-06-14 10:38:13.311 +09:00 [DBG] Connection id "0HNDAQKC8ATE8" received FIN.
2025-06-14 10:38:13.313 +09:00 [DBG] Connection id "0HNDAQKC8ATE8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 10:38:13.314 +09:00 [DBG] Connection id "0HNDAQKC8ATE8" disconnecting.
2025-06-14 10:38:13.315 +09:00 [DBG] Connection id "0HNDAQKC8ATE8" stopped.
2025-06-14 11:06:19.761 +09:00 [DBG] Connection id "0HNDAQKC8ATE9" accepted.
2025-06-14 11:06:19.765 +09:00 [DBG] Connection id "0HNDAQKC8ATE9" started.
2025-06-14 11:06:19.802 +09:00 [DBG] Connection 0HNDAQKC8ATE9 established using the following protocol: "Tls12"
2025-06-14 11:06:19.812 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 11:06:19.812 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 11:06:19.813 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 11:06:19.813 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 11:06:19.814 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 11:06:19.815 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 11:06:19.815 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 11:06:19.816 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 11:06:19.816 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 11:06:19.816 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 11:06:19.816 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 11:06:19.816 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 11:06:19.817 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 11:06:19.822 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 11:06:19.823 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 11:06:19.823 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 11:06:19.823 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 11:06:19.823 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 11:06:19.823 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 11:06:19.823 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 11:06:19.833 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 11:06:19.838 +09:00 [DBG] Creating DbConnection.
2025-06-14 11:06:19.841 +09:00 [DBG] Created DbConnection. (3ms).
2025-06-14 11:06:19.842 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:06:19.847 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:06:19.849 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 11:06:19.849 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-06-14 11:06:19.849 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-14 11:06:19.849 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 11:06:19.855 +09:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 11:06:19.856 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 11:06:19.856 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 11:06:19.856 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 11:06:19.856 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 11:06:19.856 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:06:19.856 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 11:06:19.856 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:06:19.857 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 11:06:19.857 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 11:06:19.857 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 11:06:19.857 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 11:06:19.857 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 11:06:19.857 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 11:06:19.857 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 11:06:19.858 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 41.3581ms
2025-06-14 11:06:19.858 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 11:06:19.858 +09:00 [DBG] Connection id "0HNDAQKC8ATE9" completed keep alive response.
2025-06-14 11:06:19.858 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 11:06:19.859 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:06:19.859 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 11:06:19.862 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 47.155ms
2025-06-14 11:06:44.733 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 11:06:44.737 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 11:06:44.737 +09:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-06-14 11:06:44.744 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 11:06:44.744 +09:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-06-14 11:06:44.745 +09:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-06-14 11:06:44.746 +09:00 [DBG] Connection id "0HNDAQKC8ATE9" completed keep alive response.
2025-06-14 11:06:44.746 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 405 0 null 12.917ms
2025-06-14 11:06:44.761 +09:00 [DBG] Connection id "0HNDAQKC8ATE9", Request id "0HNDAQKC8ATE9:00000002": started reading request body.
2025-06-14 11:06:44.770 +09:00 [DBG] Connection id "0HNDAQKC8ATE9", Request id "0HNDAQKC8ATE9:00000002": done reading request body.
2025-06-14 11:06:50.619 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 11:06:50.621 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 11:06:50.622 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 11:06:50.622 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 11:06:50.627 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 11:06:50.628 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 11:06:50.630 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 11:06:50.632 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 11:06:50.632 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 11:06:50.632 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 11:06:50.632 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 11:06:50.632 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 11:06:50.633 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 11:06:50.637 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 11:06:50.637 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 11:06:50.638 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 11:06:50.638 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 11:06:50.638 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 11:06:50.638 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 11:06:50.638 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 11:06:50.640 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 11:06:50.641 +09:00 [DBG] Creating DbConnection.
2025-06-14 11:06:50.641 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 11:06:50.641 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:06:50.642 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:06:50.642 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 11:06:50.642 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 11:06:50.642 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 11:06:50.642 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 11:06:50.643 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 11:06:50.644 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 11:06:50.645 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 11:06:50.645 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 11:06:50.645 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 11:06:50.646 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:06:50.646 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 11:06:50.646 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:06:50.646 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 11:06:50.646 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 11:06:50.647 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 11:06:50.647 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 11:06:50.647 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 11:06:50.647 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 11:06:50.647 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 11:06:50.647 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 14.9356ms
2025-06-14 11:06:50.647 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 11:06:50.648 +09:00 [DBG] Connection id "0HNDAQKC8ATE9" completed keep alive response.
2025-06-14 11:06:50.648 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 11:06:50.648 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:06:50.648 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 11:06:50.648 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 29.4132ms
2025-06-14 11:07:59.651 +09:00 [DBG] Connection id "0HNDAQKC8ATE9" received FIN.
2025-06-14 11:07:59.654 +09:00 [DBG] Connection id "0HNDAQKC8ATE9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 11:07:59.655 +09:00 [DBG] Connection id "0HNDAQKC8ATE9" disconnecting.
2025-06-14 11:07:59.656 +09:00 [DBG] Connection id "0HNDAQKC8ATE9" stopped.
2025-06-14 11:23:53.667 +09:00 [INF] Application is shutting down...
2025-06-14 11:23:53.667 +09:00 [DBG] Hosting stopping
2025-06-14 11:23:53.684 +09:00 [DBG] Hosting stopped
2025-06-14 11:24:41.490 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 11:24:41.638 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 11:24:42.016 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 11:24:42.022 +09:00 [DBG] Creating DbConnection.
2025-06-14 11:24:42.028 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-14 11:24:42.032 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:24:42.039 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:24:42.041 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:24:42.043 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 11:24:42.045 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 11:24:42.046 +09:00 [DBG] Creating DbConnection.
2025-06-14 11:24:42.046 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 11:24:42.048 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-14 11:24:42.049 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-14 11:24:42.049 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:24:42.050 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:24:42.052 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 11:24:42.068 +09:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 11:24:42.069 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:24:42.070 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 11:24:42.074 +09:00 [DBG] Creating DbConnection.
2025-06-14 11:24:42.074 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 11:24:42.074 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:24:42.075 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:24:42.075 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:24:42.075 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 11:24:42.075 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 11:24:42.075 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 11:24:42.075 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 11:24:42.075 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:24:42.075 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:24:42.075 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 11:24:42.076 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 11:24:42.076 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:24:42.076 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 11:24:42.111 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 11:24:42.218 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 11:24:42.232 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:24:42.233 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:24:42.233 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 11:24:42.233 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 11:24:42.233 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 11:24:42.233 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 11:24:42.234 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 11:24:42.237 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:24:42.237 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 11:24:42.238 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:24:42.238 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 11:24:42.239 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 11:24:42.239 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:24:42.239 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 11:24:42.242 +09:00 [DBG] Hosting starting
2025-06-14 11:24:42.280 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 11:24:42.280 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 11:24:42.633 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 11:24:42.634 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 11:24:42.634 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 11:24:42.636 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 11:24:42.637 +09:00 [INF] Hosting environment: Development
2025-06-14 11:24:42.637 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 11:24:42.637 +09:00 [DBG] Hosting started
2025-06-14 11:24:45.375 +09:00 [DBG] Connection id "0HNDATAGD6ITH" accepted.
2025-06-14 11:24:45.376 +09:00 [DBG] Connection id "0HNDATAGD6ITH" started.
2025-06-14 11:24:45.418 +09:00 [DBG] Connection 0HNDATAGD6ITH established using the following protocol: "Tls12"
2025-06-14 11:24:45.443 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 11:24:45.471 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 11:24:45.473 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 11:24:45.474 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 11:24:45.492 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 11:24:45.492 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 11:24:45.505 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 11:24:45.505 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 11:24:45.506 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 11:24:45.506 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 11:24:45.506 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 11:24:45.506 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 11:24:45.507 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 11:24:45.509 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 11:24:45.516 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 11:24:45.517 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 11:24:45.518 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 11:24:45.518 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 11:24:45.518 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 11:24:45.520 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 11:24:53.418 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 11:24:53.435 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 11:24:53.515 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ApprovalStep.ActionDate (DateTime?), 8], [Property: ApprovalStep.ActionStatus (string), 9], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 10], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 11], [Property: ApprovalStep.ApproverName (string), 12], [Property: ApprovalStep.Comment (string), 13], [Property: ApprovalStep.Department (string), 14], [Property: ApprovalStep.IsFinalApprover (bool) Required, 15], [Property: ApprovalStep.Position (string), 16], [Property: ApprovalStep.Sequence (int) Required, 17], [Property: ApprovalStep.StepType (string), 18] }
            8 -> 7
            9 -> 19
            10 -> 20
            11 -> 21
            12 -> 22
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ApprovalStep.ActionDate (DateTime?), 8], [Property: ApprovalStep.ActionStatus (string), 9], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 10], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 11], [Property: ApprovalStep.ApproverName (string), 12], [Property: ApprovalStep.Comment (string), 13], [Property: ApprovalStep.Department (string), 14], [Property: ApprovalStep.IsFinalApprover (bool) Required, 15], [Property: ApprovalStep.Position (string), 16], [Property: ApprovalStep.Sequence (int) Required, 17], [Property: ApprovalStep.StepType (string), 18] }
            8 -> 7
            9 -> 19
            10 -> 20
            11 -> 21
            12 -> 22
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            string value4;
            string value5;
            string value6;
            string value7;
            List<ApprovalStep> namelessParameter{0};
            int? value9;
            string value10;
            string value11;
            string value12;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.GetString(3);
            value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value9 = (int?)dataReader.GetInt32(19);
            value10 = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
            value11 = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                value4, 
                value5, 
                value6, 
                value7, 
                namelessParameter{0}, 
                (object)value9, 
                value10, 
                value11, 
                value12 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(7) ? default(object) : (object)dataReader.GetGuid(7) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid) : dataReader.GetGuid(7);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(15) ? default(bool) : dataReader.GetBoolean(15);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[3]), 
            ApplicantDepartment = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            Status = (string)(resultContext.Values[6]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[7]), 
            CurrentStep = (int)(int?)(resultContext.Values[8]), 
            CurrentApproverName = (string)(resultContext.Values[9]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[10]), 
            CurrentActionStatus = (string)(resultContext.Values[11]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 11:24:53.531 +09:00 [DBG] Creating DbConnection.
2025-06-14 11:24:53.531 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 11:24:53.531 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:24:53.531 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:24:53.532 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 11:24:53.532 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 11:24:53.533 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-14 11:24:53.534 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 11:24:53.537 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 11:24:53.553 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 11:24:53.568 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 11:24:53.569 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 11:24:53.569 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 11:24:53.569 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:24:53.569 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 32ms reading results.
2025-06-14 11:24:53.569 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 11:24:53.569 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 11:24:53.571 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 11:24:53.572 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 11:24:53.572 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 11:24:53.572 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 11:24:53.573 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 11:24:53.573 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 11:24:53.624 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8116.3077ms
2025-06-14 11:24:53.626 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 11:24:53.627 +09:00 [DBG] Connection id "0HNDATAGD6ITH" completed keep alive response.
2025-06-14 11:24:53.628 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 11:24:53.629 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 11:24:53.630 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 11:24:53.631 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 8188.5981ms
2025-06-14 11:25:02.483 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 11:25:02.487 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 11:25:02.487 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 11:25:02.487 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 11:25:02.489 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 11:25:02.489 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 11:25:02.495 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Approve(System.Object) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 11:25:02.495 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 11:25:02.496 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 11:25:02.496 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 11:25:02.496 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 11:25:02.496 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 11:25:02.496 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 11:25:02.499 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 11:25:02.500 +09:00 [DBG] Attempting to bind parameter 'dto' of type 'System.Object' ...
2025-06-14 11:25:02.500 +09:00 [DBG] Attempting to bind parameter 'dto' of type 'System.Object' using the name '' in request data ...
2025-06-14 11:25:02.502 +09:00 [DBG] Done attempting to bind parameter 'dto' of type 'System.Object'.
2025-06-14 11:25:02.502 +09:00 [DBG] Done attempting to bind parameter 'dto' of type 'System.Object'.
2025-06-14 11:25:02.502 +09:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'System.Object' ...
2025-06-14 11:25:02.503 +09:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'System.Object'.
2025-06-14 19:34:47.115 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 19:34:47.360 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 19:34:47.653 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 19:34:47.658 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:34:47.664 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-14 19:34:47.667 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:34:47.675 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:34:47.677 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:34:47.678 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:34:47.680 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 19:34:47.680 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:34:47.680 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 19:34:47.682 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-14 19:34:47.683 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-14 19:34:47.683 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:34:47.684 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:34:47.686 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 19:34:47.699 +09:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 19:34:47.700 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:34:47.701 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 19:34:47.704 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:34:47.704 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 19:34:47.704 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:34:47.704 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:34:47.704 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:34:47.704 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:34:47.704 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 19:34:47.705 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 19:34:47.705 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 19:34:47.705 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:34:47.705 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:34:47.705 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 19:34:47.705 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 19:34:47.705 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:34:47.705 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:34:47.726 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 19:34:47.816 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 19:34:47.828 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:34:47.829 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:34:47.829 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 19:34:47.829 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:34:47.829 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:34:47.829 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 19:34:47.830 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 19:34:47.832 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:34:47.833 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 19:34:47.834 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:34:47.834 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:34:47.834 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 19:34:47.835 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:34:47.835 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:34:47.836 +09:00 [DBG] Hosting starting
2025-06-14 19:34:47.865 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 19:34:47.865 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 19:34:48.135 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 19:34:48.135 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 19:34:48.135 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 19:34:48.135 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 19:34:48.136 +09:00 [INF] Hosting environment: Development
2025-06-14 19:34:48.136 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 19:34:48.136 +09:00 [DBG] Hosting started
2025-06-14 19:37:23.162 +09:00 [DBG] Connection id "0HNDB5TPA75AJ" accepted.
2025-06-14 19:37:23.164 +09:00 [DBG] Connection id "0HNDB5TPA75AJ" started.
2025-06-14 19:37:23.215 +09:00 [DBG] Connection 0HNDB5TPA75AJ established using the following protocol: "Tls12"
2025-06-14 19:37:23.242 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-14 19:37:23.257 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-14 19:37:23.259 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-14 19:37:23.259 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 19:37:23.276 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 19:37:23.276 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 19:37:23.296 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 19:37:23.297 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 19:37:23.297 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 19:37:23.298 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 19:37:23.298 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 19:37:23.298 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 19:37:23.299 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 19:37:23.301 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 19:37:23.307 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 19:37:23.308 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 19:37:23.309 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 19:37:23.309 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 19:37:23.309 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 19:37:23.312 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 19:37:25.237 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 19:37:25.248 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 19:37:25.295 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 19:37:25.307 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:37:25.307 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 19:37:25.307 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:37:25.307 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:37:25.307 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 19:37:25.307 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:37:25.309 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-14 19:37:25.310 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 19:37:25.313 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 19:37:25.314 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:37:25.314 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 19:37:25.314 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:37:25.314 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:37:25.319 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 19:37:25.330 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 19:37:25.331 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 19:37:25.331 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 19:37:25.365 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 19:37:25.383 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 19:37:25.444 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 2144.6855ms
2025-06-14 19:37:25.448 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 19:37:25.448 +09:00 [DBG] Connection id "0HNDB5TPA75AJ" completed keep alive response.
2025-06-14 19:37:25.450 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 19:37:25.453 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:37:25.453 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:37:25.454 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 2212.4968ms
2025-06-14 19:37:33.067 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 19:37:33.069 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:37:33.069 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:37:33.069 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:37:33.070 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 19:37:33.071 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:37:33.077 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 19:37:33.077 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 19:37:33.077 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 19:37:33.077 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 19:37:33.077 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 19:37:33.078 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 19:37:33.078 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:37:33.081 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:37:33.081 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 19:37:33.082 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 19:37:33.082 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:37:33.082 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:37:33.082 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 19:37:33.083 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 19:37:38.602 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 19:37:38.606 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 19:37:38.657 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ApprovalStep.ActionDate (DateTime?), 8], [Property: ApprovalStep.ActionStatus (string), 9], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 10], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 11], [Property: ApprovalStep.ApproverName (string), 12], [Property: ApprovalStep.Comment (string), 13], [Property: ApprovalStep.Department (string), 14], [Property: ApprovalStep.IsFinalApprover (bool) Required, 15], [Property: ApprovalStep.Position (string), 16], [Property: ApprovalStep.Sequence (int) Required, 17], [Property: ApprovalStep.StepType (string), 18] }
            8 -> 7
            9 -> 19
            10 -> 20
            11 -> 21
            12 -> 22
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ApprovalStep.ActionDate (DateTime?), 8], [Property: ApprovalStep.ActionStatus (string), 9], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 10], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 11], [Property: ApprovalStep.ApproverName (string), 12], [Property: ApprovalStep.Comment (string), 13], [Property: ApprovalStep.Department (string), 14], [Property: ApprovalStep.IsFinalApprover (bool) Required, 15], [Property: ApprovalStep.Position (string), 16], [Property: ApprovalStep.Sequence (int) Required, 17], [Property: ApprovalStep.StepType (string), 18] }
            8 -> 7
            9 -> 19
            10 -> 20
            11 -> 21
            12 -> 22
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            string value4;
            string value5;
            string value6;
            string value7;
            List<ApprovalStep> namelessParameter{0};
            int? value9;
            string value10;
            string value11;
            string value12;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.GetString(3);
            value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value9 = (int?)dataReader.GetInt32(19);
            value10 = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
            value11 = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                value4, 
                value5, 
                value6, 
                value7, 
                namelessParameter{0}, 
                (object)value9, 
                value10, 
                value11, 
                value12 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(7) ? default(object) : (object)dataReader.GetGuid(7) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid) : dataReader.GetGuid(7);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(15) ? default(bool) : dataReader.GetBoolean(15);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[3]), 
            ApplicantDepartment = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            Status = (string)(resultContext.Values[6]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[7]), 
            CurrentStep = (int)(int?)(resultContext.Values[8]), 
            CurrentApproverName = (string)(resultContext.Values[9]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[10]), 
            CurrentActionStatus = (string)(resultContext.Values[11]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 19:37:38.663 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:37:38.663 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 19:37:38.663 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:37:38.664 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:37:38.664 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 19:37:38.664 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:37:38.664 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:37:38.664 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 19:37:38.666 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 19:37:38.702 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:37:38.717 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:37:38.718 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:37:38.718 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:37:38.718 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:37:38.718 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 52ms reading results.
2025-06-14 19:37:38.719 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:37:38.719 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:37:38.719 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 19:37:38.719 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 19:37:38.719 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 19:37:38.719 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 19:37:38.719 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 19:37:38.719 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 19:37:38.730 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 5653.0452ms
2025-06-14 19:37:38.731 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:37:38.731 +09:00 [DBG] Connection id "0HNDB5TPA75AJ" completed keep alive response.
2025-06-14 19:37:38.731 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 19:37:38.731 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:37:38.732 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:37:38.732 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 5665.1512ms
2025-06-14 19:37:57.206 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 19:37:57.208 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 19:37:57.208 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 19:37:57.208 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:37:57.210 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 19:37:57.210 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:37:57.221 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto, System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 19:37:57.221 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 19:37:57.222 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 19:37:57.222 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 19:37:57.222 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 19:37:57.222 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 19:37:57.222 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:37:57.222 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:37:57.223 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 19:37:57.223 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 19:37:57.226 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String' using the name 'ApprovalId' in request data ...
2025-06-14 19:37:57.226 +09:00 [DBG] Could not find a value in the request with name 'ApprovalId' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 19:37:57.226 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 19:37:57.226 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String' using the name 'Comment' in request data ...
2025-06-14 19:37:57.226 +09:00 [DBG] Could not find a value in the request with name 'Comment' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 19:37:57.226 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 19:37:57.227 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:37:57.227 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:37:57.227 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 19:37:57.228 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:37:57.228 +09:00 [DBG] Attempting to bind parameter 'approverEmployeeNumber' of type 'System.String' ...
2025-06-14 19:37:57.228 +09:00 [DBG] Attempting to bind parameter 'approverEmployeeNumber' of type 'System.String' using the name '' in request data ...
2025-06-14 19:37:57.228 +09:00 [DBG] Could not find a value in the request with name '' for binding parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:37:57.228 +09:00 [DBG] Done attempting to bind parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:37:57.228 +09:00 [DBG] Done attempting to bind parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:37:57.228 +09:00 [DBG] Attempting to validate the bound parameter 'approverEmployeeNumber' of type 'System.String' ...
2025-06-14 19:37:57.230 +09:00 [DBG] Done attempting to validate the bound parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:37:57.231 +09:00 [DBG] The request has model state errors, returning an error response.
2025-06-14 19:37:57.232 +09:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-06-14 19:37:57.232 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 19:37:57.232 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 19:37:57.232 +09:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-06-14 19:37:57.232 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-06-14 19:37:57.232 +09:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-06-14 19:37:57.251 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 29.7528ms
2025-06-14 19:37:57.252 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:37:57.252 +09:00 [DBG] Connection id "0HNDB5TPA75AJ" completed keep alive response.
2025-06-14 19:37:57.252 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 400 null application/problem+json; charset=utf-8 45.6243ms
2025-06-14 19:37:57.253 +09:00 [DBG] Connection id "0HNDB5TPA75AJ", Request id "0HNDB5TPA75AJ:00000003": started reading request body.
2025-06-14 19:37:57.256 +09:00 [DBG] Connection id "0HNDB5TPA75AJ", Request id "0HNDB5TPA75AJ:00000003": done reading request body.
2025-06-14 19:38:08.730 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 19:38:08.731 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:38:08.731 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:38:08.731 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:38:08.731 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 19:38:08.731 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:38:08.732 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 19:38:08.732 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 19:38:08.732 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 19:38:08.732 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 19:38:08.732 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 19:38:08.732 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 19:38:08.733 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:38:08.736 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:38:08.737 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 19:38:08.737 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 19:38:08.737 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:38:08.737 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:38:08.737 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 19:38:08.737 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 19:39:46.357 +09:00 [DBG] Connection id "0HNDB5TPA75AK" accepted.
2025-06-14 19:39:46.358 +09:00 [DBG] Connection id "0HNDB5TPA75AK" started.
2025-06-14 19:39:46.358 +09:00 [DBG] Connection id "0HNDB5TPA75AL" accepted.
2025-06-14 19:39:46.358 +09:00 [DBG] Connection id "0HNDB5TPA75AL" started.
2025-06-14 19:39:46.358 +09:00 [DBG] Connection id "0HNDB5TPA75AM" accepted.
2025-06-14 19:39:46.358 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 19:39:46.358 +09:00 [DBG] Connection id "0HNDB5TPA75AM" started.
2025-06-14 19:39:46.358 +09:00 [DBG] Connection id "0HNDB5TPA75AN" accepted.
2025-06-14 19:39:46.359 +09:00 [DBG] Connection id "0HNDB5TPA75AN" started.
2025-06-14 19:39:46.390 +09:00 [DBG] Connection 0HNDB5TPA75AM established using the following protocol: "Tls12"
2025-06-14 19:39:46.392 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:39:46.392 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 19:39:46.392 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:39:46.392 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:39:46.392 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 19:39:46.392 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:39:46.392 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:39:46.392 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 19:39:46.393 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 19:39:46.395 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:39:46.395 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:39:46.395 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:39:46.396 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:39:46.396 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:39:46.396 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 19:39:46.396 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:39:46.396 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:39:46.396 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 19:39:46.396 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 19:39:46.396 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 19:39:46.396 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 19:39:46.396 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 19:39:46.396 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 19:39:46.397 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 97663.4799ms
2025-06-14 19:39:46.398 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:39:46.398 +09:00 [DBG] Connection id "0HNDB5TPA75AJ" completed keep alive response.
2025-06-14 19:39:46.398 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 19:39:46.398 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:39:46.398 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:39:46.399 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 97666.863ms
2025-06-14 19:39:46.480 +09:00 [DBG] Connection 0HNDB5TPA75AL established using the following protocol: "Tls12"
2025-06-14 19:39:46.480 +09:00 [DBG] Connection id "0HNDB5TPA75AJ" received FIN.
2025-06-14 19:39:46.481 +09:00 [DBG] Connection id "0HNDB5TPA75AJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 19:39:46.482 +09:00 [DBG] Connection 0HNDB5TPA75AN established using the following protocol: "Tls12"
2025-06-14 19:39:46.482 +09:00 [DBG] Connection 0HNDB5TPA75AK established using the following protocol: "Tls12"
2025-06-14 19:39:46.485 +09:00 [DBG] Connection id "0HNDB5TPA75AJ" disconnecting.
2025-06-14 19:39:46.486 +09:00 [DBG] Connection id "0HNDB5TPA75AJ" stopped.
2025-06-14 19:39:46.511 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 19:39:46.511 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 19:39:46.511 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 19:39:46.511 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:39:46.511 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 19:39:46.511 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:39:46.512 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto, System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 19:39:46.512 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 19:39:46.512 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 19:39:46.512 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 19:39:46.512 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 19:39:46.512 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 19:39:46.512 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:39:46.513 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:39:46.513 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 19:39:46.514 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 19:39:46.515 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String' using the name 'ApprovalId' in request data ...
2025-06-14 19:39:46.515 +09:00 [DBG] Could not find a value in the request with name 'ApprovalId' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 19:39:46.515 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 19:39:46.515 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String' using the name 'Comment' in request data ...
2025-06-14 19:39:46.515 +09:00 [DBG] Could not find a value in the request with name 'Comment' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 19:39:46.515 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 19:39:46.516 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:39:46.516 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:39:46.516 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 19:39:46.517 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:39:46.517 +09:00 [DBG] Attempting to bind parameter 'approverEmployeeNumber' of type 'System.String' ...
2025-06-14 19:39:46.517 +09:00 [DBG] Attempting to bind parameter 'approverEmployeeNumber' of type 'System.String' using the name '' in request data ...
2025-06-14 19:39:46.517 +09:00 [DBG] Could not find a value in the request with name '' for binding parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.517 +09:00 [DBG] Done attempting to bind parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.517 +09:00 [DBG] Done attempting to bind parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.517 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 19:39:46.517 +09:00 [DBG] Attempting to validate the bound parameter 'approverEmployeeNumber' of type 'System.String' ...
2025-06-14 19:39:46.517 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 19:39:46.517 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 19:39:46.517 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:39:46.517 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 19:39:46.517 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:39:46.517 +09:00 [DBG] Done attempting to validate the bound parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.517 +09:00 [DBG] The request has model state errors, returning an error response.
2025-06-14 19:39:46.517 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto, System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 19:39:46.517 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 19:39:46.517 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 19:39:46.517 +09:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-06-14 19:39:46.517 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 19:39:46.518 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 19:39:46.518 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 19:39:46.518 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 19:39:46.518 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:39:46.518 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 19:39:46.518 +09:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-06-14 19:39:46.518 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-06-14 19:39:46.518 +09:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-06-14 19:39:46.518 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:39:46.518 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 19:39:46.518 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 19:39:46.518 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 19:39:46.518 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 19:39:46.518 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 19:39:46.518 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String' using the name 'ApprovalId' in request data ...
2025-06-14 19:39:46.518 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:39:46.518 +09:00 [DBG] Could not find a value in the request with name 'ApprovalId' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 19:39:46.518 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 19:39:46.518 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 6.2169ms
2025-06-14 19:39:46.518 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String' using the name 'Comment' in request data ...
2025-06-14 19:39:46.518 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:39:46.518 +09:00 [DBG] Could not find a value in the request with name 'Comment' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 19:39:46.518 +09:00 [DBG] Connection id "0HNDB5TPA75AM" completed keep alive response.
2025-06-14 19:39:46.519 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 400 null application/problem+json; charset=utf-8 7.8265ms
2025-06-14 19:39:46.518 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 19:39:46.518 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 19:39:46.519 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:39:46.519 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:39:46.519 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:39:46.519 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 19:39:46.519 +09:00 [DBG] Connection id "0HNDB5TPA75AM", Request id "0HNDB5TPA75AM:00000001": started reading request body.
2025-06-14 19:39:46.519 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto, System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 19:39:46.519 +09:00 [DBG] Connection id "0HNDB5TPA75AM", Request id "0HNDB5TPA75AM:00000001": done reading request body.
2025-06-14 19:39:46.519 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 19:39:46.519 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:39:46.519 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 19:39:46.519 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 19:39:46.519 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 19:39:46.519 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 19:39:46.519 +09:00 [DBG] Attempting to bind parameter 'approverEmployeeNumber' of type 'System.String' ...
2025-06-14 19:39:46.519 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 19:39:46.519 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:39:46.519 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 19:39:46.519 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 19:39:46.519 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 19:39:46.519 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:39:46.519 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:39:46.520 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:39:46.520 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto, System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 19:39:46.520 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 19:39:46.520 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 19:39:46.520 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 19:39:46.520 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 19:39:46.520 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String' using the name 'ApprovalId' in request data ...
2025-06-14 19:39:46.520 +09:00 [DBG] Attempting to bind parameter 'approverEmployeeNumber' of type 'System.String' using the name '' in request data ...
2025-06-14 19:39:46.520 +09:00 [DBG] Could not find a value in the request with name 'ApprovalId' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 19:39:46.520 +09:00 [DBG] Could not find a value in the request with name '' for binding parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.520 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 19:39:46.520 +09:00 [DBG] Done attempting to bind parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.520 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 19:39:46.520 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 19:39:46.520 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:39:46.520 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 19:39:46.520 +09:00 [DBG] Done attempting to bind parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.520 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:39:46.520 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String' using the name 'Comment' in request data ...
2025-06-14 19:39:46.520 +09:00 [DBG] Could not find a value in the request with name 'Comment' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 19:39:46.520 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 19:39:46.520 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 19:39:46.520 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 19:39:46.520 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:39:46.520 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String' using the name 'ApprovalId' in request data ...
2025-06-14 19:39:46.520 +09:00 [DBG] Attempting to validate the bound parameter 'approverEmployeeNumber' of type 'System.String' ...
2025-06-14 19:39:46.520 +09:00 [DBG] Could not find a value in the request with name 'ApprovalId' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 19:39:46.520 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 19:39:46.520 +09:00 [DBG] Done attempting to validate the bound parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.521 +09:00 [DBG] The request has model state errors, returning an error response.
2025-06-14 19:39:46.521 +09:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-06-14 19:39:46.521 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 19:39:46.520 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:39:46.521 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String' using the name 'Comment' in request data ...
2025-06-14 19:39:46.521 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 19:39:46.521 +09:00 [DBG] Could not find a value in the request with name 'Comment' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 19:39:46.521 +09:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-06-14 19:39:46.521 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 19:39:46.521 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-06-14 19:39:46.521 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:39:46.521 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:39:46.521 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 19:39:46.521 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:39:46.521 +09:00 [DBG] Attempting to bind parameter 'approverEmployeeNumber' of type 'System.String' ...
2025-06-14 19:39:46.521 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 19:39:46.521 +09:00 [DBG] Attempting to bind parameter 'approverEmployeeNumber' of type 'System.String' using the name '' in request data ...
2025-06-14 19:39:46.521 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 19:39:46.521 +09:00 [DBG] Could not find a value in the request with name '' for binding parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.521 +09:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-06-14 19:39:46.521 +09:00 [DBG] Done attempting to bind parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.521 +09:00 [DBG] Done attempting to bind parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.521 +09:00 [DBG] Attempting to validate the bound parameter 'approverEmployeeNumber' of type 'System.String' ...
2025-06-14 19:39:46.521 +09:00 [DBG] Done attempting to validate the bound parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.522 +09:00 [DBG] The request has model state errors, returning an error response.
2025-06-14 19:39:46.521 +09:00 [DBG] Attempting to bind parameter 'approverEmployeeNumber' of type 'System.String' ...
2025-06-14 19:39:46.522 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 3.9654ms
2025-06-14 19:39:46.522 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:39:46.522 +09:00 [DBG] Connection id "0HNDB5TPA75AL" completed keep alive response.
2025-06-14 19:39:46.522 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 400 null application/problem+json; charset=utf-8 4.9009ms
2025-06-14 19:39:46.522 +09:00 [DBG] Connection id "0HNDB5TPA75AL", Request id "0HNDB5TPA75AL:00000001": started reading request body.
2025-06-14 19:39:46.522 +09:00 [DBG] Connection id "0HNDB5TPA75AL", Request id "0HNDB5TPA75AL:00000001": done reading request body.
2025-06-14 19:39:46.522 +09:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-06-14 19:39:46.522 +09:00 [DBG] Attempting to bind parameter 'approverEmployeeNumber' of type 'System.String' using the name '' in request data ...
2025-06-14 19:39:46.522 +09:00 [DBG] Could not find a value in the request with name '' for binding parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.522 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 19:39:46.522 +09:00 [DBG] Done attempting to bind parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.522 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 19:39:46.522 +09:00 [DBG] Done attempting to bind parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.522 +09:00 [DBG] Attempting to validate the bound parameter 'approverEmployeeNumber' of type 'System.String' ...
2025-06-14 19:39:46.522 +09:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-06-14 19:39:46.522 +09:00 [DBG] Done attempting to validate the bound parameter 'approverEmployeeNumber' of type 'System.String'.
2025-06-14 19:39:46.522 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-06-14 19:39:46.522 +09:00 [DBG] The request has model state errors, returning an error response.
2025-06-14 19:39:46.522 +09:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-06-14 19:39:46.522 +09:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-06-14 19:39:46.522 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 19:39:46.522 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 19:39:46.522 +09:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-06-14 19:39:46.522 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-06-14 19:39:46.522 +09:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-06-14 19:39:46.522 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 2.8287ms
2025-06-14 19:39:46.522 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:39:46.522 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 2.215ms
2025-06-14 19:39:46.522 +09:00 [DBG] Connection id "0HNDB5TPA75AN" completed keep alive response.
2025-06-14 19:39:46.522 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 400 null application/problem+json; charset=utf-8 4.3642ms
2025-06-14 19:39:46.522 +09:00 [DBG] Connection id "0HNDB5TPA75AN", Request id "0HNDB5TPA75AN:00000001": started reading request body.
2025-06-14 19:39:46.522 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 19:39:46.523 +09:00 [DBG] Connection id "0HNDB5TPA75AK" completed keep alive response.
2025-06-14 19:39:46.522 +09:00 [DBG] Connection id "0HNDB5TPA75AN", Request id "0HNDB5TPA75AN:00000001": done reading request body.
2025-06-14 19:39:46.523 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 400 null application/problem+json; charset=utf-8 3.6934ms
2025-06-14 19:39:46.523 +09:00 [DBG] Connection id "0HNDB5TPA75AK", Request id "0HNDB5TPA75AK:00000001": started reading request body.
2025-06-14 19:39:46.523 +09:00 [DBG] Connection id "0HNDB5TPA75AK", Request id "0HNDB5TPA75AK:00000001": done reading request body.
2025-06-14 19:39:57.051 +09:00 [DBG] Connection id "0HNDB5TPA75AO" accepted.
2025-06-14 19:39:57.052 +09:00 [DBG] Connection id "0HNDB5TPA75AO" started.
2025-06-14 19:39:57.075 +09:00 [DBG] Connection 0HNDB5TPA75AO established using the following protocol: "Tls12"
2025-06-14 19:39:57.080 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 19:39:57.080 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:39:57.080 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:39:57.081 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:39:57.081 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 19:39:57.081 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:39:57.081 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 19:39:57.081 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 19:39:57.082 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 19:39:57.082 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 19:39:57.082 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 19:39:57.082 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 19:39:57.082 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:39:57.082 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:39:57.082 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 19:39:57.083 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 19:39:57.083 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:39:57.083 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:39:57.083 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 19:39:57.083 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 19:40:03.768 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 19:40:03.771 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:40:03.771 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 19:40:03.772 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:40:03.772 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:40:03.772 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 19:40:03.772 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:40:03.772 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:40:03.772 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 19:40:03.773 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 19:40:03.773 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:40:03.773 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:40:03.774 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:40:03.774 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:40:03.774 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:40:03.774 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 19:40:03.774 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:40:03.774 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:40:03.774 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 19:40:03.774 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 19:40:03.774 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 19:40:03.775 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 19:40:03.775 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 19:40:03.775 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 19:40:03.775 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 6693.1973ms
2025-06-14 19:40:03.777 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:40:03.778 +09:00 [DBG] Connection id "0HNDB5TPA75AO" completed keep alive response.
2025-06-14 19:40:03.779 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 19:40:03.779 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:40:03.779 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:40:03.779 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 6698.9521ms
2025-06-14 19:40:55.239 +09:00 [DBG] Connection id "0HNDB5TPA75AK" received FIN.
2025-06-14 19:40:55.320 +09:00 [DBG] Connection id "0HNDB5TPA75AK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 19:40:55.320 +09:00 [DBG] Connection id "0HNDB5TPA75AN" received FIN.
2025-06-14 19:40:55.320 +09:00 [DBG] Connection id "0HNDB5TPA75AL" received FIN.
2025-06-14 19:40:55.322 +09:00 [DBG] Connection id "0HNDB5TPA75AM" received FIN.
2025-06-14 19:40:55.348 +09:00 [DBG] Connection id "0HNDB5TPA75AK" disconnecting.
2025-06-14 19:40:55.348 +09:00 [DBG] Connection id "0HNDB5TPA75AN" disconnecting.
2025-06-14 19:40:55.349 +09:00 [DBG] Connection id "0HNDB5TPA75AL" disconnecting.
2025-06-14 19:40:55.349 +09:00 [DBG] Connection id "0HNDB5TPA75AM" disconnecting.
2025-06-14 19:40:55.353 +09:00 [DBG] Connection id "0HNDB5TPA75AK" stopped.
2025-06-14 19:40:55.353 +09:00 [DBG] Connection id "0HNDB5TPA75AN" stopped.
2025-06-14 19:40:55.353 +09:00 [DBG] Connection id "0HNDB5TPA75AM" stopped.
2025-06-14 19:40:55.353 +09:00 [DBG] Connection id "0HNDB5TPA75AL" stopped.
2025-06-14 19:40:55.353 +09:00 [DBG] Connection id "0HNDB5TPA75AN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 19:40:55.355 +09:00 [DBG] Connection id "0HNDB5TPA75AM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 19:40:55.356 +09:00 [DBG] Connection id "0HNDB5TPA75AL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 19:41:12.054 +09:00 [DBG] Connection id "0HNDB5TPA75AO" received FIN.
2025-06-14 19:41:12.055 +09:00 [DBG] Connection id "0HNDB5TPA75AO" disconnecting.
2025-06-14 19:41:12.055 +09:00 [DBG] Connection id "0HNDB5TPA75AO" stopped.
2025-06-14 19:41:12.056 +09:00 [DBG] Connection id "0HNDB5TPA75AO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 19:54:21.269 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 19:54:21.383 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 19:54:21.688 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 19:54:21.693 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:54:21.698 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-14 19:54:21.701 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:54:21.709 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:54:21.711 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:54:21.713 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:54:21.715 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 19:54:21.715 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:54:21.715 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 19:54:21.718 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-14 19:54:21.718 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-14 19:54:21.718 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:54:21.719 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:54:21.721 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 19:54:21.734 +09:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 19:54:21.735 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:54:21.736 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 19:54:21.739 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:54:21.739 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 19:54:21.739 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:54:21.739 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:54:21.740 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:54:21.740 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:54:21.740 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 19:54:21.740 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 19:54:21.740 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 19:54:21.740 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:54:21.740 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:54:21.740 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 19:54:21.740 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 19:54:21.740 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:54:21.740 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:54:21.761 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 19:54:21.852 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 19:54:21.864 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:54:21.865 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:54:21.865 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 19:54:21.865 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:54:21.865 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:54:21.865 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 19:54:21.866 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 19:54:21.868 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:54:21.868 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 19:54:21.869 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:54:21.869 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:54:21.870 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 19:54:21.870 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:54:21.870 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:54:21.872 +09:00 [DBG] Hosting starting
2025-06-14 19:54:21.899 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 19:54:21.899 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 19:54:22.220 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 19:54:22.221 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 19:54:22.221 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 19:54:22.221 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 19:54:22.222 +09:00 [INF] Hosting environment: Development
2025-06-14 19:54:22.222 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 19:54:22.222 +09:00 [DBG] Hosting started
2025-06-14 19:54:28.124 +09:00 [DBG] Connection id "0HNDB67AP0SBL" accepted.
2025-06-14 19:54:28.124 +09:00 [DBG] Connection id "0HNDB67AP0SBL" started.
2025-06-14 19:54:28.162 +09:00 [DBG] Connection 0HNDB67AP0SBL established using the following protocol: "Tls12"
2025-06-14 19:54:28.180 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 19:54:28.190 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:54:28.192 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:54:28.192 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:54:28.205 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 19:54:28.205 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:54:28.216 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 19:54:28.216 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 19:54:28.216 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 19:54:28.217 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 19:54:28.217 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 19:54:28.217 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 19:54:28.218 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:54:28.218 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:54:28.222 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 19:54:28.224 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 19:54:28.224 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:54:28.224 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:54:28.224 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 19:54:28.227 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 19:54:30.570 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 19:54:30.580 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 19:54:30.655 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ApprovalStep.ActionDate (DateTime?), 8], [Property: ApprovalStep.ActionStatus (string), 9], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 10], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 11], [Property: ApprovalStep.ApproverName (string), 12], [Property: ApprovalStep.Comment (string), 13], [Property: ApprovalStep.Department (string), 14], [Property: ApprovalStep.IsFinalApprover (bool) Required, 15], [Property: ApprovalStep.Position (string), 16], [Property: ApprovalStep.Sequence (int) Required, 17], [Property: ApprovalStep.StepType (string), 18] }
            8 -> 7
            9 -> 19
            10 -> 20
            11 -> 21
            12 -> 22
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ApprovalStep.ActionDate (DateTime?), 8], [Property: ApprovalStep.ActionStatus (string), 9], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 10], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 11], [Property: ApprovalStep.ApproverName (string), 12], [Property: ApprovalStep.Comment (string), 13], [Property: ApprovalStep.Department (string), 14], [Property: ApprovalStep.IsFinalApprover (bool) Required, 15], [Property: ApprovalStep.Position (string), 16], [Property: ApprovalStep.Sequence (int) Required, 17], [Property: ApprovalStep.StepType (string), 18] }
            8 -> 7
            9 -> 19
            10 -> 20
            11 -> 21
            12 -> 22
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            string value4;
            string value5;
            string value6;
            string value7;
            List<ApprovalStep> namelessParameter{0};
            int? value9;
            string value10;
            string value11;
            string value12;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.GetString(3);
            value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value9 = (int?)dataReader.GetInt32(19);
            value10 = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
            value11 = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                value4, 
                value5, 
                value6, 
                value7, 
                namelessParameter{0}, 
                (object)value9, 
                value10, 
                value11, 
                value12 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(7) ? default(object) : (object)dataReader.GetGuid(7) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid) : dataReader.GetGuid(7);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(15) ? default(bool) : dataReader.GetBoolean(15);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[3]), 
            ApplicantDepartment = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            Status = (string)(resultContext.Values[6]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[7]), 
            CurrentStep = (int)(int?)(resultContext.Values[8]), 
            CurrentApproverName = (string)(resultContext.Values[9]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[10]), 
            CurrentActionStatus = (string)(resultContext.Values[11]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 19:54:30.671 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:54:30.671 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 19:54:30.671 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:54:30.671 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:54:30.672 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 19:54:30.672 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:54:30.673 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-14 19:54:30.674 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 19:54:30.678 +09:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 19:54:30.699 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:54:30.716 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:54:30.717 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:54:30.717 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:54:30.717 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:54:30.717 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 38ms reading results.
2025-06-14 19:54:30.717 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:54:30.717 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:54:30.719 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 19:54:30.719 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 19:54:30.719 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 19:54:30.719 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 19:54:30.720 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 19:54:30.720 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 19:54:30.779 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 2560.4637ms
2025-06-14 19:54:30.782 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:54:30.783 +09:00 [DBG] Connection id "0HNDB67AP0SBL" completed keep alive response.
2025-06-14 19:54:30.784 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 19:54:30.786 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:54:30.786 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:54:30.787 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 2607.5501ms
2025-06-14 19:55:15.800 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 19:55:15.808 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:55:15.810 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:55:15.812 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:55:15.817 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 19:55:15.818 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:55:15.818 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 19:55:15.818 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 19:55:15.818 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 19:55:15.819 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 19:55:15.819 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 19:55:15.819 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 19:55:15.819 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:55:15.821 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:55:15.821 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 19:55:15.823 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 19:55:15.823 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:55:15.823 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:55:15.823 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 19:55:15.824 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 19:55:27.456 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 19:55:27.460 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:55:27.460 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 19:55:27.460 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:55:27.460 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:55:27.460 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 19:55:27.461 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:55:27.461 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:55:27.461 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 19:55:27.462 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 19:55:27.463 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:55:27.463 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:55:27.463 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:55:27.463 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:55:27.463 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:55:27.463 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 19:55:27.463 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:55:27.463 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:55:27.464 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 19:55:27.464 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 19:55:27.464 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 19:55:27.464 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 19:55:27.464 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 19:55:27.464 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 19:55:27.465 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 11646.7786ms
2025-06-14 19:55:27.465 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:55:27.465 +09:00 [DBG] Connection id "0HNDB67AP0SBL" completed keep alive response.
2025-06-14 19:55:27.466 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 19:55:27.466 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:55:27.466 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:55:27.466 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 11667.2856ms
2025-06-14 19:56:01.544 +09:00 [DBG] Connection id "0HNDB67AP0SBL" received FIN.
2025-06-14 19:56:01.593 +09:00 [DBG] Connection id "0HNDB67AP0SBL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 19:56:01.625 +09:00 [DBG] Connection id "0HNDB67AP0SBL" disconnecting.
2025-06-14 19:56:01.632 +09:00 [DBG] Connection id "0HNDB67AP0SBL" stopped.
2025-06-14 19:56:43.776 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 19:56:43.896 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 19:56:44.186 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 19:56:44.191 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:56:44.197 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-14 19:56:44.199 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:56:44.205 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:56:44.207 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:56:44.209 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:56:44.211 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 19:56:44.211 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:56:44.211 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 19:56:44.213 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-14 19:56:44.214 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-14 19:56:44.214 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:56:44.215 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:56:44.217 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 19:56:44.231 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 19:56:44.232 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:56:44.233 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 19:56:44.235 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:56:44.235 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 19:56:44.235 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:56:44.236 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:56:44.236 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:56:44.236 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:56:44.236 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 19:56:44.236 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 19:56:44.236 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 19:56:44.236 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:56:44.236 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:56:44.236 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 19:56:44.237 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 19:56:44.237 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:56:44.237 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:56:44.260 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 19:56:44.359 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 19:56:44.371 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:56:44.372 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:56:44.372 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 19:56:44.372 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:56:44.372 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:56:44.372 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 19:56:44.373 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 19:56:44.375 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:56:44.376 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 19:56:44.376 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:56:44.376 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:56:44.377 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 19:56:44.378 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:56:44.378 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:56:44.379 +09:00 [DBG] Hosting starting
2025-06-14 19:56:44.407 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 19:56:44.407 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 19:56:44.626 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 19:56:44.626 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 19:56:44.626 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 19:56:44.626 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 19:56:44.627 +09:00 [INF] Hosting environment: Development
2025-06-14 19:56:44.627 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 19:56:44.627 +09:00 [DBG] Hosting started
2025-06-14 19:57:00.275 +09:00 [DBG] Connection id "0HNDB68O41LCN" accepted.
2025-06-14 19:57:00.275 +09:00 [DBG] Connection id "0HNDB68O41LCN" started.
2025-06-14 19:57:00.311 +09:00 [DBG] Connection 0HNDB68O41LCN established using the following protocol: "Tls12"
2025-06-14 19:57:00.332 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 19:57:00.342 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:57:00.344 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:57:00.345 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:57:00.357 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 19:57:00.358 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:57:00.369 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 19:57:00.369 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 19:57:00.369 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 19:57:00.370 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 19:57:00.370 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 19:57:00.370 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 19:57:00.371 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:57:00.371 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:57:00.376 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 19:57:00.377 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 19:57:00.377 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:57:00.377 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:57:00.377 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 19:57:00.380 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 19:57:02.843 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 19:57:02.855 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 19:57:02.929 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ApprovalStep.ActionDate (DateTime?), 8], [Property: ApprovalStep.ActionStatus (string), 9], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 10], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 11], [Property: ApprovalStep.ApproverName (string), 12], [Property: ApprovalStep.Comment (string), 13], [Property: ApprovalStep.Department (string), 14], [Property: ApprovalStep.IsFinalApprover (bool) Required, 15], [Property: ApprovalStep.Position (string), 16], [Property: ApprovalStep.Sequence (int) Required, 17], [Property: ApprovalStep.StepType (string), 18] }
            8 -> 7
            9 -> 19
            10 -> 20
            11 -> 21
            12 -> 22
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ApprovalStep.ActionDate (DateTime?), 8], [Property: ApprovalStep.ActionStatus (string), 9], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 10], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 11], [Property: ApprovalStep.ApproverName (string), 12], [Property: ApprovalStep.Comment (string), 13], [Property: ApprovalStep.Department (string), 14], [Property: ApprovalStep.IsFinalApprover (bool) Required, 15], [Property: ApprovalStep.Position (string), 16], [Property: ApprovalStep.Sequence (int) Required, 17], [Property: ApprovalStep.StepType (string), 18] }
            8 -> 7
            9 -> 19
            10 -> 20
            11 -> 21
            12 -> 22
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            string value4;
            string value5;
            string value6;
            string value7;
            List<ApprovalStep> namelessParameter{0};
            int? value9;
            string value10;
            string value11;
            string value12;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.GetString(3);
            value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value9 = (int?)dataReader.GetInt32(19);
            value10 = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
            value11 = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                value4, 
                value5, 
                value6, 
                value7, 
                namelessParameter{0}, 
                (object)value9, 
                value10, 
                value11, 
                value12 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(7) ? default(object) : (object)dataReader.GetGuid(7) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid) : dataReader.GetGuid(7);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(15) ? default(bool) : dataReader.GetBoolean(15);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[3]), 
            ApplicantDepartment = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            Status = (string)(resultContext.Values[6]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[7]), 
            CurrentStep = (int)(int?)(resultContext.Values[8]), 
            CurrentApproverName = (string)(resultContext.Values[9]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[10]), 
            CurrentActionStatus = (string)(resultContext.Values[11]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 19:57:02.945 +09:00 [DBG] Creating DbConnection.
2025-06-14 19:57:02.945 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 19:57:02.945 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:57:02.945 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:57:02.946 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 19:57:02.946 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:57:02.947 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 19:57:02.947 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 19:57:02.951 +09:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 19:57:02.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:57:02.986 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:57:02.987 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:57:02.987 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 19:57:02.987 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:57:02.987 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 35ms reading results.
2025-06-14 19:57:02.987 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 19:57:02.987 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:57:02.989 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 19:57:02.989 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 19:57:02.989 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 19:57:02.989 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 19:57:02.990 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 19:57:02.990 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 19:57:03.042 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 2670.2582ms
2025-06-14 19:57:03.044 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:57:03.045 +09:00 [DBG] Connection id "0HNDB68O41LCN" completed keep alive response.
2025-06-14 19:57:03.046 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 19:57:03.049 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 19:57:03.049 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 19:57:03.050 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 2718.6209ms
2025-06-14 19:58:08.187 +09:00 [DBG] Connection id "0HNDB68O41LCN" received FIN.
2025-06-14 19:58:08.245 +09:00 [DBG] Connection id "0HNDB68O41LCN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 19:58:08.252 +09:00 [DBG] Connection id "0HNDB68O41LCN" disconnecting.
2025-06-14 19:58:08.255 +09:00 [DBG] Connection id "0HNDB68O41LCN" stopped.
2025-06-14 19:59:58.459 +09:00 [DBG] Connection id "0HNDB68O41LCO" accepted.
2025-06-14 19:59:58.461 +09:00 [DBG] Connection id "0HNDB68O41LCO" started.
2025-06-14 19:59:58.484 +09:00 [DBG] Connection 0HNDB68O41LCO established using the following protocol: "Tls12"
2025-06-14 19:59:58.491 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 19:59:58.492 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:59:58.493 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 19:59:58.493 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:59:58.524 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 19:59:58.524 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 19:59:58.525 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 19:59:58.525 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 19:59:58.525 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 19:59:58.526 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 19:59:58.526 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 19:59:58.526 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 19:59:58.526 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:59:58.528 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 19:59:58.530 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 19:59:58.530 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 19:59:58.530 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:59:58.530 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 19:59:58.530 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 19:59:58.531 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 20:01:08.063 +09:00 [DBG] Connection id "0HNDB68O41LCO" received FIN.
2025-06-14 20:01:08.090 +09:00 [DBG] Connection id "0HNDB68O41LCP" accepted.
2025-06-14 20:01:08.091 +09:00 [DBG] Connection id "0HNDB68O41LCP" started.
2025-06-14 20:01:08.092 +09:00 [DBG] Connection id "0HNDB68O41LCO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 20:01:08.092 +09:00 [DBG] Connection id "0HNDB68O41LCO" disconnecting.
2025-06-14 20:01:08.114 +09:00 [DBG] Connection 0HNDB68O41LCP established using the following protocol: "Tls12"
2025-06-14 20:01:08.120 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 20:01:08.120 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 20:01:08.120 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 20:01:08.120 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:01:08.122 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:01:08.122 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:01:08.122 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 20:01:08.122 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:01:08.122 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:01:08.122 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:01:08.122 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:01:08.122 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:01:08.122 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:01:08.124 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:01:08.124 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 20:01:08.124 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 20:01:08.124 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 20:01:08.124 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 20:01:08.124 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 20:01:08.124 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 20:01:13.255 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 20:01:13.255 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 20:01:13.263 +09:00 [DBG] Creating DbConnection.
2025-06-14 20:01:13.263 +09:00 [DBG] Creating DbConnection.
2025-06-14 20:01:13.263 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 20:01:13.263 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 20:01:13.263 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:01:13.263 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:01:13.265 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:01:13.265 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:01:13.265 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 20:01:13.265 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 20:01:13.265 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:01:13.265 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:01:13.265 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:01:13.265 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:01:13.266 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:01:13.266 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:01:13.269 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:01:13.269 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:01:13.271 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:01:13.271 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:01:13.272 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:01:13.272 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:01:13.272 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:01:13.272 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:01:13.272 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:01:13.272 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:01:13.273 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 20:01:13.273 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:01:13.273 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:01:13.273 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:01:13.273 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:01:13.273 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 20:01:13.273 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:01:13.273 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:01:13.274 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:01:13.274 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:01:13.274 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:01:13.274 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:01:13.274 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 20:01:13.274 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 20:01:14.124 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:01:14.125 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:01:14.125 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:01:14.125 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:01:14.125 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 20:01:14.125 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 20:01:14.126 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 6003.4877ms
2025-06-14 20:01:14.126 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:01:14.126 +09:00 [DBG] Connection id "0HNDB68O41LCP" completed keep alive response.
2025-06-14 20:01:14.126 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 20:01:14.126 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:01:14.126 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:01:14.126 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 6006.464ms
2025-06-14 20:01:14.127 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 75603.2362ms
2025-06-14 20:01:14.127 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:01:14.127 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 20:01:14.127 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:01:14.127 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:01:14.127 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 499 null application/json; charset=utf-8 75638.7245ms
2025-06-14 20:01:14.127 +09:00 [DBG] Connection id "0HNDB68O41LCO" stopped.
2025-06-14 20:01:24.851 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 20:01:24.852 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 20:01:24.852 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 20:01:24.852 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:01:24.853 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:01:24.853 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:01:24.862 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 20:01:24.862 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:01:24.862 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:01:24.863 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:01:24.863 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:01:24.863 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:01:24.863 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:01:24.863 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:01:24.864 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 20:01:24.864 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 20:01:24.867 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String' using the name 'ApprovalId' in request data ...
2025-06-14 20:01:24.867 +09:00 [DBG] Could not find a value in the request with name 'ApprovalId' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 20:01:24.867 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 20:01:24.868 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String' using the name 'Comment' in request data ...
2025-06-14 20:01:24.868 +09:00 [DBG] Could not find a value in the request with name 'Comment' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 20:01:24.868 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 20:01:24.868 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String' using the name 'CurrentApproverEmployeeNumber' in request data ...
2025-06-14 20:01:24.868 +09:00 [DBG] Could not find a value in the request with name 'CurrentApproverEmployeeNumber' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String'.
2025-06-14 20:01:24.868 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String'.
2025-06-14 20:01:24.868 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:01:24.868 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:01:24.868 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 20:01:24.875 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:01:24.919 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:01:24.919 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:01:24.919 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:01:24.919 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:01:24.931 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-14 20:01:24.931 +09:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-06-14 20:01:24.932 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 69.5211ms
2025-06-14 20:01:24.932 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:01:24.932 +09:00 [DBG] Connection id "0HNDB68O41LCP" completed keep alive response.
2025-06-14 20:01:24.933 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 400 null text/plain; charset=utf-8 82.0676ms
2025-06-14 20:01:24.934 +09:00 [DBG] Connection id "0HNDB68O41LCP", Request id "0HNDB68O41LCP:00000002": started reading request body.
2025-06-14 20:01:24.939 +09:00 [DBG] Connection id "0HNDB68O41LCP", Request id "0HNDB68O41LCP:00000002": done reading request body.
2025-06-14 20:02:49.956 +09:00 [DBG] Connection id "0HNDB68O41LCP" received FIN.
2025-06-14 20:02:50.010 +09:00 [DBG] Connection id "0HNDB68O41LCP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 20:02:50.030 +09:00 [DBG] Connection id "0HNDB68O41LCP" disconnecting.
2025-06-14 20:02:50.057 +09:00 [DBG] Connection id "0HNDB68O41LCP" stopped.
2025-06-14 20:03:18.037 +09:00 [DBG] Connection id "0HNDB68O41LCQ" accepted.
2025-06-14 20:03:18.062 +09:00 [DBG] Connection id "0HNDB68O41LCQ" started.
2025-06-14 20:03:18.110 +09:00 [DBG] Connection 0HNDB68O41LCQ established using the following protocol: "Tls12"
2025-06-14 20:03:18.123 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 20:03:18.123 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 20:03:18.123 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 20:03:18.124 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:03:18.125 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:03:18.125 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:03:18.126 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 20:03:18.126 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:03:18.126 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:03:18.127 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:03:18.127 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:03:18.128 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:03:18.128 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:03:18.130 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:03:18.131 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 20:03:18.131 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 20:03:18.131 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 20:03:18.131 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 20:03:18.131 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 20:03:18.132 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 20:03:18.134 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 20:03:18.137 +09:00 [DBG] Creating DbConnection.
2025-06-14 20:03:18.138 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 20:03:18.138 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:03:18.138 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:03:18.138 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 20:03:18.139 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:03:18.139 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:03:18.139 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:03:18.139 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:03:18.141 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:03:18.141 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:03:18.142 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:03:18.142 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:03:18.142 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:03:18.143 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 20:03:18.143 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:03:18.143 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:03:18.144 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:03:18.144 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:03:18.144 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:03:18.144 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:03:18.144 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 20:03:18.144 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 20:03:18.145 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 17.2111ms
2025-06-14 20:03:18.145 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:03:18.145 +09:00 [DBG] Connection id "0HNDB68O41LCQ" completed keep alive response.
2025-06-14 20:03:18.146 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 20:03:18.146 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:03:18.146 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:03:18.146 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 23.0265ms
2025-06-14 20:03:28.967 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 20:03:28.968 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 20:03:28.968 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 20:03:28.968 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:03:28.968 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:03:28.968 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:03:28.968 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 20:03:28.968 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:03:28.968 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:03:28.968 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:03:28.968 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:03:28.968 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:03:28.968 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:03:28.968 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:03:28.969 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 20:03:28.969 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 20:03:28.969 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String' using the name 'ApprovalId' in request data ...
2025-06-14 20:03:28.969 +09:00 [DBG] Could not find a value in the request with name 'ApprovalId' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 20:03:28.969 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 20:03:28.969 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String' using the name 'Comment' in request data ...
2025-06-14 20:03:28.969 +09:00 [DBG] Could not find a value in the request with name 'Comment' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 20:03:28.969 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 20:03:28.969 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String' using the name 'CurrentApproverEmployeeNumber' in request data ...
2025-06-14 20:03:28.969 +09:00 [DBG] Could not find a value in the request with name 'CurrentApproverEmployeeNumber' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String'.
2025-06-14 20:03:28.969 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String'.
2025-06-14 20:03:28.969 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:03:28.969 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:03:28.969 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 20:03:28.969 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:03:28.969 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:03:28.969 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:03:28.970 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:03:28.970 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:03:28.970 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-14 20:03:28.970 +09:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-06-14 20:03:28.970 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 1.9292ms
2025-06-14 20:03:28.970 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:03:28.970 +09:00 [DBG] Connection id "0HNDB68O41LCQ" completed keep alive response.
2025-06-14 20:03:28.970 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 400 null text/plain; charset=utf-8 2.6984ms
2025-06-14 20:03:28.970 +09:00 [DBG] Connection id "0HNDB68O41LCQ", Request id "0HNDB68O41LCQ:00000002": started reading request body.
2025-06-14 20:03:28.970 +09:00 [DBG] Connection id "0HNDB68O41LCQ", Request id "0HNDB68O41LCQ:00000002": done reading request body.
2025-06-14 20:04:14.586 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 20:04:14.587 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 20:04:14.587 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 20:04:14.587 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:04:14.588 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:04:14.588 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:04:14.588 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 20:04:14.588 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:04:14.589 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:04:14.589 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:04:14.589 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:04:14.589 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:04:14.589 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:04:14.589 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:04:14.590 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 20:04:14.590 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 20:04:14.590 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 20:04:14.590 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 20:04:14.590 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 20:04:14.590 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 20:04:14.592 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 20:04:14.593 +09:00 [DBG] Creating DbConnection.
2025-06-14 20:04:14.593 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 20:04:14.593 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:04:14.593 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:04:14.593 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 20:04:14.594 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:04:14.594 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:04:14.594 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:04:14.594 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:04:14.595 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:04:14.595 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:04:14.595 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:04:14.595 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:04:14.595 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:04:14.595 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 20:04:14.595 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:04:14.596 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:04:14.596 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:04:14.596 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:04:14.596 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:04:14.596 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:04:14.596 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 20:04:14.596 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 20:04:14.602 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.648ms
2025-06-14 20:04:14.602 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:04:14.602 +09:00 [DBG] Connection id "0HNDB68O41LCQ" completed keep alive response.
2025-06-14 20:04:14.603 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 20:04:14.603 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:04:14.603 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:04:14.603 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 16.656ms
2025-06-14 20:04:20.984 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 20:04:20.984 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 20:04:20.984 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 20:04:20.985 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:04:20.985 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:04:20.985 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:04:20.985 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 20:04:20.986 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:04:20.986 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:04:20.986 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:04:20.986 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:04:20.986 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:04:20.986 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:04:20.987 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:04:20.988 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 20:04:20.988 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 20:04:20.988 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String' using the name 'ApprovalId' in request data ...
2025-06-14 20:04:20.988 +09:00 [DBG] Could not find a value in the request with name 'ApprovalId' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 20:04:20.988 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 20:04:20.988 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String' using the name 'Comment' in request data ...
2025-06-14 20:04:20.989 +09:00 [DBG] Could not find a value in the request with name 'Comment' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 20:04:20.989 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 20:04:20.989 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String' using the name 'CurrentApproverEmployeeNumber' in request data ...
2025-06-14 20:04:20.989 +09:00 [DBG] Could not find a value in the request with name 'CurrentApproverEmployeeNumber' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String'.
2025-06-14 20:04:20.989 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String'.
2025-06-14 20:04:20.989 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:04:20.989 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:04:20.989 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 20:04:20.990 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:05:12.180 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:05:12.184 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:05:12.185 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:05:12.185 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:05:12.186 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-14 20:05:12.186 +09:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-06-14 20:05:12.187 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 51202.6272ms
2025-06-14 20:05:12.194 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:05:12.194 +09:00 [DBG] Connection id "0HNDB68O41LCQ" completed keep alive response.
2025-06-14 20:05:12.195 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 400 null text/plain; charset=utf-8 51212.5695ms
2025-06-14 20:05:12.195 +09:00 [DBG] Connection id "0HNDB68O41LCQ", Request id "0HNDB68O41LCQ:00000004": started reading request body.
2025-06-14 20:05:12.198 +09:00 [DBG] Connection id "0HNDB68O41LCQ", Request id "0HNDB68O41LCQ:00000004": done reading request body.
2025-06-14 20:05:15.366 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 20:05:15.366 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 20:05:15.366 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 20:05:15.366 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:05:15.368 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:05:15.368 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:05:15.369 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 20:05:15.369 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:05:15.369 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:05:15.369 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:05:15.369 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:05:15.369 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:05:15.369 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:05:15.370 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:05:15.370 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 20:05:15.370 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 20:05:15.370 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 20:05:15.370 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 20:05:15.370 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 20:05:15.370 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 20:05:15.372 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 20:05:15.376 +09:00 [DBG] Creating DbConnection.
2025-06-14 20:05:15.376 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 20:05:15.376 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:05:15.376 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:05:15.376 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 20:05:15.377 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:05:15.377 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:05:15.377 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:05:15.377 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:05:15.378 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:05:15.378 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:05:15.379 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:05:15.379 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:05:15.379 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:05:15.379 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 20:05:15.379 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:05:15.379 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:05:15.379 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:05:15.379 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:05:15.379 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:05:15.379 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:05:15.379 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 20:05:15.379 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 20:05:15.380 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 11.0761ms
2025-06-14 20:05:15.380 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:05:15.380 +09:00 [DBG] Connection id "0HNDB68O41LCQ" completed keep alive response.
2025-06-14 20:05:15.380 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 20:05:15.380 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:05:15.380 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:05:15.380 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 14.7895ms
2025-06-14 20:05:29.540 +09:00 [DBG] Connection id "0HNDB68O41LCR" accepted.
2025-06-14 20:05:29.541 +09:00 [DBG] Connection id "0HNDB68O41LCR" started.
2025-06-14 20:05:29.566 +09:00 [DBG] Connection 0HNDB68O41LCR established using the following protocol: "Tls12"
2025-06-14 20:05:29.574 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 20:05:29.574 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 20:05:29.574 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 20:05:29.574 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:05:29.575 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:05:29.575 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:05:29.576 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 20:05:29.576 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:05:29.576 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:05:29.576 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:05:29.576 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:05:29.576 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:05:29.576 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:05:29.578 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:05:29.578 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 20:05:29.578 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 20:05:29.578 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String' using the name 'ApprovalId' in request data ...
2025-06-14 20:05:29.578 +09:00 [DBG] Could not find a value in the request with name 'ApprovalId' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 20:05:29.578 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 20:05:29.579 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String' using the name 'Comment' in request data ...
2025-06-14 20:05:29.579 +09:00 [DBG] Could not find a value in the request with name 'Comment' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 20:05:29.579 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 20:05:29.579 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String' using the name 'CurrentApproverEmployeeNumber' in request data ...
2025-06-14 20:05:29.579 +09:00 [DBG] Could not find a value in the request with name 'CurrentApproverEmployeeNumber' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String'.
2025-06-14 20:05:29.579 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String'.
2025-06-14 20:05:29.579 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:05:29.579 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:05:29.579 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 20:05:29.579 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:05:32.619 +09:00 [DBG] Connection id "0HNDB68O41LCQ" received FIN.
2025-06-14 20:05:32.620 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:05:32.646 +09:00 [DBG] Connection id "0HNDB68O41LCQ" disconnecting.
2025-06-14 20:05:32.646 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:05:32.648 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:05:32.648 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:05:32.648 +09:00 [DBG] Connection id "0HNDB68O41LCQ" stopped.
2025-06-14 20:05:32.648 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-14 20:05:32.648 +09:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-06-14 20:05:32.648 +09:00 [DBG] Connection id "0HNDB68O41LCQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 20:05:32.649 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 3073.1001ms
2025-06-14 20:05:32.649 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:05:32.649 +09:00 [DBG] Connection id "0HNDB68O41LCR" completed keep alive response.
2025-06-14 20:05:32.649 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 400 null text/plain; charset=utf-8 3075.8705ms
2025-06-14 20:05:32.650 +09:00 [DBG] Connection id "0HNDB68O41LCR", Request id "0HNDB68O41LCR:00000001": started reading request body.
2025-06-14 20:05:32.650 +09:00 [DBG] Connection id "0HNDB68O41LCR", Request id "0HNDB68O41LCR:00000001": done reading request body.
2025-06-14 20:05:33.554 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 20:05:33.554 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 20:05:33.554 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 20:05:33.554 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:05:33.554 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:05:33.554 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:05:33.555 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 20:05:33.555 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:05:33.555 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:05:33.555 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:05:33.555 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:05:33.555 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:05:33.555 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:05:33.555 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:05:33.555 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 20:05:33.556 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 20:05:33.556 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 20:05:33.556 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 20:05:33.556 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 20:05:33.556 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 20:05:33.558 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 20:05:33.559 +09:00 [DBG] Creating DbConnection.
2025-06-14 20:05:33.559 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 20:05:33.559 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:05:33.559 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:05:33.560 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 20:05:33.560 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:05:33.560 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:05:33.560 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:05:33.561 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:05:33.561 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:05:33.562 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:05:33.562 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:05:33.562 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:05:33.563 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:05:33.563 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 20:05:33.563 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:05:33.564 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:05:33.564 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:05:33.564 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:05:33.564 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:05:33.564 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:05:33.564 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 20:05:33.564 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 20:05:33.566 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 10.4942ms
2025-06-14 20:05:33.566 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:05:33.566 +09:00 [DBG] Connection id "0HNDB68O41LCR" completed keep alive response.
2025-06-14 20:05:33.566 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 20:05:33.566 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:05:33.566 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:05:33.566 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 12.7297ms
2025-06-14 20:06:44.570 +09:00 [DBG] Connection id "0HNDB68O41LCR" received FIN.
2025-06-14 20:06:44.624 +09:00 [DBG] Connection id "0HNDB68O41LCR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 20:06:44.625 +09:00 [DBG] Connection id "0HNDB68O41LCR" disconnecting.
2025-06-14 20:06:44.652 +09:00 [DBG] Connection id "0HNDB68O41LCR" stopped.
2025-06-14 20:27:43.871 +09:00 [DBG] Connection id "0HNDB68O41LCS" accepted.
2025-06-14 20:27:43.904 +09:00 [DBG] Connection id "0HNDB68O41LCS" started.
2025-06-14 20:27:44.006 +09:00 [DBG] Connection 0HNDB68O41LCS established using the following protocol: "Tls12"
2025-06-14 20:27:44.012 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 20:27:44.013 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 20:27:44.013 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 20:27:44.013 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:27:44.014 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:27:44.014 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:27:44.014 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 20:27:44.014 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:27:44.014 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:27:44.015 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:27:44.015 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:27:44.015 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:27:44.015 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:27:44.015 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:27:44.016 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 20:27:44.016 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 20:27:44.016 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String' using the name 'ApprovalId' in request data ...
2025-06-14 20:27:44.016 +09:00 [DBG] Could not find a value in the request with name 'ApprovalId' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 20:27:44.016 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.ApprovalId' of type 'System.String'.
2025-06-14 20:27:44.016 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String' using the name 'Comment' in request data ...
2025-06-14 20:27:44.016 +09:00 [DBG] Could not find a value in the request with name 'Comment' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 20:27:44.016 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.Comment' of type 'System.String'.
2025-06-14 20:27:44.016 +09:00 [DBG] Attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String' using the name 'CurrentApproverEmployeeNumber' in request data ...
2025-06-14 20:27:44.016 +09:00 [DBG] Could not find a value in the request with name 'CurrentApproverEmployeeNumber' for binding property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String'.
2025-06-14 20:27:44.016 +09:00 [DBG] Done attempting to bind property 'ApprovalService.API.DTOs.ApproveRequestDto.CurrentApproverEmployeeNumber' of type 'System.String'.
2025-06-14 20:27:44.016 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:27:44.016 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:27:44.016 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 20:27:44.018 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:28:38.341 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 20:28:38.467 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 20:28:38.749 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 20:28:38.755 +09:00 [DBG] Creating DbConnection.
2025-06-14 20:28:38.760 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-14 20:28:38.763 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:28:38.770 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:28:38.773 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:28:38.775 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:28:38.776 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 20:28:38.776 +09:00 [DBG] Creating DbConnection.
2025-06-14 20:28:38.776 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 20:28:38.779 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-14 20:28:38.779 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-14 20:28:38.779 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:28:38.780 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:28:38.782 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 20:28:38.806 +09:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 20:28:38.807 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:28:38.808 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 20:28:38.811 +09:00 [DBG] Creating DbConnection.
2025-06-14 20:28:38.811 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 20:28:38.811 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:28:38.811 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:28:38.811 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:28:38.811 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:28:38.811 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 20:28:38.811 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 20:28:38.811 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 20:28:38.811 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:28:38.811 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:28:38.812 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 20:28:38.812 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 20:28:38.812 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:28:38.812 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:28:38.834 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 20:28:38.927 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 20:28:38.980 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:28:39.043 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:28:39.043 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 20:28:39.043 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:28:39.043 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:28:39.044 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 20:28:39.045 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 20:28:39.050 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:28:39.051 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-14 20:28:39.058 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:28:39.059 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:28:39.067 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 20:28:39.068 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:28:39.069 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:28:39.073 +09:00 [DBG] Hosting starting
2025-06-14 20:28:39.126 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 20:28:39.126 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 20:28:39.524 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 20:28:39.524 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 20:28:39.524 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 20:28:39.525 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 20:28:39.526 +09:00 [INF] Hosting environment: Development
2025-06-14 20:28:39.526 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 20:28:39.526 +09:00 [DBG] Hosting started
2025-06-14 20:29:01.387 +09:00 [DBG] Connection id "0HNDB6QKL6FOH" accepted.
2025-06-14 20:29:01.388 +09:00 [DBG] Connection id "0HNDB6QKL6FOH" started.
2025-06-14 20:29:01.431 +09:00 [DBG] Connection 0HNDB6QKL6FOH established using the following protocol: "Tls12"
2025-06-14 20:29:01.454 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 20:29:01.471 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 20:29:01.473 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 20:29:01.474 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:29:01.488 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:29:01.489 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:29:01.505 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 20:29:01.506 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:29:01.506 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:29:01.507 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:29:01.507 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:29:01.507 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:29:01.508 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:29:01.509 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:29:01.515 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 20:29:01.516 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 20:29:01.517 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-14 20:29:01.541 +09:00 [DBG] Connection id "0HNDB6QKL6FOH", Request id "0HNDB6QKL6FOH:00000001": started reading request body.
2025-06-14 20:29:01.543 +09:00 [DBG] Connection id "0HNDB6QKL6FOH", Request id "0HNDB6QKL6FOH:00000001": done reading request body.
2025-06-14 20:29:01.549 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.API.DTOs.ApproveRequestDto'
2025-06-14 20:29:01.549 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:29:01.549 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:29:01.550 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 20:29:01.552 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 20:29:21.963 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 20:29:21.980 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(r => r.Steps)
    .FirstOrDefault(r => r.ApprovalId == __approvalGuid_0)'
2025-06-14 20:29:21.990 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-14 20:29:22.058 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
            SELECT a1.ApprovalId, a1.ApplicantDepartment, a1.ApplicantEmployeeNumber, a1.ApplicantName, a1.ApplicantPosition, a1.ApprovalType, a1.ApproverComment, a1.CurrentApproverEmployeeNumber, a1.CurrentStep, a1.MisKey, a1.RequestContent, a1.RequestTitle, a1.RequestedAt, a1.RespondedAt, a1.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType
            FROM 
            (
                SELECT TOP(1) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__approvalGuid_0
            ) AS a1
            LEFT JOIN ApprovalSteps AS a0 ON a1.ApprovalId == a0.ApprovalId
            ORDER BY a1.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
            SELECT a1.ApprovalId, a1.ApplicantDepartment, a1.ApplicantEmployeeNumber, a1.ApplicantName, a1.ApplicantPosition, a1.ApprovalType, a1.ApproverComment, a1.CurrentApproverEmployeeNumber, a1.CurrentStep, a1.MisKey, a1.RequestContent, a1.RequestTitle, a1.RequestedAt, a1.RespondedAt, a1.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType
            FROM 
            (
                SELECT TOP(1) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__approvalGuid_0
            ) AS a1
            LEFT JOIN ApprovalSteps AS a0 ON a1.ApprovalId == a0.ApprovalId
            ORDER BY a1.ApprovalId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{9}, namelessParameter{10}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{10}, 
                        forMaterialization: True);
                    return namelessParameter{10}.<ApprovalRequest>k__BackingField = namelessParameter{9};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 20:29:22.074 +09:00 [DBG] Creating DbConnection.
2025-06-14 20:29:22.074 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 20:29:22.074 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:29:22.074 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:29:22.074 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 20:29:22.075 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:29:22.075 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:29:22.076 +09:00 [DBG] Executing DbCommand [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 20:29:22.079 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 20:29:22.095 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:29:22.121 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:29:22.129 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:29:22.129 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:29:22.129 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 49ms reading results.
2025-06-14 20:29:22.129 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:29:22.129 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:29:38.177 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-14 20:29:38.182 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-14 20:29:38.192 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentApproverEmployeeNumber' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 20:29:38.197 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:29:38.199 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentStep' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 20:29:38.207 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionDate' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 20:29:38.208 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:29:38.208 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 20:29:38.208 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-14 20:29:38.243 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:29:38.244 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:29:38.244 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-14 20:29:38.246 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-14 20:29:38.248 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 20:29:38.248 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:29:38.248 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:29:38.249 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 7), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1
WHERE "ApprovalId" = @p2
RETURNING 1;
2025-06-14 20:29:38.251 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 7), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1
WHERE "ApprovalId" = @p2
RETURNING 1;
2025-06-14 20:29:38.253 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:29:38.253 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 20:29:38.254 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 20:29:38.254 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:29:38.254 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:29:38.254 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 20:29:38.255 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 20:29:38.255 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:29:38.255 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 20:29:38.257 +09:00 [DBG] Committing transaction.
2025-06-14 20:29:38.259 +09:00 [DBG] Committed transaction.
2025-06-14 20:29:38.260 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:29:38.260 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:29:38.261 +09:00 [DBG] Disposing transaction.
2025-06-14 20:29:38.262 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:29:38.263 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:29:38.264 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-14 20:29:41.654 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:29:41.654 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:29:41.654 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:29:41.654 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:29:41.655 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 20:29:41.655 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-06-14 20:29:41.666 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 40158.6602ms
2025-06-14 20:29:41.671 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 20:29:41.671 +09:00 [DBG] Connection id "0HNDB6QKL6FOH" completed keep alive response.
2025-06-14 20:29:41.674 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 20:29:41.678 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:29:41.679 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:29:41.685 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 200 null application/json; charset=utf-8 40233.3398ms
2025-06-14 20:29:54.206 +09:00 [DBG] Connection id "0HNDB6QKL6FOI" accepted.
2025-06-14 20:29:54.206 +09:00 [DBG] Connection id "0HNDB6QKL6FOI" started.
2025-06-14 20:29:54.229 +09:00 [DBG] Connection 0HNDB6QKL6FOI established using the following protocol: "Tls12"
2025-06-14 20:29:54.234 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 20:29:54.235 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 20:29:54.235 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 20:29:54.235 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:29:54.248 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:29:54.248 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:29:54.251 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 20:29:54.251 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:29:54.251 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:29:54.251 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:29:54.251 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:29:54.251 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:29:54.251 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:29:54.253 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 20:29:54.253 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 20:29:54.253 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 20:29:54.253 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 20:29:54.253 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 20:29:54.253 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 20:29:54.254 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 20:29:54.279 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 20:29:54.285 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 20:29:54.300 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ApprovalStep.ActionDate (DateTime?), 8], [Property: ApprovalStep.ActionStatus (string), 9], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 10], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 11], [Property: ApprovalStep.ApproverName (string), 12], [Property: ApprovalStep.Comment (string), 13], [Property: ApprovalStep.Department (string), 14], [Property: ApprovalStep.IsFinalApprover (bool) Required, 15], [Property: ApprovalStep.Position (string), 16], [Property: ApprovalStep.Sequence (int) Required, 17], [Property: ApprovalStep.StepType (string), 18] }
            8 -> 7
            9 -> 19
            10 -> 20
            11 -> 21
            12 -> 22
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: ApprovalStep.ActionDate (DateTime?), 8], [Property: ApprovalStep.ActionStatus (string), 9], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 10], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 11], [Property: ApprovalStep.ApproverName (string), 12], [Property: ApprovalStep.Comment (string), 13], [Property: ApprovalStep.Department (string), 14], [Property: ApprovalStep.IsFinalApprover (bool) Required, 15], [Property: ApprovalStep.Position (string), 16], [Property: ApprovalStep.Sequence (int) Required, 17], [Property: ApprovalStep.StepType (string), 18] }
            8 -> 7
            9 -> 19
            10 -> 20
            11 -> 21
            12 -> 22
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            string value4;
            string value5;
            string value6;
            string value7;
            List<ApprovalStep> namelessParameter{0};
            int? value9;
            string value10;
            string value11;
            string value12;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.GetString(3);
            value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value9 = (int?)dataReader.GetInt32(19);
            value10 = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
            value11 = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                value4, 
                value5, 
                value6, 
                value7, 
                namelessParameter{0}, 
                (object)value9, 
                value10, 
                value11, 
                value12 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(7) ? default(Guid?) : (Guid?)dataReader.GetGuid(7) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(7) ? default(object) : (object)dataReader.GetGuid(7) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(7) ? default(Guid) : dataReader.GetGuid(7);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(10) ? default(Guid) : dataReader.GetGuid(10);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(15) ? default(bool) : dataReader.GetBoolean(15);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(17) ? default(int) : dataReader.GetInt32(17);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[3]), 
            ApplicantDepartment = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            Status = (string)(resultContext.Values[6]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[7]), 
            CurrentStep = (int)(int?)(resultContext.Values[8]), 
            CurrentApproverName = (string)(resultContext.Values[9]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[10]), 
            CurrentActionStatus = (string)(resultContext.Values[11]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 20:29:54.310 +09:00 [DBG] Creating DbConnection.
2025-06-14 20:29:54.310 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 20:29:54.310 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:29:54.310 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:29:54.310 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 20:29:54.310 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:29:54.310 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:29:54.310 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:29:54.311 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 20:29:54.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:29:54.314 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:29:54.314 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:29:54.314 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:29:54.315 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:29:54.315 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 20:29:54.315 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:29:54.315 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:29:54.315 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:29:54.315 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:29:54.315 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:29:54.315 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:29:54.315 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 20:29:54.315 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 20:29:54.336 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 84.1323ms
2025-06-14 20:29:54.336 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 20:29:54.336 +09:00 [DBG] Connection id "0HNDB6QKL6FOI" completed keep alive response.
2025-06-14 20:29:54.336 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 20:29:54.336 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:29:54.336 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:29:54.336 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 102.4544ms
2025-06-14 20:30:54.188 +09:00 [DBG] Connection id "0HNDB6QKL6FOH" received FIN.
2025-06-14 20:30:54.243 +09:00 [DBG] Connection id "0HNDB6QKL6FOH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 20:30:54.249 +09:00 [DBG] Connection id "0HNDB6QKL6FOH" disconnecting.
2025-06-14 20:30:54.253 +09:00 [DBG] Connection id "0HNDB6QKL6FOH" stopped.
2025-06-14 20:31:06.666 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 20:31:06.667 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 20:31:06.667 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 20:31:06.667 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 20:31:06.670 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:31:06.670 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 20:31:06.674 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 20:31:06.674 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:31:06.674 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:31:06.674 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:31:06.674 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:31:06.674 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:31:06.674 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 20:31:06.676 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 20:31:06.676 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 20:31:06.676 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 20:31:06.676 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 20:31:06.677 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 20:31:06.677 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 20:31:06.677 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 20:31:16.535 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 20:31:16.537 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 20:31:16.546 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 20:31:16.550 +09:00 [DBG] Creating DbConnection.
2025-06-14 20:31:16.550 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 20:31:16.550 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:31:16.551 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:31:16.551 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 20:31:16.551 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:31:16.551 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:31:16.551 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 20:31:16.552 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 20:31:16.552 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:31:16.552 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 20:31:16.552 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:31:16.553 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:31:16.553 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:31:16.553 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:31:16.553 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:31:16.553 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:31:16.553 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 20:31:16.553 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 20:31:16.554 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 9880.3795ms
2025-06-14 20:31:16.554 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 20:31:16.554 +09:00 [DBG] Connection id "0HNDB6QKL6FOI" completed keep alive response.
2025-06-14 20:31:16.555 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 20:31:16.555 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:31:16.555 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:31:16.555 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 9888.9832ms
2025-06-14 20:31:24.131 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - null null
2025-06-14 20:31:24.133 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 20:31:24.133 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 20:31:24.133 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 20:31:24.133 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 20:31:24.133 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 20:31:24.137 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 20:31:24.137 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 20:31:24.137 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 20:31:24.137 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 20:31:24.137 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 20:31:24.137 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 20:31:24.137 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 20:31:24.137 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 20:31:24.137 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 20:31:24.138 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 20:31:24.138 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 20:31:24.138 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 20:31:24.138 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 20:31:24.138 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 20:31:26.238 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 20:31:26.240 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-14 20:31:26.241 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-14 20:31:26.242 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-14 20:31:26.253 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-14 20:31:26.267 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(27) ? default(Guid?) : (Guid?)dataReader.GetGuid(27) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(27) ? default(object) : (object)dataReader.GetGuid(27) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(27) ? default(Guid) : dataReader.GetGuid(27);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(28) ? default(Guid) : dataReader.GetGuid(28);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(29) ? default(string) : dataReader.GetString(29);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(31) ? default(long?) : (long?)dataReader.GetInt64(31);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(33) ? default(DateTime) : dataReader.GetDateTime(33);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(34) ? default(string) : dataReader.GetString(34);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 20:31:26.278 +09:00 [DBG] Creating DbConnection.
2025-06-14 20:31:26.278 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 20:31:26.278 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:31:26.278 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:31:26.278 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 20:31:26.279 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:31:26.279 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 20:31:26.279 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 20:31:26.280 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 20:31:26.280 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:31:26.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:31:26.285 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 20:31:26.285 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:31:26.285 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 5ms reading results.
2025-06-14 20:31:26.286 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 20:31:26.286 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:31:26.286 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 20:31:26.286 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 20:31:26.286 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 20:31:26.286 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 20:31:26.286 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 20:31:26.286 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 20:31:26.287 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 2150.0951ms
2025-06-14 20:31:26.287 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 20:31:26.287 +09:00 [DBG] Connection id "0HNDB6QKL6FOI" completed keep alive response.
2025-06-14 20:31:26.287 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 20:31:26.287 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 20:31:26.287 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 20:31:26.287 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - 200 null application/json; charset=utf-8 2156.7122ms
2025-06-14 20:32:09.222 +09:00 [DBG] Connection id "0HNDB6QKL6FOI" received FIN.
2025-06-14 20:32:09.255 +09:00 [DBG] Connection id "0HNDB6QKL6FOI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 20:32:09.256 +09:00 [DBG] Connection id "0HNDB6QKL6FOI" disconnecting.
2025-06-14 20:32:09.368 +09:00 [DBG] Connection id "0HNDB6QKL6FOI" stopped.
2025-06-14 22:19:48.641 +09:00 [DBG] Connection id "0HNDB6QKL6FOJ" accepted.
2025-06-14 22:19:48.642 +09:00 [DBG] Connection id "0HNDB6QKL6FOJ" started.
2025-06-14 22:19:48.677 +09:00 [DBG] Connection 0HNDB6QKL6FOJ established using the following protocol: "Tls12"
2025-06-14 22:19:48.685 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 22:19:48.686 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 22:19:48.687 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 22:19:48.687 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:19:48.691 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:19:48.691 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:19:48.696 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:19:48.696 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:19:48.696 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:19:48.696 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:19:48.696 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:19:48.696 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:19:48.696 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:19:48.700 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:19:48.700 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:19:48.701 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:19:48.701 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:19:48.701 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:19:48.701 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:19:48.702 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:19:48.709 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:19:48.719 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:19:48.720 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:19:48.720 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:19:48.727 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:19:48.727 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:19:48.727 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:19:48.727 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:19:48.727 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:19:48.732 +09:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:19:48.733 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:19:48.733 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:19:48.733 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:19:48.733 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:19:48.733 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:19:48.733 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:19:48.733 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:19:48.733 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:19:48.733 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:19:48.733 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:19:48.733 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:19:48.733 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:19:48.736 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 38.9554ms
2025-06-14 22:19:48.736 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:19:48.736 +09:00 [DBG] Connection id "0HNDB6QKL6FOJ" completed keep alive response.
2025-06-14 22:19:48.737 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:19:48.737 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:19:48.737 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:19:48.737 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 52.4847ms
2025-06-14 22:20:23.729 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 22:20:23.732 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:20:23.732 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:20:23.733 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:20:23.735 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:20:23.735 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:20:23.736 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:20:23.736 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:20:23.737 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:20:23.737 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:20:23.737 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:20:23.737 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:20:23.738 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:20:23.740 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:20:23.740 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:20:23.741 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:20:23.741 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:20:23.741 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:20:23.741 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:20:23.744 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:20:23.747 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:20:23.750 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:20:23.750 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:20:23.750 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:20:23.751 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:20:23.751 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:20:23.751 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:20:23.752 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:20:23.752 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:20:23.754 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:20:23.756 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:20:23.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:20:23.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:20:23.758 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:20:23.758 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:20:23.758 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 22:20:23.758 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:20:23.758 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:20:23.758 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:20:23.758 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:20:23.758 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:20:23.758 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:20:23.758 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:20:23.758 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:20:23.759 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 22.3225ms
2025-06-14 22:20:23.760 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:20:23.760 +09:00 [DBG] Connection id "0HNDB6QKL6FOJ" completed keep alive response.
2025-06-14 22:20:23.760 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:20:23.760 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:20:23.760 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:20:23.760 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 31.5207ms
2025-06-14 22:21:33.590 +09:00 [DBG] Connection id "0HNDB6QKL6FOJ" received FIN.
2025-06-14 22:21:33.635 +09:00 [DBG] Connection id "0HNDB6QKL6FOJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 22:21:33.636 +09:00 [DBG] Connection id "0HNDB6QKL6FOJ" disconnecting.
2025-06-14 22:21:33.639 +09:00 [DBG] Connection id "0HNDB6QKL6FOJ" stopped.
2025-06-14 22:25:17.695 +09:00 [DBG] Connection id "0HNDB6QKL6FOK" accepted.
2025-06-14 22:25:17.721 +09:00 [DBG] Connection id "0HNDB6QKL6FOK" started.
2025-06-14 22:25:17.745 +09:00 [DBG] Connection 0HNDB6QKL6FOK established using the following protocol: "Tls12"
2025-06-14 22:25:17.752 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 22:25:17.752 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 22:25:17.752 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 22:25:17.752 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 22:25:17.753 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:25:17.754 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 22:25:17.754 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:25:17.754 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:25:17.754 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:25:17.755 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:25:17.755 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:25:17.755 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:25:17.755 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:25:17.757 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:25:17.758 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 22:25:17.759 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 22:25:17.759 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-14 22:25:17.759 +09:00 [DBG] Connection id "0HNDB6QKL6FOK", Request id "0HNDB6QKL6FOK:00000001": started reading request body.
2025-06-14 22:25:17.759 +09:00 [DBG] Connection id "0HNDB6QKL6FOK", Request id "0HNDB6QKL6FOK:00000001": done reading request body.
2025-06-14 22:25:17.760 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.API.DTOs.ApproveRequestDto'
2025-06-14 22:25:17.760 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 22:25:17.760 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 22:25:17.760 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 22:25:17.760 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 22:25:25.720 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:25:25.722 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:25:25.722 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:25:25.722 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:25:25.722 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:25:25.722 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:25:25.722 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:25:25.722 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:25:25.722 +09:00 [DBG] Executing DbCommand [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 22:25:25.723 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 22:25:25.724 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:25:25.724 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:25:25.725 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:25:25.725 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:25:25.725 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 22:25:25.725 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:25:25.725 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:25:25.725 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-14 22:25:25.725 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-14 22:25:25.726 +09:00 [DBG] The unchanged property 'ApprovalRequest.RespondedAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:25:25.726 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:25:25.726 +09:00 [DBG] The unchanged property 'ApprovalRequest.Status' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:25:25.726 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionDate' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:25:25.726 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:25:25.726 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:25:25.728 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-14 22:25:25.731 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:25:25.731 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:25:25.731 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-14 22:25:25.732 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-14 22:25:25.732 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:25:25.732 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:25:25.732 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:25:25.732 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "RespondedAt" = @p0, "Status" = @p1
WHERE "ApprovalId" = @p2
RETURNING 1;
2025-06-14 22:25:25.733 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "RespondedAt" = @p0, "Status" = @p1
WHERE "ApprovalId" = @p2
RETURNING 1;
2025-06-14 22:25:25.733 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:25:25.733 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:25:25.734 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:25:25.734 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:25:25.734 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:25:25.734 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 22:25:25.734 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 22:25:25.734 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:25:25.734 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:25:25.735 +09:00 [DBG] Committing transaction.
2025-06-14 22:25:25.736 +09:00 [DBG] Committed transaction.
2025-06-14 22:25:25.736 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:25:25.736 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:25:25.736 +09:00 [DBG] Disposing transaction.
2025-06-14 22:25:25.737 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:25:25.737 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:25:25.737 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-14 22:25:32.010 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:25:32.011 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:25:32.011 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:25:32.011 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:25:32.011 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:25:32.011 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-06-14 22:25:32.012 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 14257.848ms
2025-06-14 22:25:32.012 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 22:25:32.012 +09:00 [DBG] Connection id "0HNDB6QKL6FOK" completed keep alive response.
2025-06-14 22:25:32.012 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:25:32.012 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:25:32.012 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:25:32.012 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 200 null application/json; charset=utf-8 14261.4905ms
2025-06-14 22:25:52.611 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 22:25:52.612 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:25:52.612 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:25:52.612 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:25:52.612 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:25:52.612 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:25:52.613 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:25:52.613 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:25:52.613 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:25:52.613 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:25:52.613 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:25:52.613 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:25:52.613 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:25:52.614 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:25:52.614 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:25:52.614 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:25:52.614 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:25:52.614 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:25:52.614 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:25:52.614 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:25:52.615 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:25:52.616 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:25:52.616 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:25:52.616 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:25:52.616 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:25:52.616 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:25:52.616 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:25:52.616 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:25:52.616 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:25:52.616 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:25:52.617 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:25:52.617 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:25:52.617 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:25:52.617 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:25:52.617 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:25:52.617 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:25:52.617 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:25:52.618 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:25:52.618 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:25:52.618 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:25:52.618 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:25:52.618 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:25:52.618 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:25:52.618 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:25:52.618 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 5.274ms
2025-06-14 22:25:52.618 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:25:52.619 +09:00 [DBG] Connection id "0HNDB6QKL6FOK" completed keep alive response.
2025-06-14 22:25:52.650 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:25:52.650 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:25:52.650 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:25:52.650 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 39.2665ms
2025-06-14 22:26:06.004 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 22:26:06.004 +09:00 [DBG] Connection id "0HNDB6QKL6FOL" accepted.
2025-06-14 22:26:06.005 +09:00 [DBG] Connection id "0HNDB6QKL6FOL" started.
2025-06-14 22:26:06.006 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 22:26:06.006 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 22:26:06.006 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:26:06.009 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:26:06.009 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:26:06.010 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:26:06.011 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:26:06.011 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:26:06.011 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:26:06.011 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:26:06.011 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:26:06.011 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:26:06.017 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:26:06.019 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:26:06.019 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:26:06.019 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:26:06.019 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:26:06.020 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:26:06.020 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:26:10.401 +09:00 [DBG] Connection 0HNDB6QKL6FOL established using the following protocol: "Tls12"
2025-06-14 22:26:10.405 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:26:10.408 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:26:10.408 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:26:10.408 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:26:10.408 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:26:10.408 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:26:10.408 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:26:10.409 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:26:10.409 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:26:10.410 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:26:10.413 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:26:10.413 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 22:26:10.413 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:26:10.413 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:26:10.413 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:26:10.413 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:26:10.414 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:26:10.414 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:26:10.414 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:26:10.414 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:26:10.415 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4403.9979ms
2025-06-14 22:26:10.415 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:26:10.415 +09:00 [DBG] Connection id "0HNDB6QKL6FOK" completed keep alive response.
2025-06-14 22:26:10.415 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:26:10.415 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:26:10.415 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:26:10.416 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 4411.6839ms
2025-06-14 22:26:10.419 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 22:26:10.419 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 22:26:10.419 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 22:26:10.419 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:26:10.420 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:26:10.420 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:26:10.420 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:26:10.420 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:26:10.420 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:26:10.420 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:26:10.420 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:26:10.420 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:26:10.420 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:26:10.420 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:26:10.420 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:26:10.421 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:26:10.421 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:26:10.421 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:26:10.421 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:26:10.421 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:26:11.950 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:26:11.951 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:26:11.952 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:26:11.952 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:26:11.952 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:26:11.952 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:26:11.952 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:26:11.952 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:26:11.952 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:26:11.952 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:26:11.953 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:26:11.953 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:26:11.953 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:26:11.953 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:26:11.953 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:26:11.954 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:26:11.954 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:26:11.954 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:26:11.954 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:26:11.954 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:26:11.954 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 1534.1415ms
2025-06-14 22:26:11.954 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:26:11.954 +09:00 [DBG] Connection id "0HNDB6QKL6FOK" completed keep alive response.
2025-06-14 22:26:11.954 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:26:11.954 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:26:11.954 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:26:11.954 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 1535.1867ms
2025-06-14 22:26:14.989 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 22:26:14.989 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:26:14.989 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:26:14.989 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:26:14.989 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:26:14.989 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:26:14.990 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:26:14.990 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:26:14.990 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:26:14.990 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:26:14.990 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:26:14.990 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:26:14.990 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:26:14.991 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:26:14.991 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:26:14.992 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:26:14.992 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:26:14.993 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:26:14.993 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:26:14.993 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:26:14.995 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:26:14.997 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:26:14.997 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:26:14.997 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:26:14.997 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:26:14.997 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:26:14.997 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:26:14.997 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:26:14.998 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:26:14.998 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:26:15.005 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:26:15.006 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:26:15.006 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:26:15.006 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:26:15.006 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:26:15.006 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 7ms reading results.
2025-06-14 22:26:15.006 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:26:15.006 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:26:15.007 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:26:15.007 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:26:15.007 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:26:15.007 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:26:15.007 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:26:15.007 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:26:15.008 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 17.4193ms
2025-06-14 22:26:15.008 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:26:15.008 +09:00 [DBG] Connection id "0HNDB6QKL6FOK" completed keep alive response.
2025-06-14 22:26:15.008 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:26:15.008 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:26:15.008 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:26:15.008 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 19.1518ms
2025-06-14 22:27:19.994 +09:00 [DBG] Connection id "0HNDB6QKL6FOK" received FIN.
2025-06-14 22:27:20.049 +09:00 [DBG] Connection id "0HNDB6QKL6FOK" disconnecting.
2025-06-14 22:27:20.100 +09:00 [DBG] Connection id "0HNDB6QKL6FOL" received FIN.
2025-06-14 22:27:20.101 +09:00 [DBG] Connection id "0HNDB6QKL6FOK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 22:27:20.127 +09:00 [DBG] Connection id "0HNDB6QKL6FOL" disconnecting.
2025-06-14 22:27:20.131 +09:00 [DBG] Connection id "0HNDB6QKL6FOL" stopped.
2025-06-14 22:27:20.131 +09:00 [DBG] Connection id "0HNDB6QKL6FOK" stopped.
2025-06-14 22:27:20.132 +09:00 [DBG] Connection id "0HNDB6QKL6FOL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 22:30:01.826 +09:00 [DBG] Connection id "0HNDB6QKL6FOM" accepted.
2025-06-14 22:30:01.828 +09:00 [DBG] Connection id "0HNDB6QKL6FOM" started.
2025-06-14 22:30:01.852 +09:00 [DBG] Connection 0HNDB6QKL6FOM established using the following protocol: "Tls12"
2025-06-14 22:30:01.864 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 22:30:01.866 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:30:01.867 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:30:01.867 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:30:01.868 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:30:01.868 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:30:01.868 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:30:01.869 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:30:01.869 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:30:01.869 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:30:01.869 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:30:01.869 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:30:01.869 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:30:01.870 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:30:01.870 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:30:01.870 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:30:01.871 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:30:01.871 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:30:01.871 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:30:01.871 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:30:01.873 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:30:01.875 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:30:01.875 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:30:01.875 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:30:01.876 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:30:01.876 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:30:01.876 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:30:01.876 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:30:01.876 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:30:01.878 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:30:01.879 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:30:01.879 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:30:01.880 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:30:01.880 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:30:01.880 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:30:01.880 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 22:30:01.880 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:30:01.880 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:30:01.881 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:30:01.881 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:30:01.881 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:30:01.881 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:30:01.881 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:30:01.881 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:30:01.885 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 15.8863ms
2025-06-14 22:30:01.885 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:30:01.885 +09:00 [DBG] Connection id "0HNDB6QKL6FOM" completed keep alive response.
2025-06-14 22:30:01.886 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:30:01.886 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:30:01.886 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:30:01.886 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 22.632ms
2025-06-14 22:31:16.810 +09:00 [DBG] Connection id "0HNDB6QKL6FOM" received FIN.
2025-06-14 22:31:16.841 +09:00 [DBG] Connection id "0HNDB6QKL6FOM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 22:31:16.842 +09:00 [DBG] Connection id "0HNDB6QKL6FOM" disconnecting.
2025-06-14 22:31:16.844 +09:00 [DBG] Connection id "0HNDB6QKL6FOM" stopped.
2025-06-14 22:32:31.510 +09:00 [DBG] Connection id "0HNDB6QKL6FON" accepted.
2025-06-14 22:32:31.511 +09:00 [DBG] Connection id "0HNDB6QKL6FON" started.
2025-06-14 22:32:31.536 +09:00 [DBG] Connection 0HNDB6QKL6FON established using the following protocol: "Tls12"
2025-06-14 22:32:31.546 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 22:32:31.546 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:32:31.546 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:32:31.546 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:32:31.547 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:32:31.547 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:32:31.548 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:32:31.548 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:32:31.548 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:32:31.548 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:32:31.548 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:32:31.548 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:32:31.548 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:32:31.549 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:32:31.550 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:32:31.550 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:32:31.550 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:32:31.550 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:32:31.550 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:32:31.550 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:32:31.553 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:32:31.555 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:32:31.556 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:32:31.556 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:32:31.556 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:32:31.556 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:32:31.556 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:32:31.556 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:32:31.556 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:32:31.557 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:32:31.558 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:32:31.558 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:32:31.559 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:32:31.559 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:32:31.559 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:32:31.559 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 22:32:31.559 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:32:31.559 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:32:31.559 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:32:31.559 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:32:31.559 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:32:31.559 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:32:31.559 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:32:31.559 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:32:31.560 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 11.8125ms
2025-06-14 22:32:31.560 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:32:31.560 +09:00 [DBG] Connection id "0HNDB6QKL6FON" completed keep alive response.
2025-06-14 22:32:31.560 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:32:31.560 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:32:31.560 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:32:31.560 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 14.8397ms
2025-06-14 22:32:39.240 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 22:32:39.241 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 22:32:39.241 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 22:32:39.241 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:32:39.241 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:32:39.241 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:32:39.241 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:32:39.241 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:32:39.241 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:32:39.241 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:32:39.241 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:32:39.242 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:32:39.242 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:32:39.242 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:32:39.242 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:32:39.242 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:32:39.242 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:32:39.242 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:32:39.242 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:32:39.243 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:32:43.301 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:32:43.302 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:32:43.302 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:32:43.302 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:32:43.302 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:32:43.302 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:32:43.302 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:32:43.302 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:32:43.302 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:32:43.303 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:32:43.303 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:32:43.303 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:32:43.303 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:32:43.303 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:32:43.303 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:32:43.303 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:32:43.303 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:32:43.303 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:32:43.303 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:32:43.303 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:32:43.303 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4061.9395ms
2025-06-14 22:32:43.303 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:32:43.303 +09:00 [DBG] Connection id "0HNDB6QKL6FON" completed keep alive response.
2025-06-14 22:32:43.304 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:32:43.304 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:32:43.304 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:32:43.304 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 4064.0755ms
2025-06-14 22:32:55.034 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 22:32:55.037 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:32:55.038 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:32:55.039 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:32:55.041 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:32:55.041 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:32:55.042 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:32:55.042 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:32:55.042 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:32:55.043 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:32:55.043 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:32:55.043 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:32:55.043 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:32:55.044 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:32:55.045 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:32:55.045 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:32:55.045 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:32:55.046 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:32:55.046 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:32:55.046 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:32:55.052 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:32:55.054 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:32:55.054 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:32:55.054 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:32:55.055 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:32:55.055 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:32:55.055 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:32:55.055 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:32:55.055 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:32:55.056 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:32:55.058 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:32:55.058 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:32:55.058 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:32:55.058 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:32:55.058 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:32:55.058 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 22:32:55.059 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:32:55.059 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:32:55.059 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:32:55.059 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:32:55.059 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:32:55.059 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:32:55.059 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:32:55.059 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:32:55.066 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 23.0675ms
2025-06-14 22:32:55.066 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:32:55.066 +09:00 [DBG] Connection id "0HNDB6QKL6FON" completed keep alive response.
2025-06-14 22:32:55.067 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:32:55.067 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:32:55.067 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:32:55.067 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 35.0823ms
2025-06-14 22:34:01.470 +09:00 [DBG] Connection id "0HNDB6QKL6FON" received FIN.
2025-06-14 22:34:01.550 +09:00 [DBG] Connection id "0HNDB6QKL6FON" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 22:34:01.550 +09:00 [DBG] Connection id "0HNDB6QKL6FON" disconnecting.
2025-06-14 22:34:01.551 +09:00 [DBG] Connection id "0HNDB6QKL6FON" stopped.
2025-06-14 22:35:35.424 +09:00 [DBG] Connection id "0HNDB6QKL6FOO" accepted.
2025-06-14 22:35:35.427 +09:00 [DBG] Connection id "0HNDB6QKL6FOO" started.
2025-06-14 22:35:35.471 +09:00 [DBG] Connection 0HNDB6QKL6FOO established using the following protocol: "Tls12"
2025-06-14 22:35:35.480 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 22:35:35.480 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:35:35.480 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:35:35.480 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:35:35.481 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:35:35.481 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:35:35.483 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:35:35.484 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:35:35.484 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:35:35.484 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:35:35.484 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:35:35.484 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:35:35.484 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:35:35.485 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:35:35.485 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:35:35.486 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:35:35.486 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:35:35.486 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:35:35.486 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:35:35.486 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:35:35.488 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:35:35.489 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:35:35.489 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:35:35.489 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:35:35.489 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:35:35.489 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:35:35.490 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:35:35.490 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:35:35.490 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:35:35.492 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:35:35.493 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:35:35.495 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:35:35.495 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:35:35.495 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:35:35.495 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:35:35.495 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 22:35:35.495 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:35:35.496 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:35:35.497 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:35:35.497 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:35:35.497 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:35:35.497 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:35:35.497 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:35:35.497 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:35:35.499 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 14.3166ms
2025-06-14 22:35:35.499 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:35:35.499 +09:00 [DBG] Connection id "0HNDB6QKL6FOO" completed keep alive response.
2025-06-14 22:35:35.499 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:35:35.499 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:35:35.499 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:35:35.499 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 19.8294ms
2025-06-14 22:36:26.197 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 22:36:26.198 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 22:36:26.199 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 22:36:26.200 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:36:26.201 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:36:26.201 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:36:26.203 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:36:26.203 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:36:26.203 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:36:26.204 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:36:26.204 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:36:26.204 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:36:26.204 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:36:26.206 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:36:26.206 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:36:26.207 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:36:26.207 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:36:26.207 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:36:26.207 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:36:26.208 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:36:52.702 +09:00 [DBG] Connection id "0HNDB6QKL6FOP" accepted.
2025-06-14 22:36:52.703 +09:00 [DBG] Connection id "0HNDB6QKL6FOP" started.
2025-06-14 22:36:52.703 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:36:52.706 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:36:52.706 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:36:52.706 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:36:52.706 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:36:52.707 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:36:52.707 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:36:52.707 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:36:52.707 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:36:52.710 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:36:52.712 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:36:52.712 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 22:36:52.712 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:36:52.713 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:36:52.717 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:36:52.717 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:36:52.717 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:36:52.717 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:36:52.718 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:36:52.718 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:36:52.721 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 26518.1029ms
2025-06-14 22:36:52.721 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:36:52.721 +09:00 [DBG] Connection id "0HNDB6QKL6FOO" completed keep alive response.
2025-06-14 22:36:52.721 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:36:52.722 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:36:52.722 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:36:52.722 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 26525.7455ms
2025-06-14 22:36:52.748 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 22:36:52.749 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 22:36:52.749 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 22:36:52.749 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:36:52.749 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:36:52.749 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:36:52.749 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:36:52.749 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:36:52.749 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:36:52.750 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:36:52.750 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:36:52.750 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:36:52.750 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:36:52.750 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:36:52.750 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:36:52.750 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:36:52.750 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:36:52.750 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:36:52.750 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:36:52.750 +09:00 [DBG] Connection 0HNDB6QKL6FOP established using the following protocol: "Tls12"
2025-06-14 22:36:52.751 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:36:53.582 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:36:53.583 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:36:53.583 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:36:53.583 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:36:53.583 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:36:53.583 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:36:53.583 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:36:53.583 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:36:53.583 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:36:53.584 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:36:53.584 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:36:53.584 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:36:53.584 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:36:53.585 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:36:53.585 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:36:53.585 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:36:53.585 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:36:53.585 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:36:53.585 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:36:53.585 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:36:53.585 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 835.6052ms
2025-06-14 22:36:53.585 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:36:53.585 +09:00 [DBG] Connection id "0HNDB6QKL6FOO" completed keep alive response.
2025-06-14 22:36:53.585 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:36:53.585 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:36:53.585 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:36:53.586 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 837.1331ms
2025-06-14 22:37:50.413 +09:00 [DBG] Connection id "0HNDB6QKL6FOO" received FIN.
2025-06-14 22:37:50.443 +09:00 [DBG] Connection id "0HNDB6QKL6FOO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 22:37:50.444 +09:00 [DBG] Connection id "0HNDB6QKL6FOO" disconnecting.
2025-06-14 22:37:50.472 +09:00 [DBG] Connection id "0HNDB6QKL6FOO" stopped.
2025-06-14 22:38:05.406 +09:00 [DBG] Connection id "0HNDB6QKL6FOP" received FIN.
2025-06-14 22:38:05.406 +09:00 [DBG] Connection id "0HNDB6QKL6FOP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 22:38:05.407 +09:00 [DBG] Connection id "0HNDB6QKL6FOP" disconnecting.
2025-06-14 22:38:05.407 +09:00 [DBG] Connection id "0HNDB6QKL6FOP" stopped.
2025-06-14 22:39:19.644 +09:00 [DBG] Connection id "0HNDB6QKL6FOQ" accepted.
2025-06-14 22:39:19.668 +09:00 [DBG] Connection id "0HNDB6QKL6FOQ" started.
2025-06-14 22:39:19.692 +09:00 [DBG] Connection 0HNDB6QKL6FOQ established using the following protocol: "Tls12"
2025-06-14 22:39:19.790 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-14 22:39:19.791 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-14 22:39:19.791 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-14 22:39:19.791 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-14 22:39:19.792 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:39:19.792 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-14 22:39:19.801 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:39:19.801 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:39:19.801 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:39:19.801 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:39:19.801 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:39:19.801 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:39:19.801 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:39:19.801 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:39:19.802 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-14 22:39:19.802 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-14 22:39:19.802 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-14 22:39:19.806 +09:00 [DBG] Connection id "0HNDB6QKL6FOQ", Request id "0HNDB6QKL6FOQ:00000001": started reading request body.
2025-06-14 22:39:19.807 +09:00 [DBG] Connection id "0HNDB6QKL6FOQ", Request id "0HNDB6QKL6FOQ:00000001": done reading request body.
2025-06-14 22:39:19.820 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-14 22:39:19.820 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-14 22:39:19.820 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-14 22:39:19.820 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-14 22:39:19.827 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-14 22:39:21.867 +09:00 [INF] Creating a new approval request.
2025-06-14 22:39:21.874 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"a074ebdd-4fbc-448c-be8e-5320259c9112","RequestTitle":"Azure AI 비전 가격","RequestContent":"using Microsoft.AspNetCore.Http;\r\nusing Microsoft.AspNetCore.Mvc;\r\nusing ApprovalService.Domain.Entities;\r\nusing ApprovalService.Domain.Interfaces;\r\nusing Microsoft.EntityFrameworkCore;\r\n\r\nnamespace ApprovalService.API.Controllers\r\n{\r\n    [Route(\"api/[controller]\")]\r\n    [ApiController]\r\n    public class ApprovalRequestController : ControllerBase\r\n    {\r\n        private readonly IApprovalRequestRepository<ApprovalRequestWithCurrentStepDto> _approvalRequestRepository;\r\n        private readonly ILogger<ApprovalRequestController> _logger;\r\n\r\n        public ApprovalRequestController(\r\n            IApprovalRequestRepository<ApprovalRequestWithCurrentStepDto> approvalRequestRepository, \r\n            ILogger<ApprovalRequestController> logger)\r\n        {\r\n            _logger = logger ?? throw new ArgumentNullException(nameof(logger));\r\n            _approvalRequestRepository = approvalRequestRepository ?? throw new ArgumentNullException(nameof(approvalRequestRepository));\r\n        }\r\n\r\n        /// <summary>\r\n        /// Get all approval requests for a specific user.\r\n        /// </summary>\r\n        /// <param name=\"userId\">The ID of the user.</param>\r\n        /// <returns>A list of approval requests.</returns>\r\n        [HttpGet(\"my-requests/{userId}\")]\r\n        public async Task<IActionResult> GetMyRequests(string userId)\r\n        {\r\n            // IQueryable을 먼저 가져온다\r\n            var query = _approvalRequestRepository.GetApprovalRequestsWithCurrentStep(userId);\r\n\r\n            // 여기서 실제 쿼리를 날림 (비동기 실행)\r\n            var requests = await query.ToListAsync();\r\n\r\n            return Ok(requests);\r\n        }\r\n\r\n        [HttpGet(\"my-requests2/{userId}\")]\r\n        public async Task<IActionResult> GetMyRequests2(string userId)\r\n        {\r\n            var requests = await _approvalRequestRepository.GetMyRequestsAsync(userId);\r\n            return Ok(requests);\r\n        }\r\n\r\n        /// <summary>\r\n        /// Get all pending approval requests for a specific user.\r\n        /// </summary>\r\n        /// <param name=\"userId\">The ID of the user.</param>\r\n        /// <returns>A list of pending approval requests.</returns>\r\n        [HttpGet(\"my-pending-requests/{userId}\")]\r\n        public async Task<IActionResult> GetMyPendingRequests(string userId)\r\n        {\r\n            var requests = await _approvalRequestRepository.GetMyPendingRequestsAsync(userId);\r\n            return Ok(requests);\r\n        }\r\n\r\n        /// <summary>\r\n        /// Get all approved approval requests for a specific user.\r\n        /// </summary>\r\n        /// <param name=\"userId\">The ID of the user.</param>\r\n        /// <returns>A list of approved approval requests.</returns>\r\n        [HttpGet(\"my-approved-requests/{userId}\")]\r\n        public async Task<IActionResult> GetMyApprovedRequests(string userId)\r\n        {\r\n            var requests = await _approvalRequestRepository.GetMyApprovedRequestsAsync(userId);\r\n            return Ok(requests);\r\n        }\r\n\r\n        /// <summary>\r\n        /// Get all rejected approval requests for a specific user.\r\n        /// </summary>\r\n        /// <param name=\"userId\">The ID of the user.</param>\r\n        /// <returns>A list of rejected approval requests.</returns>\r\n        [HttpGet(\"my-rejected-requests/{userId}\")]\r\n        public async Task<IActionResult> GetMyRejectedRequests(string userId)\r\n        {\r\n            var requests = await _approvalRequestRepository.GetMyRejectedRequestsAsync(userId);\r\n            return Ok(requests);\r\n        }\r\n\r\n        /// <summary>\r\n        /// Get a specific approval request by its ID.\r\n        /// </summary>\r\n        /// <param name=\"approvalId\">The ID of the approval request.</param>\r\n        /// <returns>The approval request if found, otherwise NotFound.</returns>\r\n        [HttpGet(\"{approvalId}\")]\r\n        public async Task<IActionResult> GetRequestById(Guid approvalId)\r\n        {\r\n            var request = await _approvalRequestRepository.GetRequestByIdAsync(approvalId);\r\n            if (request == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n            return Ok(request);\r\n        }\r\n\r\n        /// <summary>\r\n        /// Create a new approval request.\r\n        /// </summary>\r\n        /// <param name=\"approvalRequest\">The approval request to create.</param>\r\n        /// <returns>The created approval request with a 201 Created status.</returns>\r\n        [HttpPost(\"create\")]\r\n        public async Task<IActionResult> CreateApprovalRequest([FromBody] ApprovalRequestWithCurrentStepDto approvalRequest)\r\n        {\r\n            _logger.LogInformation(\"Creating a new approval request.\");\r\n            _logger.LogDebug(\"Approval Request Details: {@ApprovalRequest}\", approvalRequest);\r\n\r\n            // Validate the incoming approval request\r\n            if (approvalRequest == null)\r\n                return BadRequest(\"Approval request cannot be null.\");\r\n\r\n            if (approvalRequest.Steps == null || !approvalRequest.Steps.Any())\r\n                return BadRequest(\"At least one approval step must be provided.\");\r\n\r\n            // Set relationships for approval steps\r\n            foreach (var step in approvalRequest.Steps)\r\n            {\r\n                if (step.Sequence == 1)\r\n                {\r\n                    // Set the first step as the current step\r\n                    approvalRequest.CurrentApproverEmployeeNumber = step.ApproverEmployeeNumber;\r\n                    approvalRequest.CurrentStep = step.Sequence;\r\n                    approvalRequest.CurrentActionStatus = step.ActionStatus;\r\n                    approvalRequest.CurrentApproverName = step.ApproverName;\r\n                }\r\n                step.ApprovalRequest = approvalRequest;\r\n                step.ApprovalId = approvalRequest.ApprovalId; // Explicit assignment recommended\r\n            }\r\n\r\n            // Set relationships for attachments\r\n            foreach (var attachment in approvalRequest.Attachments)\r\n            {\r\n                attachment.ApprovalRequest = approvalRequest;\r\n                attachment.ApprovalId = approvalRequest.ApprovalId; // Explicit assignment recommended\r\n            }\r\n\r\n            // Create the approval request\r\n            var createdRequest = await _approvalRequestRepository.CreateApprovalRequestAsync(approvalRequest);\r\n\r\n            _logger.LogInformation(\"Approval request created successfully with ID: {ApprovalId}\", createdRequest.ApprovalId);\r\n\r\n            // Return the created approval request with a 201 Created status\r\n            return CreatedAtAction(nameof(GetRequestById), new { approvalId = createdRequest.ApprovalId }, createdRequest);\r\n        }\r\n    }\r\n}\r\n","ApplicantEmployeeNumber":"EC20507","ApplicantName":"User 7","ApplicantPosition":null,"ApplicantDepartment":"Sales","Status":"Pending","RequestedAt":"2025-06-14T13:39:19.5290100Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0001","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 1","Position":"System Administrator","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EC20507","Sequence":2,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 7","Position":"Staff","Department":"Sales","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0004","Sequence":3,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 4","Position":"Staff","Department":"HR","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"1001","Sequence":4,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"Kim Minsoo","Position":"Software Engineer","Department":"IT","StepType":"Agreement","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"1003","Sequence":5,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"Park Jihye","Position":"Accountant","Department":"Finance","StepType":"Agreement","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0010","Sequence":6,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 10","Position":"Auditor","Department":"IT","StepType":"Notification","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-14 22:39:28.732 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:39:28.761 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.765 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.769 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.769 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.769 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.770 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.770 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.770 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.770 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.770 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.770 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.770 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.770 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.770 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-14 22:39:28.770 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-14 22:39:28.770 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-14 22:39:28.786 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:39:28.786 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:39:28.786 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:39:28.786 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:28.786 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-14 22:39:28.787 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-14 22:39:28.787 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:39:28.787 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.787 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.787 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 5), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 6632), @p11='?' (Size = 14), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-14 22:39:28.788 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 5), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 6632), @p11='?' (Size = 14), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-14 22:39:28.789 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:28.789 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:39:28.789 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:39:28.789 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.789 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.789 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 7), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 7), @p10='?' (DbType = Int32), @p11='?' (Size = 12)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:39:28.789 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 7), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 7), @p10='?' (DbType = Int32), @p11='?' (Size = 12)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:39:28.789 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:28.790 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:39:28.790 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:39:28.790 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.790 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.790 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 4), @p5='?' (Size = 10), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 10), @p10='?' (DbType = Int32), @p11='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:39:28.790 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 4), @p5='?' (Size = 10), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 10), @p10='?' (DbType = Int32), @p11='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:39:28.790 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:28.790 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:39:28.790 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:39:28.791 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.791 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.791 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:39:28.791 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:39:28.791 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:28.791 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:39:28.791 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:39:28.791 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.791 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.791 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 4), @p5='?' (Size = 10), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 17), @p10='?' (DbType = Int32), @p11='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:39:28.791 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 4), @p5='?' (Size = 10), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 17), @p10='?' (DbType = Int32), @p11='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:39:28.792 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:28.792 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:39:28.792 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:39:28.792 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.792 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.792 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:39:28.792 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:39:28.792 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:28.792 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:39:28.792 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:39:28.792 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.792 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:28.792 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 5), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:39:28.792 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 5), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:39:28.793 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:28.793 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:39:28.793 +09:00 [DBG] Committing transaction.
2025-06-14 22:39:28.794 +09:00 [DBG] Committed transaction.
2025-06-14 22:39:28.794 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:28.794 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:39:28.794 +09:00 [DBG] Disposing transaction.
2025-06-14 22:39:28.794 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.794 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.794 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.794 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.794 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.794 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.794 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:28.794 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 7 entities written to the database.
2025-06-14 22:39:28.794 +09:00 [INF] Approval request created successfully with ID: "a074ebdd-4fbc-448c-be8e-5320259c9112"
2025-06-14 22:39:28.795 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:39:28.795 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:39:28.795 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:39:28.795 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:39:28.796 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:39:28.796 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-14 22:39:28.807 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] for address (approvalId=[a074ebdd-4fbc-448c-be8e-5320259c9112],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-14 22:39:28.808 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) resulting in /api/ApprovalRequest/a074ebdd-4fbc-448c-be8e-5320259c9112 and 
2025-06-14 22:39:28.809 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] with result /api/ApprovalRequest/a074ebdd-4fbc-448c-be8e-5320259c9112
2025-06-14 22:39:28.811 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API) in 9010.8646ms
2025-06-14 22:39:28.812 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-14 22:39:28.812 +09:00 [DBG] Connection id "0HNDB6QKL6FOQ" completed keep alive response.
2025-06-14 22:39:28.812 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:39:28.812 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:39:28.812 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:39:28.812 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 9022.201ms
2025-06-14 22:39:29.859 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 22:39:29.860 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 22:39:29.860 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 22:39:29.860 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:39:29.860 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:39:29.860 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:39:29.860 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:39:29.860 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:39:29.860 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:39:29.860 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:39:29.860 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:39:29.860 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:39:29.860 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:39:29.860 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:39:29.860 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:39:29.860 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:39:29.860 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:39:29.860 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:39:29.860 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:39:29.860 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:39:35.873 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:39:35.875 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:39:35.875 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:39:35.875 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:39:35.876 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:35.876 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:39:35.876 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:35.876 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:35.876 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:39:35.877 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:39:35.878 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:35.878 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:39:35.878 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:35.878 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:39:35.879 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:39:35.879 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:39:35.879 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:39:35.879 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:39:35.879 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:39:35.879 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:39:35.880 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6020.0162ms
2025-06-14 22:39:35.880 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:39:35.880 +09:00 [DBG] Connection id "0HNDB6QKL6FOQ" completed keep alive response.
2025-06-14 22:39:35.880 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:39:35.880 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:39:35.880 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:39:35.881 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 6021.1713ms
2025-06-14 22:39:39.521 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112 - null null
2025-06-14 22:39:39.521 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112'
2025-06-14 22:39:39.521 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112'
2025-06-14 22:39:39.521 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:39:39.521 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:39:39.521 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:39:39.522 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:39:39.522 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:39:39.522 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:39:39.522 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:39:39.522 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:39:39.522 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:39:39.522 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:39:39.523 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:39:39.523 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 22:39:39.523 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 22:39:39.523 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:39:39.523 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:39:39.523 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 22:39:39.523 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:39:43.316 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:39:43.317 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:39:43.318 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:39:43.318 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:39:43.318 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:43.318 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:39:43.318 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:43.318 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:39:43.318 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 22:39:43.320 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 22:39:43.321 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:43.321 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:43.321 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:43.322 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:43.322 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:43.322 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:43.322 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:39:43.322 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:43.322 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 22:39:43.322 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:39:43.323 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:39:43.323 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:39:43.323 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:39:43.323 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:39:43.323 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:39:43.323 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:39:43.323 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 22:39:43.324 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 3802.0698ms
2025-06-14 22:39:43.324 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:39:43.324 +09:00 [DBG] Connection id "0HNDB6QKL6FOQ" completed keep alive response.
2025-06-14 22:39:43.324 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:39:43.324 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:39:43.324 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:39:43.324 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112 - 200 null application/json; charset=utf-8 3804.0257ms
2025-06-14 22:40:49.650 +09:00 [DBG] Connection id "0HNDB6QKL6FOQ" received FIN.
2025-06-14 22:40:49.723 +09:00 [DBG] Connection id "0HNDB6QKL6FOQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 22:40:49.834 +09:00 [DBG] Connection id "0HNDB6QKL6FOQ" disconnecting.
2025-06-14 22:40:49.835 +09:00 [DBG] Connection id "0HNDB6QKL6FOQ" stopped.
2025-06-14 22:45:39.413 +09:00 [DBG] Connection id "0HNDB6QKL6FOR" accepted.
2025-06-14 22:45:39.445 +09:00 [DBG] Connection id "0HNDB6QKL6FOR" started.
2025-06-14 22:45:39.469 +09:00 [DBG] Connection 0HNDB6QKL6FOR established using the following protocol: "Tls12"
2025-06-14 22:45:39.472 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 22:45:39.472 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:45:39.472 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 22:45:39.472 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:45:39.473 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:45:39.473 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:45:39.473 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:45:39.473 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:45:39.473 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:45:39.474 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:45:39.474 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:45:39.474 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:45:39.474 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:45:39.474 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:45:39.474 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:45:39.475 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:45:39.475 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:45:39.475 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:45:39.475 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:45:39.476 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:45:39.482 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:45:39.484 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:45:39.484 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:45:39.484 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:45:39.484 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:45:39.484 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:45:39.484 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:45:39.484 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:45:39.484 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:45:39.486 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:45:39.487 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:45:39.487 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:45:39.487 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:45:39.487 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:45:39.487 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:45:39.487 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:45:39.487 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:45:39.488 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:45:39.488 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:45:39.488 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:45:39.488 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:45:39.488 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 22:45:39.488 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:45:39.488 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:45:39.488 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:45:39.488 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:45:39.488 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:45:39.488 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:45:39.488 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:45:39.488 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:45:39.489 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 15.4357ms
2025-06-14 22:45:39.489 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:45:39.489 +09:00 [DBG] Connection id "0HNDB6QKL6FOR" completed keep alive response.
2025-06-14 22:45:39.489 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:45:39.489 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:45:39.489 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:45:39.489 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 17.5737ms
2025-06-14 22:47:40.375 +09:00 [DBG] Connection id "0HNDB6QKL6FOR" received FIN.
2025-06-14 22:47:40.447 +09:00 [DBG] Connection id "0HNDB6QKL6FOR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 22:47:40.448 +09:00 [DBG] Connection id "0HNDB6QKL6FOR" disconnecting.
2025-06-14 22:47:40.460 +09:00 [DBG] Connection id "0HNDB6QKL6FOR" stopped.
2025-06-14 22:49:06.340 +09:00 [DBG] Connection id "0HNDB6QKL6FOS" accepted.
2025-06-14 22:49:06.364 +09:00 [DBG] Connection id "0HNDB6QKL6FOS" started.
2025-06-14 22:49:06.410 +09:00 [DBG] Connection 0HNDB6QKL6FOS established using the following protocol: "Tls12"
2025-06-14 22:49:06.412 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 22:49:06.412 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 22:49:06.412 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 22:49:06.413 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:49:06.413 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:49:06.413 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:49:06.414 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:49:06.414 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:49:06.414 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:49:06.414 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:49:06.414 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:49:06.414 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:49:06.414 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:49:06.415 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:49:06.415 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:49:06.417 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:49:06.417 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:49:06.417 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:49:06.417 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:49:06.417 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:49:06.424 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:49:06.428 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:49:06.428 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:49:06.428 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:49:06.428 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:49:06.428 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:49:06.428 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:49:06.428 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:49:06.428 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:49:06.431 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:49:06.431 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:49:06.432 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:49:06.433 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:49:06.433 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 22:49:06.433 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:49:06.433 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:49:06.433 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:49:06.433 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:49:06.433 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:49:06.433 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:49:06.433 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:49:06.433 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:49:06.434 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 19.9957ms
2025-06-14 22:49:06.434 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:49:06.434 +09:00 [DBG] Connection id "0HNDB6QKL6FOS" completed keep alive response.
2025-06-14 22:49:06.434 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:49:06.434 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:49:06.434 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:49:06.434 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 22.1753ms
2025-06-14 22:49:45.898 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-14 22:49:45.898 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-14 22:49:45.898 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-14 22:49:45.900 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:49:45.900 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:49:45.900 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:49:45.900 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:49:45.900 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:49:45.900 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:49:45.900 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:49:45.900 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:49:45.900 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:49:45.900 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:49:45.900 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:49:45.900 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:49:45.900 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:49:45.901 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:49:45.901 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:49:45.901 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:49:45.901 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:49:48.062 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:49:48.064 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:49:48.066 +09:00 [DBG] Created DbConnection. (2ms).
2025-06-14 22:49:48.066 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:49:48.066 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:49:48.066 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:49:48.066 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:49:48.066 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:49:48.069 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:49:48.073 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:49:48.076 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:49:48.079 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 22:49:48.080 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:49:48.080 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:49:48.080 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:49:48.081 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:49:48.082 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:49:48.084 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:49:48.084 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:49:48.084 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:49:48.084 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 2184.24ms
2025-06-14 22:49:48.087 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:49:48.087 +09:00 [DBG] Connection id "0HNDB6QKL6FOS" completed keep alive response.
2025-06-14 22:49:48.087 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:49:48.090 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:49:48.094 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (3ms).
2025-06-14 22:49:48.094 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 2195.9221ms
2025-06-14 22:49:51.577 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-14 22:49:51.579 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-14 22:49:51.579 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-14 22:49:51.581 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:49:51.582 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:49:51.582 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:49:51.584 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:49:51.585 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:49:51.585 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:49:51.585 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:49:51.585 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:49:51.588 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:49:51.588 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:49:51.588 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:49:51.596 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:49:51.600 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:49:51.602 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:49:51.603 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:49:51.603 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:49:51.603 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:49:53.202 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:49:53.204 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:49:53.205 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:49:53.205 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:49:53.205 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:49:53.205 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:49:53.205 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:49:53.207 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-06-14 22:49:53.207 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:49:53.207 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:49:53.209 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:49:53.209 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:49:53.209 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:49:53.209 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:49:53.210 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:49:53.212 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:49:53.212 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:49:53.212 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:49:53.212 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:49:53.212 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:49:53.212 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 1624.7281ms
2025-06-14 22:49:53.216 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:49:53.218 +09:00 [DBG] Connection id "0HNDB6QKL6FOS" completed keep alive response.
2025-06-14 22:49:53.218 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:49:53.218 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:49:53.218 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:49:53.218 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 1641.2445ms
2025-06-14 22:49:56.540 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 22:49:56.540 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 22:49:56.540 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 22:49:56.540 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:49:56.541 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:49:56.541 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:49:56.541 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:49:56.541 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:49:56.541 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:49:56.542 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:49:56.542 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:49:56.542 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:49:56.542 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:49:56.542 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:49:56.542 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:49:56.543 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:49:56.543 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:49:56.543 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:49:56.543 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:49:56.543 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:49:56.544 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:49:56.545 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:49:56.545 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:49:56.545 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:49:56.545 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:49:56.545 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:49:56.545 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:49:56.545 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:49:56.545 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:49:56.545 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:49:56.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:49:56.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:49:56.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:49:56.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:49:56.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:49:56.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:49:56.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:49:56.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:49:56.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:49:56.547 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:49:56.547 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:49:56.547 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 22:49:56.547 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:49:56.547 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:49:56.547 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:49:56.547 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:49:56.547 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:49:56.547 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:49:56.547 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:49:56.547 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:49:56.548 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 6.7294ms
2025-06-14 22:49:56.549 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:49:56.549 +09:00 [DBG] Connection id "0HNDB6QKL6FOS" completed keep alive response.
2025-06-14 22:49:56.549 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:49:56.549 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:49:56.549 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:49:56.549 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 9.2975ms
2025-06-14 22:50:14.201 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 22:50:14.203 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 22:50:14.203 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 22:50:14.203 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 22:50:14.204 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:50:14.204 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 22:50:14.204 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:50:14.204 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:50:14.204 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:50:14.204 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:50:14.204 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:50:14.204 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:50:14.204 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:50:14.205 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:50:14.210 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 22:50:14.211 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 22:50:14.216 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-14 22:50:14.217 +09:00 [DBG] Connection id "0HNDB6QKL6FOS", Request id "0HNDB6QKL6FOS:00000005": started reading request body.
2025-06-14 22:50:14.217 +09:00 [DBG] Connection id "0HNDB6QKL6FOS", Request id "0HNDB6QKL6FOS:00000005": done reading request body.
2025-06-14 22:50:14.217 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.API.DTOs.ApproveRequestDto'
2025-06-14 22:50:14.217 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 22:50:14.217 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 22:50:14.217 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 22:50:14.218 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 22:50:23.224 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:50:23.226 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:50:23.226 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:50:23.226 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:50:23.227 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:50:23.227 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:50:23.227 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:50:23.227 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:50:23.227 +09:00 [DBG] Executing DbCommand [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 22:50:23.229 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 22:50:23.229 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:23.230 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:23.230 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:23.230 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:23.230 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:23.230 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:23.230 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:23.230 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:50:23.231 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 22:50:23.231 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:50:23.231 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:50:23.231 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-14 22:50:23.231 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-14 22:50:23.231 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentApproverEmployeeNumber' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:50:23.232 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:23.232 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentStep' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:50:23.232 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionDate' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:50:23.232 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:23.232 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:50:23.232 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-14 22:50:23.233 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:50:23.233 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:50:23.234 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-14 22:50:23.234 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-14 22:50:23.234 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:50:23.234 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:50:23.234 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:50:23.234 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 7), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1
WHERE "ApprovalId" = @p2
RETURNING 1;
2025-06-14 22:50:23.235 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 7), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1
WHERE "ApprovalId" = @p2
RETURNING 1;
2025-06-14 22:50:23.235 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:50:23.235 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:50:23.236 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:50:23.236 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:50:23.236 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:50:23.236 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 22:50:23.236 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 22:50:23.236 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:50:23.236 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:50:23.236 +09:00 [DBG] Committing transaction.
2025-06-14 22:50:23.238 +09:00 [DBG] Committed transaction.
2025-06-14 22:50:23.238 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:50:23.238 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:50:23.238 +09:00 [DBG] Disposing transaction.
2025-06-14 22:50:23.238 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:23.238 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:23.238 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-14 22:50:24.226 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:50:24.226 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:50:24.226 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:50:24.226 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:50:24.226 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:50:24.226 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-06-14 22:50:24.226 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 10022.6612ms
2025-06-14 22:50:24.227 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 22:50:24.227 +09:00 [DBG] Connection id "0HNDB6QKL6FOS" completed keep alive response.
2025-06-14 22:50:24.227 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:50:24.227 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:50:24.227 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:50:24.227 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 200 null application/json; charset=utf-8 10026.3558ms
2025-06-14 22:50:33.991 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 22:50:33.992 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 22:50:33.992 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 22:50:33.992 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:50:33.992 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:50:33.992 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:50:33.993 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:50:33.993 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:50:33.993 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:50:33.993 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:50:33.993 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:50:33.993 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:50:33.994 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:50:33.995 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:50:33.995 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:50:33.996 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:50:33.996 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:50:33.996 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:50:33.996 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:50:33.996 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:50:33.997 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:50:33.998 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:50:33.998 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:50:33.998 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:50:33.998 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:50:33.998 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:50:33.998 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:50:33.998 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:50:33.998 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:50:33.999 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:50:34.000 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:34.000 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:34.001 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:34.001 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:34.001 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:34.001 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:34.001 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:34.001 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:34.001 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:34.001 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:50:34.001 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:50:34.001 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 22:50:34.002 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:50:34.002 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:50:34.002 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:50:34.002 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:50:34.002 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:50:34.002 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:50:34.002 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:50:34.002 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:50:34.003 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.2275ms
2025-06-14 22:50:34.003 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:50:34.003 +09:00 [DBG] Connection id "0HNDB6QKL6FOS" completed keep alive response.
2025-06-14 22:50:34.003 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:50:34.003 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:50:34.003 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:50:34.003 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 11.8379ms
2025-06-14 22:51:21.323 +09:00 [DBG] Connection id "0HNDB6QKL6FOS" received FIN.
2025-06-14 22:51:21.327 +09:00 [DBG] Connection id "0HNDB6QKL6FOS" disconnecting.
2025-06-14 22:51:21.329 +09:00 [DBG] Connection id "0HNDB6QKL6FOS" stopped.
2025-06-14 22:51:21.330 +09:00 [DBG] Connection id "0HNDB6QKL6FOS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 22:52:32.784 +09:00 [DBG] Connection id "0HNDB6QKL6FOT" accepted.
2025-06-14 22:52:32.811 +09:00 [DBG] Connection id "0HNDB6QKL6FOT" started.
2025-06-14 22:52:32.837 +09:00 [DBG] Connection 0HNDB6QKL6FOT established using the following protocol: "Tls12"
2025-06-14 22:52:32.842 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 22:52:32.842 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 22:52:32.842 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 22:52:32.843 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 22:52:32.843 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:52:32.843 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 22:52:32.843 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:52:32.843 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:52:32.843 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:52:32.844 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:52:32.844 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:52:32.844 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:52:32.844 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:52:32.844 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:52:32.844 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 22:52:32.845 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 22:52:32.845 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-14 22:52:32.845 +09:00 [DBG] Connection id "0HNDB6QKL6FOT", Request id "0HNDB6QKL6FOT:00000001": started reading request body.
2025-06-14 22:52:32.845 +09:00 [DBG] Connection id "0HNDB6QKL6FOT", Request id "0HNDB6QKL6FOT:00000001": done reading request body.
2025-06-14 22:52:32.845 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.API.DTOs.ApproveRequestDto'
2025-06-14 22:52:32.845 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 22:52:32.845 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 22:52:32.845 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 22:52:32.846 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 22:52:36.674 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:52:36.677 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:52:36.677 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:52:36.677 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:52:36.678 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:52:36.678 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:52:36.678 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:52:36.678 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:52:36.678 +09:00 [DBG] Executing DbCommand [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 22:52:36.679 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 22:52:36.680 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:36.681 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:36.681 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:36.681 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:52:36.681 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 22:52:36.681 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:52:36.681 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:52:36.682 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-14 22:52:36.682 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-14 22:52:36.682 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentApproverEmployeeNumber' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:52:36.682 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:36.682 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentStep' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:52:36.683 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionDate' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:52:36.683 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:36.683 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:52:36.683 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-14 22:52:36.684 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:52:36.684 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:52:36.684 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-14 22:52:36.685 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-14 22:52:36.685 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:52:36.685 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:52:36.685 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:52:36.685 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 7), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1
WHERE "ApprovalId" = @p2
RETURNING 1;
2025-06-14 22:52:36.685 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 7), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1
WHERE "ApprovalId" = @p2
RETURNING 1;
2025-06-14 22:52:36.685 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:52:36.685 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:52:36.686 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:52:36.686 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:52:36.686 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:52:36.686 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 22:52:36.686 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 22:52:36.686 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:52:36.686 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:52:36.686 +09:00 [DBG] Committing transaction.
2025-06-14 22:52:36.687 +09:00 [DBG] Committed transaction.
2025-06-14 22:52:36.687 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:52:36.687 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:52:36.687 +09:00 [DBG] Disposing transaction.
2025-06-14 22:52:36.688 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:36.688 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:36.688 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-14 22:52:43.225 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:52:43.225 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:52:43.225 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:52:43.225 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:52:43.225 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:52:43.225 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-06-14 22:52:43.226 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 10382.9333ms
2025-06-14 22:52:43.226 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 22:52:43.226 +09:00 [DBG] Connection id "0HNDB6QKL6FOT" completed keep alive response.
2025-06-14 22:52:43.227 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:52:43.227 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:52:43.227 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:52:43.227 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 200 null application/json; charset=utf-8 10385.4738ms
2025-06-14 22:52:48.708 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 22:52:48.708 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 22:52:48.708 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 22:52:48.708 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:52:48.709 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:52:48.709 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:52:48.709 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:52:48.709 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:52:48.709 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:52:48.709 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:52:48.709 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:52:48.709 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:52:48.709 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:52:48.710 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:52:48.710 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:52:48.710 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:52:48.710 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:52:48.710 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:52:48.710 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:52:48.710 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:52:48.711 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:52:48.712 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:52:48.712 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:52:48.712 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:52:48.712 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:52:48.712 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:52:48.712 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:52:48.712 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:52:48.712 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:52:48.713 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:52:48.713 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:48.713 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:48.713 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:48.714 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:48.714 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:48.714 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:48.714 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:48.714 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:48.714 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:48.714 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:52:48.714 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:52:48.714 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 22:52:48.714 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:52:48.714 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:52:48.714 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:52:48.714 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:52:48.715 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:52:48.715 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:52:48.715 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:52:48.715 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:52:48.716 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 6.2564ms
2025-06-14 22:52:48.716 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:52:48.716 +09:00 [DBG] Connection id "0HNDB6QKL6FOT" completed keep alive response.
2025-06-14 22:52:48.716 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:52:48.716 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:52:48.716 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:52:48.716 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 7.7447ms
2025-06-14 22:52:58.550 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-14 22:52:58.551 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-14 22:52:58.551 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-14 22:52:58.551 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:52:58.551 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:52:58.551 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:52:58.552 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:52:58.552 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:52:58.552 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:52:58.552 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:52:58.552 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:52:58.553 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:52:58.553 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:52:58.554 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:52:58.555 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:52:58.555 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:52:58.555 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:52:58.555 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:52:58.555 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:52:58.555 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:53:00.788 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:53:00.789 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:53:00.789 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:53:00.789 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:53:00.790 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:53:00.790 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:53:00.790 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:53:00.790 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:53:00.790 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:53:00.790 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:53:00.790 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:53:00.790 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:53:00.790 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:53:00.790 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:53:00.791 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:53:00.791 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:53:00.791 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:53:00.791 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:53:00.791 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:53:00.791 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:53:00.791 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 2238.2853ms
2025-06-14 22:53:00.791 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:53:00.791 +09:00 [DBG] Connection id "0HNDB6QKL6FOT" completed keep alive response.
2025-06-14 22:53:00.791 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:53:00.791 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:53:00.791 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:53:00.791 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 2241.073ms
2025-06-14 22:53:55.360 +09:00 [DBG] Connection id "0HNDB6QKL6FOT" received FIN.
2025-06-14 22:53:55.388 +09:00 [DBG] Connection id "0HNDB6QKL6FOT" disconnecting.
2025-06-14 22:53:55.389 +09:00 [DBG] Connection id "0HNDB6QKL6FOT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 22:53:55.392 +09:00 [DBG] Connection id "0HNDB6QKL6FOT" stopped.
2025-06-14 22:54:17.377 +09:00 [DBG] Connection id "0HNDB6QKL6FOU" accepted.
2025-06-14 22:54:17.378 +09:00 [DBG] Connection id "0HNDB6QKL6FOU" started.
2025-06-14 22:54:17.426 +09:00 [DBG] Connection 0HNDB6QKL6FOU established using the following protocol: "Tls12"
2025-06-14 22:54:17.433 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-14 22:54:17.434 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-14 22:54:17.434 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-14 22:54:17.434 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:54:17.435 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:54:17.435 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:54:17.435 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:54:17.435 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:54:17.435 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:54:17.435 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:54:17.435 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:54:17.435 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:54:17.436 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:54:17.436 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:54:17.436 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:54:17.437 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:54:17.437 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:54:17.437 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:54:17.437 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:54:17.437 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:54:19.791 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:54:19.793 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:54:19.794 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:54:19.794 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:54:19.794 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:54:19.794 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:54:19.794 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:54:19.795 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:54:19.795 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:54:19.796 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:54:19.796 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:54:19.796 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:54:19.796 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:54:19.796 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:54:19.797 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:54:19.797 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:54:19.797 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:54:19.797 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:54:19.797 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:54:19.797 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:54:19.798 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 2362.1635ms
2025-06-14 22:54:19.798 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:54:19.798 +09:00 [DBG] Connection id "0HNDB6QKL6FOU" completed keep alive response.
2025-06-14 22:54:19.798 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:54:19.798 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:54:19.798 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:54:19.798 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 2364.996ms
2025-06-14 22:54:26.624 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 22:54:26.624 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 22:54:26.624 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 22:54:26.624 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:54:26.625 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:54:26.625 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:54:26.625 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:54:26.625 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:54:26.625 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:54:26.625 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:54:26.625 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:54:26.625 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:54:26.625 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:54:26.625 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:54:26.625 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:54:26.625 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:54:26.625 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:54:26.625 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:54:26.625 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:54:26.626 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:54:26.626 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:54:26.627 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:54:26.627 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:54:26.627 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:54:26.627 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:54:26.627 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:54:26.627 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:54:26.627 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:54:26.627 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:54:26.627 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:54:26.629 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:26.629 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:26.629 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:26.629 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:26.629 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:26.629 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:26.629 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:26.630 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:26.630 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:26.630 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:26.630 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:54:26.630 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 22:54:26.630 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:54:26.630 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:54:26.630 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:54:26.630 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:54:26.630 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:54:26.630 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:54:26.630 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:54:26.631 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:54:26.631 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 6.1418ms
2025-06-14 22:54:26.631 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:54:26.631 +09:00 [DBG] Connection id "0HNDB6QKL6FOU" completed keep alive response.
2025-06-14 22:54:26.631 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:54:26.631 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:54:26.631 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:54:26.631 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 7.4631ms
2025-06-14 22:54:27.812 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-14 22:54:27.812 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-14 22:54:27.812 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-14 22:54:27.812 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:54:27.812 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:54:27.812 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:54:27.813 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:54:27.813 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:54:27.813 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:54:27.813 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:54:27.813 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:54:27.813 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:54:27.813 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:54:27.813 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:54:27.813 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:54:27.813 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:54:27.813 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:54:27.813 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:54:27.814 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:54:27.814 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:54:27.814 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:54:27.814 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:54:27.814 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:54:27.814 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:54:27.815 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:54:27.815 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:54:27.815 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:54:27.815 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:54:27.815 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:54:27.815 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:54:27.815 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:54:27.815 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:54:27.815 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:54:27.815 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:54:27.815 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:54:27.815 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:54:27.815 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:54:27.815 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:54:27.815 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:54:27.816 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:54:27.816 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 2.7453ms
2025-06-14 22:54:27.816 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:54:27.816 +09:00 [DBG] Connection id "0HNDB6QKL6FOU" completed keep alive response.
2025-06-14 22:54:27.816 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:54:27.816 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:54:27.816 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:54:27.816 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 4.7688ms
2025-06-14 22:54:31.431 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-14 22:54:31.432 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 22:54:31.432 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-14 22:54:31.432 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:54:31.434 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:54:31.434 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:54:31.434 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:54:31.434 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:54:31.434 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:54:31.434 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:54:31.434 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:54:31.434 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:54:31.434 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:54:31.434 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:54:31.435 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:54:31.435 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:54:31.435 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:54:31.435 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:54:31.435 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:54:31.435 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:54:31.435 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:54:31.437 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:54:31.437 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:54:31.437 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:54:31.437 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:54:31.437 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:54:31.437 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:54:31.437 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:54:31.437 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:54:31.438 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:54:31.439 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:31.439 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:31.439 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:31.439 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:31.439 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:31.439 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:31.441 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:31.441 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:31.441 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:31.441 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:54:31.441 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:54:31.441 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 22:54:31.441 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:54:31.442 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:54:31.442 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:54:31.442 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:54:31.442 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:54:31.442 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:54:31.442 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:54:31.442 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:54:31.442 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.2393ms
2025-06-14 22:54:31.443 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:54:31.443 +09:00 [DBG] Connection id "0HNDB6QKL6FOU" completed keep alive response.
2025-06-14 22:54:31.443 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:54:31.443 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:54:31.443 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:54:31.443 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 12.0526ms
2025-06-14 22:55:07.544 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 22:55:07.545 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 22:55:07.545 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 22:55:07.545 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:55:07.546 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:55:07.546 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:55:07.547 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:55:07.547 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:55:07.547 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:55:07.547 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:55:07.547 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:55:07.547 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:55:07.548 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:55:07.550 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:55:07.551 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:55:07.551 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:55:07.552 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:55:07.552 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:55:07.552 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:55:07.553 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:55:07.557 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:55:07.562 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:55:07.562 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:55:07.563 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:55:07.563 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:55:07.563 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:55:07.563 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:55:07.563 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:55:07.563 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:55:07.565 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:55:07.567 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:55:07.568 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:55:07.568 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:55:07.568 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 22:55:07.569 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:55:07.569 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:55:07.569 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:55:07.569 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:55:07.569 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:55:07.569 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:55:07.570 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:55:07.570 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:55:07.571 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 23.1984ms
2025-06-14 22:55:07.571 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:55:07.571 +09:00 [DBG] Connection id "0HNDB6QKL6FOU" completed keep alive response.
2025-06-14 22:55:07.571 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:55:07.571 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:55:07.571 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:55:07.571 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 27.5559ms
2025-06-14 22:55:43.942 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 22:55:43.943 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 22:55:43.943 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 22:55:43.943 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 22:55:43.943 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:55:43.943 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 22:55:43.944 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:55:43.944 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:55:43.944 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:55:43.944 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:55:43.944 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:55:43.944 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:55:43.944 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:55:43.945 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:55:43.948 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 22:55:43.948 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 22:55:43.948 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-14 22:55:43.948 +09:00 [DBG] Connection id "0HNDB6QKL6FOU", Request id "0HNDB6QKL6FOU:00000006": started reading request body.
2025-06-14 22:55:43.949 +09:00 [DBG] Connection id "0HNDB6QKL6FOU", Request id "0HNDB6QKL6FOU:00000006": done reading request body.
2025-06-14 22:55:43.949 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.API.DTOs.ApproveRequestDto'
2025-06-14 22:55:43.949 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 22:55:43.949 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 22:55:43.949 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 22:55:43.949 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 22:55:54.015 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:55:54.019 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:55:54.020 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:55:54.020 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:55:54.020 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:55:54.020 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:55:54.020 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:55:54.020 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:55:54.021 +09:00 [DBG] Executing DbCommand [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 22:55:54.022 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 22:55:54.022 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:55:54.023 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:55:54.023 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:55:54.023 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:55:54.023 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 22:55:54.024 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:55:54.024 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:55:54.024 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-14 22:55:54.024 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-14 22:55:54.024 +09:00 [DBG] The unchanged property 'ApprovalRequest.RespondedAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:55:54.024 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:55:54.025 +09:00 [DBG] The unchanged property 'ApprovalRequest.Status' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:55:54.025 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionDate' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:55:54.025 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:55:54.025 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 22:55:54.025 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-14 22:55:54.028 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:55:54.028 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:55:54.029 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-14 22:55:54.029 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-14 22:55:54.029 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:55:54.029 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:55:54.029 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:55:54.029 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "RespondedAt" = @p0, "Status" = @p1
WHERE "ApprovalId" = @p2
RETURNING 1;
2025-06-14 22:55:54.030 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "RespondedAt" = @p0, "Status" = @p1
WHERE "ApprovalId" = @p2
RETURNING 1;
2025-06-14 22:55:54.030 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:55:54.030 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:55:54.031 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:55:54.031 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:55:54.031 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:55:54.031 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 22:55:54.031 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 22:55:54.031 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:55:54.031 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:55:54.031 +09:00 [DBG] Committing transaction.
2025-06-14 22:55:54.032 +09:00 [DBG] Committed transaction.
2025-06-14 22:55:54.032 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:55:54.032 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:55:54.032 +09:00 [DBG] Disposing transaction.
2025-06-14 22:55:54.032 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:55:54.032 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:55:54.032 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-14 22:55:55.876 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:55:55.876 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:55:55.876 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:55:55.876 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:55:55.876 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:55:55.876 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-06-14 22:55:55.877 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 11933.5417ms
2025-06-14 22:55:55.878 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 22:55:55.878 +09:00 [DBG] Connection id "0HNDB6QKL6FOU" completed keep alive response.
2025-06-14 22:55:55.878 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:55:55.878 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:55:55.878 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:55:55.878 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 200 null application/json; charset=utf-8 11936.3467ms
2025-06-14 22:55:55.906 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 22:55:55.906 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 22:55:55.906 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 22:55:55.906 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:55:55.906 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:55:55.907 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:55:55.907 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:55:55.907 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:55:55.907 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:55:55.907 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:55:55.907 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:55:55.907 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:55:55.907 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:55:55.908 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:55:55.908 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:55:55.908 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:55:55.908 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:55:55.908 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:55:55.908 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:55:55.908 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:55:55.909 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:55:55.910 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:55:55.910 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:55:55.910 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:55:55.910 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:55:55.910 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:55:55.910 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:55:55.910 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:55:55.910 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:55:55.911 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:55:55.911 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:55:55.911 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:55:55.911 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:55:55.911 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:55:55.911 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:55:55.911 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:55:55.911 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:55:55.911 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:55:55.911 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:55:55.911 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:55:55.911 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:55:55.911 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:55:55.912 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 4.6386ms
2025-06-14 22:55:55.913 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:55:55.913 +09:00 [DBG] Connection id "0HNDB6QKL6FOU" completed keep alive response.
2025-06-14 22:55:55.913 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:55:55.913 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:55:55.913 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:55:55.913 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 7.3576ms
2025-06-14 22:56:21.512 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" accepted.
2025-06-14 22:56:21.516 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" started.
2025-06-14 22:56:21.540 +09:00 [DBG] Connection 0HNDB6QKL6FOV established using the following protocol: "Tls12"
2025-06-14 22:56:21.544 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 22:56:21.544 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:56:21.544 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:56:21.544 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:56:21.545 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:56:21.545 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:56:21.545 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:56:21.545 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:56:21.545 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:56:21.545 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:56:21.545 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:56:21.545 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:56:21.545 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:56:21.546 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:56:21.546 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:56:21.547 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:56:21.547 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:56:21.547 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:56:21.547 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:56:21.547 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:56:21.552 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:56:21.557 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:56:21.557 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:56:21.557 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:56:21.557 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:21.557 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:56:21.557 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:56:21.557 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:56:21.557 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:56:21.558 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:56:21.558 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:21.558 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:56:21.558 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:21.558 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:56:21.559 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:56:21.559 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:56:21.559 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:56:21.559 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:56:21.559 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:56:21.559 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:56:21.559 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 13.7792ms
2025-06-14 22:56:21.559 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:56:21.559 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" completed keep alive response.
2025-06-14 22:56:21.559 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:56:21.559 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:56:21.559 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:56:21.559 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 15.8194ms
2025-06-14 22:56:22.394 +09:00 [DBG] Connection id "0HNDB6QKL6FOU" received FIN.
2025-06-14 22:56:22.394 +09:00 [DBG] Connection id "0HNDB6QKL6FOU" disconnecting.
2025-06-14 22:56:22.394 +09:00 [DBG] Connection id "0HNDB6QKL6FOU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 22:56:22.398 +09:00 [DBG] Connection id "0HNDB6QKL6FOU" stopped.
2025-06-14 22:56:27.758 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 22:56:27.759 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 22:56:27.759 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 22:56:27.759 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:56:27.759 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:56:27.759 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:56:27.759 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:56:27.759 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:56:27.760 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:56:27.760 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:56:27.760 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:56:27.760 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:56:27.760 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:56:27.760 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:56:27.760 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:56:27.760 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:56:27.760 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:56:27.760 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:56:27.760 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:56:27.761 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:56:27.761 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:56:27.774 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:56:27.774 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:56:27.774 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:56:27.774 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:27.775 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:56:27.775 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:56:27.775 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:56:27.775 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:56:27.775 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:56:27.777 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:56:27.778 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:56:27.778 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:27.778 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 22:56:27.778 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:27.779 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:56:27.779 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:56:27.779 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:56:27.779 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:56:27.779 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:56:27.779 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:56:27.779 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:56:27.780 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 19.7051ms
2025-06-14 22:56:27.780 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:56:27.780 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" completed keep alive response.
2025-06-14 22:56:27.780 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:56:27.780 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:56:27.780 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:56:27.780 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 21.7639ms
2025-06-14 22:56:31.807 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 22:56:31.807 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:56:31.807 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:56:31.807 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:56:31.808 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:56:31.808 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:56:31.808 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:56:31.808 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:56:31.808 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:56:31.808 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:56:31.808 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:56:31.811 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:56:31.811 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:56:31.812 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:56:31.812 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:56:31.812 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:56:31.812 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:56:31.812 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:56:31.812 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:56:31.812 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:56:31.813 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:56:31.813 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:56:31.814 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:56:31.814 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:56:31.814 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:31.814 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:56:31.814 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:56:31.814 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:56:31.814 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:56:31.814 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:56:31.814 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:31.814 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:56:31.814 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:31.815 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:56:31.815 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:56:31.815 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:56:31.815 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:56:31.815 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:56:31.815 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:56:31.815 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:56:31.815 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 3.695ms
2025-06-14 22:56:31.815 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:56:31.815 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" completed keep alive response.
2025-06-14 22:56:31.815 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:56:31.815 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:56:31.815 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:56:31.816 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 8.4072ms
2025-06-14 22:56:41.769 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374 - null null
2025-06-14 22:56:41.769 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374'
2025-06-14 22:56:41.769 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374'
2025-06-14 22:56:41.769 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:56:41.770 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:56:41.770 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:56:41.770 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:56:41.770 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:56:41.770 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:56:41.771 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:56:41.771 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:56:41.771 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:56:41.771 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:56:41.772 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:56:41.772 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 22:56:41.772 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 22:56:41.772 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:56:41.772 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:56:41.772 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 22:56:41.772 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:56:41.773 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:56:41.776 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:56:41.776 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:56:41.776 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:56:41.776 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:41.776 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:56:41.776 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:56:41.776 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:56:41.776 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 22:56:41.778 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 22:56:41.779 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:56:41.779 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:56:41.786 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:56:41.798 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:41.798 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 19ms reading results.
2025-06-14 22:56:41.798 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:41.798 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:56:41.798 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:56:41.801 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:56:41.801 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:56:41.801 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:56:41.801 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:56:41.801 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 22:56:41.805 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 33.6344ms
2025-06-14 22:56:41.805 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:56:41.805 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" completed keep alive response.
2025-06-14 22:56:41.805 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:56:41.805 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:56:41.805 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:56:41.805 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374 - 200 null application/json; charset=utf-8 36.4824ms
2025-06-14 22:56:46.440 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 22:56:46.441 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:56:46.441 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:56:46.441 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:56:46.441 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:56:46.441 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:56:46.442 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:56:46.442 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:56:46.442 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:56:46.442 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:56:46.442 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:56:46.442 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:56:46.442 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:56:46.442 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:56:46.442 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:56:46.442 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:56:46.442 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:56:46.442 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:56:46.442 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:56:46.443 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:56:46.444 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:56:46.445 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:56:46.446 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:56:46.446 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:56:46.446 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:46.446 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:56:46.446 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:56:46.446 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:56:46.446 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:56:46.447 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:56:46.447 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:46.447 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:56:46.447 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:46.447 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:56:46.447 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:56:46.448 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:56:46.448 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:56:46.448 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:56:46.448 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:56:46.448 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:56:46.448 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6.0638ms
2025-06-14 22:56:46.449 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:56:46.449 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" completed keep alive response.
2025-06-14 22:56:46.449 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:56:46.449 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:56:46.449 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:56:46.449 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 8.7268ms
2025-06-14 22:56:54.387 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374 - null null
2025-06-14 22:56:54.388 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374'
2025-06-14 22:56:54.389 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374'
2025-06-14 22:56:54.389 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:56:54.389 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:56:54.389 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:56:54.389 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:56:54.389 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:56:54.390 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:56:54.390 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:56:54.390 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:56:54.390 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:56:54.390 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:56:54.390 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:56:54.390 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 22:56:54.390 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 22:56:54.391 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:56:54.391 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:56:54.391 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 22:56:54.391 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:56:54.392 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:56:54.395 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:56:54.395 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:56:54.396 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:56:54.396 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:54.396 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:56:54.397 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:56:54.398 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-14 22:56:54.398 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 22:56:54.401 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 22:56:54.403 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:56:54.404 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:56:54.405 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:56:54.406 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:54.406 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-14 22:56:54.406 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:56:54.406 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:56:54.406 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:56:54.406 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:56:54.406 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:56:54.406 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:56:54.407 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:56:54.407 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 22:56:54.407 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 17.2677ms
2025-06-14 22:56:54.407 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:56:54.407 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" completed keep alive response.
2025-06-14 22:56:54.407 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:56:54.407 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:56:54.407 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:56:54.407 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374 - 200 null application/json; charset=utf-8 19.9751ms
2025-06-14 22:57:00.326 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 22:57:00.327 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:57:00.327 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:57:00.327 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:57:00.327 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:57:00.327 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:57:00.327 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:57:00.328 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:57:00.328 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:57:00.328 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:57:00.328 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:57:00.328 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:57:00.328 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:57:00.328 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:57:00.328 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:57:00.328 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:57:00.328 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:57:00.328 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:57:00.328 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:57:00.329 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:57:00.330 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:57:00.330 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:57:00.331 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:57:00.331 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:57:00.331 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:57:00.331 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:57:00.331 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:57:00.331 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:57:00.331 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:57:00.332 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:57:00.332 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:57:00.332 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:57:00.332 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:57:00.332 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:57:00.332 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:57:00.332 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:57:00.332 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:57:00.332 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:57:00.333 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:57:00.333 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:57:00.333 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 5.4167ms
2025-06-14 22:57:00.333 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:57:00.333 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" completed keep alive response.
2025-06-14 22:57:00.333 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:57:00.333 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:57:00.334 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:57:00.334 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 7.4587ms
2025-06-14 22:57:52.360 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-14 22:57:52.361 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-14 22:57:52.361 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-14 22:57:52.361 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-14 22:57:52.362 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:57:52.362 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-14 22:57:52.362 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:57:52.363 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:57:52.363 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:57:52.363 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:57:52.363 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:57:52.363 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:57:52.363 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:57:52.364 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:57:52.365 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-14 22:57:52.365 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-14 22:57:52.365 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-14 22:57:52.365 +09:00 [DBG] Connection id "0HNDB6QKL6FOV", Request id "0HNDB6QKL6FOV:00000008": started reading request body.
2025-06-14 22:57:52.365 +09:00 [DBG] Connection id "0HNDB6QKL6FOV", Request id "0HNDB6QKL6FOV:00000008": done reading request body.
2025-06-14 22:57:52.370 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-14 22:57:52.370 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-14 22:57:52.370 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-14 22:57:52.370 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-14 22:57:52.375 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-14 22:57:59.508 +09:00 [INF] Creating a new approval request.
2025-06-14 22:57:59.510 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"81d366d9-92d9-417a-87b1-0be12d6fcbed","RequestTitle":"Test","RequestContent":"[22:57:00 DBG] List of registered output formatters, in the following order: [\"Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter\", \"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter\", \"Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter\", \"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter\"]\r\n[22:57:00 DBG] No information found on request to perform content negotiation.\r\n[22:57:00 DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.\r\n[22:57:00 DBG] Attempting to select the first formatter in the output formatters list which can write the result.\r\n[22:57:00 DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.\r\n[22:57:00 INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.\r\n[22:57:00 INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 5.4167ms\r\n[22:57:00 INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'\r\n[22:57:00 DBG] Connection id \"0HNDB6QKL6FOV\" completed keep alive response.","ApplicantEmployeeNumber":"EC20505","ApplicantName":"User 6","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-14T13:57:50.2122180Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0001","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 1","Position":"System Administrator","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0005","Sequence":2,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 5","Position":"Auditor","Department":"Marketing","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0009","Sequence":3,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 9","Position":"Team Leader","Department":"HR","StepType":"Agreement","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[{"AttachmentId":"ddf1b9ae-dcf2-4d5f-9e7c-5990fe34e74f","ApprovalId":"00000000-0000-0000-0000-000000000000","FileName":"Screenshot 2025-06-04 at 9.13.37 AM_1.png","FilePath":"wwwroot/uploads/Screenshot 2025-06-04 at 9.13.37 AM_1.png","FileSize":836599,"FileType":"image/png","UploadedAt":"2025-06-14T13:57:52.3170720Z","UploadedByEmployeeNumber":"EC20505","ApprovalRequest":null,"$type":"ApprovalAttachment"}],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-14 22:58:02.274 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:58:02.275 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:58:02.279 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:58:02.280 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:58:02.280 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:58:02.280 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:58:02.280 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:58:02.281 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:58:02.281 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:58:02.281 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-14 22:58:02.281 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-14 22:58:02.288 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-14 22:58:02.290 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:58:02.290 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:58:02.290 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:58:02.291 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:58:02.291 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-14 22:58:02.291 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-14 22:58:02.291 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:58:02.291 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:58:02.291 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:58:02.291 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 1442), @p11='?' (Size = 4), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-14 22:58:02.292 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 1442), @p11='?' (Size = 4), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-14 22:58:02.292 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:58:02.292 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:58:02.294 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:58:02.294 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:58:02.294 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:58:02.294 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 41), @p3='?' (Size = 57), @p4='?' (DbType = Int64), @p5='?' (Size = 9), @p6='?' (DbType = DateTime), @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalAttachments" ("AttachmentId", "ApprovalId", "FileName", "FilePath", "FileSize", "FileType", "UploadedAt", "UploadedByEmployeeNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-14 22:58:02.294 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 41), @p3='?' (Size = 57), @p4='?' (DbType = Int64), @p5='?' (Size = 9), @p6='?' (DbType = DateTime), @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalAttachments" ("AttachmentId", "ApprovalId", "FileName", "FilePath", "FileSize", "FileType", "UploadedAt", "UploadedByEmployeeNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-14 22:58:02.294 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:58:02.294 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:58:02.295 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:58:02.295 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:58:02.295 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:58:02.295 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:58:02.295 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:58:02.295 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:58:02.295 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:58:02.296 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:58:02.296 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:58:02.296 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:58:02.296 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 9), @p8='?' (DbType = Boolean), @p9='?' (Size = 7), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:58:02.296 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 9), @p8='?' (DbType = Boolean), @p9='?' (Size = 7), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:58:02.296 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:58:02.296 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:58:02.297 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:58:02.297 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:58:02.297 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:58:02.297 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 11), @p10='?' (DbType = Int32), @p11='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:58:02.297 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 11), @p10='?' (DbType = Int32), @p11='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-14 22:58:02.297 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:58:02.297 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:58:02.297 +09:00 [DBG] Committing transaction.
2025-06-14 22:58:02.298 +09:00 [DBG] Committed transaction.
2025-06-14 22:58:02.298 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:58:02.298 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:58:02.298 +09:00 [DBG] Disposing transaction.
2025-06-14 22:58:02.298 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:58:02.299 +09:00 [DBG] An entity of type 'ApprovalAttachment' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:58:02.299 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:58:02.299 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:58:02.299 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:58:02.299 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 5 entities written to the database.
2025-06-14 22:58:02.299 +09:00 [INF] Approval request created successfully with ID: "81d366d9-92d9-417a-87b1-0be12d6fcbed"
2025-06-14 22:58:02.299 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:58:02.299 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:58:02.299 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:58:02.299 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:58:02.299 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:58:02.299 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-14 22:58:02.300 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] for address (approvalId=[81d366d9-92d9-417a-87b1-0be12d6fcbed],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-14 22:58:02.301 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) resulting in /api/ApprovalRequest/81d366d9-92d9-417a-87b1-0be12d6fcbed and 
2025-06-14 22:58:02.301 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] with result /api/ApprovalRequest/81d366d9-92d9-417a-87b1-0be12d6fcbed
2025-06-14 22:58:02.302 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API) in 9939.2676ms
2025-06-14 22:58:02.302 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-14 22:58:02.302 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" completed keep alive response.
2025-06-14 22:58:02.302 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:58:02.302 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:58:02.302 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:58:02.302 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 9942.9744ms
2025-06-14 22:59:00.032 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" received FIN.
2025-06-14 22:59:00.122 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 22:59:00.184 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" disconnecting.
2025-06-14 22:59:00.269 +09:00 [DBG] Connection id "0HNDB6QKL6FP0" accepted.
2025-06-14 22:59:00.269 +09:00 [DBG] Connection id "0HNDB6QKL6FP0" started.
2025-06-14 22:59:00.269 +09:00 [DBG] Connection id "0HNDB6QKL6FOV" stopped.
2025-06-14 22:59:00.292 +09:00 [DBG] Connection 0HNDB6QKL6FP0 established using the following protocol: "Tls12"
2025-06-14 22:59:00.300 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 22:59:00.300 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:59:00.300 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:59:00.300 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:59:00.300 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:59:00.300 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:59:00.301 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:59:00.301 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:59:00.301 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:59:00.301 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:59:00.301 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:59:00.301 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:59:00.301 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:59:00.302 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:59:00.302 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:59:00.302 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:59:00.302 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:59:00.302 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:59:00.302 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:59:00.302 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:59:00.303 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:59:00.304 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:59:00.304 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:59:00.304 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:00.304 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:00.304 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:59:00.304 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:00.304 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:00.304 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:59:00.305 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:59:00.305 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:00.305 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:59:00.305 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:00.305 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:00.306 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:59:00.306 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:59:00.306 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:59:00.306 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:59:00.306 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:59:00.306 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:59:00.306 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 5.1817ms
2025-06-14 22:59:00.306 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:59:00.306 +09:00 [DBG] Connection id "0HNDB6QKL6FP0" completed keep alive response.
2025-06-14 22:59:00.306 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:59:00.306 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:00.306 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:00.307 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 6.9369ms
2025-06-14 22:59:05.363 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed - null null
2025-06-14 22:59:05.364 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed'
2025-06-14 22:59:05.364 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed'
2025-06-14 22:59:05.365 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:59:05.366 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:59:05.366 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:59:05.366 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:59:05.367 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:59:05.367 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:59:05.367 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:59:05.367 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:59:05.367 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:59:05.367 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:59:05.369 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:59:05.370 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 22:59:05.370 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 22:59:05.372 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:59:05.372 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:59:05.372 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 22:59:05.372 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:59:05.374 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:59:05.377 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:59:05.377 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:59:05.377 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:05.378 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:05.378 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:59:05.378 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:05.378 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:05.378 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 22:59:05.379 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 22:59:05.382 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:05.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:05.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:05.388 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:05.388 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:05.389 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:05.389 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 9ms reading results.
2025-06-14 22:59:05.389 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:05.389 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:05.389 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:59:05.389 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:59:05.389 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:59:05.389 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:59:05.389 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:59:05.389 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 22:59:05.390 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 23.3185ms
2025-06-14 22:59:05.390 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:59:05.390 +09:00 [DBG] Connection id "0HNDB6QKL6FP0" completed keep alive response.
2025-06-14 22:59:05.390 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:59:05.390 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:05.390 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:05.390 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed - 200 null application/json; charset=utf-8 27.2455ms
2025-06-14 22:59:10.740 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 22:59:10.740 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 22:59:10.740 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 22:59:10.740 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:59:10.740 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:59:10.740 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:59:10.741 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 22:59:10.741 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:59:10.741 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:59:10.741 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:59:10.741 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:59:10.741 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:59:10.741 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:59:10.741 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 22:59:10.741 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 22:59:10.741 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 22:59:10.741 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:59:10.741 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 22:59:10.741 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 22:59:10.741 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 22:59:10.742 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:59:10.743 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:59:10.743 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:59:10.743 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:10.743 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:10.743 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:59:10.743 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:10.743 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:10.743 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:59:10.744 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 22:59:10.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:10.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:10.745 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:10.745 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:59:10.745 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:10.745 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:10.747 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:59:10.747 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:59:10.747 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:59:10.748 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:59:10.748 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:59:10.748 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:59:10.748 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 7.3325ms
2025-06-14 22:59:10.748 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 22:59:10.748 +09:00 [DBG] Connection id "0HNDB6QKL6FP0" completed keep alive response.
2025-06-14 22:59:10.748 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:59:10.748 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:10.749 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:10.749 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 9.0443ms
2025-06-14 22:59:16.230 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 22:59:16.231 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:59:16.231 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:59:16.231 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:59:16.231 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:59:16.232 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:59:16.232 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:59:16.232 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:59:16.232 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:59:16.232 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:59:16.232 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:59:16.232 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:59:16.232 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:59:16.233 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:59:16.234 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:59:16.234 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:59:16.234 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:59:16.234 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:59:16.234 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:59:16.235 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:59:16.239 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:59:16.240 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:59:16.240 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:59:16.240 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:16.241 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:16.241 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:59:16.241 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:16.241 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:16.241 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:59:16.241 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:59:16.242 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:16.242 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:59:16.243 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:16.243 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:16.243 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:59:16.243 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:59:16.244 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:59:16.244 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:59:16.244 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:59:16.244 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:59:16.245 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 12.9617ms
2025-06-14 22:59:16.245 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:59:16.245 +09:00 [DBG] Connection id "0HNDB6QKL6FP0" completed keep alive response.
2025-06-14 22:59:16.245 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:59:16.245 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:16.246 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:16.246 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 15.5568ms
2025-06-14 22:59:18.124 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/3715b920-eb7a-49e3-a62d-005bd544414a - null null
2025-06-14 22:59:18.124 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/3715b920-eb7a-49e3-a62d-005bd544414a'
2025-06-14 22:59:18.125 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/3715b920-eb7a-49e3-a62d-005bd544414a'
2025-06-14 22:59:18.125 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:59:18.125 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:59:18.125 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:59:18.125 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:59:18.125 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:59:18.125 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:59:18.125 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:59:18.125 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:59:18.126 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:59:18.126 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:59:18.127 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:59:18.127 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 22:59:18.127 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 22:59:18.127 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:59:18.128 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:59:18.128 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 22:59:18.128 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:59:18.128 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:59:18.129 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:59:18.129 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:59:18.129 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:18.129 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:18.129 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:59:18.129 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:18.129 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:18.129 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 22:59:18.130 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 22:59:18.130 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:18.131 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:18.131 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:18.131 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:18.131 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:59:18.131 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:18.131 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:18.131 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:59:18.131 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:59:18.131 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:59:18.131 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:59:18.131 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:59:18.132 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 22:59:18.132 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 6.2117ms
2025-06-14 22:59:18.132 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:59:18.132 +09:00 [DBG] Connection id "0HNDB6QKL6FP0" completed keep alive response.
2025-06-14 22:59:18.132 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:59:18.132 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:18.132 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:18.132 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/3715b920-eb7a-49e3-a62d-005bd544414a - 200 null application/json; charset=utf-8 8.078ms
2025-06-14 22:59:24.592 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 22:59:24.592 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:59:24.592 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 22:59:24.592 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:59:24.593 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:59:24.593 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:59:24.593 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:59:24.593 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:59:24.593 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:59:24.593 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:59:24.593 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:59:24.593 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:59:24.593 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:59:24.593 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:59:24.593 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 22:59:24.594 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 22:59:24.594 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:59:24.594 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 22:59:24.594 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 22:59:24.594 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 22:59:24.595 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:59:24.595 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:59:24.595 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:59:24.595 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:24.596 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:24.596 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:59:24.596 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:24.596 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:24.596 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:59:24.596 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 22:59:24.597 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:24.597 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 22:59:24.597 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:24.597 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:24.597 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:59:24.597 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:59:24.597 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:59:24.597 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:59:24.597 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:59:24.597 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 22:59:24.598 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.7149ms
2025-06-14 22:59:24.598 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 22:59:24.598 +09:00 [DBG] Connection id "0HNDB6QKL6FP0" completed keep alive response.
2025-06-14 22:59:24.598 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:59:24.599 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:24.599 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:24.599 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 6.9721ms
2025-06-14 22:59:26.498 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed - null null
2025-06-14 22:59:26.498 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed'
2025-06-14 22:59:26.498 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed'
2025-06-14 22:59:26.498 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:59:26.498 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 22:59:26.498 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:59:26.499 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 22:59:26.499 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 22:59:26.499 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 22:59:26.499 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 22:59:26.499 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 22:59:26.499 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 22:59:26.499 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:59:26.499 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 22:59:26.499 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 22:59:26.499 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 22:59:26.499 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:59:26.499 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:59:26.499 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 22:59:26.499 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 22:59:26.500 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 22:59:26.500 +09:00 [DBG] Creating DbConnection.
2025-06-14 22:59:26.500 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 22:59:26.500 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:26.500 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:26.500 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 22:59:26.500 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:26.500 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 22:59:26.500 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 22:59:26.501 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 22:59:26.502 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:26.503 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:26.504 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:26.504 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:26.504 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 22:59:26.505 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:26.505 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 22:59:26.506 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 22:59:26.506 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:26.506 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 22:59:26.506 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 22:59:26.506 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 22:59:26.506 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 22:59:26.506 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 22:59:26.506 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 22:59:26.506 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 7.5093ms
2025-06-14 22:59:26.506 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 22:59:26.506 +09:00 [DBG] Connection id "0HNDB6QKL6FP0" completed keep alive response.
2025-06-14 22:59:26.506 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 22:59:26.506 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 22:59:26.506 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 22:59:26.506 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed - 200 null application/json; charset=utf-8 8.771ms
2025-06-14 23:00:30.111 +09:00 [DBG] Connection id "0HNDB6QKL6FP0" received FIN.
2025-06-14 23:00:30.168 +09:00 [DBG] Connection id "0HNDB6QKL6FP0" disconnecting.
2025-06-14 23:00:30.168 +09:00 [DBG] Connection id "0HNDB6QKL6FP0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:00:30.173 +09:00 [DBG] Connection id "0HNDB6QKL6FP0" stopped.
2025-06-14 23:00:56.360 +09:00 [DBG] Connection id "0HNDB6QKL6FP1" accepted.
2025-06-14 23:00:56.386 +09:00 [DBG] Connection id "0HNDB6QKL6FP1" started.
2025-06-14 23:00:56.408 +09:00 [DBG] Connection 0HNDB6QKL6FP1 established using the following protocol: "Tls12"
2025-06-14 23:00:56.412 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:00:56.412 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:00:56.412 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:00:56.413 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:00:56.413 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:00:56.413 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:00:56.413 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:00:56.413 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:00:56.413 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:00:56.413 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:00:56.413 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:00:56.414 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:00:56.414 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:00:56.414 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:00:56.414 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:00:56.414 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:00:56.414 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:00:56.414 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:00:56.414 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:00:56.414 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:00:56.415 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:00:56.416 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:00:56.416 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:00:56.416 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:00:56.417 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:00:56.417 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:00:56.417 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:00:56.417 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:00:56.417 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 23:00:56.417 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 23:00:56.421 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:00:56.421 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 23:00:56.421 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:00:56.422 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:00:56.422 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:00:56.422 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:00:56.422 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:00:56.422 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:00:56.422 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:00:56.422 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:00:56.423 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 9.1739ms
2025-06-14 23:00:56.423 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:00:56.423 +09:00 [DBG] Connection id "0HNDB6QKL6FP1" completed keep alive response.
2025-06-14 23:00:56.423 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:00:56.424 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:00:56.424 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:00:56.424 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 11.6273ms
2025-06-14 23:00:59.693 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 23:00:59.694 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 23:00:59.694 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 23:00:59.694 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:00:59.694 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:00:59.694 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:00:59.694 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:00:59.694 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:00:59.694 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:00:59.694 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:00:59.694 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:00:59.694 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:00:59.694 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:00:59.694 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:00:59.695 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 23:00:59.695 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 23:00:59.695 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:00:59.695 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:00:59.695 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 23:00:59.695 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 23:00:59.696 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:00:59.697 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:00:59.697 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:00:59.697 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:00:59.697 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:00:59.698 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:00:59.698 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:00:59.698 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:00:59.698 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:00:59.699 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:00:59.700 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:00:59.700 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:00:59.700 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:00:59.700 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:00:59.700 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:00:59.701 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:00:59.701 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:00:59.701 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:00:59.701 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:00:59.701 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:00:59.701 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:00:59.701 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:00:59.702 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 7.32ms
2025-06-14 23:00:59.702 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:00:59.702 +09:00 [DBG] Connection id "0HNDB6QKL6FP1" completed keep alive response.
2025-06-14 23:00:59.702 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:00:59.702 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:00:59.702 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:00:59.702 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 8.6132ms
2025-06-14 23:01:00.515 +09:00 [DBG] Connection id "0HNDB6QKL6FP2" accepted.
2025-06-14 23:01:00.516 +09:00 [DBG] Connection id "0HNDB6QKL6FP2" started.
2025-06-14 23:01:00.539 +09:00 [DBG] Connection 0HNDB6QKL6FP2 established using the following protocol: "Tls12"
2025-06-14 23:01:00.544 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:01:00.544 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:01:00.545 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:01:00.545 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:01:00.545 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:01:00.545 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:01:00.545 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:01:00.545 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:01:00.545 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:01:00.545 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:01:00.545 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:01:00.545 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:01:00.545 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:01:00.546 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:01:00.546 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:01:00.546 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:01:00.546 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:01:00.546 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:01:00.546 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:01:00.546 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:01:00.547 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:01:00.548 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:01:00.548 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:01:00.548 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:01:00.548 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:01:00.548 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:01:00.548 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:01:00.549 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:01:00.549 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 23:01:00.549 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 23:01:00.549 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:01:00.549 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:01:00.549 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:01:00.549 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:01:00.549 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:01:00.550 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:01:00.550 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:01:00.550 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:01:00.550 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:01:00.550 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:01:00.550 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.9401ms
2025-06-14 23:01:00.550 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:01:00.550 +09:00 [DBG] Connection id "0HNDB6QKL6FP2" completed keep alive response.
2025-06-14 23:01:00.550 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:01:00.550 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:01:00.550 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:01:00.551 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 6.1819ms
2025-06-14 23:01:04.181 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:01:04.182 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:01:04.182 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:01:04.183 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:01:04.183 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:01:04.183 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:01:04.184 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:01:04.185 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:01:04.185 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:01:04.185 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:01:04.185 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:01:04.185 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:01:04.185 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:01:04.188 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:01:04.188 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:01:04.188 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:01:04.188 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:01:04.188 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:01:04.188 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:01:04.189 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:01:04.190 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:01:04.190 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:01:04.190 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:01:04.190 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:01:04.190 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:01:04.190 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:01:04.191 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:01:04.191 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:01:04.191 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 23:01:04.191 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 23:01:04.191 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:01:04.191 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:01:04.192 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:01:04.192 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:01:04.192 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:01:04.192 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:01:04.192 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:01:04.192 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:01:04.192 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:01:04.192 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:01:04.192 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.6825ms
2025-06-14 23:01:04.192 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:01:04.192 +09:00 [DBG] Connection id "0HNDB6QKL6FP2" completed keep alive response.
2025-06-14 23:01:04.192 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:01:04.192 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:01:04.192 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:01:04.192 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 11.0914ms
2025-06-14 23:01:08.333 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed - null null
2025-06-14 23:01:08.335 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed'
2025-06-14 23:01:08.336 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed'
2025-06-14 23:01:08.336 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:01:08.338 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:01:08.338 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:01:08.339 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:01:08.339 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:01:08.339 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:01:08.339 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:01:08.339 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:01:08.339 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:01:08.339 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:01:08.341 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:01:08.341 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:01:08.341 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 23:01:08.341 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:01:08.341 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:01:08.341 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:01:08.341 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:01:08.343 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:01:08.345 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:01:08.346 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:01:08.346 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:01:08.346 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:01:08.346 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:01:08.346 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:01:08.346 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:01:08.346 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:01:08.347 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:01:08.347 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:01:08.348 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:01:08.349 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:01:08.349 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:01:08.349 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:01:08.349 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:01:08.349 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:01:08.349 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:01:08.350 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:01:08.350 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:01:08.350 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:01:08.350 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:01:08.350 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:01:08.350 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:01:08.350 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 23:01:08.351 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 12.0732ms
2025-06-14 23:01:08.351 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:01:08.351 +09:00 [DBG] Connection id "0HNDB6QKL6FP2" completed keep alive response.
2025-06-14 23:01:08.351 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:01:08.351 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:01:08.351 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:01:08.352 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed - 200 null application/json; charset=utf-8 18.71ms
2025-06-14 23:01:11.472 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:01:11.473 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:01:11.477 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:01:11.477 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:01:11.477 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:01:11.478 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:01:11.479 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:01:11.479 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:01:11.479 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:01:11.479 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:01:11.479 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:01:11.479 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:01:11.479 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:01:11.480 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:01:11.480 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:01:11.480 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:01:11.481 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:01:11.481 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:01:11.481 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:01:11.482 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:01:11.487 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:01:11.490 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:01:11.490 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:01:11.490 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:01:11.490 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:01:11.490 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:01:11.490 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:01:11.490 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:01:11.491 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 23:01:11.491 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 23:01:11.491 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:01:11.491 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:01:11.492 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:01:11.492 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:01:11.492 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:01:11.492 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:01:11.492 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:01:11.492 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:01:11.492 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:01:11.492 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:01:11.492 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 13.2268ms
2025-06-14 23:01:11.493 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:01:11.493 +09:00 [DBG] Connection id "0HNDB6QKL6FP2" completed keep alive response.
2025-06-14 23:01:11.493 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:01:11.493 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:01:11.493 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:01:11.493 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 20.8518ms
2025-06-14 23:02:11.339 +09:00 [DBG] Connection id "0HNDB6QKL6FP1" received FIN.
2025-06-14 23:02:11.344 +09:00 [DBG] Connection id "0HNDB6QKL6FP1" disconnecting.
2025-06-14 23:02:11.350 +09:00 [DBG] Connection id "0HNDB6QKL6FP1" stopped.
2025-06-14 23:02:11.350 +09:00 [DBG] Connection id "0HNDB6QKL6FP1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:02:15.516 +09:00 [DBG] Connection id "0HNDB6QKL6FP2" received FIN.
2025-06-14 23:02:15.517 +09:00 [DBG] Connection id "0HNDB6QKL6FP2" disconnecting.
2025-06-14 23:02:15.518 +09:00 [DBG] Connection id "0HNDB6QKL6FP2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:02:15.572 +09:00 [DBG] Connection id "0HNDB6QKL6FP2" stopped.
2025-06-14 23:06:07.356 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 23:06:07.490 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 23:06:07.800 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:06:07.806 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:06:07.812 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-14 23:06:07.816 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:06:07.828 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:07.832 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:06:07.835 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 23:06:07.841 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 23:06:07.842 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:06:07.842 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:06:07.853 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2025-06-14 23:06:07.854 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (14ms).
2025-06-14 23:06:07.854 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:06:07.857 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:07.884 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:06:07.954 +09:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:06:07.957 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:07.961 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (4ms).
2025-06-14 23:06:07.969 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:06:07.970 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:06:07.970 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:06:07.970 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:07.970 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:06:07.970 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:06:07.971 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 23:06:07.971 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 23:06:07.971 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 23:06:07.971 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:06:07.971 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:07.971 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:06:07.972 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:06:07.972 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:07.973 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:06:08.008 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 23:06:08.112 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 23:06:08.125 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:06:08.129 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:08.129 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:06:08.129 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:06:08.129 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:06:08.129 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 23:06:08.130 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 23:06:08.133 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:08.134 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:06:08.134 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:08.135 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:06:08.135 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:06:08.136 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:06:08.136 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:06:08.138 +09:00 [DBG] Hosting starting
2025-06-14 23:06:08.176 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 23:06:08.177 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 23:06:08.691 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 23:06:08.691 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 23:06:08.691 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 23:06:08.692 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 23:06:08.693 +09:00 [INF] Hosting environment: Development
2025-06-14 23:06:08.693 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 23:06:08.693 +09:00 [DBG] Hosting started
2025-06-14 23:06:18.189 +09:00 [DBG] Connection id "0HNDB9IH1I0MJ" accepted.
2025-06-14 23:06:18.190 +09:00 [DBG] Connection id "0HNDB9IH1I0MJ" started.
2025-06-14 23:06:18.238 +09:00 [DBG] Connection 0HNDB9IH1I0MJ established using the following protocol: "Tls12"
2025-06-14 23:06:18.270 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:06:18.282 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:06:18.284 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:06:18.285 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:06:18.297 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:06:18.297 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:06:18.308 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:06:18.308 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:06:18.308 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:06:18.309 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:06:18.309 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:06:18.309 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:06:18.310 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:06:18.310 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:06:18.318 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:06:18.319 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:06:18.319 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:06:18.319 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:06:18.319 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:06:18.321 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:06:18.328 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:06:18.337 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 23:06:18.369 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 23:06:18.381 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:06:18.381 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:06:18.381 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:06:18.382 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:18.382 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:06:18.382 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:06:18.383 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-14 23:06:18.384 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 23:06:18.388 +09:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 23:06:18.392 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:18.393 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-14 23:06:18.393 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:18.393 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:06:18.394 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:06:18.395 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:06:18.395 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:06:18.395 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:06:18.395 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:06:18.395 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:06:18.441 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 131.2485ms
2025-06-14 23:06:18.444 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:06:18.444 +09:00 [DBG] Connection id "0HNDB9IH1I0MJ" completed keep alive response.
2025-06-14 23:06:18.446 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:06:18.447 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:06:18.448 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:06:18.449 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 180.6435ms
2025-06-14 23:06:37.252 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:06:37.255 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:06:37.256 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:06:37.256 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:06:37.259 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:06:37.259 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:06:37.260 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:06:37.260 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:06:37.261 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:06:37.261 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:06:37.261 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:06:37.261 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:06:37.262 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:06:37.269 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:06:37.269 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:06:37.270 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:06:37.270 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:06:37.270 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:06:37.270 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:06:37.271 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:06:37.313 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:06:37.321 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:06:37.322 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:06:37.322 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:06:37.322 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:37.323 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:06:37.323 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:06:37.323 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:06:37.323 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 23:06:37.324 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
2025-06-14 23:06:37.324 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:37.324 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:06:37.324 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:06:37.325 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:06:37.325 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:06:37.325 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:06:37.325 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:06:37.325 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:06:37.325 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:06:37.325 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:06:37.326 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 64.3222ms
2025-06-14 23:06:37.326 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:06:37.326 +09:00 [DBG] Connection id "0HNDB9IH1I0MJ" completed keep alive response.
2025-06-14 23:06:37.326 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:06:37.326 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:06:37.326 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:06:37.326 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 75.1467ms
2025-06-14 23:07:49.754 +09:00 [DBG] Connection id "0HNDB9IH1I0MJ" received FIN.
2025-06-14 23:07:49.787 +09:00 [DBG] Connection id "0HNDB9IH1I0MJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:07:49.792 +09:00 [DBG] Connection id "0HNDB9IH1I0MJ" disconnecting.
2025-06-14 23:07:49.795 +09:00 [DBG] Connection id "0HNDB9IH1I0MJ" stopped.
2025-06-14 23:08:23.651 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 23:08:23.768 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 23:08:24.057 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:08:24.062 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:08:24.068 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-14 23:08:24.071 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:08:24.078 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:08:24.080 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:08:24.082 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:08:24.084 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 23:08:24.084 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:08:24.084 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:08:24.086 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-14 23:08:24.087 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-14 23:08:24.087 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:08:24.088 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:08:24.090 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:08:24.104 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:08:24.105 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:08:24.107 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 23:08:24.112 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:08:24.112 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:08:24.112 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:08:24.114 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:08:24.114 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:08:24.114 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:08:24.114 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 23:08:24.114 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 23:08:24.114 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 23:08:24.114 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:08:24.115 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:08:24.115 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:08:24.115 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:08:24.115 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:08:24.115 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:08:24.159 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 23:08:24.306 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 23:08:24.320 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:08:24.321 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:08:24.321 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:08:24.321 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:08:24.321 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:08:24.321 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 23:08:24.322 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 23:08:24.325 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:08:24.325 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:08:24.326 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:08:24.326 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:08:24.327 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:08:24.328 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:08:24.328 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:08:24.329 +09:00 [DBG] Hosting starting
2025-06-14 23:08:24.359 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 23:08:24.359 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 23:08:24.592 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 23:08:24.592 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 23:08:24.593 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 23:08:24.593 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 23:08:24.593 +09:00 [INF] Hosting environment: Development
2025-06-14 23:08:24.593 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 23:08:24.594 +09:00 [DBG] Hosting started
2025-06-14 23:08:58.381 +09:00 [DBG] Connection id "0HNDB9K0P8OAJ" accepted.
2025-06-14 23:08:58.382 +09:00 [DBG] Connection id "0HNDB9K0P8OAJ" started.
2025-06-14 23:08:58.424 +09:00 [DBG] Connection 0HNDB9K0P8OAJ established using the following protocol: "Tls12"
2025-06-14 23:08:58.447 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:08:58.458 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:08:58.461 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:08:58.461 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:08:58.474 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:08:58.474 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:08:58.486 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:08:58.487 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:08:58.487 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:08:58.487 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:08:58.487 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:08:58.487 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:08:58.488 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:08:58.489 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:08:58.494 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:08:58.495 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:08:58.496 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:08:58.496 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:08:58.496 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:08:58.498 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:08:58.528 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:08:58.536 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 23:08:58.572 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 23:08:58.583 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:08:58.583 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:08:58.583 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:08:58.583 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:08:58.584 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:08:58.584 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:08:58.585 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-14 23:08:58.586 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:08:58.589 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:08:58.592 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:08:58.593 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 23:08:58.593 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:08:58.593 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:08:58.594 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:08:58.594 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:08:58.594 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:08:58.594 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:08:58.595 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:08:58.595 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:08:58.642 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 152.886ms
2025-06-14 23:08:58.644 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:08:58.644 +09:00 [DBG] Connection id "0HNDB9K0P8OAJ" completed keep alive response.
2025-06-14 23:08:58.645 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:08:58.648 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:08:58.648 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:08:58.649 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 202.3879ms
2025-06-14 23:09:07.666 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - null null
2025-06-14 23:09:07.669 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 23:09:07.670 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 23:09:07.670 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:09:07.673 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:09:07.673 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:09:07.678 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:09:07.678 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:09:07.678 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:09:07.678 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:09:07.678 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:09:07.678 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:09:07.678 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:09:07.679 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:09:07.680 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:09:07.680 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 23:09:07.680 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:09:07.680 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:09:07.680 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:09:07.681 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:09:07.709 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:09:07.712 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-14 23:09:07.715 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-14 23:09:07.716 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-14 23:09:07.884 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-14 23:09:07.898 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(27) ? default(Guid?) : (Guid?)dataReader.GetGuid(27) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(27) ? default(object) : (object)dataReader.GetGuid(27) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(27) ? default(Guid) : dataReader.GetGuid(27);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(28) ? default(Guid) : dataReader.GetGuid(28);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(29) ? default(string) : dataReader.GetString(29);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(31) ? default(long?) : (long?)dataReader.GetInt64(31);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(33) ? default(DateTime) : dataReader.GetDateTime(33);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(34) ? default(string) : dataReader.GetString(34);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 23:09:07.906 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:09:07.907 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:09:07.907 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:09:07.907 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:09:07.907 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:09:07.907 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:09:07.908 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:09:07.908 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:09:07.909 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:09:07.924 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:09:07.947 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:09:07.955 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:09:07.955 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:09:07.955 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 46ms reading results.
2025-06-14 23:09:07.955 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:09:07.955 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:09:07.955 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:09:07.955 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:09:07.955 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:09:07.955 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:09:07.955 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:09:07.956 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 23:09:07.958 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 279.5288ms
2025-06-14 23:09:07.958 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:09:07.958 +09:00 [DBG] Connection id "0HNDB9K0P8OAJ" completed keep alive response.
2025-06-14 23:09:07.958 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:09:07.958 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:09:07.958 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:09:07.958 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - 200 null application/json; charset=utf-8 293.0962ms
2025-06-14 23:10:02.273 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:10:02.274 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:10:02.274 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:10:02.274 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:10:02.278 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:10:02.278 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:10:02.279 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:10:02.279 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:10:02.279 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:10:02.279 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:10:02.279 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:10:02.279 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:10:02.279 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:10:02.281 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:10:02.281 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:10:02.281 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:10:02.281 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:10:02.281 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:10:02.281 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:10:02.282 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:10:02.284 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:10:02.290 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:10:02.291 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:10:02.291 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:10:02.291 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:10:02.291 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:10:02.291 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:10:02.291 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:10:02.291 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:10:02.292 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:10:02.293 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:10:02.293 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:10:02.293 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:10:02.293 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:10:02.293 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:10:02.294 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:10:02.294 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:10:02.294 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:10:02.294 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:10:02.294 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:10:02.296 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 16.131ms
2025-06-14 23:10:02.296 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:10:02.296 +09:00 [DBG] Connection id "0HNDB9K0P8OAJ" completed keep alive response.
2025-06-14 23:10:02.296 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:10:02.296 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:10:02.296 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:10:02.296 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 22.7832ms
2025-06-14 23:11:13.383 +09:00 [DBG] Connection id "0HNDB9K0P8OAJ" received FIN.
2025-06-14 23:11:13.439 +09:00 [DBG] Connection id "0HNDB9K0P8OAJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:11:13.445 +09:00 [DBG] Connection id "0HNDB9K0P8OAJ" disconnecting.
2025-06-14 23:11:13.448 +09:00 [DBG] Connection id "0HNDB9K0P8OAJ" stopped.
2025-06-14 23:11:20.005 +09:00 [DBG] Connection id "0HNDB9K0P8OAK" accepted.
2025-06-14 23:11:20.006 +09:00 [DBG] Connection id "0HNDB9K0P8OAK" started.
2025-06-14 23:11:20.029 +09:00 [DBG] Connection 0HNDB9K0P8OAK established using the following protocol: "Tls12"
2025-06-14 23:11:20.043 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - null null
2025-06-14 23:11:20.044 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 23:11:20.044 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 23:11:20.044 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:11:20.045 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:11:20.045 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:11:20.046 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:11:20.046 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:11:20.046 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:11:20.046 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:11:20.046 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:11:20.046 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:11:20.046 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:11:20.048 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:11:20.048 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:11:20.048 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 23:11:20.048 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:11:20.048 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:11:20.048 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:11:20.048 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:11:20.050 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:11:20.050 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:11:20.051 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:11:20.051 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:11:20.051 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:11:20.051 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:11:20.051 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:11:20.051 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:11:20.051 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:11:20.052 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:11:20.053 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:11:20.054 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:11:20.054 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:11:20.054 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:11:20.054 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:11:20.054 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:11:20.054 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:11:20.054 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:11:20.054 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:11:20.055 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:11:20.055 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:11:20.055 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:11:20.055 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 23:11:20.055 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 8.7172ms
2025-06-14 23:11:20.055 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:11:20.055 +09:00 [DBG] Connection id "0HNDB9K0P8OAK" completed keep alive response.
2025-06-14 23:11:20.056 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:11:20.056 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:11:20.056 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:11:20.056 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - 200 null application/json; charset=utf-8 13.6507ms
2025-06-14 23:11:26.361 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:11:26.361 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:11:26.361 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:11:26.362 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:11:26.362 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:11:26.362 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:11:26.362 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:11:26.362 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:11:26.363 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:11:26.363 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:11:26.363 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:11:26.363 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:11:26.363 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:11:26.363 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:11:26.363 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:11:26.363 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:11:26.363 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:11:26.363 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:11:26.363 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:11:26.364 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:11:26.365 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:11:26.366 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:11:26.366 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:11:26.366 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:11:26.366 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:11:26.366 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:11:26.366 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:11:26.366 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:11:26.367 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:11:26.367 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:11:26.367 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:11:26.368 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:11:26.368 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:11:26.368 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:11:26.368 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:11:26.368 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:11:26.368 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:11:26.368 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:11:26.368 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:11:26.368 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:11:26.370 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6.8653ms
2025-06-14 23:11:26.370 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:11:26.370 +09:00 [DBG] Connection id "0HNDB9K0P8OAK" completed keep alive response.
2025-06-14 23:11:26.370 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:11:26.370 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:11:26.370 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:11:26.371 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 9.6971ms
2025-06-14 23:12:35.014 +09:00 [DBG] Connection id "0HNDB9K0P8OAK" received FIN.
2025-06-14 23:12:35.021 +09:00 [DBG] Connection id "0HNDB9K0P8OAK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:12:35.022 +09:00 [DBG] Connection id "0HNDB9K0P8OAK" disconnecting.
2025-06-14 23:12:35.075 +09:00 [DBG] Connection id "0HNDB9K0P8OAK" stopped.
2025-06-14 23:19:02.378 +09:00 [DBG] Connection id "0HNDB9K0P8OAL" accepted.
2025-06-14 23:19:02.410 +09:00 [DBG] Connection id "0HNDB9K0P8OAL" started.
2025-06-14 23:19:02.457 +09:00 [DBG] Connection 0HNDB9K0P8OAL established using the following protocol: "Tls12"
2025-06-14 23:19:02.464 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:19:02.464 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:19:02.464 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:19:02.464 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:19:02.465 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:19:02.465 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:19:02.466 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:19:02.467 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:19:02.467 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:19:02.467 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:19:02.467 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:19:02.468 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:19:02.469 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:19:02.472 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:19:02.473 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:19:02.474 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:19:02.474 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:19:02.474 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:19:02.474 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:19:02.475 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:19:02.476 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:19:02.477 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:19:02.477 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:19:02.477 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:19:02.479 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:19:02.479 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:19:02.479 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:19:02.479 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:19:02.479 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:19:02.481 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:19:02.482 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:19:02.482 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:19:02.482 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:19:02.483 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:19:02.483 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:19:02.483 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:19:02.483 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:19:02.483 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:19:02.483 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:19:02.484 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:19:02.484 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 15.7935ms
2025-06-14 23:19:02.484 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:19:02.484 +09:00 [DBG] Connection id "0HNDB9K0P8OAL" completed keep alive response.
2025-06-14 23:19:02.484 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:19:02.484 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:19:02.484 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:19:02.485 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 21.0877ms
2025-06-14 23:19:57.897 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:19:57.898 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:19:57.899 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:19:57.899 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:19:57.900 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:19:57.900 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:19:57.901 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:19:57.901 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:19:57.901 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:19:57.904 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:19:57.904 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:19:57.904 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:19:57.904 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:19:57.905 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:19:57.906 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:19:57.906 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:19:57.906 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:19:57.906 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:19:57.906 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:19:57.906 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:19:57.910 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:19:57.915 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:19:57.915 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:19:57.915 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:19:57.915 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:19:57.915 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:19:57.916 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:19:57.916 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:19:57.917 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:19:57.917 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:19:57.918 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:19:57.918 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:19:57.918 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:19:57.919 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:19:57.919 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:19:57.919 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:19:57.919 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:19:57.919 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:19:57.919 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:19:57.919 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:19:57.920 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 15.8669ms
2025-06-14 23:19:57.920 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:19:57.920 +09:00 [DBG] Connection id "0HNDB9K0P8OAL" completed keep alive response.
2025-06-14 23:19:57.920 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:19:57.920 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:19:57.920 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:19:57.920 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 23.7041ms
2025-06-14 23:20:32.795 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:20:32.796 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:20:32.796 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:20:32.797 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:20:32.799 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:20:32.799 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:20:32.800 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:20:32.800 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:20:32.800 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:20:32.801 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:20:32.801 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:20:32.801 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:20:32.801 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:20:32.802 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:20:32.802 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:20:32.802 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:20:32.802 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:20:32.802 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:20:32.802 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:20:32.803 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:20:32.804 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:20:32.805 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:20:32.805 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:20:32.805 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:20:32.806 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:20:32.806 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:20:32.806 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:20:32.806 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:20:32.806 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:20:32.808 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:20:32.808 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:20:32.808 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:20:32.808 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:20:32.808 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:20:32.808 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:20:32.808 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:20:32.808 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:20:32.808 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:20:32.808 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:20:32.808 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:20:32.809 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.201ms
2025-06-14 23:20:32.809 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:20:32.809 +09:00 [DBG] Connection id "0HNDB9K0P8OAL" completed keep alive response.
2025-06-14 23:20:32.809 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:20:32.809 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:20:32.809 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:20:32.809 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 19.0722ms
2025-06-14 23:20:47.101 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:20:47.101 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:20:47.101 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:20:47.101 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:20:47.101 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:20:47.102 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:20:47.102 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:20:47.102 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:20:47.102 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:20:47.102 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:20:47.102 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:20:47.102 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:20:47.102 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:20:47.103 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:20:47.103 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:20:47.103 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:20:47.103 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:20:47.103 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:20:47.103 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:20:47.103 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:20:47.103 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:20:47.104 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:20:47.104 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:20:47.104 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:20:47.104 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:20:47.104 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:20:47.104 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:20:47.104 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:20:47.104 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:20:47.104 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:20:47.105 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:20:47.105 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:20:47.105 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:20:47.105 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:20:47.105 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:20:47.105 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:20:47.105 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:20:47.105 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:20:47.105 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:20:47.105 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:20:47.105 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 3.101ms
2025-06-14 23:20:47.105 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:20:47.105 +09:00 [DBG] Connection id "0HNDB9K0P8OAL" completed keep alive response.
2025-06-14 23:20:47.106 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:20:47.106 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:20:47.106 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:20:47.106 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 5.2723ms
2025-06-14 23:20:57.002 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:20:57.009 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:20:57.009 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:20:57.009 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:20:57.009 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:20:57.010 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:20:57.010 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:20:57.010 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:20:57.010 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:20:57.010 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:20:57.010 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:20:57.010 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:20:57.010 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:20:57.011 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:20:57.011 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:20:57.011 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:20:57.011 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:20:57.011 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:20:57.011 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:20:57.011 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:20:57.012 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:20:57.013 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:20:57.013 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:20:57.013 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:20:57.013 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:20:57.014 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:20:57.014 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:20:57.014 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:20:57.014 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:20:57.014 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:20:57.015 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:20:57.015 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:20:57.015 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:20:57.015 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:20:57.015 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:20:57.015 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:20:57.015 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:20:57.016 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:20:57.016 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:20:57.016 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:20:57.017 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6.6713ms
2025-06-14 23:20:57.017 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:20:57.017 +09:00 [DBG] Connection id "0HNDB9K0P8OAL" completed keep alive response.
2025-06-14 23:20:57.017 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:20:57.017 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:20:57.017 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:20:57.017 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 15.4528ms
2025-06-14 23:21:10.659 +09:00 [DBG] Connection id "0HNDB9K0P8OAM" accepted.
2025-06-14 23:21:10.659 +09:00 [DBG] Connection id "0HNDB9K0P8OAM" started.
2025-06-14 23:21:10.685 +09:00 [DBG] Connection 0HNDB9K0P8OAM established using the following protocol: "Tls12"
2025-06-14 23:21:10.689 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:21:10.689 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:21:10.689 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:21:10.689 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:21:10.690 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:21:10.690 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:21:10.690 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:21:10.690 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:21:10.690 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:21:10.690 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:21:10.690 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:21:10.690 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:21:10.690 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:21:10.691 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:21:10.691 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:21:10.691 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:21:10.691 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:21:10.691 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:21:10.691 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:21:10.691 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:21:10.692 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:21:10.693 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:21:10.693 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:21:10.693 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:21:10.693 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:21:10.693 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:21:10.693 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:21:10.693 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:21:10.693 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:21:10.694 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:21:10.694 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:21:10.694 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:21:10.694 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:21:10.694 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:21:10.694 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:21:10.694 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:21:10.694 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:21:10.694 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:21:10.694 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:21:10.694 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:21:10.695 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.7091ms
2025-06-14 23:21:10.695 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:21:10.695 +09:00 [DBG] Connection id "0HNDB9K0P8OAM" completed keep alive response.
2025-06-14 23:21:10.695 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:21:10.695 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:21:10.695 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:21:10.695 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 6.3935ms
2025-06-14 23:21:17.384 +09:00 [DBG] Connection id "0HNDB9K0P8OAL" received FIN.
2025-06-14 23:21:17.385 +09:00 [DBG] Connection id "0HNDB9K0P8OAL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:21:17.390 +09:00 [DBG] Connection id "0HNDB9K0P8OAL" disconnecting.
2025-06-14 23:21:17.393 +09:00 [DBG] Connection id "0HNDB9K0P8OAL" stopped.
2025-06-14 23:21:22.572 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:21:22.573 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:21:22.573 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:21:22.573 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:21:22.581 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:21:22.582 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:21:22.583 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:21:22.584 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:21:22.584 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:21:22.584 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:21:22.584 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:21:22.584 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:21:22.584 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:21:22.586 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:21:22.590 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:21:22.593 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:21:22.594 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:21:22.594 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:21:22.594 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:21:22.594 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:21:22.596 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:21:22.598 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:21:22.598 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:21:22.598 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:21:22.598 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:21:22.598 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:21:22.598 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:21:22.598 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:21:22.598 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:21:22.599 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:21:22.599 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:21:22.599 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:21:22.599 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:21:22.599 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:21:22.600 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:21:22.600 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:21:22.600 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:21:22.600 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:21:22.600 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:21:22.600 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:21:22.600 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 15.9197ms
2025-06-14 23:21:22.600 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:21:22.600 +09:00 [DBG] Connection id "0HNDB9K0P8OAM" completed keep alive response.
2025-06-14 23:21:22.601 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:21:22.601 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:21:22.601 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:21:22.601 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 29.0605ms
2025-06-14 23:21:30.595 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:21:30.595 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:21:30.595 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:21:30.595 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:21:30.596 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:21:30.596 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:21:30.596 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:21:30.596 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:21:30.596 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:21:30.596 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:21:30.596 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:21:30.596 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:21:30.596 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:21:30.596 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:21:30.596 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:21:30.596 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:21:30.596 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:21:30.596 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:21:30.596 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:21:30.597 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:21:30.597 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:21:30.597 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:21:30.597 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:21:30.598 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:21:30.599 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:21:30.599 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:21:30.599 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:21:30.599 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:21:30.599 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:21:30.599 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:21:30.599 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:21:30.599 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:21:30.599 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:21:30.599 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:21:30.600 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:21:30.600 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:21:30.600 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:21:30.600 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:21:30.600 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:21:30.600 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:21:30.600 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.0077ms
2025-06-14 23:21:30.600 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:21:30.600 +09:00 [DBG] Connection id "0HNDB9K0P8OAM" completed keep alive response.
2025-06-14 23:21:30.600 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:21:30.601 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:21:30.601 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:21:30.601 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 5.731ms
2025-06-14 23:22:40.651 +09:00 [DBG] Connection id "0HNDB9K0P8OAM" received FIN.
2025-06-14 23:22:40.684 +09:00 [DBG] Connection id "0HNDB9K0P8OAM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:22:40.685 +09:00 [DBG] Connection id "0HNDB9K0P8OAM" disconnecting.
2025-06-14 23:22:40.715 +09:00 [DBG] Connection id "0HNDB9K0P8OAM" stopped.
2025-06-14 23:23:06.470 +09:00 [DBG] Connection id "0HNDB9K0P8OAN" accepted.
2025-06-14 23:23:06.475 +09:00 [DBG] Connection id "0HNDB9K0P8OAN" started.
2025-06-14 23:23:06.525 +09:00 [DBG] Connection 0HNDB9K0P8OAN established using the following protocol: "Tls12"
2025-06-14 23:23:06.529 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - null null
2025-06-14 23:23:06.529 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 23:23:06.529 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 23:23:06.530 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:23:06.531 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:23:06.531 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:23:06.531 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:23:06.531 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:23:06.531 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:23:06.531 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:23:06.531 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:23:06.532 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:23:06.532 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:23:06.533 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:23:06.534 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:23:06.534 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 23:23:06.534 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:23:06.534 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:23:06.534 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:23:06.534 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:23:06.535 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:23:06.536 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:23:06.537 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:23:06.537 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:23:06.537 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:23:06.537 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:23:06.537 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:23:06.537 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:23:06.537 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:23:06.538 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:23:06.539 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:23:06.540 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:23:06.540 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:23:06.540 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:23:06.540 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:23:06.540 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:23:06.540 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:23:06.540 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:23:06.541 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:23:06.541 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:23:06.541 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:23:06.541 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:23:06.541 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 23:23:06.541 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 9.6726ms
2025-06-14 23:23:06.541 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:23:06.541 +09:00 [DBG] Connection id "0HNDB9K0P8OAN" completed keep alive response.
2025-06-14 23:23:06.541 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:23:06.542 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:23:06.542 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:23:06.542 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - 200 null application/json; charset=utf-8 12.8256ms
2025-06-14 23:24:21.475 +09:00 [DBG] Connection id "0HNDB9K0P8OAN" received FIN.
2025-06-14 23:24:21.512 +09:00 [DBG] Connection id "0HNDB9K0P8OAN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:24:21.513 +09:00 [DBG] Connection id "0HNDB9K0P8OAN" disconnecting.
2025-06-14 23:24:21.518 +09:00 [DBG] Connection id "0HNDB9K0P8OAN" stopped.
2025-06-14 23:24:22.755 +09:00 [DBG] Connection id "0HNDB9K0P8OAO" accepted.
2025-06-14 23:24:22.755 +09:00 [DBG] Connection id "0HNDB9K0P8OAO" started.
2025-06-14 23:24:22.780 +09:00 [DBG] Connection 0HNDB9K0P8OAO established using the following protocol: "Tls12"
2025-06-14 23:24:22.795 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:24:22.795 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:24:22.795 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:24:22.796 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:24:22.796 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:24:22.797 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:24:22.797 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:24:22.797 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:24:22.797 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:24:22.797 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:24:22.797 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:24:22.797 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:24:22.797 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:24:22.798 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:24:22.799 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:24:22.799 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:24:22.799 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:24:22.799 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:24:22.799 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:24:22.799 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:24:22.801 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:24:22.805 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:24:22.805 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:24:22.805 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:24:22.805 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:24:22.805 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:24:22.805 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:24:22.805 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:24:22.806 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:24:22.806 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:24:22.807 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:24:22.807 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:24:22.807 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:24:22.807 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:24:22.807 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:24:22.807 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:24:22.807 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:24:22.807 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:24:22.808 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:24:22.808 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:24:22.809 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 11.204ms
2025-06-14 23:24:22.809 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:24:22.809 +09:00 [DBG] Connection id "0HNDB9K0P8OAO" completed keep alive response.
2025-06-14 23:24:22.809 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:24:22.809 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:24:22.809 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:24:22.809 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 14.2967ms
2025-06-14 23:25:37.757 +09:00 [DBG] Connection id "0HNDB9K0P8OAO" received FIN.
2025-06-14 23:25:37.765 +09:00 [DBG] Connection id "0HNDB9K0P8OAO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:25:37.765 +09:00 [DBG] Connection id "0HNDB9K0P8OAO" disconnecting.
2025-06-14 23:25:37.790 +09:00 [DBG] Connection id "0HNDB9K0P8OAO" stopped.
2025-06-14 23:26:40.663 +09:00 [DBG] Connection id "0HNDB9K0P8OAP" accepted.
2025-06-14 23:26:40.674 +09:00 [DBG] Connection id "0HNDB9K0P8OAP" started.
2025-06-14 23:26:40.702 +09:00 [DBG] Connection 0HNDB9K0P8OAP established using the following protocol: "Tls12"
2025-06-14 23:26:40.707 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - null null
2025-06-14 23:26:40.707 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 23:26:40.708 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 23:26:40.708 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:26:40.709 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:26:40.709 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:26:40.709 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:26:40.710 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:26:40.710 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:26:40.710 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:26:40.710 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:26:40.710 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:26:40.710 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:26:40.711 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:26:40.712 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:26:40.712 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 23:26:40.712 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:26:40.712 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:26:40.712 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:26:40.712 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:26:40.740 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:26:40.741 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:26:40.741 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:26:40.741 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:26:40.741 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:26:40.741 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:26:40.742 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:26:40.742 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:26:40.742 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:26:40.743 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:26:40.744 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:26:40.744 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:26:40.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:26:40.745 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:26:40.745 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:26:40.745 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:26:40.745 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:26:40.745 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:26:40.745 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:26:40.745 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:26:40.745 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:26:40.745 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:26:40.745 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 23:26:40.746 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 35.9345ms
2025-06-14 23:26:40.746 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:26:40.746 +09:00 [DBG] Connection id "0HNDB9K0P8OAP" completed keep alive response.
2025-06-14 23:26:40.746 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:26:40.746 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:26:40.746 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:26:40.746 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - 200 null application/json; charset=utf-8 39.3175ms
2025-06-14 23:26:43.618 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:26:43.619 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:26:43.619 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:26:43.619 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:26:43.619 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:26:43.619 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:26:43.619 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:26:43.619 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:26:43.619 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:26:43.619 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:26:43.620 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:26:43.620 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:26:43.620 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:26:43.620 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:26:43.620 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:26:43.620 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:26:43.621 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:26:43.621 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:26:43.621 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:26:43.621 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:26:43.623 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:26:43.624 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:26:43.625 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:26:43.625 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:26:43.625 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:26:43.625 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:26:43.625 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:26:43.625 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:26:43.625 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:26:43.626 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:26:43.626 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:26:43.626 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:26:43.627 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:26:43.627 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:26:43.628 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:26:43.628 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:26:43.628 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:26:43.628 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:26:43.628 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:26:43.628 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:26:43.628 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.4148ms
2025-06-14 23:26:43.628 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:26:43.628 +09:00 [DBG] Connection id "0HNDB9K0P8OAP" completed keep alive response.
2025-06-14 23:26:43.628 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:26:43.628 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:26:43.629 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:26:43.629 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 10.125ms
2025-06-14 23:27:42.334 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 23:27:42.432 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 23:27:42.714 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:27:42.718 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:27:42.730 +09:00 [DBG] Created DbConnection. (10ms).
2025-06-14 23:27:42.733 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:27:42.740 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:27:42.742 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:27:42.744 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:27:42.748 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 23:27:42.748 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:27:42.748 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:27:42.750 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-14 23:27:42.751 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-14 23:27:42.751 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:27:42.752 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:27:42.754 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:27:42.770 +09:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:27:42.771 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:27:42.772 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 23:27:42.775 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:27:42.775 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:27:42.775 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:27:42.775 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:27:42.775 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:27:42.776 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:27:42.776 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 23:27:42.776 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 23:27:42.776 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 23:27:42.776 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:27:42.776 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:27:42.776 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:27:42.776 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:27:42.776 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:27:42.777 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:27:42.798 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 23:27:42.899 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 23:27:42.913 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:27:42.914 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:27:42.914 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:27:42.914 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:27:42.914 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:27:42.914 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 23:27:42.915 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 23:27:42.917 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:27:42.917 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:27:42.919 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:27:42.919 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:27:42.919 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:27:42.920 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:27:42.920 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:27:42.921 +09:00 [DBG] Hosting starting
2025-06-14 23:27:42.932 +09:00 [DBG] Middleware loaded
2025-06-14 23:27:42.936 +09:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16091 B).
2025-06-14 23:27:42.936 +09:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (776 B).
2025-06-14 23:27:42.950 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 23:27:42.950 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 23:27:42.950 +09:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-06-14 23:27:43.149 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 23:27:43.149 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 23:27:43.149 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 23:27:43.149 +09:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-06-14 23:27:43.149 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 23:27:43.149 +09:00 [INF] Hosting environment: Development
2025-06-14 23:27:43.149 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 23:27:43.149 +09:00 [DBG] Hosting started
2025-06-14 23:28:01.282 +09:00 [DBG] Connection id "0HNDB9ULCPKPP" accepted.
2025-06-14 23:28:01.285 +09:00 [DBG] Connection id "0HNDB9ULCPKPP" started.
2025-06-14 23:28:01.332 +09:00 [DBG] Connection 0HNDB9ULCPKPP established using the following protocol: "Tls12"
2025-06-14 23:28:01.356 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:28:01.372 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:28:01.373 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:28:01.374 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:28:01.390 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:28:01.390 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:28:01.400 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:28:01.401 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:28:01.401 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:28:01.401 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:28:01.401 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:28:01.401 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:28:01.402 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:28:01.402 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:28:01.404 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:28:01.405 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:28:01.405 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:28:01.405 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:28:01.405 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:28:01.407 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:28:01.415 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:28:01.423 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 23:28:01.453 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 23:28:01.462 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:28:01.462 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:28:01.462 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:28:01.463 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:01.465 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:28:01.465 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:28:01.465 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:28:01.466 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:28:01.469 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:28:01.471 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:01.471 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:28:01.471 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:01.472 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:28:01.472 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:28:01.473 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:28:01.473 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:28:01.473 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:28:01.473 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:28:01.473 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:28:01.515 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 112.574ms
2025-06-14 23:28:01.517 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:28:01.517 +09:00 [DBG] Connection id "0HNDB9ULCPKPP" completed keep alive response.
2025-06-14 23:28:01.518 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:28:01.519 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:28:01.519 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:28:01.520 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 164.4129ms
2025-06-14 23:28:39.250 +09:00 [INF] Application is shutting down...
2025-06-14 23:28:39.254 +09:00 [DBG] Hosting stopping
2025-06-14 23:28:39.273 +09:00 [DBG] Connection id "0HNDB9ULCPKPP" disconnecting.
2025-06-14 23:28:39.276 +09:00 [DBG] Connection id "0HNDB9ULCPKPP" stopped.
2025-06-14 23:28:39.277 +09:00 [DBG] Connection id "0HNDB9ULCPKPP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:28:39.281 +09:00 [DBG] Hosting stopped
2025-06-14 23:28:53.150 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 23:28:53.260 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 23:28:53.547 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:28:53.553 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:28:53.558 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-14 23:28:53.561 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:28:53.569 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:53.572 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:28:53.574 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:28:53.576 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 23:28:53.576 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:28:53.576 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:28:53.579 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-14 23:28:53.579 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-14 23:28:53.579 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:28:53.580 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:53.583 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:28:53.597 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:28:53.598 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:53.600 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 23:28:53.602 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:28:53.602 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:28:53.603 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:28:53.603 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:53.603 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:28:53.603 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:28:53.603 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 23:28:53.603 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 23:28:53.603 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 23:28:53.603 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:28:53.603 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:53.603 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:28:53.604 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:28:53.604 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:53.604 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:28:53.626 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 23:28:53.725 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 23:28:53.739 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:28:53.740 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:53.740 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:28:53.740 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:28:53.740 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:28:53.740 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 23:28:53.741 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 23:28:53.744 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:53.744 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:28:53.745 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:53.745 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:28:53.746 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:28:53.746 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:28:53.746 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:28:53.748 +09:00 [DBG] Hosting starting
2025-06-14 23:28:53.782 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 23:28:53.782 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 23:28:54.009 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 23:28:54.009 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 23:28:54.009 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 23:28:54.009 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 23:28:54.010 +09:00 [INF] Hosting environment: Development
2025-06-14 23:28:54.010 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 23:28:54.010 +09:00 [DBG] Hosting started
2025-06-14 23:28:58.913 +09:00 [DBG] Connection id "0HNDB9V6IE4H3" accepted.
2025-06-14 23:28:58.914 +09:00 [DBG] Connection id "0HNDB9V6IE4H3" started.
2025-06-14 23:28:58.956 +09:00 [DBG] Connection 0HNDB9V6IE4H3 established using the following protocol: "Tls12"
2025-06-14 23:28:58.985 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:28:58.998 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:28:58.999 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:28:59.000 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:28:59.014 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:28:59.014 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:28:59.024 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:28:59.025 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:28:59.025 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:28:59.025 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:28:59.025 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:28:59.026 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:28:59.026 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:28:59.027 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:28:59.031 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:28:59.032 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:28:59.032 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:28:59.032 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:28:59.033 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:28:59.034 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:28:59.061 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:28:59.068 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 23:28:59.104 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            ApprovalId -> 0
            RequestTitle -> 1
            RequestedAt -> 2
            CurrentApproverName -> 3
            CurrentApproverEmployeeNumber -> 4
            CurrentActionStatus -> 5
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, (
            SELECT TOP(1) a0.ApproverName
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.Sequence == a.CurrentStep)) AS CurrentApproverName, (
            SELECT TOP(1) a1.ApproverEmployeeNumber
            FROM ApprovalSteps AS a1
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a1.ApprovalId)) && (a1.Sequence == a.CurrentStep)) AS CurrentApproverEmployeeNumber, (
            SELECT TOP(1) a2.ActionStatus
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)) AS CurrentActionStatus
        FROM ApprovalRequests AS a
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Guid? value1;
        string value2;
        DateTime? value3;
        string value4;
        string value5;
        string value6;
        value1 = (Guid?)dataReader.GetGuid(0);
        value2 = dataReader.GetString(1);
        value3 = (DateTime?)dataReader.GetDateTime(2);
        value4 = dataReader.IsDBNull(3) ? default(string) : dataReader.GetString(3);
        value5 = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
        value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
        return new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)value1, 
            RequestTitle = value2, 
            RequestedAt = (DateTime)value3, 
            CurrentApproverName = value4, 
            CurrentApproverEmployeeNumber = value5, 
            CurrentActionStatus = value6 
        }
        ;
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 23:28:59.116 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:28:59.116 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:28:59.116 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:28:59.116 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:59.116 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:28:59.116 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:28:59.119 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-06-14 23:28:59.120 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:28:59.126 +09:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", (
    SELECT "a0"."ApproverName"
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverName", (
    SELECT "a1"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a1"
    WHERE "a"."ApprovalId" = "a1"."ApprovalId" AND "a1"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentApproverEmployeeNumber", (
    SELECT "a2"."ActionStatus"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1) AS "CurrentActionStatus"
FROM "ApprovalRequests" AS "a"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC
2025-06-14 23:28:59.131 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:59.131 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 5ms reading results.
2025-06-14 23:28:59.131 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:28:59.131 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:28:59.132 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:28:59.133 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:28:59.133 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:28:59.133 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:28:59.134 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:28:59.134 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:28:59.186 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 159.1538ms
2025-06-14 23:28:59.189 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:28:59.190 +09:00 [DBG] Connection id "0HNDB9V6IE4H3" completed keep alive response.
2025-06-14 23:28:59.191 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:28:59.193 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:28:59.196 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (2ms).
2025-06-14 23:28:59.198 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 214.3376ms
2025-06-14 23:30:20.702 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-14 23:30:20.802 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-14 23:30:21.135 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:30:21.140 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:30:21.148 +09:00 [DBG] Created DbConnection. (6ms).
2025-06-14 23:30:21.151 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:21.162 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:21.164 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:21.166 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:21.170 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 23:30:21.171 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:30:21.171 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:30:21.175 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-14 23:30:21.176 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2025-06-14 23:30:21.176 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:21.177 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:21.179 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:30:21.195 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:30:21.196 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:21.197 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 23:30:21.199 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:30:21.199 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:30:21.199 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:21.200 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:21.200 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:21.200 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:21.200 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-14 23:30:21.200 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 23:30:21.200 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-14 23:30:21.200 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:21.200 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:21.200 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:30:21.201 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-14 23:30:21.201 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:21.201 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:21.221 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-14 23:30:21.324 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 23:30:21.336 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:21.337 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:21.337 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:30:21.337 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:30:21.337 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:30:21.337 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 23:30:21.338 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-14 23:30:21.340 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:21.341 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:30:21.343 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:21.343 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:21.344 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:30:21.344 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:21.344 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:21.346 +09:00 [DBG] Hosting starting
2025-06-14 23:30:21.354 +09:00 [DBG] Middleware loaded
2025-06-14 23:30:21.355 +09:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16091 B).
2025-06-14 23:30:21.355 +09:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (776 B).
2025-06-14 23:30:21.364 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-14 23:30:21.364 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-14 23:30:21.365 +09:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-06-14 23:30:21.594 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-14 23:30:21.594 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-14 23:30:21.595 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-14 23:30:21.595 +09:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-06-14 23:30:21.595 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-14 23:30:21.595 +09:00 [INF] Hosting environment: Development
2025-06-14 23:30:21.595 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-14 23:30:21.595 +09:00 [DBG] Hosting started
2025-06-14 23:30:21.818 +09:00 [DBG] Connection id "0HNDB9VV92HGN" accepted.
2025-06-14 23:30:21.818 +09:00 [DBG] Connection id "0HNDB9VV92HGN" started.
2025-06-14 23:30:21.854 +09:00 [DBG] Connection 0HNDB9VV92HGN established using the following protocol: "Tls12"
2025-06-14 23:30:21.871 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:30:21.888 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:30:21.892 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:30:21.893 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:30:21.903 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:30:21.904 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:30:21.915 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:30:21.915 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:30:21.916 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:30:21.916 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:30:21.916 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:30:21.916 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:30:21.917 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:30:21.917 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:30:21.919 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:30:21.920 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:30:21.920 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:30:21.921 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:30:21.921 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:30:21.923 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:30:21.939 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:30:21.949 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantName = r.ApplicantName, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantPosition = r.ApplicantPosition, 
        Steps = r.Steps, 
        Attachments = r.Attachments, 
        Status = r.Status, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 23:30:22.009 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-14 23:30:22.022 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            List<ApprovalStep> namelessParameter{0};
            List<ApprovalAttachment> namelessParameter{1};
            string value11;
            int? value12;
            string value13;
            string value14;
            string value15;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            namelessParameter{1} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalAttachment, List<ApprovalAttachment>>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
                }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()]);
            value11 = dataReader.GetString(28);
            value12 = (int?)dataReader.GetInt32(29);
            value13 = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
            value14 = dataReader.IsDBNull(31) ? default(string) : dataReader.GetString(31);
            value15 = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                namelessParameter{0}, 
                namelessParameter{1}, 
                value11, 
                (object)value12, 
                value13, 
                value14, 
                value15 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(8) ? default(object) : (object)dataReader.GetGuid(8) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(8) ? default(Guid) : dataReader.GetGuid(8);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(11) ? default(Guid) : dataReader.GetGuid(11);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(16) ? default(bool) : dataReader.GetBoolean(16);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(18) ? default(int) : dataReader.GetInt32(18);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalAttachment>, ApprovalAttachment, ApprovalAttachment>(
            collectionId: 1, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
            { 
                (object)(Guid?)dataReader.GetGuid(0), 
                (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
            }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(20) ? default(Guid?) : (Guid?)dataReader.GetGuid(20) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
            { 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
            }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalAttachment entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalAttachment instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalAttachment);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(20) ? default(object) : (object)dataReader.GetGuid(20) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalAttachment)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                {
                                    return 
                                    {
                                        ApprovalAttachment instance;
                                        instance = new ApprovalAttachment();
                                        instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(20) ? default(Guid) : dataReader.GetGuid(20);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(21) ? default(Guid) : dataReader.GetGuid(21);
                                        instance.<FileName>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<FilePath>k__BackingField = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
                                        instance.<FileSize>k__BackingField = dataReader.IsDBNull(24) ? default(long?) : (long?)dataReader.GetInt64(24);
                                        instance.<FileType>k__BackingField = dataReader.IsDBNull(25) ? default(string) : dataReader.GetString(25);
                                        instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(26) ? default(DateTime) : dataReader.GetDateTime(26);
                                        instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalAttachment)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            ApplicantDepartment = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[8]), 
            Attachments = (List<ApprovalAttachment>)(resultContext.Values[9]), 
            Status = (string)(resultContext.Values[10]), 
            CurrentStep = (int)(int?)(resultContext.Values[11]), 
            CurrentApproverName = (string)(resultContext.Values[12]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[13]), 
            CurrentActionStatus = (string)(resultContext.Values[14]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 23:30:22.044 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:30:22.044 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:30:22.045 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:22.045 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:22.045 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:30:22.045 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:30:22.046 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:30:22.047 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:30:22.053 +09:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:30:22.078 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:22.098 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:22.107 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:22.107 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:22.108 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:22.110 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:22.110 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:22.110 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:22.110 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:22.110 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:22.110 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:22.110 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 57ms reading results.
2025-06-14 23:30:22.111 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:22.111 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:22.112 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:30:22.113 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:30:22.113 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:30:22.113 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:30:22.113 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:30:22.113 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:30:22.167 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 249.823ms
2025-06-14 23:30:22.171 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:30:22.171 +09:00 [DBG] Connection id "0HNDB9VV92HGN" completed keep alive response.
2025-06-14 23:30:22.174 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:30:22.179 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:22.180 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-14 23:30:22.181 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 310.6206ms
2025-06-14 23:30:35.968 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:30:35.971 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:30:35.972 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:30:35.972 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:30:35.974 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:30:35.975 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:30:35.975 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:30:35.975 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:30:35.976 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:30:35.976 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:30:35.976 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:30:35.976 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:30:35.976 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:30:35.978 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:30:35.979 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:30:35.981 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:30:35.981 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:30:35.981 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:30:35.981 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:30:35.982 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:30:36.018 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:30:36.023 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:30:36.024 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:30:36.024 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:36.025 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:36.025 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:30:36.025 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:30:36.026 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:30:36.026 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:30:36.027 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:30:36.029 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:36.029 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:36.029 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:36.029 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:36.030 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:36.030 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:36.030 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:36.030 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:36.030 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:36.030 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:36.030 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:36.030 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:30:36.030 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:36.031 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:36.031 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:30:36.032 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:30:36.032 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:30:36.032 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:30:36.032 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:30:36.032 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:30:36.033 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 56.4333ms
2025-06-14 23:30:36.033 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:30:36.033 +09:00 [DBG] Connection id "0HNDB9VV92HGN" completed keep alive response.
2025-06-14 23:30:36.033 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:30:36.033 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:36.034 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:36.034 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 66.096ms
2025-06-14 23:30:38.427 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:30:38.427 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:30:38.427 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:30:38.427 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:30:38.429 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:30:38.430 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:30:38.430 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:30:38.430 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:30:38.431 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:30:38.431 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:30:38.431 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:30:38.431 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:30:38.431 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:30:38.433 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:30:38.434 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:30:38.434 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:30:38.434 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:30:38.434 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:30:38.434 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:30:38.435 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:30:38.436 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:30:38.436 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:30:38.436 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:30:38.437 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:38.437 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:38.437 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:30:38.437 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:30:38.438 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:30:38.438 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:30:38.438 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:30:38.439 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:38.439 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:38.439 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:38.439 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:38.439 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:38.440 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:38.440 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:38.440 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:38.441 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:38.441 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:38.441 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:38.441 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:30:38.442 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:38.442 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:38.442 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:30:38.443 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:30:38.443 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:30:38.443 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:30:38.443 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:30:38.443 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:30:38.444 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 13.0817ms
2025-06-14 23:30:38.445 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:30:38.445 +09:00 [DBG] Connection id "0HNDB9VV92HGN" completed keep alive response.
2025-06-14 23:30:38.445 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:30:38.445 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:38.445 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:38.446 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 19.0288ms
2025-06-14 23:30:49.723 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - null null
2025-06-14 23:30:49.725 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 23:30:49.725 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199'
2025-06-14 23:30:49.725 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:30:49.726 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:30:49.726 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:30:49.734 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:30:49.734 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:30:49.734 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:30:49.734 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:30:49.735 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:30:49.735 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:30:49.735 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:30:49.735 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:30:49.736 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:30:49.736 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 23:30:49.736 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:30:49.736 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:30:49.736 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:30:49.737 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:30:49.740 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:30:49.747 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-14 23:30:49.750 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-14 23:30:49.751 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-14 23:30:49.768 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-14 23:30:49.780 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(27) ? default(Guid?) : (Guid?)dataReader.GetGuid(27) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(27) ? default(object) : (object)dataReader.GetGuid(27) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(27) ? default(Guid) : dataReader.GetGuid(27);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(28) ? default(Guid) : dataReader.GetGuid(28);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(29) ? default(string) : dataReader.GetString(29);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(31) ? default(long?) : (long?)dataReader.GetInt64(31);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(33) ? default(DateTime) : dataReader.GetDateTime(33);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(34) ? default(string) : dataReader.GetString(34);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 23:30:49.785 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:30:49.785 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:30:49.785 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:49.786 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:49.786 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:30:49.787 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-06-14 23:30:49.787 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-14 23:30:49.787 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:30:49.788 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:30:49.791 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:49.814 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:49.816 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:49.816 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:49.816 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 27ms reading results.
2025-06-14 23:30:49.816 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:49.816 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:49.816 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:30:49.816 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:30:49.816 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:30:49.816 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:30:49.816 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:30:49.816 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 23:30:49.817 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 81.5415ms
2025-06-14 23:30:49.817 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:30:49.817 +09:00 [DBG] Connection id "0HNDB9VV92HGN" completed keep alive response.
2025-06-14 23:30:49.817 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:30:49.817 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:49.817 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:49.817 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/8b7461e5-d252-418d-8fb4-f28718297199 - 200 null application/json; charset=utf-8 94.3726ms
2025-06-14 23:30:53.938 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:30:53.938 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:30:53.943 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:30:53.943 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:30:53.946 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:30:53.946 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:30:53.946 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:30:53.946 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:30:53.946 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:30:53.946 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:30:53.946 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:30:53.946 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:30:53.946 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:30:53.947 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:30:53.947 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:30:53.947 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:30:53.947 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:30:53.947 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:30:53.947 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:30:53.947 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:30:53.947 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:30:53.948 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:30:53.948 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:30:53.948 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:53.948 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:53.948 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:30:53.948 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:30:53.948 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:30:53.948 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:30:53.949 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:30:53.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:53.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:53.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:53.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:53.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:53.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:53.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:53.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:53.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:53.950 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:53.950 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:53.950 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:30:53.950 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:53.950 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:53.950 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:30:53.950 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:30:53.950 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:30:53.950 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:30:53.950 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:30:53.950 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:30:53.950 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.1435ms
2025-06-14 23:30:53.951 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:30:53.951 +09:00 [DBG] Connection id "0HNDB9VV92HGN" completed keep alive response.
2025-06-14 23:30:53.952 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:30:53.952 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:53.952 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:53.952 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 14.1333ms
2025-06-14 23:30:55.284 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-14 23:30:55.285 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 23:30:55.285 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-14 23:30:55.285 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:30:55.285 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:30:55.286 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:30:55.291 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:30:55.291 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:30:55.291 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:30:55.291 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:30:55.291 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:30:55.291 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:30:55.292 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:30:55.293 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:30:55.293 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 23:30:55.294 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 23:30:55.294 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:30:55.294 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:30:55.294 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 23:30:55.294 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 23:30:55.300 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:30:55.300 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        ApplicantPosition = r.ApplicantPosition, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-14 23:30:55.315 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            string value9;
            List<ApprovalStep> namelessParameter{0};
            int? value11;
            string value12;
            string value13;
            string value14;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            value9 = dataReader.GetString(8);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value11 = (int?)dataReader.GetInt32(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            value13 = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
            value14 = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                value9, 
                namelessParameter{0}, 
                (object)value11, 
                value12, 
                value13, 
                value14 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid) : dataReader.GetGuid(12);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(17) ? default(bool) : dataReader.GetBoolean(17);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(19) ? default(int) : dataReader.GetInt32(19);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantDepartment = (string)(resultContext.Values[5]), 
            ApplicantName = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Status = (string)(resultContext.Values[8]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[9]), 
            CurrentStep = (int)(int?)(resultContext.Values[10]), 
            CurrentApproverName = (string)(resultContext.Values[11]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[12]), 
            CurrentActionStatus = (string)(resultContext.Values[13]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-14 23:30:55.320 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:30:55.320 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:30:55.320 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:55.320 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:55.320 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:30:55.321 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:30:55.321 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:30:55.321 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:30:55.322 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:30:55.325 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:55.325 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:30:55.326 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:55.326 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 23:30:55.326 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:30:55.326 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:55.326 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:30:55.327 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:30:55.327 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:30:55.327 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:30:55.327 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:30:55.327 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:30:55.328 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 36.0052ms
2025-06-14 23:30:55.328 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:30:55.328 +09:00 [DBG] Connection id "0HNDB9VV92HGN" completed keep alive response.
2025-06-14 23:30:55.328 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:30:55.328 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:30:55.328 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:30:55.328 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 44.2048ms
2025-06-14 23:31:19.403 +09:00 [DBG] Connection id "0HNDB9VV92HGO" accepted.
2025-06-14 23:31:19.404 +09:00 [DBG] Connection id "0HNDB9VV92HGO" started.
2025-06-14 23:31:19.448 +09:00 [DBG] Connection 0HNDB9VV92HGO established using the following protocol: "Tls12"
2025-06-14 23:31:19.464 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 23:31:19.469 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:31:19.469 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:31:19.469 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:31:19.472 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:31:19.472 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:31:19.472 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:31:19.472 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:31:19.473 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:31:19.473 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:31:19.473 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:31:19.473 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:31:19.473 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:31:19.476 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:31:19.476 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 23:31:19.477 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 23:31:19.477 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:31:19.477 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:31:19.477 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 23:31:19.477 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 23:31:19.479 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:31:19.482 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:31:19.482 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:31:19.482 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:31:19.482 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:19.483 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:31:19.483 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:19.483 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:19.483 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:31:19.483 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:31:19.484 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:19.484 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:19.484 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:19.484 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:19.484 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:19.484 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:19.484 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:19.484 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:19.484 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:19.484 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:19.485 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:19.485 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:31:19.485 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:19.485 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:31:19.485 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:31:19.485 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:31:19.485 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:31:19.485 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:31:19.485 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:31:19.485 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:31:19.486 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.912ms
2025-06-14 23:31:19.486 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:31:19.486 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:31:19.486 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:31:19.486 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:31:19.486 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:31:19.486 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 22.6186ms
2025-06-14 23:31:27.730 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 23:31:27.731 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 23:31:27.731 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 23:31:27.731 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 23:31:27.731 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:31:27.731 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 23:31:27.735 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:31:27.735 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:31:27.735 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:31:27.735 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:31:27.735 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:31:27.735 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:31:27.736 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:31:27.737 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:31:27.737 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 23:31:27.738 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 23:31:27.738 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-14 23:31:27.749 +09:00 [DBG] Connection id "0HNDB9VV92HGO", Request id "0HNDB9VV92HGO:00000002": started reading request body.
2025-06-14 23:31:27.751 +09:00 [DBG] Connection id "0HNDB9VV92HGO", Request id "0HNDB9VV92HGO:00000002": done reading request body.
2025-06-14 23:31:27.762 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.API.DTOs.ApproveRequestDto'
2025-06-14 23:31:27.763 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 23:31:27.763 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 23:31:27.763 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 23:31:27.763 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 23:31:27.766 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:31:27.767 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(r => r.Steps)
    .FirstOrDefault(r => r.ApprovalId == __approvalGuid_0)'
2025-06-14 23:31:27.768 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-14 23:31:27.776 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
            SELECT a1.ApprovalId, a1.ApplicantDepartment, a1.ApplicantEmployeeNumber, a1.ApplicantName, a1.ApplicantPosition, a1.ApprovalType, a1.ApproverComment, a1.CurrentApproverEmployeeNumber, a1.CurrentStep, a1.MisKey, a1.RequestContent, a1.RequestTitle, a1.RequestedAt, a1.RespondedAt, a1.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType
            FROM 
            (
                SELECT TOP(1) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__approvalGuid_0
            ) AS a1
            LEFT JOIN ApprovalSteps AS a0 ON a1.ApprovalId == a0.ApprovalId
            ORDER BY a1.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
            SELECT a1.ApprovalId, a1.ApplicantDepartment, a1.ApplicantEmployeeNumber, a1.ApplicantName, a1.ApplicantPosition, a1.ApprovalType, a1.ApproverComment, a1.CurrentApproverEmployeeNumber, a1.CurrentStep, a1.MisKey, a1.RequestContent, a1.RequestTitle, a1.RequestedAt, a1.RespondedAt, a1.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType
            FROM 
            (
                SELECT TOP(1) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__approvalGuid_0
            ) AS a1
            LEFT JOIN ApprovalSteps AS a0 ON a1.ApprovalId == a0.ApprovalId
            ORDER BY a1.ApprovalId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{9}, namelessParameter{10}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{10}, 
                        forMaterialization: True);
                    return namelessParameter{10}.<ApprovalRequest>k__BackingField = namelessParameter{9};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-14 23:31:27.780 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:31:27.780 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:31:27.780 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:31:27.780 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:27.780 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:31:27.780 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:27.780 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:27.780 +09:00 [DBG] Executing DbCommand [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 23:31:27.780 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 23:31:27.781 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.783 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.783 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.783 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.783 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.784 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:27.784 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 23:31:27.784 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:27.784 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:31:27.786 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-14 23:31:27.788 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-14 23:31:27.793 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentApproverEmployeeNumber' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 23:31:27.797 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.798 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentStep' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 23:31:27.800 +09:00 [DBG] The unchanged property 'ApprovalRequest.RespondedAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 23:31:27.804 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionDate' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 23:31:27.804 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.804 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 23:31:27.805 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-14 23:31:27.829 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:31:27.829 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:27.830 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-14 23:31:27.831 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-14 23:31:27.832 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:31:27.832 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:27.832 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:27.832 +09:00 [DBG] Executing DbCommand [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1, "RespondedAt" = @p2
WHERE "ApprovalId" = @p3
RETURNING 1;
2025-06-14 23:31:27.833 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1, "RespondedAt" = @p2
WHERE "ApprovalId" = @p3
RETURNING 1;
2025-06-14 23:31:27.834 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:27.834 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:31:27.835 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:31:27.835 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:27.835 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:27.835 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 23:31:27.835 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 23:31:27.835 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:27.835 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:31:27.836 +09:00 [DBG] Committing transaction.
2025-06-14 23:31:27.837 +09:00 [DBG] Committed transaction.
2025-06-14 23:31:27.838 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:27.838 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:31:27.839 +09:00 [DBG] Disposing transaction.
2025-06-14 23:31:27.841 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.841 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.841 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-14 23:31:27.842 +09:00 [INF] Approval a074ebdd-4fbc-448c-be8e-5320259c9112 approved by EC20507 with comment: 
2025-06-14 23:31:27.842 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:31:27.842 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:31:27.842 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:31:27.842 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:31:27.842 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:31:27.842 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-06-14 23:31:27.843 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 107.4565ms
2025-06-14 23:31:27.843 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 23:31:27.843 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:31:27.843 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:31:27.843 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:31:27.843 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:31:27.843 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 200 null application/json; charset=utf-8 112.9024ms
2025-06-14 23:31:27.848 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 23:31:27.848 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:31:27.848 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:31:27.848 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:31:27.849 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:31:27.849 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:31:27.849 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:31:27.849 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:31:27.849 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:31:27.849 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:31:27.849 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:31:27.849 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:31:27.849 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:31:27.849 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:31:27.849 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 23:31:27.849 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 23:31:27.849 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:31:27.849 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:31:27.849 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 23:31:27.849 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 23:31:27.850 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:31:27.850 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:31:27.850 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:31:27.850 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:31:27.850 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:27.850 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:31:27.850 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:27.850 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:27.850 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:31:27.850 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:31:27.850 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:27.851 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:27.851 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:31:27.851 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:27.851 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:31:27.851 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:31:27.851 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:31:27.851 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:31:27.851 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:31:27.851 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:31:27.851 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:31:27.852 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 2.6507ms
2025-06-14 23:31:27.852 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:31:27.852 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:31:27.852 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:31:27.852 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:31:27.852 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:31:27.852 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 3.5965ms
2025-06-14 23:31:54.078 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0004 - null null
2025-06-14 23:31:54.080 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0004'
2025-06-14 23:31:54.081 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0004'
2025-06-14 23:31:54.081 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:31:54.082 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:31:54.083 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:31:54.084 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:31:54.084 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:31:54.084 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:31:54.084 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:31:54.084 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:31:54.084 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:31:54.084 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:31:54.086 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:31:54.086 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:31:54.087 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:31:54.087 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:31:54.087 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:31:54.087 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:31:54.088 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:31:54.096 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:31:54.099 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:31:54.099 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:31:54.100 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:31:54.100 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:54.100 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:31:54.100 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:54.101 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:54.101 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:31:54.103 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:31:54.103 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:54.103 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:31:54.103 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:54.103 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:31:54.104 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:31:54.104 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:31:54.105 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:31:54.105 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:31:54.107 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:31:54.107 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:31:54.110 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 25.1781ms
2025-06-14 23:31:54.110 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:31:54.110 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:31:54.110 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:31:54.111 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:31:54.111 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:31:54.111 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0004 - 200 null application/json; charset=utf-8 32.883ms
2025-06-14 23:31:54.624 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0004 - null null
2025-06-14 23:31:54.624 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0004'
2025-06-14 23:31:54.625 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0004'
2025-06-14 23:31:54.625 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:31:54.625 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:31:54.625 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:31:54.625 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:31:54.625 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:31:54.626 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:31:54.626 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:31:54.626 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:31:54.627 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:31:54.628 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:31:54.629 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:31:54.630 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 23:31:54.631 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 23:31:54.631 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:31:54.631 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:31:54.631 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 23:31:54.631 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 23:31:54.632 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:31:54.633 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:31:54.633 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:31:54.633 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:31:54.633 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:54.634 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:31:54.634 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:54.634 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:31:54.634 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:31:54.634 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:31:54.635 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:54.635 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:54.636 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:54.636 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:54.636 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:54.636 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:31:54.637 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:54.637 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:31:54.637 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:31:54.637 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:31:54.638 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:31:54.638 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:31:54.638 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:31:54.638 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:31:54.638 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:31:54.638 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:31:54.639 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 10.72ms
2025-06-14 23:31:54.639 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:31:54.640 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:31:54.640 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:31:54.640 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:31:54.640 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:31:54.640 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0004 - 200 null application/json; charset=utf-8 16.1962ms
2025-06-14 23:31:58.909 +09:00 [DBG] Connection id "0HNDB9VV92HGN" received FIN.
2025-06-14 23:31:58.910 +09:00 [DBG] Connection id "0HNDB9VV92HGN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:31:58.918 +09:00 [DBG] Connection id "0HNDB9VV92HGN" disconnecting.
2025-06-14 23:31:58.920 +09:00 [DBG] Connection id "0HNDB9VV92HGN" stopped.
2025-06-14 23:32:15.231 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-14 23:32:15.231 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-14 23:32:15.231 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-14 23:32:15.231 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 23:32:15.231 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:32:15.231 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 23:32:15.232 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:32:15.232 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:32:15.232 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:32:15.232 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:32:15.232 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:32:15.232 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:32:15.232 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:32:15.233 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:32:15.233 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 23:32:15.233 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-14 23:32:15.233 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-14 23:32:15.233 +09:00 [DBG] Connection id "0HNDB9VV92HGO", Request id "0HNDB9VV92HGO:00000006": started reading request body.
2025-06-14 23:32:15.233 +09:00 [DBG] Connection id "0HNDB9VV92HGO", Request id "0HNDB9VV92HGO:00000006": done reading request body.
2025-06-14 23:32:15.234 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.API.DTOs.ApproveRequestDto'
2025-06-14 23:32:15.234 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 23:32:15.234 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 23:32:15.234 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-14 23:32:15.234 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-14 23:32:15.234 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:32:15.235 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:32:15.235 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:32:15.235 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:15.235 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:15.235 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:32:15.235 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:15.235 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:15.235 +09:00 [DBG] Executing DbCommand [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 23:32:15.235 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-14 23:32:15.236 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.236 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.236 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.236 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.237 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.237 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.237 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.237 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:15.237 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:32:15.238 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:15.238 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:15.238 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-14 23:32:15.238 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-14 23:32:15.239 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentApproverEmployeeNumber' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 23:32:15.239 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.239 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentStep' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 23:32:15.240 +09:00 [DBG] The unchanged property 'ApprovalRequest.RespondedAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 23:32:15.240 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionDate' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 23:32:15.240 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.240 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-14 23:32:15.240 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-14 23:32:15.241 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:15.241 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:15.241 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-14 23:32:15.242 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-14 23:32:15.242 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:32:15.242 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:15.242 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:15.242 +09:00 [DBG] Executing DbCommand [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 4), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1, "RespondedAt" = @p2
WHERE "ApprovalId" = @p3
RETURNING 1;
2025-06-14 23:32:15.244 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 4), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1, "RespondedAt" = @p2
WHERE "ApprovalId" = @p3
RETURNING 1;
2025-06-14 23:32:15.245 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:15.252 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 8ms reading results.
2025-06-14 23:32:15.253 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:32:15.253 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:15.253 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:15.253 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 23:32:15.253 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-14 23:32:15.253 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:15.253 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:32:15.254 +09:00 [DBG] Committing transaction.
2025-06-14 23:32:15.254 +09:00 [DBG] Committed transaction.
2025-06-14 23:32:15.254 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:15.254 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:15.254 +09:00 [DBG] Disposing transaction.
2025-06-14 23:32:15.254 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.254 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.255 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-14 23:32:15.255 +09:00 [INF] Approval a074ebdd-4fbc-448c-be8e-5320259c9112 approved by EMP0004 with comment: 
2025-06-14 23:32:15.255 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:32:15.255 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:32:15.256 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:32:15.256 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:32:15.256 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:32:15.256 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-06-14 23:32:15.256 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 23.876ms
2025-06-14 23:32:15.256 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-14 23:32:15.256 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:32:15.257 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:32:15.257 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:15.257 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:15.257 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 200 null application/json; charset=utf-8 26.0712ms
2025-06-14 23:32:15.261 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0004 - null null
2025-06-14 23:32:15.261 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0004'
2025-06-14 23:32:15.261 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0004'
2025-06-14 23:32:15.261 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:32:15.261 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:32:15.261 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:32:15.262 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:32:15.262 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:32:15.262 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:32:15.262 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:32:15.262 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:32:15.262 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:32:15.262 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:32:15.262 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:32:15.262 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 23:32:15.262 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 23:32:15.262 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:32:15.262 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:32:15.262 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 23:32:15.262 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 23:32:15.263 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:32:15.263 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:32:15.263 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:32:15.263 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:15.263 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:15.263 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:32:15.263 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:15.263 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:15.263 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:32:15.263 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:32:15.263 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.263 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:15.264 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:15.264 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:32:15.264 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:15.264 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:15.264 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:32:15.264 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:32:15.264 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:32:15.264 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:32:15.264 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:32:15.264 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:32:15.264 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 2.5012ms
2025-06-14 23:32:15.264 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:32:15.264 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:32:15.264 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:32:15.264 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:15.264 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:15.265 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0004 - 200 null application/json; charset=utf-8 3.4317ms
2025-06-14 23:32:29.070 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:32:29.072 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:32:29.072 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:32:29.073 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:32:29.075 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:32:29.079 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:32:29.080 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:32:29.081 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:32:29.081 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:32:29.081 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:32:29.081 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:32:29.081 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:32:29.081 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:32:29.082 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:32:29.083 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:32:29.083 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:32:29.083 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:32:29.084 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:32:29.084 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:32:29.084 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:32:29.091 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:32:29.101 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:32:29.101 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:32:29.101 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:29.102 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:29.102 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:32:29.102 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:29.102 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:29.102 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:32:29.103 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:32:29.104 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:29.104 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:29.104 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:29.104 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:29.104 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:29.105 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:29.105 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:29.105 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:29.105 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:29.105 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:29.105 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:29.105 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:32:29.105 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:29.105 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:29.106 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:32:29.106 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:32:29.106 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:32:29.106 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:32:29.106 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:32:29.106 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:32:29.107 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 25.3655ms
2025-06-14 23:32:29.107 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:32:29.107 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:32:29.107 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:32:29.107 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:29.108 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:29.108 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 37.9448ms
2025-06-14 23:32:32.362 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed - null null
2025-06-14 23:32:32.363 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed'
2025-06-14 23:32:32.365 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed'
2025-06-14 23:32:32.365 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:32:32.367 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:32:32.367 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:32:32.368 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:32:32.368 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:32:32.368 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:32:32.368 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:32:32.368 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:32:32.368 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:32:32.368 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:32:32.369 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:32:32.369 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:32:32.369 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 23:32:32.369 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:32:32.370 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:32:32.370 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:32:32.370 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:32:32.371 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:32:32.372 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:32:32.373 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:32:32.373 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:32.373 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:32.373 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:32:32.373 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:32.374 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:32.374 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:32:32.374 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:32:32.375 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:32.375 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:32.378 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:32.378 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:32.378 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:32.378 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:32.379 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 23:32:32.379 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:32.379 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:32.379 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:32:32.379 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:32:32.379 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:32:32.379 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:32:32.380 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:32:32.380 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 23:32:32.380 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 12.0228ms
2025-06-14 23:32:32.381 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:32:32.381 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:32:32.381 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:32:32.381 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:32.381 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:32.381 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed - 200 null application/json; charset=utf-8 19.1838ms
2025-06-14 23:32:34.082 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:32:34.082 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:32:34.082 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:32:34.082 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:32:34.082 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:32:34.083 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:32:34.083 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:32:34.083 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:32:34.083 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:32:34.083 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:32:34.083 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:32:34.084 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:32:34.084 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:32:34.084 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:32:34.084 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:32:34.085 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:32:34.085 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:32:34.085 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:32:34.085 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:32:34.086 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:32:34.086 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:32:34.087 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:32:34.087 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:32:34.087 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:34.088 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:34.088 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:32:34.088 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:34.088 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:34.088 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:32:34.089 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:32:34.090 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:34.090 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:34.091 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:34.091 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:34.091 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:34.091 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:34.091 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:34.092 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:34.092 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:34.092 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:34.092 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:34.092 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:32:34.092 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:34.093 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:34.093 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:32:34.093 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:32:34.093 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:32:34.093 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:32:34.093 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:32:34.094 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:32:34.094 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 10.242ms
2025-06-14 23:32:34.094 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:32:34.094 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:32:34.094 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:32:34.094 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:34.095 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:34.095 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 13.0895ms
2025-06-14 23:32:35.308 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374 - null null
2025-06-14 23:32:35.309 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374'
2025-06-14 23:32:35.309 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374'
2025-06-14 23:32:35.309 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:32:35.309 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:32:35.310 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:32:35.310 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:32:35.310 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:32:35.310 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:32:35.311 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:32:35.312 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:32:35.312 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:32:35.313 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:32:35.313 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:32:35.314 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:32:35.314 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 23:32:35.314 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:32:35.314 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:32:35.314 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:32:35.314 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:32:35.315 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:32:35.315 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:32:35.315 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:32:35.315 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:35.316 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:35.316 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:32:35.316 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:35.316 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:35.316 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:32:35.317 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:32:35.318 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:35.318 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:35.318 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:35.318 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:35.319 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:32:35.319 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:35.319 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:35.319 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:32:35.319 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:32:35.319 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:32:35.320 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:32:35.320 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:32:35.320 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 23:32:35.320 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 7.9183ms
2025-06-14 23:32:35.320 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:32:35.320 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:32:35.321 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:32:35.321 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:35.321 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:35.321 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374 - 200 null application/json; charset=utf-8 12.9926ms
2025-06-14 23:32:36.747 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-14 23:32:36.747 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:32:36.747 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-14 23:32:36.748 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:32:36.748 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:32:36.748 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:32:36.748 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:32:36.749 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:32:36.749 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:32:36.749 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:32:36.749 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:32:36.749 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:32:36.749 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:32:36.749 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:32:36.750 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:32:36.750 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:32:36.750 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:32:36.750 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:32:36.750 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:32:36.750 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:32:36.751 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:32:36.751 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:32:36.751 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:32:36.751 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:36.751 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:36.751 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:32:36.752 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:36.752 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:36.752 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:32:36.752 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:32:36.753 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:36.753 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:36.753 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:36.753 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:36.754 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:36.754 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:36.754 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:36.754 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:36.754 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:36.755 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:36.755 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:36.755 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:32:36.755 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:36.755 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:36.755 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:32:36.756 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:32:36.756 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:32:36.756 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:32:36.756 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:32:36.756 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:32:36.756 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.2554ms
2025-06-14 23:32:36.756 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:32:36.756 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:32:36.756 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:32:36.757 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:36.757 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:36.757 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 9.798ms
2025-06-14 23:32:51.320 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 23:32:51.321 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:32:51.321 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:32:51.321 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:32:51.322 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:32:51.322 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:32:51.322 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:32:51.322 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:32:51.322 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:32:51.322 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:32:51.322 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:32:51.322 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:32:51.323 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:32:51.323 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:32:51.323 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 23:32:51.324 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 23:32:51.325 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:32:51.325 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:32:51.325 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 23:32:51.326 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 23:32:51.327 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:32:51.329 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:32:51.329 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:32:51.330 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:51.330 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:51.332 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:32:51.332 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:51.333 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-14 23:32:51.333 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:32:51.334 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:32:51.335 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:51.335 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:51.335 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:51.336 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:51.336 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:51.336 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:51.336 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:51.336 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:51.336 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:51.336 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:51.336 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:51.337 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:32:51.337 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:51.337 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:51.337 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:32:51.337 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:32:51.337 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:32:51.337 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:32:51.337 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:32:51.337 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:32:51.337 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 14.907ms
2025-06-14 23:32:51.338 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:32:51.338 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:32:51.338 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:32:51.339 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:51.339 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:51.341 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 20.3272ms
2025-06-14 23:32:52.256 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 23:32:52.257 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 23:32:52.257 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 23:32:52.257 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:32:52.257 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:32:52.257 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:32:52.257 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:32:52.257 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:32:52.258 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:32:52.258 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:32:52.258 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:32:52.258 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:32:52.258 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:32:52.258 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:32:52.258 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:32:52.259 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:32:52.259 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:32:52.259 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:32:52.259 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:32:52.259 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:32:52.260 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:32:52.261 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:32:52.262 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:32:52.262 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:52.262 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:52.262 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:32:52.262 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:52.263 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:52.263 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:32:52.263 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:32:52.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:52.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:52.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:52.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:52.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:52.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:52.265 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:52.265 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:52.265 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:52.265 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:32:52.265 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:52.265 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:52.266 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:32:52.266 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:32:52.266 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:32:52.266 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:32:52.266 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:32:52.266 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:32:52.266 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.3325ms
2025-06-14 23:32:52.266 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:32:52.267 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:32:52.267 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:32:52.267 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:52.267 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:52.267 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 10.7375ms
2025-06-14 23:32:54.631 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 23:32:54.631 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:32:54.631 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:32:54.631 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:32:54.632 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:32:54.632 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:32:54.632 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:32:54.632 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:32:54.632 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:32:54.632 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:32:54.632 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:32:54.632 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:32:54.633 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:32:54.633 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:32:54.633 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 23:32:54.633 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 23:32:54.634 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:32:54.634 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:32:54.634 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 23:32:54.634 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 23:32:54.635 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:32:54.636 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:32:54.636 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:32:54.637 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:54.637 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:54.637 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:32:54.637 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:54.638 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:32:54.638 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:32:54.639 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:32:54.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:54.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:54.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:54.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:54.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:54.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:54.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:54.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:54.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:54.641 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:32:54.642 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:54.642 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-14 23:32:54.642 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:32:54.642 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:54.642 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:32:54.643 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:32:54.643 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:32:54.643 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:32:54.643 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:32:54.643 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:32:54.644 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 11.058ms
2025-06-14 23:32:54.644 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:32:54.644 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:32:54.644 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:32:54.644 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:32:54.644 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:32:54.645 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 13.7269ms
2025-06-14 23:33:00.715 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 23:33:00.715 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 23:33:00.715 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 23:33:00.716 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:33:00.716 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:33:00.716 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:33:00.716 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:33:00.716 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:33:00.716 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:33:00.716 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:33:00.716 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:33:00.716 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:33:00.716 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:33:00.717 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:33:00.717 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:33:00.717 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:33:00.717 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:33:00.717 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:33:00.717 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:33:00.717 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:33:00.718 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:33:00.718 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:33:00.718 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:33:00.718 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:00.718 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:00.719 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:33:00.719 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:00.719 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:00.719 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:33:00.719 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:33:00.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:00.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:00.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:00.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:00.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:00.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:00.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:00.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:00.720 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:00.720 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:33:00.720 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:00.720 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:00.721 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:33:00.721 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:33:00.721 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:33:00.721 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:33:00.721 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:33:00.721 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:33:00.722 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 5.0312ms
2025-06-14 23:33:00.722 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:33:00.722 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:33:00.722 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:33:00.722 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:00.722 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:00.722 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 7.7935ms
2025-06-14 23:33:03.892 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112 - null null
2025-06-14 23:33:03.892 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112'
2025-06-14 23:33:03.892 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112'
2025-06-14 23:33:03.892 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:33:03.892 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:33:03.892 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:33:03.893 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:33:03.893 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:33:03.893 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:33:03.894 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:33:03.894 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:33:03.895 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:33:03.895 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:33:03.897 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:33:03.897 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:33:03.898 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 23:33:03.899 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:33:03.899 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:33:03.900 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:33:03.900 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:33:03.901 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:33:03.902 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:33:03.902 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:33:03.902 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:03.902 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:03.902 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:33:03.902 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:03.902 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:03.903 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:33:03.904 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:33:03.907 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:03.909 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:03.910 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:03.910 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:03.910 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:03.910 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:03.910 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:03.911 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:03.911 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 5ms reading results.
2025-06-14 23:33:03.911 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:03.911 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:03.911 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:33:03.911 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:33:03.912 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:33:03.912 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:33:03.912 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:33:03.912 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 23:33:03.913 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 18.0394ms
2025-06-14 23:33:03.913 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:33:03.913 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:33:03.913 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:33:03.914 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:03.914 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:03.914 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112 - 200 null application/json; charset=utf-8 22.2473ms
2025-06-14 23:33:14.339 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 23:33:14.340 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 23:33:14.340 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 23:33:14.340 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:33:14.340 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:33:14.340 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:33:14.340 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:33:14.340 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:33:14.341 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:33:14.341 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:33:14.341 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:33:14.343 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:33:14.343 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:33:14.355 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:33:14.355 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:33:14.355 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:33:14.355 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:33:14.355 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:33:14.355 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:33:14.355 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:33:14.356 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:33:14.357 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:33:14.357 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:33:14.357 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:14.357 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:14.357 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:33:14.357 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:14.357 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:14.357 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:33:14.358 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:33:14.358 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:14.358 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:14.358 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:14.358 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:14.358 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:14.358 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:14.358 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:14.358 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:14.359 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:14.359 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:33:14.359 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:14.359 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:14.359 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:33:14.359 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:33:14.359 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:33:14.359 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:33:14.359 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:33:14.360 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:33:14.360 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 17.332ms
2025-06-14 23:33:14.361 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:33:14.361 +09:00 [DBG] Connection id "0HNDB9VV92HGO" completed keep alive response.
2025-06-14 23:33:14.362 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:33:14.362 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:14.362 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:14.362 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 23.2341ms
2025-06-14 23:33:24.918 +09:00 [DBG] Connection id "0HNDB9VV92HGP" accepted.
2025-06-14 23:33:24.918 +09:00 [DBG] Connection id "0HNDB9VV92HGP" started.
2025-06-14 23:33:24.948 +09:00 [DBG] Connection 0HNDB9VV92HGP established using the following protocol: "Tls12"
2025-06-14 23:33:24.959 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 23:33:24.962 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:33:24.962 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:33:24.963 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:33:24.963 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:33:24.963 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:33:24.964 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:33:24.964 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:33:24.964 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:33:24.964 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:33:24.964 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:33:24.964 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:33:24.965 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:33:24.965 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:33:24.965 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 23:33:24.966 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 23:33:24.966 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:33:24.966 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:33:24.966 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 23:33:24.966 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 23:33:24.967 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:33:24.968 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:33:24.968 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:33:24.968 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:24.968 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:24.968 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:33:24.968 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:24.968 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:24.968 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:33:24.969 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:33:24.969 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:24.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:24.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:24.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:24.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:24.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:24.971 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:24.971 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:24.971 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:24.971 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:24.971 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:24.972 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:33:24.972 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:24.972 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:24.972 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:33:24.972 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:33:24.972 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:33:24.972 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:33:24.972 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:33:24.972 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:33:24.973 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.1828ms
2025-06-14 23:33:24.973 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:33:24.973 +09:00 [DBG] Connection id "0HNDB9VV92HGP" completed keep alive response.
2025-06-14 23:33:24.973 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:33:24.973 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:24.973 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:24.973 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 13.9129ms
2025-06-14 23:33:33.341 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 23:33:33.342 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 23:33:33.343 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 23:33:33.344 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:33:33.344 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:33:33.345 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:33:33.345 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:33:33.346 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:33:33.346 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:33:33.350 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:33:33.351 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:33:33.351 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:33:33.352 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:33:33.352 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:33:33.353 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:33:33.353 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:33:33.353 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:33:33.353 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:33:33.354 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:33:33.354 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:33:33.356 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:33:33.359 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:33:33.360 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:33:33.360 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:33.360 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:33.360 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:33:33.360 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:33.360 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:33.361 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:33:33.362 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:33:33.363 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:33.364 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:33.364 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:33.365 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:33.366 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:33.366 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:33.366 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:33.366 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:33.367 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:33.367 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-14 23:33:33.367 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:33.367 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:33.367 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:33:33.367 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:33:33.367 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:33:33.367 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:33:33.368 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:33:33.368 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:33:33.368 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 16.4734ms
2025-06-14 23:33:33.368 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:33:33.368 +09:00 [DBG] Connection id "0HNDB9VV92HGP" completed keep alive response.
2025-06-14 23:33:33.370 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:33:33.370 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:33.370 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:33.373 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 32.5288ms
2025-06-14 23:33:34.382 +09:00 [DBG] Connection id "0HNDB9VV92HGO" received FIN.
2025-06-14 23:33:34.383 +09:00 [DBG] Connection id "0HNDB9VV92HGO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:33:34.384 +09:00 [DBG] Connection id "0HNDB9VV92HGO" disconnecting.
2025-06-14 23:33:34.384 +09:00 [DBG] Connection id "0HNDB9VV92HGO" stopped.
2025-06-14 23:33:36.838 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 23:33:36.839 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:33:36.839 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:33:36.839 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:33:36.839 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:33:36.839 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:33:36.839 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:33:36.839 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:33:36.840 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:33:36.840 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:33:36.840 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:33:36.840 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:33:36.840 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:33:36.840 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:33:36.841 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 23:33:36.842 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 23:33:36.842 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:33:36.842 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:33:36.842 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 23:33:36.843 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 23:33:36.844 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:33:36.845 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:33:36.845 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:33:36.845 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:36.846 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:36.846 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:33:36.846 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:36.846 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:36.846 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:33:36.846 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:33:36.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:36.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:36.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:36.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:36.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:36.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:36.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:36.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:36.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:36.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:36.848 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:36.848 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:33:36.848 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:36.848 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:36.848 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:33:36.848 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:33:36.848 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:33:36.848 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:33:36.848 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:33:36.848 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:33:36.852 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.4868ms
2025-06-14 23:33:36.854 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:33:36.854 +09:00 [DBG] Connection id "0HNDB9VV92HGP" completed keep alive response.
2025-06-14 23:33:36.854 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:33:36.855 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:36.855 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:36.855 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 16.7304ms
2025-06-14 23:33:44.061 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112 - null null
2025-06-14 23:33:44.067 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112'
2025-06-14 23:33:44.070 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112'
2025-06-14 23:33:44.070 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:33:44.070 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:33:44.071 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:33:44.072 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:33:44.072 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:33:44.073 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:33:44.073 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:33:44.074 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:33:44.074 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:33:44.074 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:33:44.075 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:33:44.075 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:33:44.076 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 23:33:44.076 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:33:44.076 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:33:44.076 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:33:44.076 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:33:44.077 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:33:44.078 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:33:44.078 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:33:44.078 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:44.078 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:44.078 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:33:44.078 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:44.079 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:33:44.079 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:33:44.079 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:33:44.080 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:44.080 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:44.081 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:44.082 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:44.082 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:44.083 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:44.083 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:33:44.084 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:44.084 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-14 23:33:44.084 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:33:44.084 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:44.084 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:33:44.084 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:33:44.084 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:33:44.084 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:33:44.084 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:33:44.085 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 23:33:44.085 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 10.7029ms
2025-06-14 23:33:44.085 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:33:44.085 +09:00 [DBG] Connection id "0HNDB9VV92HGP" completed keep alive response.
2025-06-14 23:33:44.085 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:33:44.085 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:33:44.085 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:33:44.085 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112 - 200 null application/json; charset=utf-8 24.8802ms
2025-06-14 23:34:17.593 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 23:34:17.595 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:34:17.596 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:34:17.596 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:34:17.597 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:34:17.597 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:34:17.597 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:34:17.597 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:34:17.597 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:34:17.598 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:34:17.598 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:34:17.598 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:34:17.598 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:34:17.599 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:34:17.599 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 23:34:17.599 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 23:34:17.600 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:34:17.600 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:34:17.600 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 23:34:17.600 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 23:34:17.605 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:34:17.609 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:34:17.609 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:34:17.609 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:34:17.609 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:17.609 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:34:17.609 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:34:17.610 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:34:17.610 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:34:17.611 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:34:17.611 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:17.612 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:17.612 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:17.612 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:17.612 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:17.612 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:17.612 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:17.612 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:17.612 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:17.613 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:17.613 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:17.613 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:34:17.613 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:17.614 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:34:17.614 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:34:17.614 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:34:17.614 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:34:17.614 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:34:17.614 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:34:17.614 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:34:17.615 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 17.507ms
2025-06-14 23:34:17.616 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:34:17.616 +09:00 [DBG] Connection id "0HNDB9VV92HGP" completed keep alive response.
2025-06-14 23:34:17.616 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:34:17.616 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:34:17.616 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:34:17.616 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 25.249ms
2025-06-14 23:34:42.198 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374 - null null
2025-06-14 23:34:42.199 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374'
2025-06-14 23:34:42.200 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374'
2025-06-14 23:34:42.200 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:34:42.201 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:34:42.201 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:34:42.202 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:34:42.202 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:34:42.202 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:34:42.202 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:34:42.202 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:34:42.202 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:34:42.202 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:34:42.204 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:34:42.205 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:34:42.206 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 23:34:42.206 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:34:42.206 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:34:42.206 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:34:42.206 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:34:42.209 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:34:42.210 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:34:42.210 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:34:42.210 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:34:42.211 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:42.211 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:34:42.211 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:34:42.211 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:34:42.211 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:34:42.212 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:34:42.212 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:42.213 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:42.213 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:42.213 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:42.213 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:34:42.213 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:42.214 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:34:42.214 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:34:42.214 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:34:42.214 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:34:42.214 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:34:42.215 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:34:42.215 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 23:34:42.215 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 12.8877ms
2025-06-14 23:34:42.215 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:34:42.215 +09:00 [DBG] Connection id "0HNDB9VV92HGP" completed keep alive response.
2025-06-14 23:34:42.216 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:34:42.216 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:34:42.216 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:34:42.216 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374 - 200 null application/json; charset=utf-8 18.3576ms
2025-06-14 23:34:47.708 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 23:34:47.711 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 23:34:47.712 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 23:34:47.712 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:34:47.712 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:34:47.712 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:34:47.712 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:34:47.712 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:34:47.712 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:34:47.713 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:34:47.713 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:34:47.713 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:34:47.713 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:34:47.714 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:34:47.714 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:34:47.714 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:34:47.714 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:34:47.715 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:34:47.715 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:34:47.715 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:34:47.716 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:34:47.717 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:34:47.717 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:34:47.717 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:34:47.718 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:47.718 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:34:47.718 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:34:47.718 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:34:47.718 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:34:47.719 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:34:47.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:47.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:47.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:47.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:47.721 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:47.721 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:47.721 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:47.722 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:47.722 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:47.722 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-14 23:34:47.722 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:47.722 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:34:47.722 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:34:47.723 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:34:47.723 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:34:47.723 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:34:47.724 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:34:47.724 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:34:47.725 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 11.3863ms
2025-06-14 23:34:47.725 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:34:47.725 +09:00 [DBG] Connection id "0HNDB9VV92HGP" completed keep alive response.
2025-06-14 23:34:47.725 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:34:47.725 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:34:47.725 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:34:47.726 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 17.7179ms
2025-06-14 23:34:50.056 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112 - null null
2025-06-14 23:34:50.057 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112'
2025-06-14 23:34:50.057 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112'
2025-06-14 23:34:50.057 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:34:50.057 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:34:50.057 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:34:50.058 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:34:50.058 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:34:50.058 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:34:50.058 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:34:50.058 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:34:50.058 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:34:50.058 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:34:50.059 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:34:50.059 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:34:50.059 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 23:34:50.060 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:34:50.060 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:34:50.060 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:34:50.060 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:34:50.061 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:34:50.061 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:34:50.061 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:34:50.061 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:34:50.061 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:50.061 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:34:50.062 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:34:50.062 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:34:50.063 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:34:50.063 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:34:50.063 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:50.063 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:50.063 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:50.064 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:50.064 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:50.064 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:50.064 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:50.064 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:50.064 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-14 23:34:50.064 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:50.064 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:34:50.064 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:34:50.065 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:34:50.065 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:34:50.065 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:34:50.065 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:34:50.065 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 23:34:50.065 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 6.9727ms
2025-06-14 23:34:50.065 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:34:50.065 +09:00 [DBG] Connection id "0HNDB9VV92HGP" completed keep alive response.
2025-06-14 23:34:50.065 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:34:50.065 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:34:50.066 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:34:50.066 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112 - 200 null application/json; charset=utf-8 9.2902ms
2025-06-14 23:34:54.357 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - null null
2025-06-14 23:34:54.357 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 23:34:54.357 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20507'
2025-06-14 23:34:54.358 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:34:54.358 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:34:54.358 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:34:54.358 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:34:54.358 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:34:54.358 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:34:54.359 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:34:54.359 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:34:54.359 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:34:54.359 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:34:54.359 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:34:54.359 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-14 23:34:54.360 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-14 23:34:54.360 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:34:54.360 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-14 23:34:54.360 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-14 23:34:54.362 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-14 23:34:54.364 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:34:54.365 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:34:54.365 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:34:54.365 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:34:54.366 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:54.366 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:34:54.366 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:34:54.366 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:34:54.366 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:34:54.367 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-14 23:34:54.367 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:54.367 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:54.367 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:54.368 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:54.368 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:54.368 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:54.368 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:54.368 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:34:54.368 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:54.368 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:34:54.368 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:34:54.368 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:34:54.369 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:34:54.369 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:34:54.369 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:34:54.369 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:34:54.369 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:34:54.369 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:34:54.369 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 10.5005ms
2025-06-14 23:34:54.369 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-14 23:34:54.370 +09:00 [DBG] Connection id "0HNDB9VV92HGP" completed keep alive response.
2025-06-14 23:34:54.370 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:34:54.370 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:34:54.370 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:34:54.370 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20507 - 200 null application/json; charset=utf-8 13.2379ms
2025-06-14 23:35:00.975 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112 - null null
2025-06-14 23:35:00.976 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112'
2025-06-14 23:35:00.976 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112'
2025-06-14 23:35:00.976 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:35:00.976 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:35:00.976 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:35:00.976 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-14 23:35:00.976 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:35:00.976 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:35:00.977 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:35:00.977 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:35:00.977 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:35:00.977 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:35:00.978 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-14 23:35:00.979 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:35:00.979 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-14 23:35:00.980 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:35:00.980 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:35:00.980 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-14 23:35:00.980 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-14 23:35:00.982 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:35:00.982 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:35:00.983 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:35:00.983 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:35:00.983 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:35:00.983 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:35:00.983 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:35:00.983 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:35:00.983 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:35:00.986 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-14 23:35:00.986 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:00.986 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:00.986 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:00.986 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:00.987 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:00.987 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:00.987 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:00.987 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:35:00.988 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:35:00.988 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:35:00.988 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:35:00.988 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:35:00.989 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:35:00.989 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:35:00.989 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:35:00.989 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:35:00.989 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-14 23:35:00.989 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 12.5133ms
2025-06-14 23:35:00.990 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-14 23:35:00.990 +09:00 [DBG] Connection id "0HNDB9VV92HGP" completed keep alive response.
2025-06-14 23:35:00.990 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:35:00.991 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:35:00.991 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:35:00.993 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a074ebdd-4fbc-448c-be8e-5320259c9112 - 200 null application/json; charset=utf-8 17.224ms
2025-06-14 23:35:39.681 +09:00 [DBG] Connection id "0HNDB9VV92HGQ" accepted.
2025-06-14 23:35:39.682 +09:00 [DBG] Connection id "0HNDB9VV92HGQ" started.
2025-06-14 23:35:39.713 +09:00 [DBG] Connection 0HNDB9VV92HGQ established using the following protocol: "Tls12"
2025-06-14 23:35:39.730 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-14 23:35:39.732 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:35:39.732 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-14 23:35:39.732 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:35:39.733 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-14 23:35:39.733 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:35:39.733 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-14 23:35:39.734 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-14 23:35:39.734 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-14 23:35:39.734 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-14 23:35:39.734 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-14 23:35:39.734 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-14 23:35:39.734 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:35:39.734 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-14 23:35:39.735 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-14 23:35:39.735 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-14 23:35:39.735 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:35:39.735 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-14 23:35:39.735 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-14 23:35:39.735 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-14 23:35:39.737 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-14 23:35:39.738 +09:00 [DBG] Creating DbConnection.
2025-06-14 23:35:39.738 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-14 23:35:39.738 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:35:39.738 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:35:39.738 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-14 23:35:39.738 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:35:39.738 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-14 23:35:39.739 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:35:39.739 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-14 23:35:39.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:39.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:39.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:39.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:39.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:39.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:39.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:39.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:39.741 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:39.741 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-14 23:35:39.741 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:35:39.741 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-14 23:35:39.741 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-14 23:35:39.741 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:35:39.741 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-14 23:35:39.741 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-14 23:35:39.741 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-14 23:35:39.741 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-14 23:35:39.741 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-14 23:35:39.742 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-14 23:35:39.743 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 9.106ms
2025-06-14 23:35:39.743 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-14 23:35:39.743 +09:00 [DBG] Connection id "0HNDB9VV92HGQ" completed keep alive response.
2025-06-14 23:35:39.743 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-14 23:35:39.744 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-14 23:35:39.744 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-14 23:35:39.744 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 13.7863ms
2025-06-14 23:35:39.912 +09:00 [DBG] Connection id "0HNDB9VV92HGP" received FIN.
2025-06-14 23:35:39.913 +09:00 [DBG] Connection id "0HNDB9VV92HGP" disconnecting.
2025-06-14 23:35:39.913 +09:00 [DBG] Connection id "0HNDB9VV92HGP" stopped.
2025-06-14 23:35:39.914 +09:00 [DBG] Connection id "0HNDB9VV92HGP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:36:54.680 +09:00 [DBG] Connection id "0HNDB9VV92HGQ" received FIN.
2025-06-14 23:36:54.683 +09:00 [DBG] Connection id "0HNDB9VV92HGQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-14 23:36:54.684 +09:00 [DBG] Connection id "0HNDB9VV92HGQ" disconnecting.
2025-06-14 23:36:54.691 +09:00 [DBG] Connection id "0HNDB9VV92HGQ" stopped.
