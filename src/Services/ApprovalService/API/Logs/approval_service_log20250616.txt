2025-06-16 05:43:21.546 +09:00 [DBG] Connection id "0HNDC06QKPPHG" accepted.
2025-06-16 05:43:21.591 +09:00 [DBG] Connection id "0HNDC06QKPPHG" started.
2025-06-16 05:43:21.626 +09:00 [DBG] Connection 0HNDC06QKPPHG established using the following protocol: "Tls12"
2025-06-16 05:43:21.630 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 05:43:21.630 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 05:43:21.631 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 05:43:21.631 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 05:43:21.632 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 05:43:21.632 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 05:43:21.633 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 05:43:21.633 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 05:43:21.633 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 05:43:21.633 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 05:43:21.633 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 05:43:21.633 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 05:43:21.633 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 05:43:21.635 +09:00 [INF] Initializing ApprovalRequestController
2025-06-16 05:43:21.635 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 05:43:21.635 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 05:43:21.636 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 05:43:21.636 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 05:43:21.636 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 05:43:21.636 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 05:43:21.637 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 05:43:21.661 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 05:43:21.664 +09:00 [DBG] Creating DbConnection.
2025-06-16 05:43:21.666 +09:00 [DBG] Created DbConnection. (2ms).
2025-06-16 05:43:21.667 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:43:21.676 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:43:21.676 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 05:43:21.677 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 05:43:21.677 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-16 05:43:21.677 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 05:43:21.683 +09:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 05:43:21.684 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 05:43:21.684 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 05:43:21.685 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 05:43:21.685 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 05:43:21.685 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 05:43:21.685 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 05:43:21.685 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 05:43:21.685 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 05:43:21.685 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 05:43:21.685 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 05:43:21.685 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:43:21.685 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 05:43:21.685 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:43:21.685 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:43:21.686 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 05:43:21.686 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 05:43:21.686 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 05:43:21.686 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 05:43:21.686 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 05:43:21.686 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 05:43:21.689 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 55.2509ms
2025-06-16 05:43:21.689 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 05:43:21.689 +09:00 [DBG] Connection id "0HNDC06QKPPHG" completed keep alive response.
2025-06-16 05:43:21.689 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 05:43:21.689 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:43:21.689 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:43:21.690 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 59.6504ms
2025-06-16 05:43:22.363 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 05:43:22.366 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 05:43:22.366 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 05:43:22.366 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 05:43:22.366 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 05:43:22.368 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 05:43:22.368 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 05:43:22.373 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 05:43:22.373 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 05:43:22.373 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 05:43:22.373 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 05:43:22.373 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 05:43:22.374 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 05:43:22.374 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 05:43:22.376 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 05:43:22.376 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 05:43:22.376 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 05:43:22.376 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 05:43:22.376 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 05:43:22.376 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 05:43:22.377 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 05:43:22.379 +09:00 [DBG] Creating DbConnection.
2025-06-16 05:43:22.379 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 05:43:22.380 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:43:22.380 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:43:22.380 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 05:43:22.380 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 05:43:22.380 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 05:43:22.380 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 05:43:22.380 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 05:43:22.382 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 05:43:22.382 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 05:43:22.382 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:43:22.382 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 05:43:22.382 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:43:22.383 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:43:22.383 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 05:43:22.383 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 05:43:22.383 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 05:43:22.383 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 05:43:22.383 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 05:43:22.383 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 05:43:22.383 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 9.8603ms
2025-06-16 05:43:22.383 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 05:43:22.384 +09:00 [DBG] Connection id "0HNDC06QKPPHG" completed keep alive response.
2025-06-16 05:43:22.384 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 05:43:22.384 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:43:22.384 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:43:22.384 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 20.8511ms
2025-06-16 05:44:36.524 +09:00 [DBG] Connection id "0HNDC06QKPPHG" received FIN.
2025-06-16 05:44:36.580 +09:00 [DBG] Connection id "0HNDC06QKPPHG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 05:44:36.585 +09:00 [DBG] Connection id "0HNDC06QKPPHG" disconnecting.
2025-06-16 05:44:36.592 +09:00 [DBG] Connection id "0HNDC06QKPPHG" stopped.
2025-06-16 05:49:34.621 +09:00 [INF] Starting Approval Service API
2025-06-16 05:49:34.798 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 05:49:34.918 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 05:49:35.243 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 05:49:35.248 +09:00 [DBG] Creating DbConnection.
2025-06-16 05:49:35.254 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-16 05:49:35.257 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:49:35.264 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:49:35.266 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:49:35.269 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:49:35.270 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 05:49:35.271 +09:00 [DBG] Creating DbConnection.
2025-06-16 05:49:35.271 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 05:49:35.273 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 05:49:35.274 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 05:49:35.274 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:49:35.275 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:49:35.277 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 05:49:35.290 +09:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 05:49:35.291 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:49:35.292 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 05:49:35.295 +09:00 [DBG] Creating DbConnection.
2025-06-16 05:49:35.295 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 05:49:35.295 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:49:35.295 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:49:35.295 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:49:35.295 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:49:35.296 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 05:49:35.296 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 05:49:35.296 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 05:49:35.296 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:49:35.296 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:49:35.296 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 05:49:35.296 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 05:49:35.296 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:49:35.296 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:49:35.326 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 05:49:35.468 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 05:49:35.481 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:49:35.481 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:49:35.482 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 05:49:35.482 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 05:49:35.482 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 05:49:35.482 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 05:49:35.483 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 05:49:35.485 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:49:35.486 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 05:49:35.487 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:49:35.488 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:49:35.488 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 05:49:35.489 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:49:35.489 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:49:35.491 +09:00 [DBG] Hosting starting
2025-06-16 05:49:35.530 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 05:49:35.530 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 05:49:35.819 +09:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address https://127.0.0.1:5001: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Address already in use
 ---> System.Net.Sockets.SocketException (48): Address already in use
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-06-16 05:50:48.169 +09:00 [INF] Starting Approval Service API
2025-06-16 05:50:48.352 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 05:50:48.440 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 05:50:48.741 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 05:50:48.746 +09:00 [DBG] Creating DbConnection.
2025-06-16 05:50:48.752 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-16 05:50:48.754 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:50:48.758 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:50:48.760 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:50:48.762 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:50:48.763 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 05:50:48.764 +09:00 [DBG] Creating DbConnection.
2025-06-16 05:50:48.764 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 05:50:48.766 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 05:50:48.766 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 05:50:48.767 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:50:48.767 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:50:48.770 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 05:50:48.781 +09:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 05:50:48.782 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:50:48.783 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 05:50:48.785 +09:00 [DBG] Creating DbConnection.
2025-06-16 05:50:48.785 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 05:50:48.785 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:50:48.786 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:50:48.786 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:50:48.786 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:50:48.786 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 05:50:48.786 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 05:50:48.786 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 05:50:48.786 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:50:48.786 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:50:48.786 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 05:50:48.787 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 05:50:48.787 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:50:48.787 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:50:48.810 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 05:50:48.906 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 05:50:48.919 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:50:48.920 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:50:48.920 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 05:50:48.920 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 05:50:48.920 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 05:50:48.920 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 05:50:48.921 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 05:50:48.924 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:50:48.925 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 05:50:48.926 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 05:50:48.926 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:50:48.927 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 05:50:48.927 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 05:50:48.927 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 05:50:48.929 +09:00 [DBG] Hosting starting
2025-06-16 05:50:48.962 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 05:50:48.962 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 05:50:49.232 +09:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address https://127.0.0.1:5001: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Address already in use
 ---> System.Net.Sockets.SocketException (48): Address already in use
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-06-16 06:00:08.148 +09:00 [INF] Starting Approval Service API
2025-06-16 06:00:08.260 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 06:00:08.348 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 06:00:08.742 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:00:08.746 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:00:08.756 +09:00 [DBG] Created DbConnection. (9ms).
2025-06-16 06:00:08.765 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:00:08.777 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:00:08.779 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:00:08.786 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:00:08.790 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:00:08.791 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:00:08.791 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:00:08.808 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 06:00:08.808 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (18ms).
2025-06-16 06:00:08.808 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:00:08.809 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:00:08.812 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:00:08.830 +09:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:00:08.831 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:00:08.833 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 06:00:08.839 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:00:08.839 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:00:08.839 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:00:08.839 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:00:08.840 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:00:08.840 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:00:08.841 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:00:08.841 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:00:08.841 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:00:08.841 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:00:08.842 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:00:08.842 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:00:08.842 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:00:08.842 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:00:08.843 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:00:08.864 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 06:00:09.131 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 06:00:09.153 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:00:09.154 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:00:09.154 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:00:09.154 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:00:09.154 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:00:09.155 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:00:09.159 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:00:09.163 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:00:09.164 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 06:00:09.166 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:00:09.167 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:00:09.170 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:00:09.171 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:00:09.171 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:00:09.175 +09:00 [DBG] Hosting starting
2025-06-16 06:00:09.196 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 06:00:09.197 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 06:00:09.501 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 06:00:09.501 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 06:00:09.501 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 06:00:09.501 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 06:00:09.502 +09:00 [INF] Hosting environment: Development
2025-06-16 06:00:09.502 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 06:00:09.502 +09:00 [DBG] Hosting started
2025-06-16 06:13:35.052 +09:00 [INF] Starting Approval Service API
2025-06-16 06:13:35.326 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 06:13:35.449 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 06:13:35.794 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:13:35.803 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:13:35.812 +09:00 [DBG] Created DbConnection. (8ms).
2025-06-16 06:13:35.818 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:13:35.829 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:35.832 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:13:35.834 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:13:35.836 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:13:35.836 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:13:35.837 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:13:35.839 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-16 06:13:35.840 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-16 06:13:35.840 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:13:35.841 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:35.844 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:13:35.863 +09:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:13:35.865 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:35.866 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 06:13:35.870 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:13:35.870 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:13:35.870 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:13:35.870 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:35.871 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:13:35.871 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:13:35.871 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:13:35.871 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:13:35.871 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:13:35.871 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:13:35.871 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:35.872 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:13:35.872 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:13:35.872 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:35.872 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:13:35.915 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 06:13:36.106 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 06:13:36.126 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:13:36.127 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:36.128 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:13:36.128 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:13:36.128 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:13:36.128 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:13:36.129 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:13:36.132 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:36.134 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-16 06:13:36.135 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:36.135 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:13:36.137 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:13:36.137 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:13:36.137 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:13:36.142 +09:00 [DBG] Hosting starting
2025-06-16 06:13:36.194 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 06:13:36.195 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 06:13:36.710 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 06:13:36.710 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 06:13:36.710 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 06:13:36.711 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 06:13:36.711 +09:00 [INF] Hosting environment: Development
2025-06-16 06:13:36.711 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 06:13:36.711 +09:00 [DBG] Hosting started
2025-06-16 06:13:48.566 +09:00 [DBG] Connection id "0HNDCA62L5E7B" accepted.
2025-06-16 06:13:48.570 +09:00 [DBG] Connection id "0HNDCA62L5E7B" started.
2025-06-16 06:13:48.628 +09:00 [DBG] Connection 0HNDCA62L5E7B established using the following protocol: "Tls12"
2025-06-16 06:13:48.657 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 06:13:48.675 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 06:13:48.677 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 06:13:48.678 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 06:13:48.694 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 06:13:48.694 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 06:13:48.706 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 06:13:48.708 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 06:13:48.708 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 06:13:48.709 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 06:13:48.709 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 06:13:48.709 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 06:13:48.711 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 06:13:48.714 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 06:13:48.720 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 06:13:48.722 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 06:13:48.723 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 06:13:48.723 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 06:13:48.723 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 06:13:48.726 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 06:13:48.734 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:13:48.772 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantName = r.ApplicantName, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantPosition = r.ApplicantPosition, 
        Steps = r.Steps, 
        Attachments = r.Attachments, 
        Status = r.Status, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-16 06:13:48.850 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-16 06:13:48.866 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            List<ApprovalStep> namelessParameter{0};
            List<ApprovalAttachment> namelessParameter{1};
            string value11;
            int? value12;
            string value13;
            string value14;
            string value15;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            namelessParameter{1} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalAttachment, List<ApprovalAttachment>>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
                }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()]);
            value11 = dataReader.GetString(28);
            value12 = (int?)dataReader.GetInt32(29);
            value13 = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
            value14 = dataReader.IsDBNull(31) ? default(string) : dataReader.GetString(31);
            value15 = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                namelessParameter{0}, 
                namelessParameter{1}, 
                value11, 
                (object)value12, 
                value13, 
                value14, 
                value15 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(8) ? default(object) : (object)dataReader.GetGuid(8) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(8) ? default(Guid) : dataReader.GetGuid(8);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(11) ? default(Guid) : dataReader.GetGuid(11);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(16) ? default(bool) : dataReader.GetBoolean(16);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(18) ? default(int) : dataReader.GetInt32(18);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalAttachment>, ApprovalAttachment, ApprovalAttachment>(
            collectionId: 1, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
            { 
                (object)(Guid?)dataReader.GetGuid(0), 
                (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
            }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(20) ? default(Guid?) : (Guid?)dataReader.GetGuid(20) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
            { 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
            }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalAttachment entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalAttachment instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalAttachment);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(20) ? default(object) : (object)dataReader.GetGuid(20) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalAttachment)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                {
                                    return 
                                    {
                                        ApprovalAttachment instance;
                                        instance = new ApprovalAttachment();
                                        instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(20) ? default(Guid) : dataReader.GetGuid(20);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(21) ? default(Guid) : dataReader.GetGuid(21);
                                        instance.<FileName>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<FilePath>k__BackingField = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
                                        instance.<FileSize>k__BackingField = dataReader.IsDBNull(24) ? default(long?) : (long?)dataReader.GetInt64(24);
                                        instance.<FileType>k__BackingField = dataReader.IsDBNull(25) ? default(string) : dataReader.GetString(25);
                                        instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(26) ? default(DateTime) : dataReader.GetDateTime(26);
                                        instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalAttachment)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            ApplicantDepartment = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[8]), 
            Attachments = (List<ApprovalAttachment>)(resultContext.Values[9]), 
            Status = (string)(resultContext.Values[10]), 
            CurrentStep = (int)(int?)(resultContext.Values[11]), 
            CurrentApproverName = (string)(resultContext.Values[12]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[13]), 
            CurrentActionStatus = (string)(resultContext.Values[14]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-16 06:13:48.933 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:13:48.933 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:13:48.934 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:13:48.934 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:48.934 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:13:48.934 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:13:48.935 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-16 06:13:48.936 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 06:13:48.945 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 06:13:48.967 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:13:48.993 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:13:49.007 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:13:49.007 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:13:49.009 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:13:49.010 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:13:49.010 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:13:49.010 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:13:49.010 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:13:49.011 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:13:49.011 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:49.011 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 66ms reading results.
2025-06-16 06:13:49.011 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:49.012 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:13:49.014 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 06:13:49.015 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 06:13:49.015 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 06:13:49.015 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 06:13:49.016 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 06:13:49.017 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 06:13:49.084 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 373.0845ms
2025-06-16 06:13:49.087 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 06:13:49.088 +09:00 [DBG] Connection id "0HNDCA62L5E7B" completed keep alive response.
2025-06-16 06:13:49.090 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:13:49.093 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:13:49.093 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:13:49.094 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 438.0125ms
2025-06-16 06:13:51.461 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 06:13:51.462 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 06:13:51.462 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 06:13:51.462 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 06:13:51.462 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 06:13:51.462 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 06:13:51.464 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 06:13:51.465 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 06:13:51.465 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 06:13:51.465 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 06:13:51.465 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 06:13:51.465 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 06:13:51.465 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 06:13:51.468 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 06:13:51.469 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 06:13:51.469 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 06:13:51.469 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 06:13:51.469 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 06:13:51.469 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 06:13:51.470 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 06:13:51.504 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:13:51.509 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        ApplicantPosition = r.ApplicantPosition, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-16 06:13:51.520 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            string value9;
            List<ApprovalStep> namelessParameter{0};
            int? value11;
            string value12;
            string value13;
            string value14;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            value9 = dataReader.GetString(8);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value11 = (int?)dataReader.GetInt32(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            value13 = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
            value14 = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                value9, 
                namelessParameter{0}, 
                (object)value11, 
                value12, 
                value13, 
                value14 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid) : dataReader.GetGuid(12);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(17) ? default(bool) : dataReader.GetBoolean(17);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(19) ? default(int) : dataReader.GetInt32(19);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantDepartment = (string)(resultContext.Values[5]), 
            ApplicantName = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Status = (string)(resultContext.Values[8]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[9]), 
            CurrentStep = (int)(int?)(resultContext.Values[10]), 
            CurrentApproverName = (string)(resultContext.Values[11]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[12]), 
            CurrentActionStatus = (string)(resultContext.Values[13]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-16 06:13:51.527 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:13:51.527 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:13:51.527 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:13:51.527 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:51.527 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:13:51.527 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:13:51.528 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:13:51.528 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 06:13:51.528 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 06:13:51.530 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:13:51.531 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:13:51.531 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:51.531 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 06:13:51.531 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:13:51.531 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:13:51.532 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 06:13:51.532 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 06:13:51.532 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 06:13:51.533 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 06:13:51.533 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 06:13:51.533 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 06:13:51.534 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 68.9184ms
2025-06-16 06:13:51.534 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 06:13:51.535 +09:00 [DBG] Connection id "0HNDCA62L5E7B" completed keep alive response.
2025-06-16 06:13:51.535 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:13:51.535 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:13:51.535 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:13:51.535 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 74.4481ms
2025-06-16 06:14:25.026 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 06:14:25.029 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 06:14:25.029 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 06:14:25.029 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 06:14:25.032 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 06:14:25.032 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 06:14:25.032 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 06:14:25.033 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 06:14:25.033 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 06:14:25.033 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 06:14:25.033 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 06:14:25.033 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 06:14:25.033 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 06:14:25.034 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 06:14:25.034 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 06:14:25.035 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 06:14:25.035 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 06:14:25.035 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 06:14:25.035 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 06:14:25.036 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 06:14:25.038 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:14:25.042 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:14:25.042 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:14:25.042 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:14:25.042 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:14:25.043 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:14:25.043 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:14:25.043 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:14:25.043 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 06:14:25.044 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 06:14:25.045 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:14:25.046 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:14:25.046 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:14:25.046 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 06:14:25.046 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:14:25.046 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:14:25.046 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 06:14:25.046 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 06:14:25.046 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 06:14:25.046 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 06:14:25.047 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 06:14:25.047 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 06:14:25.047 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 14.4914ms
2025-06-16 06:14:25.048 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 06:14:25.048 +09:00 [DBG] Connection id "0HNDCA62L5E7B" completed keep alive response.
2025-06-16 06:14:25.048 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:14:25.048 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:14:25.048 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:14:25.048 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 22.0377ms
2025-06-16 06:15:11.947 +09:00 [INF] Starting Approval Service API
2025-06-16 06:15:12.169 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 06:15:12.330 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 06:15:12.806 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:15:12.816 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:15:12.827 +09:00 [DBG] Created DbConnection. (10ms).
2025-06-16 06:15:12.834 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:15:12.841 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:15:12.843 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:15:12.852 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (2ms).
2025-06-16 06:15:12.855 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:15:12.855 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:15:12.855 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:15:12.857 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 06:15:12.858 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 06:15:12.858 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:15:12.859 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:15:12.862 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:15:12.930 +09:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:15:12.932 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:15:12.934 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 06:15:12.939 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:15:12.952 +09:00 [DBG] Created DbConnection. (12ms).
2025-06-16 06:15:12.952 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:15:12.952 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:15:12.953 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:15:12.953 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:15:12.954 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:15:12.954 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:15:12.955 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:15:12.955 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:15:12.955 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:15:12.955 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:15:12.955 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:15:12.955 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:15:12.956 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:15:12.989 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 06:15:13.147 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 06:15:13.172 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:15:13.173 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:15:13.173 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:15:13.173 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:15:13.173 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:15:13.173 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:15:13.174 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:15:13.177 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:15:13.178 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 06:15:13.179 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:15:13.179 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:15:13.180 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:15:13.180 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:15:13.180 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:15:13.183 +09:00 [DBG] Hosting starting
2025-06-16 06:15:13.206 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 06:15:13.206 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 06:15:13.462 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 06:15:13.462 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 06:15:13.462 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 06:15:13.463 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 06:15:13.463 +09:00 [INF] Hosting environment: Development
2025-06-16 06:15:13.463 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 06:15:13.463 +09:00 [DBG] Hosting started
2025-06-16 06:18:25.977 +09:00 [INF] Application is shutting down...
2025-06-16 06:18:25.989 +09:00 [DBG] Hosting stopping
2025-06-16 06:18:26.000 +09:00 [DBG] Hosting stopped
2025-06-16 06:18:30.239 +09:00 [INF] Starting Approval Service API
2025-06-16 06:18:30.429 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 06:18:30.511 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 06:18:30.925 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:18:30.933 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:18:30.942 +09:00 [DBG] Created DbConnection. (10ms).
2025-06-16 06:18:30.945 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:18:30.952 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:18:30.953 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:18:30.956 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:18:30.958 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:18:30.959 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:18:30.960 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-16 06:18:30.962 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 06:18:30.963 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-06-16 06:18:30.963 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:18:30.964 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:18:30.967 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:18:30.987 +09:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:18:30.993 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:18:30.996 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (5ms).
2025-06-16 06:18:31.001 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:18:31.002 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:18:31.002 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:18:31.003 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:18:31.003 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:18:31.003 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:18:31.006 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:18:31.007 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:18:31.007 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:18:31.007 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:18:31.011 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:18:31.012 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:18:31.012 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:18:31.013 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:18:31.013 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:18:31.045 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 06:18:31.152 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 06:18:31.170 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:18:31.171 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:18:31.171 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:18:31.171 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:18:31.172 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:18:31.172 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:18:31.175 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:18:31.179 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:18:31.180 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-16 06:18:31.181 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:18:31.181 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:18:31.182 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:18:31.184 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:18:31.184 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:18:31.186 +09:00 [DBG] Hosting starting
2025-06-16 06:18:31.215 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 06:18:31.215 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 06:18:31.578 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 06:18:31.578 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 06:18:31.578 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 06:18:31.578 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 06:18:31.578 +09:00 [INF] Hosting environment: Development
2025-06-16 06:18:31.579 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 06:18:31.579 +09:00 [DBG] Hosting started
2025-06-16 06:20:19.026 +09:00 [INF] Application is shutting down...
2025-06-16 06:20:19.028 +09:00 [DBG] Hosting stopping
2025-06-16 06:20:19.037 +09:00 [DBG] Hosting stopped
2025-06-16 06:20:23.063 +09:00 [INF] Starting Approval Service API
2025-06-16 06:20:23.147 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 06:20:23.212 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 06:20:23.483 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:20:23.487 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:20:23.493 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-16 06:20:23.496 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:20:23.500 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:20:23.502 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:20:23.504 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:20:23.506 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:20:23.506 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:20:23.506 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:20:23.508 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 06:20:23.509 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 06:20:23.509 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:20:23.510 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:20:23.512 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:20:23.524 +09:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:20:23.525 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:20:23.526 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 06:20:23.529 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:20:23.529 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:20:23.529 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:20:23.529 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:20:23.529 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:20:23.529 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:20:23.530 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:20:23.530 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:20:23.530 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:20:23.530 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:20:23.530 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:20:23.530 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:20:23.530 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:20:23.530 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:20:23.531 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:20:23.550 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 06:20:23.642 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 06:20:23.653 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:20:23.654 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:20:23.654 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:20:23.654 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:20:23.654 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:20:23.654 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:20:23.655 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:20:23.657 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:20:23.658 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 06:20:23.658 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:20:23.659 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:20:23.659 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:20:23.660 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:20:23.660 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:20:23.661 +09:00 [DBG] Hosting starting
2025-06-16 06:20:23.674 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 06:20:23.674 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 06:20:23.916 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 06:20:23.916 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 06:20:23.917 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 06:20:23.917 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 06:20:23.917 +09:00 [INF] Hosting environment: Development
2025-06-16 06:20:23.918 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 06:20:23.918 +09:00 [DBG] Hosting started
2025-06-16 06:21:50.667 +09:00 [INF] Application is shutting down...
2025-06-16 06:21:50.669 +09:00 [DBG] Hosting stopping
2025-06-16 06:21:50.685 +09:00 [DBG] Hosting stopped
2025-06-16 06:21:53.438 +09:00 [INF] Starting Approval Service API
2025-06-16 06:21:53.511 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 06:21:53.559 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 06:21:53.778 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:21:53.781 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:21:53.787 +09:00 [DBG] Created DbConnection. (4ms).
2025-06-16 06:21:53.790 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:21:53.794 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:21:53.795 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:21:53.797 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:21:53.798 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:21:53.799 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:21:53.799 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:21:53.801 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 06:21:53.802 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 06:21:53.802 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:21:53.802 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:21:53.805 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:21:53.816 +09:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:21:53.817 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:21:53.818 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 06:21:53.821 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:21:53.821 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:21:53.821 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:21:53.822 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:21:53.822 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:21:53.822 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:21:53.822 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:21:53.822 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:21:53.822 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:21:53.822 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:21:53.822 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:21:53.822 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:21:53.823 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:21:53.823 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:21:53.823 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:21:53.841 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 06:21:53.931 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 06:21:53.942 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:21:53.943 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:21:53.943 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:21:53.943 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:21:53.943 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:21:53.943 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:21:53.944 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:21:53.946 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:21:53.946 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 06:21:53.947 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:21:53.947 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:21:53.948 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:21:53.948 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:21:53.948 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:21:53.950 +09:00 [DBG] Hosting starting
2025-06-16 06:21:53.961 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 06:21:53.962 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 06:21:54.202 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 06:21:54.203 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 06:21:54.203 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 06:21:54.203 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 06:21:54.203 +09:00 [INF] Hosting environment: Development
2025-06-16 06:21:54.204 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 06:21:54.204 +09:00 [DBG] Hosting started
2025-06-16 06:22:53.690 +09:00 [INF] Application is shutting down...
2025-06-16 06:22:53.691 +09:00 [DBG] Hosting stopping
2025-06-16 06:22:53.706 +09:00 [DBG] Hosting stopped
2025-06-16 06:22:56.396 +09:00 [INF] Starting Approval Service API
2025-06-16 06:22:56.468 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 06:22:56.516 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 06:22:56.734 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:22:56.737 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:22:56.743 +09:00 [DBG] Created DbConnection. (4ms).
2025-06-16 06:22:56.745 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:22:56.750 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:22:56.751 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:22:56.753 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:22:56.754 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:22:56.755 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:22:56.755 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:22:56.757 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 06:22:56.757 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-06-16 06:22:56.757 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:22:56.758 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:22:56.760 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:22:56.772 +09:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:22:56.773 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:22:56.774 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 06:22:56.776 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:22:56.776 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:22:56.776 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:22:56.776 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:22:56.777 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:22:56.777 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:22:56.777 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:22:56.777 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:22:56.777 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:22:56.777 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:22:56.777 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:22:56.777 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:22:56.777 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:22:56.777 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:22:56.778 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:22:56.797 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 06:22:56.886 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 06:22:56.897 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:22:56.898 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:22:56.898 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:22:56.898 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:22:56.898 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:22:56.898 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:22:56.899 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:22:56.901 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:22:56.901 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 06:22:56.902 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:22:56.902 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:22:56.903 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:22:56.903 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:22:56.903 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:22:56.905 +09:00 [DBG] Hosting starting
2025-06-16 06:22:56.917 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 06:22:56.917 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 06:22:57.148 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 06:22:57.149 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 06:22:57.149 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 06:22:57.149 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 06:22:57.149 +09:00 [INF] Hosting environment: Development
2025-06-16 06:22:57.149 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 06:22:57.150 +09:00 [DBG] Hosting started
2025-06-16 06:25:07.141 +09:00 [INF] Application is shutting down...
2025-06-16 06:25:07.152 +09:00 [DBG] Hosting stopping
2025-06-16 06:25:07.179 +09:00 [DBG] Hosting stopped
2025-06-16 06:25:10.196 +09:00 [INF] Starting Approval Service API
2025-06-16 06:25:10.275 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 06:25:10.326 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 06:25:10.549 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:25:10.552 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:25:10.557 +09:00 [DBG] Created DbConnection. (4ms).
2025-06-16 06:25:10.560 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:10.564 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:10.565 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:10.567 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:25:10.569 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:25:10.569 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:25:10.569 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:25:10.571 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 06:25:10.571 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 06:25:10.572 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:10.572 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:10.574 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:25:10.587 +09:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:25:10.587 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:10.589 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 06:25:10.591 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:25:10.591 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:25:10.591 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:10.591 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:10.592 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:10.592 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:25:10.592 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:25:10.592 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:25:10.592 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:25:10.592 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:10.592 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:10.592 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:25:10.593 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:25:10.593 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:10.593 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:25:10.611 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 06:25:10.698 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 06:25:10.709 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:10.710 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:10.710 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:25:10.710 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:25:10.710 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:25:10.710 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:25:10.711 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:25:10.713 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:10.714 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 06:25:10.715 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:10.715 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:25:10.715 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:25:10.716 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:10.716 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:25:10.717 +09:00 [DBG] Hosting starting
2025-06-16 06:25:10.730 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 06:25:10.730 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 06:25:10.956 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 06:25:10.956 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 06:25:10.957 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 06:25:10.957 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 06:25:10.957 +09:00 [INF] Hosting environment: Development
2025-06-16 06:25:10.957 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 06:25:10.957 +09:00 [DBG] Hosting started
2025-06-16 06:25:29.331 +09:00 [INF] Application is shutting down...
2025-06-16 06:25:29.333 +09:00 [DBG] Hosting stopping
2025-06-16 06:25:29.347 +09:00 [DBG] Hosting stopped
2025-06-16 06:25:32.359 +09:00 [INF] Starting Approval Service API
2025-06-16 06:25:32.434 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 06:25:32.485 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 06:25:32.710 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:25:32.713 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:25:32.718 +09:00 [DBG] Created DbConnection. (4ms).
2025-06-16 06:25:32.721 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:32.724 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:32.726 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:32.728 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:25:32.730 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:25:32.731 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:25:32.731 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:25:32.733 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 06:25:32.733 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 06:25:32.733 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:32.734 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:32.736 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:25:32.748 +09:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:25:32.748 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:32.749 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 06:25:32.752 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:25:32.752 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:25:32.752 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:32.752 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:32.752 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:32.752 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:25:32.753 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:25:32.753 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:25:32.753 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:25:32.753 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:32.753 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:32.753 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:25:32.753 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:25:32.754 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:32.754 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:25:32.778 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 06:25:32.873 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 06:25:32.884 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:32.885 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:32.885 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:25:32.885 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:25:32.885 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:25:32.885 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:25:32.886 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:25:32.888 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:32.888 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 06:25:32.889 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:25:32.889 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:25:32.890 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:25:32.890 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:25:32.890 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:25:32.892 +09:00 [DBG] Hosting starting
2025-06-16 06:25:32.905 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 06:25:32.906 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 06:25:33.168 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 06:25:33.168 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 06:25:33.169 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 06:25:33.169 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 06:25:33.169 +09:00 [INF] Hosting environment: Development
2025-06-16 06:25:33.170 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 06:25:33.170 +09:00 [DBG] Hosting started
2025-06-16 06:42:28.678 +09:00 [INF] Application is shutting down...
2025-06-16 06:42:28.680 +09:00 [DBG] Hosting stopping
2025-06-16 06:42:28.693 +09:00 [DBG] Hosting stopped
2025-06-16 06:42:36.765 +09:00 [INF] Starting Approval Service API
2025-06-16 06:42:36.862 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 06:42:36.954 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 06:42:37.205 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:42:37.209 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:42:37.215 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-16 06:42:37.218 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:42:37.226 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:42:37.229 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:42:37.231 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:42:37.232 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:42:37.233 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:42:37.233 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:42:37.235 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 06:42:37.236 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 06:42:37.236 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:42:37.237 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:42:37.240 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:42:37.254 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:42:37.256 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:42:37.258 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (2ms).
2025-06-16 06:42:37.260 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:42:37.260 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:42:37.260 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:42:37.261 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:42:37.261 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:42:37.261 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:42:37.261 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:42:37.261 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:42:37.261 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:42:37.261 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:42:37.261 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:42:37.261 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:42:37.262 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:42:37.262 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:42:37.262 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:42:37.284 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 06:42:37.375 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 06:42:37.386 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:42:37.387 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:42:37.387 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:42:37.387 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:42:37.387 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:42:37.387 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:42:37.388 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:42:37.390 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:42:37.390 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 06:42:37.391 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:42:37.391 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:42:37.392 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:42:37.392 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:42:37.392 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:42:37.394 +09:00 [DBG] Hosting starting
2025-06-16 06:42:37.411 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 06:42:37.411 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 06:42:37.704 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 06:42:37.704 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 06:42:37.704 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 06:42:37.705 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 06:42:37.705 +09:00 [INF] Hosting environment: Development
2025-06-16 06:42:37.705 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 06:42:37.705 +09:00 [DBG] Hosting started
2025-06-16 06:44:34.616 +09:00 [INF] Application is shutting down...
2025-06-16 06:44:34.626 +09:00 [DBG] Hosting stopping
2025-06-16 06:44:34.645 +09:00 [DBG] Hosting stopped
2025-06-16 06:47:14.234 +09:00 [INF] Starting Approval Service API
2025-06-16 06:47:14.424 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 06:47:14.511 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 06:47:14.785 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:47:14.790 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:47:14.795 +09:00 [DBG] Created DbConnection. (4ms).
2025-06-16 06:47:14.798 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:47:14.804 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:14.805 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:47:14.807 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:47:14.809 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:47:14.809 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:47:14.809 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:47:14.811 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 06:47:14.811 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 06:47:14.811 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:47:14.812 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:14.815 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:47:14.827 +09:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:47:14.828 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:14.829 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 06:47:14.832 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:47:14.832 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:47:14.832 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:47:14.832 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:14.832 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:47:14.832 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:47:14.832 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:47:14.832 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:47:14.833 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:47:14.833 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:47:14.833 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:14.833 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:47:14.833 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:47:14.833 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:14.833 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:47:14.855 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 06:47:14.948 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 06:47:14.960 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:47:14.960 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:14.960 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:47:14.960 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:47:14.960 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:47:14.961 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:47:14.962 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:47:14.964 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:14.964 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 06:47:14.965 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:14.965 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:47:14.966 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:47:14.966 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:47:14.966 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:47:14.968 +09:00 [DBG] Hosting starting
2025-06-16 06:47:14.994 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 06:47:14.994 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 06:47:15.257 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 06:47:15.257 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 06:47:15.257 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 06:47:15.257 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 06:47:15.258 +09:00 [INF] Hosting environment: Development
2025-06-16 06:47:15.258 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 06:47:15.258 +09:00 [DBG] Hosting started
2025-06-16 06:47:18.863 +09:00 [DBG] Connection id "0HNDCAOPOTCM1" accepted.
2025-06-16 06:47:18.864 +09:00 [DBG] Connection id "0HNDCAOPOTCM1" started.
2025-06-16 06:47:18.894 +09:00 [DBG] Connection 0HNDCAOPOTCM1 established using the following protocol: "Tls12"
2025-06-16 06:47:18.920 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 06:47:18.932 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 06:47:18.934 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 06:47:18.934 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 06:47:18.947 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 06:47:18.948 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 06:47:18.957 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 06:47:18.958 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 06:47:18.958 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 06:47:18.958 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 06:47:18.959 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 06:47:18.959 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 06:47:18.959 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 06:47:18.960 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 06:47:18.965 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 06:47:18.966 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 06:47:18.967 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 06:47:18.967 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 06:47:18.967 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 06:47:18.970 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 06:47:18.998 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:47:19.008 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        ApplicantPosition = r.ApplicantPosition, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-16 06:47:19.077 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            string value9;
            List<ApprovalStep> namelessParameter{0};
            int? value11;
            string value12;
            string value13;
            string value14;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            value9 = dataReader.GetString(8);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value11 = (int?)dataReader.GetInt32(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            value13 = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
            value14 = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                value9, 
                namelessParameter{0}, 
                (object)value11, 
                value12, 
                value13, 
                value14 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid) : dataReader.GetGuid(12);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(17) ? default(bool) : dataReader.GetBoolean(17);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(19) ? default(int) : dataReader.GetInt32(19);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantDepartment = (string)(resultContext.Values[5]), 
            ApplicantName = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Status = (string)(resultContext.Values[8]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[9]), 
            CurrentStep = (int)(int?)(resultContext.Values[10]), 
            CurrentApproverName = (string)(resultContext.Values[11]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[12]), 
            CurrentActionStatus = (string)(resultContext.Values[13]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-16 06:47:19.102 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:47:19.102 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:47:19.102 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:47:19.102 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:19.102 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:47:19.102 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:47:19.103 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-16 06:47:19.105 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 06:47:19.108 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 06:47:19.126 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:47:19.141 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:47:19.142 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:19.142 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 33ms reading results.
2025-06-16 06:47:19.142 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:19.142 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:47:19.144 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 06:47:19.144 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 06:47:19.144 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 06:47:19.144 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 06:47:19.145 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 06:47:19.145 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 06:47:19.188 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 227.6333ms
2025-06-16 06:47:19.190 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 06:47:19.190 +09:00 [DBG] Connection id "0HNDCAOPOTCM1" completed keep alive response.
2025-06-16 06:47:19.192 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:47:19.193 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:47:19.193 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:47:19.194 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 276.1351ms
2025-06-16 06:47:40.804 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 06:47:40.807 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 06:47:40.807 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 06:47:40.807 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 06:47:40.809 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 06:47:40.809 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 06:47:40.810 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 06:47:40.810 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 06:47:40.810 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 06:47:40.811 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 06:47:40.811 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 06:47:40.811 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 06:47:40.812 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 06:47:40.814 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 06:47:40.814 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 06:47:40.814 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 06:47:40.814 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 06:47:40.814 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 06:47:40.815 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 06:47:40.815 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 06:47:40.851 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:47:40.855 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:47:40.856 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:47:40.856 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:47:40.856 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:40.856 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:47:40.856 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:47:40.856 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:47:40.856 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 06:47:40.857 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 06:47:40.858 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:47:40.859 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 06:47:40.859 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:40.859 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 06:47:40.859 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:47:40.859 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:47:40.860 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 06:47:40.860 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 06:47:40.861 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 06:47:40.861 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 06:47:40.861 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 06:47:40.861 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 06:47:40.862 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 50.8641ms
2025-06-16 06:47:40.863 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 06:47:40.863 +09:00 [DBG] Connection id "0HNDCAOPOTCM1" completed keep alive response.
2025-06-16 06:47:40.863 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:47:40.863 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:47:40.863 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:47:40.864 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 60.2133ms
2025-06-16 06:48:22.121 +09:00 [INF] Starting Approval Service API
2025-06-16 06:48:22.268 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 06:48:22.358 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 06:48:22.707 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 06:48:22.711 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:48:22.721 +09:00 [DBG] Created DbConnection. (8ms).
2025-06-16 06:48:22.724 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:48:22.732 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:48:22.734 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:48:22.736 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:48:22.741 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:48:22.741 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:48:22.741 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:48:22.744 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 06:48:22.745 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-06-16 06:48:22.745 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:48:22.748 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:48:22.750 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:48:22.766 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:48:22.767 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:48:22.781 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 06:48:22.833 +09:00 [DBG] Creating DbConnection.
2025-06-16 06:48:22.833 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 06:48:22.834 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:48:22.872 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:48:22.894 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:48:22.899 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (8ms).
2025-06-16 06:48:22.914 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 06:48:22.915 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 06:48:22.915 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 06:48:22.916 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:48:22.921 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:48:22.921 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:48:22.922 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 06:48:22.923 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:48:22.923 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:48:22.951 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 06:48:23.068 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 06:48:23.087 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:48:23.088 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:48:23.088 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 06:48:23.088 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:48:23.089 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 06:48:23.089 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:48:23.090 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 06:48:23.092 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:48:23.092 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 06:48:23.094 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 06:48:23.095 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 06:48:23.097 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 06:48:23.097 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 06:48:23.097 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 06:48:23.100 +09:00 [DBG] Hosting starting
2025-06-16 06:48:23.121 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 06:48:23.122 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 06:48:23.371 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 06:48:23.371 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 06:48:23.371 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 06:48:23.372 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 06:48:23.372 +09:00 [INF] Hosting environment: Development
2025-06-16 06:48:23.372 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 06:48:23.372 +09:00 [DBG] Hosting started
2025-06-16 07:00:37.000 +09:00 [INF] Application is shutting down...
2025-06-16 07:00:37.003 +09:00 [DBG] Hosting stopping
2025-06-16 07:00:37.025 +09:00 [DBG] Hosting stopped
2025-06-16 07:00:40.552 +09:00 [INF] Starting Approval Service API
2025-06-16 07:00:40.658 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 07:00:40.736 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 07:00:41.026 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 07:00:41.030 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:00:41.037 +09:00 [DBG] Created DbConnection. (6ms).
2025-06-16 07:00:41.040 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:00:41.047 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:00:41.050 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:00:41.052 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:00:41.054 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:00:41.054 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:00:41.054 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:00:41.057 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 07:00:41.058 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-16 07:00:41.058 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:00:41.060 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:00:41.063 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:00:41.079 +09:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:00:41.080 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:00:41.083 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (2ms).
2025-06-16 07:00:41.087 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:00:41.087 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:00:41.087 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:00:41.087 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:00:41.087 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:00:41.087 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:00:41.087 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:00:41.087 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:00:41.087 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:00:41.088 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:00:41.088 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:00:41.088 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:00:41.088 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:00:41.088 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:00:41.088 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:00:41.107 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 07:00:41.198 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 07:00:41.211 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:00:41.211 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:00:41.211 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 07:00:41.211 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:00:41.211 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:00:41.212 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:00:41.213 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:00:41.215 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:00:41.215 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 07:00:41.216 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:00:41.216 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:00:41.217 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 07:00:41.217 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:00:41.217 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:00:41.219 +09:00 [DBG] Hosting starting
2025-06-16 07:00:41.232 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 07:00:41.232 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 07:00:41.440 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 07:00:41.441 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 07:00:41.441 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 07:00:41.443 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 07:00:41.447 +09:00 [INF] Hosting environment: Development
2025-06-16 07:00:41.447 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 07:00:41.447 +09:00 [DBG] Hosting started
2025-06-16 07:07:47.416 +09:00 [INF] Application is shutting down...
2025-06-16 07:07:47.418 +09:00 [DBG] Hosting stopping
2025-06-16 07:07:47.432 +09:00 [DBG] Hosting stopped
2025-06-16 07:07:51.367 +09:00 [INF] Starting Approval Service API
2025-06-16 07:07:51.467 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 07:07:51.550 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 07:07:51.826 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 07:07:51.830 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:07:51.837 +09:00 [DBG] Created DbConnection. (6ms).
2025-06-16 07:07:51.840 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:07:51.847 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:07:51.848 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:07:51.850 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:07:51.853 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:07:51.853 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:07:51.853 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:07:51.856 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-16 07:07:51.857 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-16 07:07:51.857 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:07:51.859 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:07:51.861 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:07:51.877 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:07:51.878 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:07:51.879 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 07:07:51.881 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:07:51.881 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:07:51.881 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:07:51.882 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:07:51.882 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:07:51.882 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:07:51.882 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:07:51.883 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:07:51.883 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:07:51.883 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:07:51.883 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:07:51.883 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:07:51.883 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:07:51.883 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:07:51.884 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:07:51.904 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 07:07:52.008 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 07:07:52.021 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:07:52.022 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:07:52.022 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 07:07:52.022 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:07:52.022 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:07:52.023 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:07:52.023 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:07:52.025 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:07:52.026 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 07:07:52.027 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:07:52.027 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:07:52.028 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 07:07:52.028 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:07:52.028 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:07:52.030 +09:00 [DBG] Hosting starting
2025-06-16 07:07:52.045 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 07:07:52.046 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 07:07:52.288 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 07:07:52.288 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 07:07:52.288 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 07:07:52.289 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 07:07:52.289 +09:00 [INF] Hosting environment: Development
2025-06-16 07:07:52.289 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 07:07:52.289 +09:00 [DBG] Hosting started
2025-06-16 07:10:53.977 +09:00 [INF] Application is shutting down...
2025-06-16 07:10:53.980 +09:00 [DBG] Hosting stopping
2025-06-16 07:10:53.993 +09:00 [DBG] Hosting stopped
2025-06-16 07:10:56.978 +09:00 [INF] Starting Approval Service API
2025-06-16 07:10:57.057 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 07:10:57.111 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 07:10:57.349 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 07:10:57.353 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:10:57.359 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-16 07:10:57.362 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:10:57.367 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:10:57.370 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:10:57.372 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:10:57.374 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:10:57.374 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:10:57.374 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:10:57.377 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 07:10:57.377 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 07:10:57.377 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:10:57.378 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:10:57.380 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:10:57.393 +09:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:10:57.394 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:10:57.395 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 07:10:57.397 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:10:57.398 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:10:57.398 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:10:57.398 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:10:57.398 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:10:57.398 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:10:57.398 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:10:57.398 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:10:57.398 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:10:57.399 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:10:57.399 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:10:57.399 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:10:57.399 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:10:57.399 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:10:57.399 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:10:57.418 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 07:10:57.508 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 07:10:57.520 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:10:57.520 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:10:57.520 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 07:10:57.520 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:10:57.520 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:10:57.521 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:10:57.521 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:10:57.524 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:10:57.524 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 07:10:57.525 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:10:57.526 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:10:57.526 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 07:10:57.527 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:10:57.527 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:10:57.528 +09:00 [DBG] Hosting starting
2025-06-16 07:10:57.542 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 07:10:57.542 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 07:10:57.752 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 07:10:57.752 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 07:10:57.752 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 07:10:57.753 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 07:10:57.753 +09:00 [INF] Hosting environment: Development
2025-06-16 07:10:57.753 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 07:10:57.753 +09:00 [DBG] Hosting started
2025-06-16 07:14:31.881 +09:00 [INF] Application is shutting down...
2025-06-16 07:14:31.882 +09:00 [DBG] Hosting stopping
2025-06-16 07:14:31.896 +09:00 [DBG] Hosting stopped
2025-06-16 07:14:35.504 +09:00 [INF] Starting Approval Service API
2025-06-16 07:14:35.595 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 07:14:35.653 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 07:14:35.922 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 07:14:35.926 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:14:35.934 +09:00 [DBG] Created DbConnection. (7ms).
2025-06-16 07:14:35.937 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:14:35.942 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:14:35.943 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:14:35.945 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:14:35.949 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:14:35.949 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:14:35.949 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:14:35.951 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-16 07:14:35.952 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-16 07:14:35.952 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:14:35.953 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:14:35.955 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:14:35.968 +09:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:14:35.969 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:14:35.971 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 07:14:35.973 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:14:35.973 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:14:35.973 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:14:35.974 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:14:35.974 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:14:35.974 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:14:35.974 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:14:35.974 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:14:35.974 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:14:35.974 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:14:35.975 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:14:35.975 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:14:35.975 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:14:35.975 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:14:35.975 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:14:35.996 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 07:14:36.091 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 07:14:36.104 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:14:36.105 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:14:36.105 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 07:14:36.105 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:14:36.105 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:14:36.105 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:14:36.106 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:14:36.108 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:14:36.109 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 07:14:36.110 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:14:36.110 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:14:36.111 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 07:14:36.111 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:14:36.111 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:14:36.113 +09:00 [DBG] Hosting starting
2025-06-16 07:14:36.125 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 07:14:36.126 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 07:14:36.431 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 07:14:36.431 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 07:14:36.431 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 07:14:36.432 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 07:14:36.433 +09:00 [INF] Hosting environment: Development
2025-06-16 07:14:36.433 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 07:14:36.434 +09:00 [DBG] Hosting started
2025-06-16 07:17:07.550 +09:00 [INF] Application is shutting down...
2025-06-16 07:17:07.551 +09:00 [DBG] Hosting stopping
2025-06-16 07:17:07.564 +09:00 [DBG] Hosting stopped
2025-06-16 07:22:40.113 +09:00 [INF] Starting Approval Service API
2025-06-16 07:22:40.197 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 07:22:40.262 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 07:22:40.503 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 07:22:40.508 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:22:40.515 +09:00 [DBG] Created DbConnection. (6ms).
2025-06-16 07:22:40.518 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:22:40.527 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:22:40.530 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:22:40.531 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:22:40.534 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:22:40.534 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:22:40.534 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:22:40.537 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 07:22:40.538 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-06-16 07:22:40.538 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:22:40.540 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:22:40.543 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:22:40.563 +09:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:22:40.570 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:22:40.573 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (2ms).
2025-06-16 07:22:40.579 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:22:40.580 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-16 07:22:40.581 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:22:40.581 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:22:40.581 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:22:40.581 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:22:40.581 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:22:40.581 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:22:40.581 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:22:40.582 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:22:40.582 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:22:40.582 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:22:40.582 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:22:40.582 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:22:40.582 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:22:40.603 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 07:22:40.708 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 07:22:40.722 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:22:40.723 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:22:40.723 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 07:22:40.723 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:22:40.723 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:22:40.723 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:22:40.724 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:22:40.726 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:22:40.727 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 07:22:40.728 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:22:40.728 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:22:40.729 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 07:22:40.729 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:22:40.729 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:22:40.731 +09:00 [DBG] Hosting starting
2025-06-16 07:22:40.744 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 07:22:40.744 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 07:22:40.997 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 07:22:40.998 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 07:22:40.998 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 07:22:40.999 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 07:22:40.999 +09:00 [INF] Hosting environment: Development
2025-06-16 07:22:40.999 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 07:22:41.000 +09:00 [DBG] Hosting started
2025-06-16 07:38:00.145 +09:00 [INF] Application is shutting down...
2025-06-16 07:38:00.154 +09:00 [DBG] Hosting stopping
2025-06-16 07:38:00.169 +09:00 [DBG] Hosting stopped
2025-06-16 07:38:04.592 +09:00 [INF] Starting Approval Service API
2025-06-16 07:38:04.709 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 07:38:04.792 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 07:38:05.195 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 07:38:05.199 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:38:05.215 +09:00 [DBG] Created DbConnection. (12ms).
2025-06-16 07:38:05.218 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:38:05.226 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:38:05.231 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:38:05.235 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:38:05.239 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:38:05.239 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:38:05.239 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:38:05.242 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 07:38:05.242 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 07:38:05.242 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:38:05.243 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:38:05.246 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:38:05.279 +09:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:38:05.280 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:38:05.287 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (6ms).
2025-06-16 07:38:05.289 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:38:05.290 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:38:05.290 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:38:05.290 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:38:05.290 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:38:05.290 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:38:05.291 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:38:05.291 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:38:05.291 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:38:05.291 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:38:05.292 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:38:05.292 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:38:05.292 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:38:05.292 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:38:05.292 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:38:05.313 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 07:38:05.453 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 07:38:05.467 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:38:05.468 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:38:05.469 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 07:38:05.469 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:38:05.469 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:38:05.470 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:38:05.474 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:38:05.478 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:38:05.478 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-16 07:38:05.479 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:38:05.479 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:38:05.480 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 07:38:05.480 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:38:05.480 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:38:05.482 +09:00 [DBG] Hosting starting
2025-06-16 07:38:05.505 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 07:38:05.505 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 07:38:05.918 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 07:38:05.919 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 07:38:05.919 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 07:38:05.920 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 07:38:05.920 +09:00 [INF] Hosting environment: Development
2025-06-16 07:38:05.920 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 07:38:05.921 +09:00 [DBG] Hosting started
2025-06-16 07:39:19.282 +09:00 [INF] Application is shutting down...
2025-06-16 07:39:19.285 +09:00 [DBG] Hosting stopping
2025-06-16 07:39:19.303 +09:00 [DBG] Hosting stopped
2025-06-16 07:39:22.910 +09:00 [INF] Starting Approval Service API
2025-06-16 07:39:23.080 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 07:39:23.183 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 07:39:23.559 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 07:39:23.563 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:39:23.570 +09:00 [DBG] Created DbConnection. (6ms).
2025-06-16 07:39:23.573 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:39:23.578 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:39:23.579 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:39:23.581 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:39:23.584 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:39:23.585 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:39:23.585 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:39:23.587 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-16 07:39:23.587 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-16 07:39:23.588 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:39:23.590 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:39:23.593 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:39:23.612 +09:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:39:23.613 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:39:23.614 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 07:39:23.617 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:39:23.618 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:39:23.618 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:39:23.618 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:39:23.618 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:39:23.618 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:39:23.618 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:39:23.618 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:39:23.619 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:39:23.619 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:39:23.619 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:39:23.619 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:39:23.619 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:39:23.619 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:39:23.619 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:39:23.650 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 07:39:23.811 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 07:39:23.827 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:39:23.828 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:39:23.828 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 07:39:23.828 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:39:23.828 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:39:23.828 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:39:23.829 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:39:23.831 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:39:23.832 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 07:39:23.834 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:39:23.834 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:39:23.834 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 07:39:23.835 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:39:23.835 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:39:23.836 +09:00 [DBG] Hosting starting
2025-06-16 07:39:23.853 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 07:39:23.854 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 07:39:24.200 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 07:39:24.200 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 07:39:24.201 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 07:39:24.201 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 07:39:24.202 +09:00 [INF] Hosting environment: Development
2025-06-16 07:39:24.202 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 07:39:24.202 +09:00 [DBG] Hosting started
2025-06-16 07:40:16.575 +09:00 [INF] Application is shutting down...
2025-06-16 07:40:16.576 +09:00 [DBG] Hosting stopping
2025-06-16 07:40:16.592 +09:00 [DBG] Hosting stopped
2025-06-16 07:40:19.447 +09:00 [INF] Starting Approval Service API
2025-06-16 07:40:19.524 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 07:40:19.574 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 07:40:19.803 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 07:40:19.806 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:40:19.812 +09:00 [DBG] Created DbConnection. (4ms).
2025-06-16 07:40:19.814 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:40:19.819 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:40:19.820 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:40:19.822 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:40:19.823 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:40:19.823 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:40:19.824 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:40:19.826 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 07:40:19.826 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-06-16 07:40:19.826 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:40:19.827 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:40:19.829 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:40:19.841 +09:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:40:19.842 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:40:19.843 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 07:40:19.846 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:40:19.846 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:40:19.846 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:40:19.846 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:40:19.846 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:40:19.846 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:40:19.846 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:40:19.846 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:40:19.846 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:40:19.846 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:40:19.846 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:40:19.847 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:40:19.847 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:40:19.847 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:40:19.847 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:40:19.865 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 07:40:19.991 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 07:40:20.002 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:40:20.003 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:40:20.003 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 07:40:20.003 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:40:20.003 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:40:20.003 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:40:20.004 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:40:20.006 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:40:20.006 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 07:40:20.007 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:40:20.007 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:40:20.008 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 07:40:20.008 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:40:20.008 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:40:20.010 +09:00 [DBG] Hosting starting
2025-06-16 07:40:20.022 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 07:40:20.022 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 07:40:20.303 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 07:40:20.304 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 07:40:20.304 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 07:40:20.304 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 07:40:20.304 +09:00 [INF] Hosting environment: Development
2025-06-16 07:40:20.304 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 07:40:20.304 +09:00 [DBG] Hosting started
2025-06-16 07:46:05.782 +09:00 [INF] Application is shutting down...
2025-06-16 07:46:05.783 +09:00 [DBG] Hosting stopping
2025-06-16 07:46:05.802 +09:00 [DBG] Hosting stopped
2025-06-16 07:53:15.345 +09:00 [INF] Starting Approval Service API
2025-06-16 07:53:15.431 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 07:53:15.507 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 07:53:15.760 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 07:53:15.766 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:53:15.773 +09:00 [DBG] Created DbConnection. (8ms).
2025-06-16 07:53:15.776 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:53:15.784 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:53:15.786 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:53:15.788 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:53:15.790 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:53:15.790 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:53:15.790 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:53:15.792 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-16 07:53:15.793 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-16 07:53:15.793 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:53:15.793 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:53:15.796 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:53:15.814 +09:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:53:15.816 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:53:15.817 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 07:53:15.820 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:53:15.820 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:53:15.820 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:53:15.820 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:53:15.820 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:53:15.820 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:53:15.821 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 07:53:15.821 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:53:15.821 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 07:53:15.821 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:53:15.821 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:53:15.821 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:53:15.821 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 07:53:15.821 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:53:15.821 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:53:15.840 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 07:53:15.933 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 07:53:15.944 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:53:15.945 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:53:15.945 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 07:53:15.945 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:53:15.945 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:53:15.945 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:53:15.946 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 07:53:15.948 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:53:15.949 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 07:53:15.950 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:53:15.951 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:53:15.951 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 07:53:15.951 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:53:15.951 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:53:15.953 +09:00 [DBG] Hosting starting
2025-06-16 07:53:15.965 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 07:53:15.966 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 07:53:16.188 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 07:53:16.188 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 07:53:16.188 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 07:53:16.189 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 07:53:16.189 +09:00 [INF] Hosting environment: Development
2025-06-16 07:53:16.189 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 07:53:16.189 +09:00 [DBG] Hosting started
2025-06-16 07:53:31.537 +09:00 [DBG] Connection id "0HNDCBTPN9A8P" accepted.
2025-06-16 07:53:31.538 +09:00 [DBG] Connection id "0HNDCBTPN9A8P" started.
2025-06-16 07:53:31.573 +09:00 [DBG] Connection 0HNDCBTPN9A8P established using the following protocol: "Tls12"
2025-06-16 07:53:31.594 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 07:53:31.607 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 07:53:31.608 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 07:53:31.609 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 07:53:31.621 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 07:53:31.621 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 07:53:31.630 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 07:53:31.630 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 07:53:31.630 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 07:53:31.630 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 07:53:31.631 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 07:53:31.631 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 07:53:31.631 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 07:53:31.633 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 07:53:31.636 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 07:53:31.637 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 07:53:31.637 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 07:53:31.637 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 07:53:31.637 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 07:53:31.639 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 07:53:31.646 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 07:53:31.655 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        ApplicantPosition = r.ApplicantPosition, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-16 07:53:31.724 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            string value9;
            List<ApprovalStep> namelessParameter{0};
            int? value11;
            string value12;
            string value13;
            string value14;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            value9 = dataReader.GetString(8);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value11 = (int?)dataReader.GetInt32(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            value13 = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
            value14 = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                value9, 
                namelessParameter{0}, 
                (object)value11, 
                value12, 
                value13, 
                value14 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid) : dataReader.GetGuid(12);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(17) ? default(bool) : dataReader.GetBoolean(17);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(19) ? default(int) : dataReader.GetInt32(19);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantDepartment = (string)(resultContext.Values[5]), 
            ApplicantName = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Status = (string)(resultContext.Values[8]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[9]), 
            CurrentStep = (int)(int?)(resultContext.Values[10]), 
            CurrentApproverName = (string)(resultContext.Values[11]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[12]), 
            CurrentActionStatus = (string)(resultContext.Values[13]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-16 07:53:31.735 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:53:31.736 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:53:31.736 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:53:31.736 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:53:31.736 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 07:53:31.736 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:53:31.738 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-16 07:53:31.739 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 07:53:31.741 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 07:53:31.758 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:53:31.774 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:53:31.775 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:53:31.775 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 33ms reading results.
2025-06-16 07:53:31.775 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:53:31.775 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:53:31.776 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 07:53:31.777 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 07:53:31.777 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 07:53:31.777 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 07:53:31.777 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 07:53:31.777 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 07:53:31.820 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 187.8552ms
2025-06-16 07:53:31.822 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 07:53:31.822 +09:00 [DBG] Connection id "0HNDCBTPN9A8P" completed keep alive response.
2025-06-16 07:53:31.823 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 07:53:31.824 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:53:31.824 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:53:31.825 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 231.8326ms
2025-06-16 07:54:11.720 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 07:54:11.726 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 07:54:11.726 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 07:54:11.727 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 07:54:11.729 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 07:54:11.729 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 07:54:11.730 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 07:54:11.730 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 07:54:11.730 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 07:54:11.730 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 07:54:11.730 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 07:54:11.731 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 07:54:11.731 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 07:54:11.735 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 07:54:11.736 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 07:54:11.736 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 07:54:11.736 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 07:54:11.736 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 07:54:11.737 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 07:54:11.737 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 07:54:11.772 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 07:54:11.775 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:54:11.775 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:54:11.775 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:54:11.776 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:54:11.776 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 07:54:11.776 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:54:11.776 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:54:11.777 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 07:54:11.777 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 07:54:11.779 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:54:11.779 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:54:11.779 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:54:11.779 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 07:54:11.780 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:54:11.780 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:54:11.780 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 07:54:11.780 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 07:54:11.780 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 07:54:11.780 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 07:54:11.780 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 07:54:11.780 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 07:54:11.781 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 50.0528ms
2025-06-16 07:54:11.781 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 07:54:11.781 +09:00 [DBG] Connection id "0HNDCBTPN9A8P" completed keep alive response.
2025-06-16 07:54:11.781 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 07:54:11.781 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:54:11.782 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:54:11.782 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 62.1089ms
2025-06-16 07:55:16.521 +09:00 [DBG] Connection id "0HNDCBTPN9A8P" received FIN.
2025-06-16 07:55:16.525 +09:00 [DBG] Connection id "0HNDCBTPN9A8P" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 07:55:16.526 +09:00 [DBG] Connection id "0HNDCBTPN9A8P" disconnecting.
2025-06-16 07:55:16.530 +09:00 [DBG] Connection id "0HNDCBTPN9A8P" stopped.
2025-06-16 07:55:22.589 +09:00 [DBG] Connection id "0HNDCBTPN9A8Q" accepted.
2025-06-16 07:55:22.589 +09:00 [DBG] Connection id "0HNDCBTPN9A8Q" started.
2025-06-16 07:55:22.615 +09:00 [DBG] Connection 0HNDCBTPN9A8Q established using the following protocol: "Tls12"
2025-06-16 07:55:22.619 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 07:55:22.620 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 07:55:22.620 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 07:55:22.620 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 07:55:22.621 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 07:55:22.621 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 07:55:22.622 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 07:55:22.622 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 07:55:22.622 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 07:55:22.622 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 07:55:22.622 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 07:55:22.622 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 07:55:22.623 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 07:55:22.624 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 07:55:22.624 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 07:55:22.624 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 07:55:22.624 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 07:55:22.624 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 07:55:22.625 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 07:55:22.625 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 07:55:22.626 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 07:55:22.627 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:55:22.627 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:55:22.627 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:55:22.628 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:55:22.628 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 07:55:22.628 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:55:22.628 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:55:22.628 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 07:55:22.628 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 07:55:22.629 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:55:22.629 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:55:22.629 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:55:22.629 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 07:55:22.629 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:55:22.629 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:55:22.630 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 07:55:22.630 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 07:55:22.630 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 07:55:22.630 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 07:55:22.630 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 07:55:22.630 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 07:55:22.631 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.2993ms
2025-06-16 07:55:22.633 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 07:55:22.634 +09:00 [DBG] Connection id "0HNDCBTPN9A8Q" completed keep alive response.
2025-06-16 07:55:22.634 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 07:55:22.634 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:55:22.634 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:55:22.634 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 15.5275ms
2025-06-16 07:56:05.788 +09:00 [DBG] Connection id "0HNDCBTPN9A8R" accepted.
2025-06-16 07:56:05.789 +09:00 [DBG] Connection id "0HNDCBTPN9A8R" started.
2025-06-16 07:56:05.815 +09:00 [DBG] Connection 0HNDCBTPN9A8R established using the following protocol: "Tls12"
2025-06-16 07:56:05.819 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 07:56:05.821 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 07:56:05.821 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 07:56:05.821 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 07:56:05.822 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 07:56:05.822 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 07:56:05.828 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 07:56:05.828 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 07:56:05.828 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 07:56:05.829 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 07:56:05.829 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 07:56:05.829 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 07:56:05.829 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 07:56:05.830 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 07:56:05.830 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 07:56:05.830 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 07:56:05.831 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 07:56:05.831 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 07:56:05.831 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 07:56:05.831 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 07:56:05.835 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 07:56:05.836 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantName = r.ApplicantName, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantPosition = r.ApplicantPosition, 
        Steps = r.Steps, 
        Attachments = r.Attachments, 
        Status = r.Status, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-16 07:56:05.845 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-16 07:56:05.852 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            List<ApprovalStep> namelessParameter{0};
            List<ApprovalAttachment> namelessParameter{1};
            string value11;
            int? value12;
            string value13;
            string value14;
            string value15;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            namelessParameter{1} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalAttachment, List<ApprovalAttachment>>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
                }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()]);
            value11 = dataReader.GetString(28);
            value12 = (int?)dataReader.GetInt32(29);
            value13 = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
            value14 = dataReader.IsDBNull(31) ? default(string) : dataReader.GetString(31);
            value15 = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                namelessParameter{0}, 
                namelessParameter{1}, 
                value11, 
                (object)value12, 
                value13, 
                value14, 
                value15 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(8) ? default(object) : (object)dataReader.GetGuid(8) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(8) ? default(Guid) : dataReader.GetGuid(8);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(11) ? default(Guid) : dataReader.GetGuid(11);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(16) ? default(bool) : dataReader.GetBoolean(16);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(18) ? default(int) : dataReader.GetInt32(18);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalAttachment>, ApprovalAttachment, ApprovalAttachment>(
            collectionId: 1, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
            { 
                (object)(Guid?)dataReader.GetGuid(0), 
                (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
            }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(20) ? default(Guid?) : (Guid?)dataReader.GetGuid(20) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
            { 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
            }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalAttachment entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalAttachment instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalAttachment);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(20) ? default(object) : (object)dataReader.GetGuid(20) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalAttachment)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                {
                                    return 
                                    {
                                        ApprovalAttachment instance;
                                        instance = new ApprovalAttachment();
                                        instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(20) ? default(Guid) : dataReader.GetGuid(20);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(21) ? default(Guid) : dataReader.GetGuid(21);
                                        instance.<FileName>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<FilePath>k__BackingField = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
                                        instance.<FileSize>k__BackingField = dataReader.IsDBNull(24) ? default(long?) : (long?)dataReader.GetInt64(24);
                                        instance.<FileType>k__BackingField = dataReader.IsDBNull(25) ? default(string) : dataReader.GetString(25);
                                        instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(26) ? default(DateTime) : dataReader.GetDateTime(26);
                                        instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalAttachment)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            ApplicantDepartment = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[8]), 
            Attachments = (List<ApprovalAttachment>)(resultContext.Values[9]), 
            Status = (string)(resultContext.Values[10]), 
            CurrentStep = (int)(int?)(resultContext.Values[11]), 
            CurrentApproverName = (string)(resultContext.Values[12]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[13]), 
            CurrentActionStatus = (string)(resultContext.Values[14]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-16 07:56:05.858 +09:00 [DBG] Creating DbConnection.
2025-06-16 07:56:05.859 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 07:56:05.859 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:56:05.859 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:56:05.859 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 07:56:05.859 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:56:05.860 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 07:56:05.860 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 07:56:05.862 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 07:56:05.864 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:56:05.867 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:56:05.874 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:56:05.874 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:56:05.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:56:05.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:56:05.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:56:05.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:56:05.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:56:05.875 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 07:56:05.875 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:56:05.876 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 13ms reading results.
2025-06-16 07:56:05.876 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 07:56:05.876 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:56:05.876 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 07:56:05.876 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 07:56:05.876 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 07:56:05.876 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 07:56:05.876 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 07:56:05.876 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 07:56:05.879 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 50.1748ms
2025-06-16 07:56:05.879 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 07:56:05.880 +09:00 [DBG] Connection id "0HNDCBTPN9A8R" completed keep alive response.
2025-06-16 07:56:05.880 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 07:56:05.880 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 07:56:05.880 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 07:56:05.880 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 60.9193ms
2025-06-16 07:56:31.515 +09:00 [DBG] Connection id "0HNDCBTPN9A8Q" received FIN.
2025-06-16 07:56:31.517 +09:00 [DBG] Connection id "0HNDCBTPN9A8Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 07:56:31.519 +09:00 [DBG] Connection id "0HNDCBTPN9A8Q" disconnecting.
2025-06-16 07:56:31.519 +09:00 [DBG] Connection id "0HNDCBTPN9A8Q" stopped.
2025-06-16 07:57:20.819 +09:00 [DBG] Connection id "0HNDCBTPN9A8R" received FIN.
2025-06-16 07:57:20.820 +09:00 [DBG] Connection id "0HNDCBTPN9A8R" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 07:57:20.820 +09:00 [DBG] Connection id "0HNDCBTPN9A8R" disconnecting.
2025-06-16 07:57:20.820 +09:00 [DBG] Connection id "0HNDCBTPN9A8R" stopped.
2025-06-16 08:06:58.023 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" accepted.
2025-06-16 08:06:58.024 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" started.
2025-06-16 08:06:58.054 +09:00 [DBG] Connection 0HNDCBTPN9A8S established using the following protocol: "Tls12"
2025-06-16 08:06:58.059 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:06:58.070 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:06:58.070 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:06:58.070 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:06:58.073 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:06:58.073 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:06:58.075 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:06:58.076 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:06:58.076 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:06:58.076 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:06:58.076 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:06:58.076 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:06:58.077 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:06:58.080 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:06:58.081 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:06:58.081 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:06:58.081 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:06:58.081 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:06:58.081 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:06:58.082 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:06:58.094 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:06:58.097 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:06:58.101 +09:00 [DBG] Created DbConnection. (3ms).
2025-06-16 08:06:58.101 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:06:58.107 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:06:58.108 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:06:58.108 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:06:58.108 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:06:58.108 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:06:58.113 +09:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:06:58.114 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:06:58.115 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:06:58.115 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:06:58.115 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:06:58.115 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:06:58.115 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:06:58.115 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:06:58.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:06:58.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:06:58.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:06:58.116 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:06:58.116 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 08:06:58.116 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:06:58.116 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:06:58.116 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:06:58.116 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:06:58.116 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:06:58.117 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:06:58.117 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:06:58.117 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:06:58.118 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 41.4103ms
2025-06-16 08:06:58.119 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:06:58.119 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:06:58.119 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:06:58.119 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:06:58.119 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:06:58.119 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 60.0772ms
2025-06-16 08:07:00.408 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:07:00.409 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:07:00.409 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:07:00.409 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:00.409 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:07:00.410 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:00.410 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:07:00.410 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:07:00.410 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:07:00.410 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:07:00.410 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:07:00.411 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:07:00.411 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:00.417 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:00.417 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:07:00.418 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:07:00.418 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:07:00.419 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:07:00.419 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:07:00.419 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:07:00.420 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:07:00.421 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:07:00.421 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:07:00.421 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:00.421 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:00.421 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:07:00.421 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:00.422 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-16 08:07:00.423 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:00.424 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:00.425 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:00.425 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:00.425 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:00.425 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:00.425 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:00.425 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:00.425 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:00.425 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:00.425 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:00.426 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:00.426 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:00.426 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:07:00.426 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:00.426 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:00.426 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:07:00.426 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:07:00.426 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:07:00.426 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:07:00.426 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:07:00.426 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:07:00.426 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 15.6397ms
2025-06-16 08:07:00.426 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:00.427 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:07:00.427 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:07:00.427 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:00.427 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:00.427 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 18.8816ms
2025-06-16 08:07:01.381 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:07:01.381 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:07:01.381 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:07:01.382 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:01.382 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:07:01.382 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:01.382 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:07:01.382 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:07:01.382 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:07:01.382 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:07:01.383 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:07:01.383 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:07:01.383 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:07:01.383 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:07:01.383 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:07:01.384 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:07:01.384 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:01.384 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:01.384 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:07:01.384 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:01.384 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:07:01.385 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:07:01.385 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:07:01.385 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:01.385 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:01.385 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:07:01.385 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:01.385 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:01.385 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:07:01.386 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:07:01.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:01.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:01.387 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:01.387 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:07:01.388 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:01.388 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:01.388 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:07:01.388 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:07:01.388 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:07:01.388 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:07:01.388 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:07:01.388 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:07:01.389 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 5.6552ms
2025-06-16 08:07:01.389 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:01.389 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:07:01.389 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:07:01.389 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:01.389 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:01.389 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 8.8174ms
2025-06-16 08:07:04.308 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:07:04.308 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:07:04.309 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:07:04.309 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:04.309 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:07:04.309 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:04.309 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:07:04.309 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:07:04.310 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:07:04.310 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:07:04.310 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:07:04.310 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:07:04.310 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:04.310 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:04.311 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:07:04.311 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:07:04.311 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:07:04.311 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:07:04.311 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:07:04.311 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:07:04.312 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:07:04.313 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:07:04.314 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:07:04.314 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:04.315 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:04.315 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:07:04.315 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:04.315 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:04.316 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:04.317 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:04.317 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:04.317 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:04.318 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:04.318 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:04.318 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:04.318 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:04.318 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:04.318 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:04.318 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:04.318 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:04.318 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:04.319 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:07:04.319 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:04.319 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:04.320 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:07:04.320 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:07:04.320 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:07:04.320 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:07:04.320 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:07:04.320 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:07:04.321 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 10.7417ms
2025-06-16 08:07:04.321 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:04.321 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:07:04.321 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:07:04.322 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:04.322 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:04.322 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 14.3914ms
2025-06-16 08:07:05.559 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:07:05.559 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:07:05.560 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:07:05.560 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:05.560 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:07:05.560 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:05.561 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:07:05.561 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:07:05.561 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:07:05.561 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:07:05.561 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:07:05.561 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:07:05.561 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:05.562 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:05.562 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:07:05.562 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:07:05.562 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:07:05.562 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:07:05.562 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:07:05.562 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:07:05.563 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:07:05.563 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:07:05.564 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:07:05.564 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:05.564 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:05.564 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:07:05.565 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:05.565 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:05.565 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:05.566 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:05.567 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:05.567 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:05.567 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:05.568 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:05.568 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:05.568 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:05.568 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:05.568 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:05.568 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:05.569 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:05.569 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:05.569 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 08:07:05.569 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:05.570 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:05.570 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:07:05.570 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:07:05.570 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:07:05.570 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:07:05.570 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:07:05.570 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:07:05.571 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 9.3097ms
2025-06-16 08:07:05.571 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:05.571 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:07:05.571 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:07:05.571 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:05.571 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:05.571 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 12.6741ms
2025-06-16 08:07:21.668 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:07:21.669 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:07:21.670 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:07:21.670 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:21.670 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:07:21.670 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:21.671 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:07:21.671 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:07:21.671 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:07:21.671 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:07:21.672 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:07:21.672 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:07:21.672 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:21.673 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:21.674 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:07:21.675 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:07:21.676 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:07:21.676 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:07:21.677 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:07:21.678 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:07:21.687 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:07:21.696 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:07:21.701 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-16 08:07:21.702 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:21.703 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:21.704 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:07:21.705 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:21.705 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-16 08:07:21.711 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:21.716 +09:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:21.726 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:21.731 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:21.733 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:21.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:21.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:21.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:21.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:21.735 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:21.735 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:21.735 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:21.736 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:21.737 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 18ms reading results.
2025-06-16 08:07:21.738 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:21.738 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:21.740 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:07:21.740 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:07:21.740 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:07:21.741 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:07:21.741 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:07:21.741 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:07:21.751 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 78.413ms
2025-06-16 08:07:21.752 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:21.752 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:07:21.753 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:07:21.753 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:21.753 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:21.753 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 85.694ms
2025-06-16 08:07:22.572 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:07:22.572 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:07:22.572 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:07:22.573 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:22.573 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:07:22.573 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:22.574 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:07:22.574 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:07:22.574 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:07:22.574 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:07:22.574 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:07:22.574 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:07:22.575 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:07:22.575 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:07:22.575 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:07:22.575 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:07:22.575 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:22.575 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:22.576 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:07:22.576 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:22.576 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:07:22.577 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:07:22.577 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:07:22.577 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:22.577 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:22.577 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:07:22.577 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:22.577 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:22.577 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:07:22.579 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:07:22.580 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:22.580 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:22.581 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:22.581 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:07:22.581 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:22.581 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:22.581 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:07:22.581 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:07:22.582 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:07:22.582 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:07:22.582 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:07:22.582 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:07:22.582 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 7.565ms
2025-06-16 08:07:22.582 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:22.582 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:07:22.582 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:07:22.583 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:22.583 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:22.583 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 10.7716ms
2025-06-16 08:07:23.469 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:07:23.469 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:07:23.469 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:07:23.469 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:23.470 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:07:23.470 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:23.470 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:07:23.470 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:07:23.470 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:07:23.470 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:07:23.470 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:07:23.470 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:07:23.470 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:23.471 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:23.471 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:07:23.471 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:07:23.471 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:07:23.471 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:07:23.471 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:07:23.471 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:07:23.472 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:07:23.472 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:07:23.472 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:07:23.473 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:23.473 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:23.473 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:07:23.473 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:23.473 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:23.473 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:23.474 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:23.474 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:23.475 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:23.475 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:23.475 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:23.475 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:23.475 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:23.476 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:23.476 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:23.476 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:23.476 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:23.476 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:23.476 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 08:07:23.476 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:23.477 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:23.477 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:07:23.477 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:07:23.477 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:07:23.477 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:07:23.477 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:07:23.477 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:07:23.477 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6.9371ms
2025-06-16 08:07:23.478 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:23.478 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:07:23.478 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:07:23.478 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:23.478 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:23.478 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 9.1192ms
2025-06-16 08:07:31.191 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:07:31.192 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:07:31.192 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:07:31.192 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:31.193 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:07:31.193 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:31.193 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:07:31.194 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:07:31.194 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:07:31.194 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:07:31.194 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:07:31.194 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:07:31.194 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:07:31.195 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:07:31.196 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:07:31.197 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:07:31.198 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:31.198 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:31.198 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:07:31.198 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:31.199 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:07:31.200 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:07:31.200 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:07:31.200 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:31.201 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:31.201 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:07:31.201 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:31.201 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:31.201 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:07:31.201 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:07:31.202 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:31.202 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:31.202 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:31.202 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:07:31.202 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:31.202 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:31.202 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:07:31.202 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:07:31.202 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:07:31.203 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:07:31.203 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:07:31.203 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:07:31.203 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.4545ms
2025-06-16 08:07:31.203 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:31.203 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:07:31.203 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:07:31.203 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:31.203 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:31.203 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 12.5787ms
2025-06-16 08:07:32.601 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:07:32.602 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:07:32.602 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:07:32.603 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:32.603 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:07:32.604 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:32.604 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:07:32.605 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:07:32.605 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:07:32.605 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:07:32.605 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:07:32.605 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:07:32.605 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:07:32.606 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:07:32.606 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:07:32.607 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:07:32.607 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:32.607 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:32.607 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:07:32.607 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:32.611 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:07:32.612 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:07:32.612 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:07:32.613 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:32.613 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:32.613 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:07:32.613 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:32.613 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:32.614 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:07:32.615 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:07:32.616 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:32.616 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:32.616 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:32.616 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:07:32.616 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:32.616 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:32.617 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:07:32.617 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:07:32.617 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:07:32.617 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:07:32.617 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:07:32.617 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:07:32.618 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.267ms
2025-06-16 08:07:32.618 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:32.618 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:07:32.618 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:07:32.618 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:32.618 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:32.618 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 17.0413ms
2025-06-16 08:07:33.730 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - null null
2025-06-16 08:07:33.730 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-16 08:07:33.730 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-16 08:07:33.731 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 08:07:33.731 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:07:33.731 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 08:07:33.735 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:07:33.735 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:07:33.735 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:07:33.735 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:07:33.735 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:07:33.735 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:07:33.735 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:33.736 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:33.736 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 08:07:33.736 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-16 08:07:33.736 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 08:07:33.736 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 08:07:33.736 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 08:07:33.737 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-16 08:07:33.739 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:07:33.740 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-16 08:07:33.742 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-16 08:07:33.742 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-16 08:07:33.753 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-16 08:07:33.761 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(27) ? default(Guid?) : (Guid?)dataReader.GetGuid(27) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(27) ? default(object) : (object)dataReader.GetGuid(27) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(27) ? default(Guid) : dataReader.GetGuid(27);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(28) ? default(Guid) : dataReader.GetGuid(28);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(29) ? default(string) : dataReader.GetString(29);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(31) ? default(long?) : (long?)dataReader.GetInt64(31);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(33) ? default(DateTime) : dataReader.GetDateTime(33);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(34) ? default(string) : dataReader.GetString(34);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 08:07:33.765 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:07:33.765 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:07:33.765 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:33.765 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:33.766 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:07:33.766 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:33.766 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:33.766 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:33.766 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:33.769 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:33.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:33.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:33.788 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:33.788 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 21ms reading results.
2025-06-16 08:07:33.788 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:33.788 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:33.788 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:07:33.788 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:07:33.788 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:07:33.788 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:07:33.788 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:07:33.788 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-16 08:07:33.789 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 53.3438ms
2025-06-16 08:07:33.789 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 08:07:33.789 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:07:33.789 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:07:33.789 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:33.789 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:33.789 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - 200 null application/json; charset=utf-8 59.123ms
2025-06-16 08:07:36.626 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:07:36.628 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:07:36.628 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:07:36.628 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:36.629 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:07:36.629 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:36.629 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:07:36.629 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:07:36.630 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:07:36.631 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:07:36.632 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:07:36.632 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:07:36.632 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:36.633 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:07:36.633 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:07:36.634 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:07:36.634 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:07:36.635 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:07:36.635 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:07:36.635 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:07:36.636 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:07:36.636 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:07:36.637 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:07:36.637 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:36.637 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:36.637 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:07:36.637 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:36.637 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:36.637 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:36.638 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:07:36.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:36.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:36.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:36.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:36.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:36.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:36.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:36.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:36.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:36.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:36.640 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:36.640 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:07:36.641 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:36.641 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:36.641 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:07:36.641 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:07:36.641 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:07:36.641 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:07:36.641 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:07:36.641 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:07:36.642 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 9.6945ms
2025-06-16 08:07:36.642 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:07:36.643 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:07:36.643 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:07:36.643 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:36.643 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:36.644 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 17.4433ms
2025-06-16 08:07:38.054 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:07:38.056 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:07:38.057 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:07:38.057 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:38.058 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:07:38.058 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:38.058 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:07:38.058 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:07:38.058 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:07:38.059 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:07:38.059 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:07:38.059 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:07:38.059 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:07:38.059 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:07:38.059 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:07:38.059 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:07:38.060 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:38.060 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:38.060 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:07:38.060 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:07:38.060 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:07:38.061 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:07:38.061 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:07:38.061 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:38.061 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:38.061 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:07:38.061 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:38.062 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:07:38.062 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:07:38.063 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:07:38.064 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:38.064 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:07:38.064 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:38.064 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:07:38.065 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:07:38.065 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:38.065 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:07:38.065 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:07:38.065 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:07:38.065 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:07:38.065 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:07:38.066 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:07:38.066 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 7.1597ms
2025-06-16 08:07:38.066 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:07:38.067 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:07:38.067 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:07:38.067 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:07:38.067 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:07:38.067 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 12.8437ms
2025-06-16 08:08:28.234 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:08:28.236 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:08:28.236 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:08:28.236 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:08:28.237 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:08:28.237 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:08:28.237 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:08:28.238 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:08:28.238 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:08:28.238 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:08:28.238 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:08:28.238 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:08:28.238 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:08:28.239 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:08:28.239 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:08:28.239 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:08:28.239 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:08:28.239 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:08:28.240 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:08:28.240 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:08:28.242 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:08:28.244 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:08:28.245 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:08:28.245 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:08:28.245 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:08:28.246 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:08:28.246 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:08:28.247 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:08:28.247 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:08:28.248 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:08:28.249 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:28.249 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:28.250 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:28.250 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:28.250 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:28.251 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:28.251 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:28.251 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:28.251 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:28.251 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:28.251 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:08:28.251 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-16 08:08:28.251 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:08:28.251 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:08:28.252 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:08:28.252 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:08:28.252 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:08:28.252 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:08:28.252 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:08:28.252 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:08:28.253 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 14.9442ms
2025-06-16 08:08:28.253 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:08:28.253 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:08:28.254 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:08:28.254 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:08:28.254 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:08:28.254 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 20.0765ms
2025-06-16 08:08:54.178 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:08:54.179 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:08:54.179 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:08:54.180 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:08:54.180 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:08:54.180 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:08:54.181 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:08:54.181 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:08:54.181 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:08:54.181 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:08:54.182 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:08:54.182 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:08:54.184 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:08:54.184 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:08:54.184 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:08:54.185 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:08:54.185 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:08:54.185 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:08:54.185 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:08:54.185 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:08:54.186 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:08:54.186 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:08:54.186 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:08:54.186 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:08:54.186 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:08:54.186 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:08:54.186 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:08:54.187 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:08:54.187 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:08:54.187 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:08:54.187 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:54.187 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:54.187 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:08:54.188 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:08:54.188 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:08:54.188 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:08:54.189 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:08:54.189 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:08:54.189 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:08:54.189 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:08:54.189 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:08:54.190 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:08:54.190 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 6.436ms
2025-06-16 08:08:54.190 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:08:54.190 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:08:54.190 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:08:54.190 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:08:54.190 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:08:54.191 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 12.5325ms
2025-06-16 08:08:56.469 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:08:56.471 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:08:56.472 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:08:56.472 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:08:56.472 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:08:56.472 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:08:56.473 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:08:56.473 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:08:56.473 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:08:56.473 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:08:56.473 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:08:56.474 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:08:56.474 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:08:56.474 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:08:56.474 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:08:56.474 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:08:56.474 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:08:56.475 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:08:56.475 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:08:56.475 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:08:56.476 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:08:56.477 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:08:56.477 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:08:56.477 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:08:56.477 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:08:56.478 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:08:56.478 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:08:56.478 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:08:56.478 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:08:56.478 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:08:56.479 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:56.479 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:56.479 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:56.479 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:56.479 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:56.479 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:56.480 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:56.480 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:56.480 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:56.480 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:08:56.480 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:08:56.480 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:08:56.481 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:08:56.481 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:08:56.481 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:08:56.481 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:08:56.481 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:08:56.482 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:08:56.482 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:08:56.482 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:08:56.482 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.5327ms
2025-06-16 08:08:56.482 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:08:56.483 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" completed keep alive response.
2025-06-16 08:08:56.483 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:08:56.483 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:08:56.483 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:08:56.483 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 14.3911ms
2025-06-16 08:09:13.021 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" received FIN.
2025-06-16 08:09:13.022 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 08:09:13.023 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" disconnecting.
2025-06-16 08:09:13.023 +09:00 [DBG] Connection id "0HNDCBTPN9A8S" stopped.
2025-06-16 08:11:09.767 +09:00 [DBG] Connection id "0HNDCBTPN9A8T" accepted.
2025-06-16 08:11:09.768 +09:00 [DBG] Connection id "0HNDCBTPN9A8T" started.
2025-06-16 08:11:09.793 +09:00 [DBG] Connection 0HNDCBTPN9A8T established using the following protocol: "Tls12"
2025-06-16 08:11:09.798 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:11:09.798 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:11:09.798 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:11:09.799 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:11:09.800 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:11:09.800 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:11:09.801 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:11:09.801 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:11:09.801 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:11:09.801 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:11:09.801 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:11:09.801 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:11:09.801 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:11:09.802 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:11:09.802 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:11:09.802 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:11:09.802 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:11:09.802 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:11:09.802 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:11:09.803 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:11:09.804 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:11:09.808 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:11:09.809 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:11:09.809 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:11:09.809 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:11:09.809 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:11:09.809 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:11:09.810 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:11:09.810 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:11:09.811 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:11:09.812 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:11:09.813 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:11:09.813 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:11:09.813 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:11:09.813 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:11:09.813 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:11:09.813 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:11:09.813 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:11:09.813 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:11:09.813 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:11:09.813 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:11:09.813 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:11:09.814 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.7985ms
2025-06-16 08:11:09.814 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:11:09.814 +09:00 [DBG] Connection id "0HNDCBTPN9A8T" completed keep alive response.
2025-06-16 08:11:09.814 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:11:09.814 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:11:09.815 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:11:09.815 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 17.1031ms
2025-06-16 08:11:32.816 +09:00 [DBG] Connection id "0HNDCBTPN9A8T" received FIN.
2025-06-16 08:11:32.816 +09:00 [DBG] Connection id "0HNDCBTPN9A8T" disconnecting.
2025-06-16 08:11:32.817 +09:00 [DBG] Connection id "0HNDCBTPN9A8T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 08:11:32.818 +09:00 [DBG] Connection id "0HNDCBTPN9A8T" stopped.
2025-06-16 08:12:00.340 +09:00 [DBG] Connection id "0HNDCBTPN9A8U" accepted.
2025-06-16 08:12:00.340 +09:00 [DBG] Connection id "0HNDCBTPN9A8U" started.
2025-06-16 08:12:00.364 +09:00 [DBG] Connection 0HNDCBTPN9A8U established using the following protocol: "Tls12"
2025-06-16 08:12:00.370 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:12:00.371 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:12:00.371 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:12:00.371 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:12:00.372 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:12:00.372 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:12:00.372 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:12:00.372 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:12:00.372 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:12:00.372 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:12:00.372 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:12:00.372 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:12:00.372 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:12:00.373 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:12:00.373 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:12:00.373 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:12:00.373 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:12:00.373 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:12:00.373 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:12:00.373 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:12:00.374 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:12:00.375 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:12:00.375 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:12:00.376 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:12:00.376 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:12:00.376 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:12:00.376 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:12:00.376 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:12:00.377 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:12:00.377 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:12:00.378 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:12:00.378 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:12:00.378 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:12:00.378 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:12:00.378 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:12:00.378 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:12:00.379 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:12:00.379 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:12:00.379 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:12:00.379 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:12:00.379 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:12:00.379 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:12:00.380 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 7.4119ms
2025-06-16 08:12:00.380 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:12:00.380 +09:00 [DBG] Connection id "0HNDCBTPN9A8U" completed keep alive response.
2025-06-16 08:12:00.380 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:12:00.380 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:12:00.380 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:12:00.380 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 10.5007ms
2025-06-16 08:12:00.860 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:12:00.860 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:12:00.860 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:12:00.860 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:12:00.861 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:12:00.861 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:12:00.861 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:12:00.861 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:12:00.861 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:12:00.861 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:12:00.861 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:12:00.861 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:12:00.861 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:12:00.861 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:12:00.861 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:12:00.861 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:12:00.861 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:12:00.861 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:12:00.861 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:12:00.862 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:12:00.862 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:12:00.862 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:12:00.862 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:12:00.862 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:12:00.862 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:12:00.862 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:12:00.863 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:12:00.863 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:12:00.863 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:12:00.863 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:12:00.863 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:12:00.863 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:12:00.863 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:12:00.863 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:12:00.863 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:12:00.863 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:12:00.864 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:12:00.864 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:12:00.864 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:12:00.864 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:12:00.864 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:12:00.864 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:12:00.864 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 2.7663ms
2025-06-16 08:12:00.864 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:12:00.864 +09:00 [DBG] Connection id "0HNDCBTPN9A8U" completed keep alive response.
2025-06-16 08:12:00.864 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:12:00.864 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:12:00.864 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:12:00.864 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 4.0377ms
2025-06-16 08:13:15.339 +09:00 [DBG] Connection id "0HNDCBTPN9A8U" received FIN.
2025-06-16 08:13:15.342 +09:00 [DBG] Connection id "0HNDCBTPN9A8U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 08:13:15.343 +09:00 [DBG] Connection id "0HNDCBTPN9A8U" disconnecting.
2025-06-16 08:13:15.346 +09:00 [DBG] Connection id "0HNDCBTPN9A8U" stopped.
2025-06-16 08:13:30.776 +09:00 [DBG] Connection id "0HNDCBTPN9A8V" accepted.
2025-06-16 08:13:30.776 +09:00 [DBG] Connection id "0HNDCBTPN9A8V" started.
2025-06-16 08:13:30.809 +09:00 [DBG] Connection 0HNDCBTPN9A8V established using the following protocol: "Tls12"
2025-06-16 08:13:30.812 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:13:30.813 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:13:30.813 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:13:30.813 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:13:30.814 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:13:30.814 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:13:30.814 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:13:30.814 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:13:30.814 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:13:30.814 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:13:30.814 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:13:30.815 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:13:30.815 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:13:30.815 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:13:30.815 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:13:30.816 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:13:30.816 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:13:30.816 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:13:30.816 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:13:30.818 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:13:30.819 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:13:30.822 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:13:30.822 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:13:30.822 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:13:30.822 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:13:30.822 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:13:30.822 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:13:30.822 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:13:30.823 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:13:30.823 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:13:30.824 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:13:30.824 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:13:30.824 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:13:30.824 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:13:30.824 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:13:30.825 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:13:30.825 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:13:30.825 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:13:30.825 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:13:30.825 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:13:30.825 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:13:30.825 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:13:30.826 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 11.1337ms
2025-06-16 08:13:30.826 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:13:30.826 +09:00 [DBG] Connection id "0HNDCBTPN9A8V" completed keep alive response.
2025-06-16 08:13:30.826 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:13:30.826 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:13:30.826 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:13:30.826 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 13.8895ms
2025-06-16 08:14:39.212 +09:00 [DBG] Connection id "0HNDCBTPN9A90" accepted.
2025-06-16 08:14:39.214 +09:00 [DBG] Connection id "0HNDCBTPN9A90" started.
2025-06-16 08:14:39.238 +09:00 [DBG] Connection 0HNDCBTPN9A90 established using the following protocol: "Tls12"
2025-06-16 08:14:39.243 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:14:39.243 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:14:39.244 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:14:39.244 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:39.244 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:14:39.244 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:39.246 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:14:39.247 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:14:39.248 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:14:39.249 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:14:39.250 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:14:39.250 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:14:39.250 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:14:39.255 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:14:39.256 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:14:39.257 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:14:39.257 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:39.257 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:39.257 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:14:39.257 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:39.258 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:14:39.259 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:14:39.259 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:14:39.259 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:39.259 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:39.259 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:14:39.259 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:39.260 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:39.260 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:14:39.260 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:14:39.261 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:39.261 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:39.261 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:39.261 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:14:39.261 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:39.261 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:39.261 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:14:39.261 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:14:39.261 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:14:39.261 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:14:39.262 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:14:39.262 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:14:39.262 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 11.8854ms
2025-06-16 08:14:39.262 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:39.262 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:14:39.263 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:14:39.263 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:39.263 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:39.263 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 19.9385ms
2025-06-16 08:14:45.761 +09:00 [DBG] Connection id "0HNDCBTPN9A8V" received FIN.
2025-06-16 08:14:45.762 +09:00 [DBG] Connection id "0HNDCBTPN9A8V" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 08:14:45.762 +09:00 [DBG] Connection id "0HNDCBTPN9A8V" disconnecting.
2025-06-16 08:14:45.763 +09:00 [DBG] Connection id "0HNDCBTPN9A8V" stopped.
2025-06-16 08:14:50.367 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:14:50.368 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:14:50.368 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:14:50.368 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:50.368 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:14:50.368 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:50.368 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:14:50.368 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:14:50.368 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:14:50.368 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:14:50.369 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:14:50.369 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:14:50.369 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:14:50.369 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:14:50.369 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:14:50.369 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:14:50.369 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:14:50.369 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:14:50.369 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:14:50.369 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:14:50.369 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:14:50.370 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:14:50.370 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:14:50.370 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:50.370 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:50.370 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:14:50.370 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:50.370 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:50.370 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:14:50.370 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:14:50.371 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:50.371 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:50.371 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:50.371 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:50.371 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:50.371 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:50.371 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:50.372 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:50.372 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:50.372 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:50.372 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:50.372 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:14:50.372 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:50.372 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:50.372 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:14:50.373 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:14:50.373 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:14:50.373 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:14:50.375 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:14:50.375 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:14:50.376 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.4041ms
2025-06-16 08:14:50.376 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:50.376 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:14:50.376 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:14:50.376 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:50.376 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:50.376 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 9.0393ms
2025-06-16 08:14:51.978 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:14:51.978 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:14:51.978 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:14:51.978 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:51.979 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:14:51.979 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:51.980 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:14:51.980 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:14:51.980 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:14:51.980 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:14:51.980 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:14:51.980 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:14:51.981 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:14:51.981 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:14:51.982 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:14:51.982 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:14:51.982 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:51.982 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:51.983 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:14:51.983 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:51.984 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:14:51.985 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:14:51.985 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:14:51.985 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:51.986 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:51.986 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:14:51.986 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:51.986 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:51.986 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:14:51.987 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:14:51.987 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:51.987 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:51.988 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:51.988 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:14:51.988 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:51.988 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:51.989 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:14:51.989 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:14:51.989 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:14:51.989 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:14:51.989 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:14:51.990 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:14:51.990 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 9.6246ms
2025-06-16 08:14:51.990 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:51.991 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:14:51.991 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:14:51.991 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:51.991 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:51.991 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 13.4244ms
2025-06-16 08:14:52.874 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:14:52.875 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:14:52.875 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:14:52.875 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:52.875 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:14:52.875 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:52.875 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:14:52.876 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:14:52.876 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:14:52.876 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:14:52.876 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:14:52.877 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:14:52.877 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:14:52.877 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:14:52.877 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:14:52.877 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:14:52.877 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:14:52.878 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:14:52.878 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:14:52.878 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:14:52.878 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:14:52.879 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:14:52.879 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:14:52.879 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:52.880 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:52.880 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:14:52.881 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-06-16 08:14:52.881 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-16 08:14:52.882 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:14:52.883 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:14:52.884 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:52.884 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:52.884 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:52.884 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:52.885 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:52.885 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:52.885 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:52.885 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:52.885 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:52.885 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:52.885 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:52.885 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:14:52.885 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:52.886 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:52.886 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:14:52.886 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:14:52.886 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:14:52.886 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:14:52.886 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:14:52.887 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:14:52.887 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 10.6625ms
2025-06-16 08:14:52.888 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:52.890 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:14:52.890 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:14:52.890 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:52.890 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:52.890 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 16.7284ms
2025-06-16 08:14:54.326 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:14:54.326 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:14:54.326 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:14:54.327 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:54.327 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:14:54.327 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:54.328 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:14:54.328 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:14:54.328 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:14:54.329 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:14:54.345 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:14:54.349 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:14:54.349 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:14:54.380 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:14:54.380 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:14:54.380 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:14:54.380 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:54.380 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:54.380 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:14:54.380 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:54.381 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:14:54.381 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:14:54.381 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:14:54.381 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:54.381 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:54.381 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:14:54.381 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:54.382 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:54.382 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:14:54.382 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:14:54.383 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:54.383 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:54.383 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:54.383 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:14:54.383 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:54.383 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:54.383 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:14:54.383 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:14:54.383 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:14:54.383 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:14:54.383 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:14:54.383 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:14:54.384 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 34.4485ms
2025-06-16 08:14:54.384 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:54.384 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:14:54.384 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:14:54.384 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:54.384 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:54.384 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 58.2296ms
2025-06-16 08:14:55.010 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:14:55.010 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:14:55.011 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:14:55.011 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:55.011 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:14:55.011 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:55.011 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:14:55.011 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:14:55.011 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:14:55.012 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:14:55.012 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:14:55.012 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:14:55.012 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:14:55.012 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:14:55.012 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:14:55.012 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:14:55.012 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:14:55.012 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:14:55.013 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:14:55.013 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:14:55.014 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:14:55.015 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:14:55.015 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:14:55.015 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:55.015 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:55.015 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:14:55.016 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:55.016 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-16 08:14:55.016 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:14:55.017 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:14:55.017 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:55.017 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:55.018 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:55.018 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:55.018 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:55.018 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:55.018 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:55.018 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:55.018 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:55.018 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:55.018 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:55.019 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:14:55.019 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:55.019 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:55.019 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:14:55.019 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:14:55.019 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:14:55.020 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:14:55.020 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:14:55.020 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:14:55.020 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.297ms
2025-06-16 08:14:55.021 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:55.021 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:14:55.021 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:14:55.021 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:55.021 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:55.022 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 12.4983ms
2025-06-16 08:14:55.607 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:14:55.608 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:14:55.609 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:14:55.609 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:55.609 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:14:55.610 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:55.610 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:14:55.610 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:14:55.610 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:14:55.610 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:14:55.610 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:14:55.610 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:14:55.611 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:14:55.611 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:14:55.611 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:14:55.611 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:14:55.611 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:55.611 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:55.611 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:14:55.612 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:55.612 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:14:55.613 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:14:55.613 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:14:55.613 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:55.613 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:55.613 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:14:55.613 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:55.613 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:55.613 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:14:55.614 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:14:55.614 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:55.615 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:55.615 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:55.615 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:14:55.615 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:55.615 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:55.615 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:14:55.615 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:14:55.615 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:14:55.616 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:14:55.616 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:14:55.616 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:14:55.616 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 5.5581ms
2025-06-16 08:14:55.616 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:55.616 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:14:55.616 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:14:55.617 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:55.617 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:55.617 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 10.2211ms
2025-06-16 08:14:56.274 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:14:56.276 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:14:56.277 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:14:56.277 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:56.278 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:14:56.278 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:56.278 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:14:56.279 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:14:56.279 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:14:56.279 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:14:56.279 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:14:56.279 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:14:56.280 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:14:56.280 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:14:56.280 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:14:56.280 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:14:56.280 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:14:56.280 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:14:56.280 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:14:56.281 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:14:56.281 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:14:56.282 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:14:56.282 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:14:56.282 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:56.282 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:56.282 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:14:56.282 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:56.282 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:56.283 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:14:56.283 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:14:56.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:56.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:56.284 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:56.284 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:56.284 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:56.284 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:56.285 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:56.286 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:56.286 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:56.286 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:56.286 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:56.286 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-16 08:14:56.287 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:56.287 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:56.287 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:14:56.287 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:14:56.287 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:14:56.288 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:14:56.288 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:14:56.288 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:14:56.289 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 9.2888ms
2025-06-16 08:14:56.290 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:56.290 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:14:56.290 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:14:56.291 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:56.291 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:56.291 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 16.5292ms
2025-06-16 08:14:56.824 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:14:56.825 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:14:56.825 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:14:56.825 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:56.825 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:14:56.825 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:56.825 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:14:56.826 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:14:56.826 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:14:56.826 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:14:56.826 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:14:56.827 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:14:56.827 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:14:56.827 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:14:56.828 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:14:56.828 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:14:56.828 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:56.828 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:56.828 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:14:56.829 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:14:56.829 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:14:56.830 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:14:56.831 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:14:56.831 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:56.831 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:56.831 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:14:56.832 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:56.832 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:56.832 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:14:56.832 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:14:56.833 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:56.833 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:56.834 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:56.834 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:14:56.835 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:56.835 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:56.835 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:14:56.835 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:14:56.835 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:14:56.836 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:14:56.836 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:14:56.836 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:14:56.836 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 9.0582ms
2025-06-16 08:14:56.836 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:14:56.836 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:14:56.836 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:14:56.837 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:56.837 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:56.837 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 13.0149ms
2025-06-16 08:14:58.297 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:14:58.297 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:14:58.297 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:14:58.297 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:58.297 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:14:58.297 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:58.297 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:14:58.297 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:14:58.298 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:14:58.298 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:14:58.298 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:14:58.298 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:14:58.298 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:14:58.298 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:14:58.298 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:14:58.299 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:14:58.299 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:14:58.299 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:14:58.299 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:14:58.299 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:14:58.300 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:14:58.301 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:14:58.301 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:14:58.301 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:58.301 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:58.301 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:14:58.301 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:58.302 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:14:58.302 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:14:58.302 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:14:58.303 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:58.303 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:58.303 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:58.303 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:58.303 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:58.303 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:58.303 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:58.303 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:58.303 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:58.304 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:14:58.304 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:58.304 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:14:58.304 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:14:58.304 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:58.304 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:14:58.304 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:14:58.304 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:14:58.304 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:14:58.304 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:14:58.304 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:14:58.304 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6.3845ms
2025-06-16 08:14:58.305 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:14:58.305 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:14:58.305 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:14:58.305 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:14:58.305 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:14:58.305 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 8.1211ms
2025-06-16 08:15:02.757 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:15:02.758 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:15:02.758 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:15:02.759 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:15:02.760 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:15:02.760 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:15:02.760 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:15:02.761 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:15:02.761 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:15:02.761 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:15:02.764 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:15:02.764 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:15:02.764 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:15:02.765 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:15:02.765 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:15:02.765 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:15:02.765 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:15:02.766 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:15:02.766 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:15:02.766 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:15:02.766 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:15:02.767 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:15:02.767 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:15:02.767 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:02.767 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:02.767 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:15:02.767 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:02.768 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:02.768 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:15:02.769 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:15:02.769 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:02.769 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:02.770 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:02.770 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:15:02.770 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:02.770 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:02.770 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:15:02.770 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:15:02.770 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:15:02.770 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:15:02.770 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:15:02.770 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:15:02.771 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 6.5901ms
2025-06-16 08:15:02.771 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:15:02.772 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:15:02.772 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:15:02.773 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:02.773 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:02.773 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 16.2038ms
2025-06-16 08:15:06.781 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - null null
2025-06-16 08:15:06.782 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-16 08:15:06.782 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5'
2025-06-16 08:15:06.782 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 08:15:06.782 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:15:06.783 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 08:15:06.783 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:15:06.783 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:15:06.783 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:15:06.783 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:15:06.783 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:15:06.783 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:15:06.783 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:15:06.784 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:15:06.784 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 08:15:06.784 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-16 08:15:06.784 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 08:15:06.784 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 08:15:06.784 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 08:15:06.784 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-16 08:15:06.785 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:15:06.785 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:15:06.785 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:15:06.785 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:06.785 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:06.785 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:15:06.786 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:06.786 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:06.786 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 08:15:06.786 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 08:15:06.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:06.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:06.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:06.789 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:06.789 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:15:06.789 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:06.789 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:06.789 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:15:06.790 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:15:06.790 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:15:06.790 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:15:06.790 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:15:06.791 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-16 08:15:06.792 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 8.8153ms
2025-06-16 08:15:06.793 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 08:15:06.793 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:15:06.793 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:15:06.793 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:06.793 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:06.793 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a63d9f45-7963-47c4-bd61-6ff361ff66c5 - 200 null application/json; charset=utf-8 12.0362ms
2025-06-16 08:15:11.641 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:15:11.641 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:15:11.641 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:15:11.641 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:15:11.642 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:15:11.642 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:15:11.642 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:15:11.642 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:15:11.642 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:15:11.642 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:15:11.642 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:15:11.642 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:15:11.643 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:15:11.643 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:15:11.644 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:15:11.644 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:15:11.644 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:15:11.644 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:15:11.644 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:15:11.644 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:15:11.645 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:15:11.646 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:15:11.646 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:15:11.646 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:11.646 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:11.646 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:15:11.647 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:11.647 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:11.647 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:15:11.647 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:15:11.648 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:11.648 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:11.648 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:11.649 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:15:11.649 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:11.649 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:11.649 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:15:11.649 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:15:11.649 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:15:11.650 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:15:11.650 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:15:11.650 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:15:11.650 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 7.6599ms
2025-06-16 08:15:11.651 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:15:11.651 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:15:11.651 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:15:11.651 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:11.651 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:11.652 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 11.3092ms
2025-06-16 08:15:15.802 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:15:15.802 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:15:15.802 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:15:15.802 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:15:15.802 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:15:15.802 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:15:15.803 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:15:15.803 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:15:15.803 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:15:15.803 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:15:15.803 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:15:15.803 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:15:15.803 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:15:15.804 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:15:15.804 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:15:15.804 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:15:15.804 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:15:15.804 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:15:15.805 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:15:15.806 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:15:15.808 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:15:15.810 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:15:15.810 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:15:15.811 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:15.811 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:15.811 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:15:15.811 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:15.811 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:15.811 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:15:15.812 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:15:15.813 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:15.813 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:15.813 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:15.813 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:15:15.813 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:15.813 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:15.814 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:15:15.814 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:15:15.814 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:15:15.814 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:15:15.814 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:15:15.814 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:15:15.814 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 10.8387ms
2025-06-16 08:15:15.814 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:15:15.815 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:15:15.817 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:15:15.817 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:15.817 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:15.817 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 15.3839ms
2025-06-16 08:15:16.451 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:15:16.451 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:15:16.451 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:15:16.451 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:15:16.451 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:15:16.452 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:15:16.452 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:15:16.452 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:15:16.452 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:15:16.452 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:15:16.452 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:15:16.452 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:15:16.452 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:15:16.453 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:15:16.453 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:15:16.453 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:15:16.453 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:15:16.453 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:15:16.453 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:15:16.453 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:15:16.454 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:15:16.455 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:15:16.456 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:15:16.456 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:16.456 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:16.456 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:15:16.457 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:16.457 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:16.457 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:15:16.457 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:15:16.458 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:16.458 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:16.458 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:16.458 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:16.458 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:16.458 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:16.458 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:16.458 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:16.458 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:16.459 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:16.459 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:16.459 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:15:16.459 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:16.459 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:16.459 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:15:16.459 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:15:16.459 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:15:16.459 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:15:16.459 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:15:16.459 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:15:16.459 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.21ms
2025-06-16 08:15:16.460 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:15:16.460 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:15:16.460 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:15:16.460 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:16.460 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:16.460 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 8.8522ms
2025-06-16 08:15:21.263 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:15:21.265 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:15:21.266 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:15:21.266 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:15:21.266 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:15:21.267 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:15:21.267 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:15:21.269 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:15:21.269 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:15:21.269 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:15:21.270 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:15:21.270 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:15:21.270 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:15:21.271 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:15:21.271 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:15:21.271 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:15:21.273 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:15:21.273 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:15:21.273 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:15:21.273 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:15:21.274 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:15:21.276 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:15:21.276 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:15:21.276 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:21.276 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:21.276 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:15:21.276 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:21.276 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:21.276 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:15:21.277 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:15:21.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:21.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:21.277 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:21.278 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:15:21.278 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:21.278 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:21.278 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:15:21.278 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:15:21.278 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:15:21.278 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:15:21.278 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:15:21.278 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:15:21.278 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.2536ms
2025-06-16 08:15:21.279 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:15:21.279 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:15:21.279 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:15:21.279 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:21.279 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:21.279 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 15.9928ms
2025-06-16 08:15:28.786 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:15:28.787 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:15:28.788 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:15:28.788 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:15:28.788 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:15:28.788 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:15:28.788 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:15:28.788 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:15:28.789 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:15:28.789 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:15:28.789 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:15:28.789 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:15:28.789 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:15:28.789 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:15:28.790 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:15:28.790 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:15:28.790 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:15:28.790 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:15:28.790 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:15:28.791 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:15:28.791 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:15:28.793 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:15:28.793 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:15:28.793 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:28.793 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:28.793 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:15:28.793 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:28.793 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:28.793 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:15:28.794 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:15:28.794 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:28.795 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:28.795 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:28.795 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:28.795 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:28.795 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:28.795 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:28.795 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:28.795 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:28.796 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:28.796 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:28.797 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 08:15:28.797 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:28.797 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:28.797 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:15:28.797 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:15:28.797 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:15:28.797 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:15:28.798 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:15:28.798 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:15:28.798 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 9.2182ms
2025-06-16 08:15:28.798 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:15:28.798 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:15:28.798 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:15:28.799 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:28.799 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:28.799 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 12.669ms
2025-06-16 08:15:59.533 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:15:59.534 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:15:59.535 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:15:59.535 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:15:59.535 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:15:59.535 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:15:59.536 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:15:59.536 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:15:59.536 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:15:59.536 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:15:59.536 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:15:59.536 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:15:59.537 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:15:59.540 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:15:59.540 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:15:59.540 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:15:59.540 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:15:59.540 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:15:59.540 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:15:59.540 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:15:59.542 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:15:59.543 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:15:59.543 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:15:59.543 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:59.543 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:59.543 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:15:59.543 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:59.544 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:15:59.544 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:15:59.546 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:15:59.547 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:59.547 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:59.547 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:59.547 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:59.547 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:59.547 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:59.547 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:59.547 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:59.547 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:59.547 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:15:59.548 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:59.548 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:15:59.548 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:15:59.548 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:59.548 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:15:59.548 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:15:59.548 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:15:59.548 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:15:59.548 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:15:59.548 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:15:59.549 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 12.6218ms
2025-06-16 08:15:59.549 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:15:59.549 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:15:59.549 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:15:59.549 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:15:59.549 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:15:59.549 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 17.0374ms
2025-06-16 08:16:01.801 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:16:01.805 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:16:01.805 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:16:01.805 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:16:01.807 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:16:01.807 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:16:01.808 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:16:01.808 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:16:01.808 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:16:01.808 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:16:01.808 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:16:01.808 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:16:01.808 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:16:01.811 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:16:01.812 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:16:01.813 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:16:01.814 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:16:01.814 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:16:01.815 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:16:01.815 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:16:01.815 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:16:01.816 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:16:01.816 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:16:01.816 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:16:01.816 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:16:01.816 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:16:01.816 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:16:01.816 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:16:01.816 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:16:01.816 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:16:01.817 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:16:01.817 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:16:01.817 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:16:01.817 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:16:01.817 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:16:01.817 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:16:01.817 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:16:01.817 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:16:01.817 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:16:01.817 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:16:01.817 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:16:01.817 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:16:01.818 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 9.2537ms
2025-06-16 08:16:01.818 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:16:01.818 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:16:01.818 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:16:01.818 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:16:01.818 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:16:01.818 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 17.198ms
2025-06-16 08:16:21.090 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:16:21.091 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:16:21.091 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:16:21.092 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:16:21.092 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:16:21.092 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:16:21.093 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:16:21.093 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:16:21.093 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:16:21.093 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:16:21.093 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:16:21.093 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:16:21.093 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:16:21.094 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:16:21.094 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:16:21.095 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:16:21.095 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:16:21.095 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:16:21.095 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:16:21.095 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:16:21.105 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:16:21.108 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:16:21.108 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:16:21.108 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:16:21.108 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:16:21.108 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:16:21.108 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:16:21.109 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:16:21.109 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:16:21.109 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:16:21.110 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:16:21.110 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:16:21.110 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:16:21.110 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:16:21.110 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:16:21.110 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:16:21.111 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:16:21.111 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:16:21.111 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:16:21.111 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:16:21.111 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:16:21.111 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:16:21.111 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 17.8821ms
2025-06-16 08:16:21.111 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:16:21.111 +09:00 [DBG] Connection id "0HNDCBTPN9A90" completed keep alive response.
2025-06-16 08:16:21.111 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:16:21.111 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:16:21.112 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:16:21.112 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 22.3596ms
2025-06-16 08:16:54.217 +09:00 [DBG] Connection id "0HNDCBTPN9A90" received FIN.
2025-06-16 08:16:54.218 +09:00 [DBG] Connection id "0HNDCBTPN9A90" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 08:16:54.219 +09:00 [DBG] Connection id "0HNDCBTPN9A90" disconnecting.
2025-06-16 08:16:54.220 +09:00 [DBG] Connection id "0HNDCBTPN9A90" stopped.
2025-06-16 08:17:07.915 +09:00 [DBG] Connection id "0HNDCBTPN9A91" accepted.
2025-06-16 08:17:07.918 +09:00 [DBG] Connection id "0HNDCBTPN9A91" started.
2025-06-16 08:17:07.942 +09:00 [DBG] Connection 0HNDCBTPN9A91 established using the following protocol: "Tls12"
2025-06-16 08:17:07.960 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:17:07.960 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:07.960 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:07.960 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:07.961 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:17:07.961 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:07.961 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:17:07.962 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:17:07.962 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:17:07.962 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:17:07.962 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:17:07.962 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:17:07.962 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:07.962 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:07.962 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:07.962 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:17:07.963 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:07.963 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:07.963 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:07.963 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:07.964 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:17:07.964 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:17:07.964 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:17:07.964 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:07.964 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:07.965 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:17:07.965 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:07.965 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:07.965 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:07.965 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:07.966 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:07.966 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:07.966 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:07.966 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:17:07.966 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:07.966 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:07.966 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:17:07.967 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:17:07.967 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:17:07.967 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:17:07.967 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:17:07.967 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:17:07.967 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 5.0976ms
2025-06-16 08:17:07.967 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:07.967 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:17:07.967 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:17:07.967 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:07.967 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:07.967 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 7.7422ms
2025-06-16 08:17:12.495 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:17:12.496 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:12.496 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:12.496 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:12.496 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:17:12.496 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:12.496 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:17:12.496 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:17:12.496 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:17:12.496 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:17:12.496 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:17:12.496 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:17:12.497 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:12.497 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:12.497 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:12.497 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:17:12.497 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:12.497 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:12.497 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:12.497 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:12.497 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:17:12.497 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:17:12.497 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:17:12.498 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:12.498 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:12.498 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:17:12.498 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:12.498 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:12.498 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:12.498 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:12.498 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:12.498 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:12.498 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:12.498 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:17:12.498 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:12.499 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:12.499 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:17:12.499 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:17:12.499 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:17:12.499 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:17:12.499 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:17:12.499 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:17:12.499 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 2.4647ms
2025-06-16 08:17:12.499 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:12.499 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:17:12.499 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:17:12.499 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:12.499 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:12.499 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 3.912ms
2025-06-16 08:17:15.255 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:17:15.256 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:15.256 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:15.257 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:15.257 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:17:15.257 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:15.257 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:17:15.257 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:17:15.258 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:17:15.258 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:17:15.258 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:17:15.258 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:17:15.258 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:15.258 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:15.258 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:15.259 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:17:15.260 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:15.260 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:15.260 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:15.260 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:15.261 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:17:15.262 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:17:15.263 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:17:15.263 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:15.263 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:15.263 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:17:15.263 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:15.263 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:15.263 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:15.264 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:15.265 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:15.265 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:15.265 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:15.265 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:17:15.265 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:15.265 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:15.265 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:17:15.265 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:17:15.265 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:17:15.266 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:17:15.266 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:17:15.266 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:17:15.266 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.1371ms
2025-06-16 08:17:15.266 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:15.266 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:17:15.266 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:17:15.266 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:15.267 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:15.267 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 11.5434ms
2025-06-16 08:17:19.471 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:17:19.472 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:19.472 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:19.472 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:19.472 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:17:19.472 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:19.472 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:17:19.472 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:17:19.472 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:17:19.472 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:17:19.472 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:17:19.472 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:17:19.472 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:19.472 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:19.472 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:19.472 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:17:19.473 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:19.473 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:19.473 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:19.473 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:19.473 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:17:19.473 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:17:19.473 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:17:19.473 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:19.473 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:19.473 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:17:19.474 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:19.474 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:19.474 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:19.474 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:19.474 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:19.474 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:19.475 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:19.475 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:17:19.475 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:19.475 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:19.475 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:17:19.475 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:17:19.475 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:17:19.475 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:17:19.475 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:17:19.475 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:17:19.475 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 3.0693ms
2025-06-16 08:17:19.475 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:19.475 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:17:19.475 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:17:19.475 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:19.475 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:19.476 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 4.149ms
2025-06-16 08:17:21.906 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:17:21.908 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:17:21.908 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:17:21.908 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:21.908 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:17:21.908 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:21.908 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:17:21.909 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:17:21.909 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:17:21.910 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:17:21.910 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:17:21.910 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:17:21.910 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:17:21.910 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:17:21.911 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:17:21.911 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:17:21.911 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:17:21.911 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:17:21.912 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:17:21.912 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:17:21.913 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:17:21.913 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:17:21.913 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:17:21.913 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:21.914 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:21.914 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:17:21.914 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:21.914 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:21.914 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:17:21.914 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:17:21.915 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:21.915 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:21.915 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:21.915 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:21.915 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:21.915 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:21.915 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:21.915 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:21.916 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:21.916 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:21.916 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:21.916 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:17:21.916 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:21.916 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:21.916 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:17:21.916 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:17:21.917 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:17:21.917 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:17:21.917 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:17:21.917 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:17:21.917 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.2ms
2025-06-16 08:17:21.917 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:21.917 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:17:21.918 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:17:21.918 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:21.918 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:21.918 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 11.6986ms
2025-06-16 08:17:30.760 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:17:30.761 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:17:30.761 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:17:30.761 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:30.761 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:17:30.761 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:30.761 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:17:30.762 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:17:30.762 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:17:30.762 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:17:30.762 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:17:30.762 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:17:30.762 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:17:30.763 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:17:30.763 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:17:30.763 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:17:30.763 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:17:30.763 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:17:30.763 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:17:30.763 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:17:30.763 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:17:30.764 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:17:30.764 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:17:30.764 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:30.764 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:30.764 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:17:30.764 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:30.764 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:30.764 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:17:30.764 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:17:30.765 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:30.765 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:30.765 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:30.765 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:30.765 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:30.765 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:30.765 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:30.765 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:30.765 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:30.765 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:30.765 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:30.766 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:17:30.766 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:30.766 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:30.766 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:17:30.766 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:17:30.766 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:17:30.766 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:17:30.766 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:17:30.766 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:17:30.766 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.2415ms
2025-06-16 08:17:30.766 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:30.767 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:17:30.767 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:17:30.767 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:30.767 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:30.767 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 6.9709ms
2025-06-16 08:17:33.803 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:17:33.806 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:33.806 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:33.806 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:33.807 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:17:33.808 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:33.808 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:17:33.808 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:17:33.809 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:17:33.809 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:17:33.809 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:17:33.809 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:17:33.809 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:33.810 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:33.810 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:33.810 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:17:33.810 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:33.810 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:33.810 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:33.810 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:33.811 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:17:33.812 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:17:33.813 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:17:33.813 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:33.813 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:33.813 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:17:33.813 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:33.813 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:33.813 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:33.814 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:33.815 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:33.815 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:33.815 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:33.815 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:17:33.816 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:33.816 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:33.816 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:17:33.816 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:17:33.816 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:17:33.816 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:17:33.816 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:17:33.816 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:17:33.816 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 7.062ms
2025-06-16 08:17:33.817 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:33.817 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:17:33.817 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:17:33.817 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:33.817 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:33.817 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 14.0181ms
2025-06-16 08:17:35.607 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:17:35.607 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:17:35.607 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:17:35.608 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:35.608 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:17:35.608 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:35.608 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:17:35.609 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:17:35.609 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:17:35.610 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:17:35.610 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:17:35.610 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:17:35.610 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:17:35.611 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:17:35.611 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:17:35.611 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:17:35.611 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:17:35.611 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:17:35.612 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:17:35.612 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:17:35.614 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:17:35.615 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:17:35.615 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:17:35.615 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:35.615 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:35.615 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:17:35.616 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:35.616 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:35.616 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:17:35.616 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:17:35.617 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:35.617 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:35.617 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:35.617 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:35.617 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:35.617 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:35.618 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:35.618 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:35.618 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:35.618 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:35.618 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:35.619 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:17:35.619 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:35.619 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:35.619 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:17:35.620 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:17:35.620 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:17:35.620 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:17:35.620 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:17:35.620 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:17:35.621 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 10.7397ms
2025-06-16 08:17:35.621 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:35.621 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:17:35.622 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:17:35.622 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:35.622 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:35.622 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 15.6767ms
2025-06-16 08:17:40.914 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:17:40.914 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:40.914 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:40.915 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:40.915 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:17:40.915 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:40.916 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:17:40.916 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:17:40.916 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:17:40.921 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:17:40.923 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:17:40.923 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:17:40.923 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:40.924 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:40.924 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:40.924 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:17:40.924 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:40.924 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:40.925 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:40.925 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:40.925 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:17:40.926 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:17:40.926 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:17:40.926 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:40.926 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:40.926 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:17:40.926 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:40.926 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:40.926 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:40.927 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:40.927 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:40.928 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:40.928 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:40.928 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:17:40.928 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:40.928 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:40.928 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:17:40.928 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:17:40.928 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:17:40.928 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:17:40.929 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:17:40.929 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:17:40.929 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 5.4395ms
2025-06-16 08:17:40.929 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:40.929 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:17:40.929 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:17:40.929 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:40.929 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:40.929 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 15.5649ms
2025-06-16 08:17:42.789 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:17:42.789 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:17:42.790 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:17:42.790 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:42.790 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:17:42.790 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:42.790 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:17:42.790 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:17:42.790 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:17:42.790 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:17:42.790 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:17:42.790 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:17:42.790 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:17:42.791 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:17:42.791 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:17:42.791 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:17:42.791 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:17:42.791 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:17:42.791 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:17:42.791 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:17:42.791 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:17:42.792 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:17:42.792 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:17:42.792 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:42.792 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:42.792 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:17:42.792 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:42.792 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:42.792 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:17:42.793 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:17:42.793 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:42.793 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:42.793 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:42.793 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:42.793 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:42.793 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:42.793 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:42.793 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:42.793 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:42.794 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:42.794 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:42.794 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:17:42.794 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:42.794 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:42.795 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:17:42.795 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:17:42.795 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:17:42.795 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:17:42.795 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:17:42.795 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:17:42.795 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.8236ms
2025-06-16 08:17:42.795 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:42.796 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:17:42.796 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:17:42.796 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:42.796 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:42.796 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 7.0806ms
2025-06-16 08:17:50.081 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:17:50.082 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:50.082 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:17:50.083 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:50.084 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:17:50.084 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:50.085 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:17:50.087 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:17:50.087 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:17:50.087 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:17:50.087 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:17:50.088 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:17:50.088 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:50.089 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:17:50.089 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:50.089 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:17:50.089 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:50.089 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:50.089 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:17:50.090 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:17:50.090 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:17:50.091 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:17:50.092 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:17:50.092 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:50.093 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:50.093 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:17:50.093 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:50.093 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:50.093 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:50.094 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:17:50.096 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:50.097 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:50.097 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:50.097 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:17:50.097 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:50.098 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:50.098 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:17:50.098 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:17:50.098 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:17:50.098 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:17:50.098 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:17:50.099 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:17:50.099 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 11.3202ms
2025-06-16 08:17:50.099 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:17:50.099 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:17:50.100 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:17:50.100 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:50.100 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:50.100 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 19.0779ms
2025-06-16 08:17:52.394 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:17:52.394 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:17:52.394 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:17:52.394 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:52.394 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:17:52.395 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:52.395 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:17:52.395 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:17:52.395 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:17:52.395 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:17:52.395 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:17:52.395 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:17:52.396 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:17:52.396 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:17:52.396 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:17:52.396 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:17:52.396 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:17:52.396 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:17:52.396 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:17:52.397 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:17:52.397 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:17:52.398 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:17:52.398 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:17:52.398 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:52.398 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:52.398 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:17:52.399 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:52.399 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:17:52.399 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:17:52.400 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:17:52.401 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:52.401 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:52.401 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:52.401 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:52.402 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:52.402 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:52.402 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:52.402 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:52.402 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:52.402 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:17:52.403 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:52.403 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 08:17:52.403 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:17:52.403 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:52.403 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:17:52.403 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:17:52.404 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:17:52.404 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:17:52.404 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:17:52.404 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:17:52.405 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 9.0151ms
2025-06-16 08:17:52.405 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:17:52.405 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:17:52.405 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:17:52.405 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:17:52.405 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:17:52.406 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 11.9217ms
2025-06-16 08:18:00.840 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:18:00.841 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:18:00.841 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:18:00.842 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:18:00.842 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:18:00.842 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:18:00.842 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:18:00.842 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:18:00.842 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:18:00.843 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:18:00.843 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:18:00.843 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:18:00.843 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:18:00.843 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:18:00.844 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:18:00.844 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:18:00.844 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:18:00.844 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:18:00.844 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:18:00.845 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:18:00.846 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:18:00.848 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:18:00.848 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:18:00.848 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:18:00.849 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:18:00.849 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:18:00.849 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:18:00.849 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:18:00.849 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:18:00.849 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:18:00.850 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:00.850 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:00.850 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:18:00.850 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:18:00.850 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:18:00.850 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:18:00.851 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:18:00.851 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:18:00.851 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:18:00.851 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:18:00.851 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:18:00.851 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:18:00.851 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.5033ms
2025-06-16 08:18:00.851 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:18:00.851 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:18:00.851 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:18:00.851 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:18:00.852 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:18:00.852 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 12.3065ms
2025-06-16 08:18:01.103 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:18:01.103 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:18:01.103 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:18:01.103 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:18:01.104 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:18:01.104 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:18:01.104 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:18:01.104 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:18:01.104 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:18:01.105 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:18:01.105 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:18:01.105 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:18:01.105 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:18:01.106 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:18:01.106 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:18:01.106 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:18:01.106 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:18:01.106 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:18:01.106 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:18:01.106 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:18:01.107 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:18:01.108 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:18:01.108 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:18:01.109 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:18:01.109 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:18:01.109 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:18:01.109 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:18:01.109 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:18:01.110 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:18:01.111 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:18:01.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:01.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:01.112 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:18:01.113 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:18:01.113 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:18:01.113 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:18:01.113 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:18:01.113 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:18:01.113 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:18:01.113 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:18:01.113 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:18:01.113 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:18:01.114 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.7699ms
2025-06-16 08:18:01.114 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:18:01.114 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:18:01.115 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:18:01.115 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:18:01.115 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:18:01.116 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 12.7208ms
2025-06-16 08:18:01.748 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:18:01.748 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:18:01.748 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:18:01.748 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:18:01.748 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:18:01.748 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:18:01.748 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:18:01.749 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:18:01.749 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:18:01.749 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:18:01.749 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:18:01.749 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:18:01.749 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:18:01.749 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:18:01.749 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:18:01.750 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:18:01.750 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:18:01.750 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:18:01.750 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:18:01.750 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:18:01.751 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:18:01.754 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:18:01.754 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:18:01.754 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:18:01.754 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:18:01.754 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:18:01.754 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:18:01.755 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:18:01.755 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:18:01.756 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:18:01.756 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:01.756 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:01.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:01.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:01.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:01.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:01.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:01.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:01.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:01.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:01.758 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:18:01.758 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:18:01.758 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:18:01.758 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:18:01.758 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:18:01.758 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:18:01.758 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:18:01.758 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:18:01.758 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:18:01.758 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:18:01.759 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 9.8652ms
2025-06-16 08:18:01.759 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:18:01.759 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:18:01.759 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:18:01.759 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:18:01.760 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:18:01.760 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 12.1415ms
2025-06-16 08:18:03.389 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:18:03.390 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:18:03.390 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:18:03.390 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:18:03.390 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:18:03.390 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:18:03.390 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:18:03.391 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:18:03.391 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:18:03.391 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:18:03.391 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:18:03.391 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:18:03.391 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:18:03.391 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:18:03.392 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:18:03.392 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:18:03.392 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:18:03.392 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:18:03.392 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:18:03.392 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:18:03.393 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:18:03.393 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:18:03.393 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:18:03.393 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:18:03.393 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:18:03.394 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:18:03.394 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:18:03.394 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:18:03.394 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:18:03.395 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:18:03.396 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:03.396 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:03.396 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:03.396 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:03.396 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:03.396 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:03.397 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:03.397 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:03.397 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:03.397 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:18:03.397 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:18:03.397 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:18:03.397 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:18:03.397 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:18:03.397 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:18:03.397 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:18:03.397 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:18:03.398 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:18:03.398 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:18:03.398 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:18:03.398 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6.6568ms
2025-06-16 08:18:03.398 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:18:03.398 +09:00 [DBG] Connection id "0HNDCBTPN9A91" completed keep alive response.
2025-06-16 08:18:03.398 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:18:03.398 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:18:03.398 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:18:03.398 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 8.9897ms
2025-06-16 08:19:07.936 +09:00 [DBG] Connection id "0HNDCBTPN9A91" received FIN.
2025-06-16 08:19:07.942 +09:00 [DBG] Connection id "0HNDCBTPN9A91" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 08:19:07.943 +09:00 [DBG] Connection id "0HNDCBTPN9A91" disconnecting.
2025-06-16 08:19:07.944 +09:00 [DBG] Connection id "0HNDCBTPN9A91" stopped.
2025-06-16 08:26:25.410 +09:00 [DBG] Connection id "0HNDCBTPN9A92" accepted.
2025-06-16 08:26:25.413 +09:00 [DBG] Connection id "0HNDCBTPN9A92" started.
2025-06-16 08:26:25.438 +09:00 [DBG] Connection 0HNDCBTPN9A92 established using the following protocol: "Tls12"
2025-06-16 08:26:25.442 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/3715b920-eb7a-49e3-a62d-005bd544414a - null null
2025-06-16 08:26:25.442 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/3715b920-eb7a-49e3-a62d-005bd544414a'
2025-06-16 08:26:25.442 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/3715b920-eb7a-49e3-a62d-005bd544414a'
2025-06-16 08:26:25.443 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 08:26:25.443 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:26:25.443 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 08:26:25.444 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:26:25.445 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:26:25.445 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:26:25.445 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:26:25.445 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:26:25.445 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:26:25.445 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:26:25.445 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:26:25.445 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 08:26:25.445 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-16 08:26:25.445 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 08:26:25.446 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 08:26:25.446 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 08:26:25.446 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-16 08:26:25.449 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:26:25.450 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:26:25.451 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:26:25.451 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:26:25.452 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:26:25.452 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:26:25.453 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:26:25.453 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:26:25.453 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 08:26:25.455 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 08:26:25.455 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:25.456 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:25.458 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:25.459 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:26:25.459 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-16 08:26:25.459 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:26:25.459 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:26:25.459 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:26:25.459 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:26:25.459 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:26:25.459 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:26:25.459 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:26:25.459 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-16 08:26:25.460 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 15.2646ms
2025-06-16 08:26:25.460 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 08:26:25.460 +09:00 [DBG] Connection id "0HNDCBTPN9A92" completed keep alive response.
2025-06-16 08:26:25.460 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:26:25.460 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:26:25.460 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:26:25.461 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/3715b920-eb7a-49e3-a62d-005bd544414a - 200 null application/json; charset=utf-8 18.9079ms
2025-06-16 08:26:28.343 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:26:28.343 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:26:28.343 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:26:28.343 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:26:28.343 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:26:28.343 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:26:28.343 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:26:28.344 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:26:28.344 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:26:28.344 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:26:28.344 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:26:28.344 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:26:28.344 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:26:28.345 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:26:28.345 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:26:28.346 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:26:28.346 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:26:28.346 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:26:28.346 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:26:28.346 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:26:28.347 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:26:28.347 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:26:28.347 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:26:28.348 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:26:28.348 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:26:28.348 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:26:28.348 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:26:28.348 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:26:28.348 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:26:28.348 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:26:28.349 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:28.349 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:28.349 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:28.349 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:28.349 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:28.349 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:28.349 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:28.349 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:28.349 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:28.349 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:28.349 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:26:28.349 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:26:28.349 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:26:28.349 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:26:28.349 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:26:28.350 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:26:28.350 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:26:28.350 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:26:28.350 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:26:28.350 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:26:28.350 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 5.5647ms
2025-06-16 08:26:28.350 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:26:28.350 +09:00 [DBG] Connection id "0HNDCBTPN9A92" completed keep alive response.
2025-06-16 08:26:28.350 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:26:28.350 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:26:28.350 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:26:28.350 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 7.8057ms
2025-06-16 08:26:30.685 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed - null null
2025-06-16 08:26:30.685 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed'
2025-06-16 08:26:30.685 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed'
2025-06-16 08:26:30.685 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 08:26:30.685 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:26:30.686 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 08:26:30.686 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:26:30.687 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:26:30.687 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:26:30.687 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:26:30.687 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:26:30.687 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:26:30.687 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:26:30.688 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:26:30.688 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 08:26:30.688 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-16 08:26:30.688 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 08:26:30.688 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 08:26:30.688 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 08:26:30.688 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-16 08:26:30.689 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:26:30.689 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:26:30.690 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:26:30.691 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:26:30.691 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:26:30.691 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:26:30.691 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:26:30.691 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:26:30.692 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 08:26:30.692 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 08:26:30.692 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:30.693 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:30.693 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:30.694 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:30.694 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:30.694 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:26:30.694 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:26:30.694 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:26:30.694 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:26:30.694 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:26:30.695 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:26:30.695 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:26:30.695 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:26:30.695 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:26:30.695 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-16 08:26:30.697 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 9.9025ms
2025-06-16 08:26:30.698 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 08:26:30.698 +09:00 [DBG] Connection id "0HNDCBTPN9A92" completed keep alive response.
2025-06-16 08:26:30.698 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:26:30.698 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:26:30.698 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:26:30.698 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/81d366d9-92d9-417a-87b1-0be12d6fcbed - 200 null application/json; charset=utf-8 13.2966ms
2025-06-16 08:26:32.534 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:26:32.535 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:26:32.535 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:26:32.535 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:26:32.535 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:26:32.535 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:26:32.535 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:26:32.535 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:26:32.535 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:26:32.535 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:26:32.535 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:26:32.535 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:26:32.535 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:26:32.535 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:26:32.536 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:26:32.536 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:26:32.536 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:26:32.536 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:26:32.536 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:26:32.536 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:26:32.537 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:26:32.537 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:26:32.537 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:26:32.537 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:26:32.537 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:26:32.537 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:26:32.537 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:26:32.537 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:26:32.538 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:26:32.538 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:26:32.539 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:32.539 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:32.539 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:32.539 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:32.539 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:32.539 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:32.540 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:32.540 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:32.540 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:32.540 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:26:32.540 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:26:32.540 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:26:32.540 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:26:32.540 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:26:32.541 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:26:32.541 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:26:32.541 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:26:32.541 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:26:32.541 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:26:32.541 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:26:32.541 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 5.924ms
2025-06-16 08:26:32.541 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:26:32.541 +09:00 [DBG] Connection id "0HNDCBTPN9A92" completed keep alive response.
2025-06-16 08:26:32.541 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:26:32.541 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:26:32.541 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:26:32.541 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 7.1348ms
2025-06-16 08:27:40.415 +09:00 [DBG] Connection id "0HNDCBTPN9A92" received FIN.
2025-06-16 08:27:40.418 +09:00 [DBG] Connection id "0HNDCBTPN9A92" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 08:27:40.420 +09:00 [DBG] Connection id "0HNDCBTPN9A92" disconnecting.
2025-06-16 08:27:40.422 +09:00 [DBG] Connection id "0HNDCBTPN9A92" stopped.
2025-06-16 08:30:27.242 +09:00 [DBG] Connection id "0HNDCBTPN9A93" accepted.
2025-06-16 08:30:27.243 +09:00 [DBG] Connection id "0HNDCBTPN9A93" started.
2025-06-16 08:30:27.267 +09:00 [DBG] Connection 0HNDCBTPN9A93 established using the following protocol: "Tls12"
2025-06-16 08:30:27.270 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:30:27.271 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:30:27.271 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:30:27.271 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:30:27.271 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:30:27.271 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:30:27.271 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:30:27.271 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:30:27.271 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:30:27.272 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:30:27.272 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:30:27.272 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:30:27.272 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:30:27.272 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:30:27.272 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:30:27.272 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:30:27.272 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:30:27.272 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:30:27.272 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:30:27.272 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:30:27.273 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:30:27.275 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:30:27.275 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:30:27.275 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:30:27.275 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:30:27.275 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:30:27.275 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:30:27.275 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:30:27.275 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:30:27.277 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:30:27.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:27.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:27.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:27.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:27.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:27.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:27.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:27.278 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:27.278 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:27.278 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:27.278 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:30:27.278 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:30:27.278 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:30:27.278 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:30:27.278 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:30:27.278 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:30:27.278 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:30:27.278 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:30:27.278 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:30:27.278 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:30:27.278 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6.7843ms
2025-06-16 08:30:27.278 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:30:27.279 +09:00 [DBG] Connection id "0HNDCBTPN9A93" completed keep alive response.
2025-06-16 08:30:27.279 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:30:27.279 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:30:27.279 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:30:27.279 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 8.4432ms
2025-06-16 08:30:36.718 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:30:36.718 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:30:36.718 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:30:36.718 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:30:36.719 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:30:36.719 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:30:36.719 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:30:36.719 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:30:36.719 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:30:36.719 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:30:36.719 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:30:36.719 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:30:36.719 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:30:36.719 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:30:36.719 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:30:36.719 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:30:36.719 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:30:36.719 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:30:36.719 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:30:36.720 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:30:36.720 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:30:36.720 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:30:36.720 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:30:36.720 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:30:36.720 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:30:36.720 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:30:36.721 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:30:36.721 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:30:36.721 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:30:36.721 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:30:36.721 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:36.721 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:36.721 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:36.722 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:36.722 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:36.722 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:36.722 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:36.722 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:36.722 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:36.722 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:30:36.722 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:30:36.722 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:30:36.722 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:30:36.722 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:30:36.722 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:30:36.722 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:30:36.722 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:30:36.722 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:30:36.722 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:30:36.723 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:30:36.723 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.0485ms
2025-06-16 08:30:36.725 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:30:36.725 +09:00 [DBG] Connection id "0HNDCBTPN9A93" completed keep alive response.
2025-06-16 08:30:36.725 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:30:36.725 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:30:36.725 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:30:36.725 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 7.7123ms
2025-06-16 08:31:42.246 +09:00 [DBG] Connection id "0HNDCBTPN9A93" received FIN.
2025-06-16 08:31:42.250 +09:00 [DBG] Connection id "0HNDCBTPN9A93" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 08:31:42.251 +09:00 [DBG] Connection id "0HNDCBTPN9A93" disconnecting.
2025-06-16 08:31:42.253 +09:00 [DBG] Connection id "0HNDCBTPN9A93" stopped.
2025-06-16 08:33:01.936 +09:00 [DBG] Connection id "0HNDCBTPN9A94" accepted.
2025-06-16 08:33:01.937 +09:00 [DBG] Connection id "0HNDCBTPN9A94" started.
2025-06-16 08:33:01.961 +09:00 [DBG] Connection 0HNDCBTPN9A94 established using the following protocol: "Tls12"
2025-06-16 08:33:01.969 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:33:01.970 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:33:01.970 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:33:01.970 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:33:01.970 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:33:01.970 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:33:01.971 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:33:01.971 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:33:01.971 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:33:01.971 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:33:01.971 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:33:01.971 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:33:01.971 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:33:01.971 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:33:01.971 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:33:01.972 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:33:01.972 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:33:01.972 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:33:01.972 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:33:01.972 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:33:01.973 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:33:01.973 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:33:01.973 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:33:01.973 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:33:01.974 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:33:01.974 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:33:01.974 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:33:01.974 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:33:01.974 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:33:01.974 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:33:01.975 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:01.975 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:01.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:01.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:01.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:01.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:01.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:01.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:01.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:01.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:01.976 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:33:01.976 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:33:01.976 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:33:01.976 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:33:01.977 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:33:01.977 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:33:01.977 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:33:01.977 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:33:01.977 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:33:01.977 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:33:01.979 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.949ms
2025-06-16 08:33:01.980 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:33:01.980 +09:00 [DBG] Connection id "0HNDCBTPN9A94" completed keep alive response.
2025-06-16 08:33:01.980 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:33:01.980 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:33:01.980 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:33:01.980 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 11.2942ms
2025-06-16 08:33:40.704 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:33:40.705 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:33:40.705 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:33:40.706 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:33:40.706 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:33:40.706 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:33:40.706 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:33:40.707 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:33:40.707 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:33:40.707 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:33:40.707 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:33:40.707 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:33:40.707 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:33:40.708 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:33:40.708 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:33:40.708 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:33:40.708 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:33:40.708 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:33:40.708 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:33:40.708 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:33:40.710 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:33:40.714 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:33:40.715 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:33:40.715 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:33:40.715 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:33:40.715 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:33:40.715 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:33:40.715 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:33:40.715 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:33:40.716 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:33:40.716 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:40.717 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:40.717 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:40.717 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:40.717 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:40.717 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:40.717 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:40.717 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:40.717 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:40.717 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:33:40.717 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:33:40.717 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:33:40.717 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:33:40.717 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:33:40.718 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:33:40.718 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:33:40.718 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:33:40.718 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:33:40.718 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:33:40.718 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:33:40.720 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 13.1031ms
2025-06-16 08:33:40.720 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:33:40.721 +09:00 [DBG] Connection id "0HNDCBTPN9A94" completed keep alive response.
2025-06-16 08:33:40.721 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:33:40.721 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:33:40.721 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:33:40.722 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 18.2021ms
2025-06-16 08:34:38.855 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:34:38.857 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:34:38.857 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:34:38.857 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:34:38.858 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:34:38.858 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:34:38.858 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:34:38.858 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:34:38.858 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:34:38.859 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:34:38.859 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:34:38.859 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:34:38.859 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:34:38.861 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:34:38.861 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:34:38.862 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:34:38.862 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:34:38.862 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:34:38.863 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:34:38.863 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:34:38.864 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:34:38.866 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:34:38.866 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:34:38.866 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:34:38.866 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:34:38.866 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:34:38.866 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:34:38.866 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:34:38.867 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:34:38.867 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:34:38.868 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:38.868 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:38.869 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:38.869 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:38.869 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:38.869 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:38.869 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:38.869 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:38.869 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:38.869 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:38.870 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:34:38.870 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:34:38.870 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:34:38.870 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:34:38.870 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:34:38.870 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:34:38.870 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:34:38.870 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:34:38.870 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:34:38.870 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:34:38.871 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 12.059ms
2025-06-16 08:34:38.871 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:34:38.871 +09:00 [DBG] Connection id "0HNDCBTPN9A94" completed keep alive response.
2025-06-16 08:34:38.871 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:34:38.872 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:34:38.872 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:34:38.872 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 17.8817ms
2025-06-16 08:34:39.373 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 08:34:39.373 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:34:39.373 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 08:34:39.374 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:34:39.374 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:34:39.374 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:34:39.374 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 08:34:39.374 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:34:39.374 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:34:39.374 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:34:39.374 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:34:39.375 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:34:39.375 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:34:39.376 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 08:34:39.376 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 08:34:39.377 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 08:34:39.377 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:34:39.377 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 08:34:39.377 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 08:34:39.378 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 08:34:39.379 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:34:39.381 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:34:39.381 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:34:39.381 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:34:39.381 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:34:39.381 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:34:39.381 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:34:39.381 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:34:39.381 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:34:39.382 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 08:34:39.382 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:39.382 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:39.382 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:34:39.383 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 08:34:39.383 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:34:39.383 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:34:39.383 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:34:39.383 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:34:39.383 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:34:39.383 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:34:39.383 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:34:39.383 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:34:39.383 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.7883ms
2025-06-16 08:34:39.384 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 08:34:39.384 +09:00 [DBG] Connection id "0HNDCBTPN9A94" completed keep alive response.
2025-06-16 08:34:39.384 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:34:39.384 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:34:39.384 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:34:39.385 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 11.6697ms
2025-06-16 08:34:40.007 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 08:34:40.007 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:34:40.007 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 08:34:40.007 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:34:40.008 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 08:34:40.008 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:34:40.008 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 08:34:40.008 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 08:34:40.008 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 08:34:40.008 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 08:34:40.008 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 08:34:40.008 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 08:34:40.008 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:34:40.008 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 08:34:40.009 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 08:34:40.009 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 08:34:40.009 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:34:40.009 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 08:34:40.009 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 08:34:40.009 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 08:34:40.010 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 08:34:40.011 +09:00 [DBG] Creating DbConnection.
2025-06-16 08:34:40.011 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 08:34:40.011 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:34:40.011 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:34:40.012 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 08:34:40.012 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:34:40.012 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 08:34:40.012 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:34:40.013 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 08:34:40.013 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:40.013 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:40.014 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:40.014 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:40.014 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:40.014 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:40.014 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:40.014 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:40.014 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:40.014 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 08:34:40.014 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:34:40.014 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 08:34:40.014 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 08:34:40.015 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:34:40.015 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 08:34:40.015 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 08:34:40.015 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 08:34:40.015 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 08:34:40.015 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 08:34:40.015 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 08:34:40.015 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6.9592ms
2025-06-16 08:34:40.015 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 08:34:40.015 +09:00 [DBG] Connection id "0HNDCBTPN9A94" completed keep alive response.
2025-06-16 08:34:40.015 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 08:34:40.015 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 08:34:40.015 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 08:34:40.016 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 8.4976ms
2025-06-16 08:35:16.936 +09:00 [DBG] Connection id "0HNDCBTPN9A94" received FIN.
2025-06-16 08:35:16.937 +09:00 [DBG] Connection id "0HNDCBTPN9A94" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 08:35:16.938 +09:00 [DBG] Connection id "0HNDCBTPN9A94" disconnecting.
2025-06-16 08:35:16.941 +09:00 [DBG] Connection id "0HNDCBTPN9A94" stopped.
2025-06-16 09:47:37.629 +09:00 [DBG] Connection id "0HNDCBTPN9A95" accepted.
2025-06-16 09:47:37.630 +09:00 [DBG] Connection id "0HNDCBTPN9A95" started.
2025-06-16 09:47:37.666 +09:00 [DBG] Connection 0HNDCBTPN9A95 established using the following protocol: "Tls12"
2025-06-16 09:47:37.693 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/12345 - null null
2025-06-16 09:47:37.695 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/12345'
2025-06-16 09:47:37.696 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/12345'
2025-06-16 09:47:37.697 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:47:37.701 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 09:47:37.701 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:47:37.704 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 09:47:37.704 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 09:47:37.705 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 09:47:37.708 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 09:47:37.708 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 09:47:37.708 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 09:47:37.708 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:47:37.714 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:47:37.715 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 09:47:37.716 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 09:47:37.716 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 09:47:37.717 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 09:47:37.717 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 09:47:37.717 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 09:47:37.734 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 09:47:37.750 +09:00 [DBG] Creating DbConnection.
2025-06-16 09:47:37.755 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-16 09:47:37.755 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:47:37.762 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:47:37.765 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 09:47:37.765 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-06-16 09:47:37.766 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-06-16 09:47:37.767 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 09:47:37.781 +09:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 09:47:37.782 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:47:37.785 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-16 09:47:37.785 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:47:37.785 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:47:37.786 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 09:47:37.786 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 09:47:37.786 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 09:47:37.786 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 09:47:37.787 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 09:47:37.787 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 09:47:37.790 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 81.599ms
2025-06-16 09:47:37.790 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:47:37.791 +09:00 [DBG] Connection id "0HNDCBTPN9A95" completed keep alive response.
2025-06-16 09:47:37.792 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 09:47:37.792 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:47:37.792 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:47:37.792 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/12345 - 200 null application/json; charset=utf-8 99.8544ms
2025-06-16 09:47:37.827 +09:00 [DBG] Connection id "0HNDCBTPN9A95" received FIN.
2025-06-16 09:47:37.827 +09:00 [DBG] Connection id "0HNDCBTPN9A95" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 09:47:37.827 +09:00 [DBG] Connection id "0HNDCBTPN9A95" disconnecting.
2025-06-16 09:47:37.827 +09:00 [DBG] Connection id "0HNDCBTPN9A95" stopped.
2025-06-16 09:48:00.283 +09:00 [DBG] Connection id "0HNDCBTPN9A96" accepted.
2025-06-16 09:48:00.285 +09:00 [DBG] Connection id "0HNDCBTPN9A96" started.
2025-06-16 09:48:00.316 +09:00 [DBG] Connection 0HNDCBTPN9A96 established using the following protocol: "Tls12"
2025-06-16 09:48:00.336 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 09:48:00.337 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 09:48:00.337 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 09:48:00.337 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:48:00.337 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 09:48:00.337 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:48:00.338 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 09:48:00.338 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 09:48:00.338 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 09:48:00.338 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 09:48:00.338 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 09:48:00.338 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 09:48:00.338 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:48:00.338 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:48:00.339 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 09:48:00.339 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 09:48:00.339 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 09:48:00.339 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 09:48:00.339 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 09:48:00.339 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 09:48:00.342 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 09:48:00.347 +09:00 [DBG] Creating DbConnection.
2025-06-16 09:48:00.348 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 09:48:00.348 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:48:00.349 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:48:00.350 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 09:48:00.350 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:48:00.350 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:48:00.351 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 09:48:00.353 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 09:48:00.355 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:00.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:00.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:00.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:00.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:00.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:00.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:00.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:00.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:00.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:00.356 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:48:00.356 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 09:48:00.356 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:48:00.356 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:48:00.356 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 09:48:00.356 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 09:48:00.356 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 09:48:00.356 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 09:48:00.356 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 09:48:00.356 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 09:48:00.359 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 20.6941ms
2025-06-16 09:48:00.359 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:48:00.359 +09:00 [DBG] Connection id "0HNDCBTPN9A96" completed keep alive response.
2025-06-16 09:48:00.359 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 09:48:00.359 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:48:00.359 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:48:00.359 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 23.0768ms
2025-06-16 09:48:00.397 +09:00 [DBG] Connection id "0HNDCBTPN9A96" received FIN.
2025-06-16 09:48:00.397 +09:00 [DBG] Connection id "0HNDCBTPN9A96" disconnecting.
2025-06-16 09:48:00.398 +09:00 [DBG] Connection id "0HNDCBTPN9A96" stopped.
2025-06-16 09:48:00.398 +09:00 [DBG] Connection id "0HNDCBTPN9A96" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 09:48:26.478 +09:00 [DBG] Connection id "0HNDCBTPN9A97" accepted.
2025-06-16 09:48:26.479 +09:00 [DBG] Connection id "0HNDCBTPN9A97" started.
2025-06-16 09:48:26.509 +09:00 [DBG] Connection 0HNDCBTPN9A97 established using the following protocol: "Tls12"
2025-06-16 09:48:26.528 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 09:48:26.529 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 09:48:26.529 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 09:48:26.529 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:48:26.529 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 09:48:26.529 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:48:26.530 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 09:48:26.530 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 09:48:26.530 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 09:48:26.530 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 09:48:26.530 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 09:48:26.530 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 09:48:26.530 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:48:26.530 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:48:26.531 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 09:48:26.531 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 09:48:26.531 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 09:48:26.531 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 09:48:26.531 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 09:48:26.531 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 09:48:26.532 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 09:48:26.538 +09:00 [DBG] Creating DbConnection.
2025-06-16 09:48:26.539 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 09:48:26.539 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:48:26.539 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:48:26.539 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 09:48:26.539 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:48:26.540 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:48:26.540 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 09:48:26.542 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 09:48:26.544 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:26.545 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:26.545 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:26.545 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:26.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:26.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:26.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:26.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:26.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:26.546 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:48:26.546 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:48:26.546 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-16 09:48:26.546 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:48:26.546 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:48:26.546 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 09:48:26.546 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 09:48:26.547 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 09:48:26.547 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 09:48:26.547 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 09:48:26.547 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 09:48:26.547 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 17.2694ms
2025-06-16 09:48:26.547 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:48:26.547 +09:00 [DBG] Connection id "0HNDCBTPN9A97" completed keep alive response.
2025-06-16 09:48:26.548 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 09:48:26.548 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:48:26.548 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:48:26.548 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 19.2527ms
2025-06-16 09:48:26.583 +09:00 [DBG] Connection id "0HNDCBTPN9A97" received FIN.
2025-06-16 09:48:26.583 +09:00 [DBG] Connection id "0HNDCBTPN9A97" disconnecting.
2025-06-16 09:48:26.584 +09:00 [DBG] Connection id "0HNDCBTPN9A97" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 09:48:26.585 +09:00 [DBG] Connection id "0HNDCBTPN9A97" stopped.
2025-06-16 09:52:12.379 +09:00 [DBG] Connection id "0HNDCBTPN9A98" accepted.
2025-06-16 09:52:12.380 +09:00 [DBG] Connection id "0HNDCBTPN9A98" started.
2025-06-16 09:52:12.409 +09:00 [DBG] Connection 0HNDCBTPN9A98 established using the following protocol: "Tls12"
2025-06-16 09:52:12.484 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-16 09:52:12.485 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-16 09:52:12.485 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-16 09:52:12.486 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-16 09:52:12.486 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 09:52:12.487 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-16 09:52:12.512 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 09:52:12.512 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 09:52:12.512 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 09:52:12.513 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 09:52:12.513 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 09:52:12.513 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 09:52:12.513 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:52:12.513 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:52:12.516 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-16 09:52:12.517 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-16 09:52:12.523 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-16 09:52:12.551 +09:00 [DBG] Connection id "0HNDCBTPN9A98", Request id "0HNDCBTPN9A98:00000001": started reading request body.
2025-06-16 09:52:12.553 +09:00 [DBG] Connection id "0HNDCBTPN9A98", Request id "0HNDCBTPN9A98:00000001": done reading request body.
2025-06-16 09:52:12.575 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-16 09:52:12.575 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-16 09:52:12.575 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-16 09:52:12.575 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-16 09:52:12.598 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-16 09:52:12.599 +09:00 [INF] Creating a new approval request.
2025-06-16 09:52:12.602 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"a8c4d9e7-cb88-4357-9683-da32e2effb73","RequestTitle":"Quick setup ","RequestContent":"### **Quick setup — if you’ve done this kind of thing before**\r\n\r\n**Set up in Desktop**\r\n\r\n**or**\r\n\r\n**HTTPSSSH**\r\n\r\nGet started by [creating a new file](https://github.com/7ames7in/linq-projects/new/main) or [uploading an existing file](https://github.com/7ames7in/linq-projects/upload). We recommend every repository include a [README](https://github.com/7ames7in/linq-projects/new/main?readme=1), [LICENSE](https://github.com/7ames7in/linq-projects/new/main?filename=LICENSE.md), and [.gitignore](https://github.com/7ames7in/linq-projects/new/main?filename=.gitignore).\r\n\r\n### **…or create a new repository on the command line**\r\n\r\n```\r\necho \"# linq-projects\" >> README.md\r\ngit init\r\ngit add README.md\r\ngit commit -m \"first commit\"\r\ngit branch -M main\r\ngit remote add origin https://github.com/7ames7in/linq-projects.git\r\ngit push -u origin main\r\n```","ApplicantEmployeeNumber":"EC20505","ApplicantName":"User 6","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-16T00:52:12.3225670Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0001","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 1","Position":"System Administrator","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-16 09:52:12.613 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 09:52:12.646 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.650 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.653 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.655 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-16 09:52:12.656 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-16 09:52:12.673 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-16 09:52:12.713 +09:00 [DBG] Creating DbConnection.
2025-06-16 09:52:12.714 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 09:52:12.714 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:52:12.714 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:52:12.715 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-16 09:52:12.720 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-16 09:52:12.721 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 09:52:12.721 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:52:12.721 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:52:12.721 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 853), @p11='?' (Size = 12), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-16 09:52:12.723 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 853), @p11='?' (Size = 12), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-16 09:52:12.724 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:52:12.724 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 09:52:12.724 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 09:52:12.724 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:52:12.724 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:52:12.724 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 09:52:12.725 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 09:52:12.725 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:52:12.725 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 09:52:12.726 +09:00 [DBG] Committing transaction.
2025-06-16 09:52:12.727 +09:00 [DBG] Committed transaction.
2025-06-16 09:52:12.728 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:52:12.728 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:52:12.729 +09:00 [DBG] Disposing transaction.
2025-06-16 09:52:12.733 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.733 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.733 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-16 09:52:12.734 +09:00 [INF] Approval request created successfully with ID: "a8c4d9e7-cb88-4357-9683-da32e2effb73"
2025-06-16 09:52:12.736 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 09:52:12.736 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 09:52:12.736 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 09:52:12.736 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 09:52:12.736 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 09:52:12.736 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-16 09:52:12.747 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] for address (approvalId=[a8c4d9e7-cb88-4357-9683-da32e2effb73],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-16 09:52:12.749 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) resulting in /api/ApprovalRequest/a8c4d9e7-cb88-4357-9683-da32e2effb73 and 
2025-06-16 09:52:12.751 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] with result /api/ApprovalRequest/a8c4d9e7-cb88-4357-9683-da32e2effb73
2025-06-16 09:52:12.751 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API) in 238.7042ms
2025-06-16 09:52:12.751 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-16 09:52:12.752 +09:00 [DBG] Connection id "0HNDCBTPN9A98" completed keep alive response.
2025-06-16 09:52:12.752 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 09:52:12.752 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:52:12.752 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:52:12.752 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 268.1418ms
2025-06-16 09:52:12.771 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 09:52:12.771 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 09:52:12.771 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 09:52:12.771 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:52:12.772 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 09:52:12.772 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:52:12.772 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 09:52:12.772 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 09:52:12.772 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 09:52:12.772 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 09:52:12.772 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 09:52:12.772 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 09:52:12.772 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:52:12.772 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:52:12.772 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 09:52:12.772 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 09:52:12.772 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 09:52:12.772 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 09:52:12.772 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 09:52:12.772 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 09:52:12.773 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 09:52:12.773 +09:00 [DBG] Creating DbConnection.
2025-06-16 09:52:12.773 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 09:52:12.773 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:52:12.774 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:52:12.774 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 09:52:12.774 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:52:12.774 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:52:12.774 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 09:52:12.774 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 09:52:12.774 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.774 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.774 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.774 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.774 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.774 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.774 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.774 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.774 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.775 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.775 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:12.775 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:52:12.775 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 09:52:12.775 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:52:12.775 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:52:12.775 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 09:52:12.775 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 09:52:12.775 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 09:52:12.775 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 09:52:12.775 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 09:52:12.775 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 09:52:12.775 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 3.0892ms
2025-06-16 09:52:12.775 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:52:12.775 +09:00 [DBG] Connection id "0HNDCBTPN9A98" completed keep alive response.
2025-06-16 09:52:12.775 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 09:52:12.775 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:52:12.775 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:52:12.776 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 4.3322ms
2025-06-16 09:52:15.414 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a8c4d9e7-cb88-4357-9683-da32e2effb73 - null null
2025-06-16 09:52:15.414 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a8c4d9e7-cb88-4357-9683-da32e2effb73'
2025-06-16 09:52:15.414 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a8c4d9e7-cb88-4357-9683-da32e2effb73'
2025-06-16 09:52:15.414 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 09:52:15.415 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 09:52:15.415 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 09:52:15.415 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 09:52:15.416 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 09:52:15.416 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 09:52:15.416 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 09:52:15.416 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 09:52:15.416 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 09:52:15.416 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:52:15.417 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:52:15.417 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 09:52:15.417 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-16 09:52:15.417 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 09:52:15.417 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 09:52:15.418 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 09:52:15.418 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-16 09:52:15.418 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 09:52:15.418 +09:00 [DBG] Creating DbConnection.
2025-06-16 09:52:15.418 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 09:52:15.418 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:52:15.419 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:52:15.419 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 09:52:15.419 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:52:15.419 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:52:15.419 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 09:52:15.420 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 09:52:15.420 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:15.421 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:15.421 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:52:15.421 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 09:52:15.421 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:52:15.421 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:52:15.421 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 09:52:15.421 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 09:52:15.421 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 09:52:15.421 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 09:52:15.422 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 09:52:15.422 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-16 09:52:15.422 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 5.2337ms
2025-06-16 09:52:15.422 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 09:52:15.422 +09:00 [DBG] Connection id "0HNDCBTPN9A98" completed keep alive response.
2025-06-16 09:52:15.422 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 09:52:15.422 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:52:15.422 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:52:15.422 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a8c4d9e7-cb88-4357-9683-da32e2effb73 - 200 null application/json; charset=utf-8 8.2328ms
2025-06-16 09:52:29.757 +09:00 [DBG] Connection id "0HNDCBTPN9A99" accepted.
2025-06-16 09:52:29.758 +09:00 [DBG] Connection id "0HNDCBTPN9A99" started.
2025-06-16 09:52:29.785 +09:00 [DBG] Connection 0HNDCBTPN9A99 established using the following protocol: "Tls12"
2025-06-16 09:52:29.804 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 09:52:29.804 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 09:52:29.804 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 09:52:29.804 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:52:29.805 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 09:52:29.805 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:52:29.805 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 09:52:29.805 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 09:52:29.805 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 09:52:29.805 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 09:52:29.805 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 09:52:29.805 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 09:52:29.805 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:52:29.806 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:52:29.806 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 09:52:29.806 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 09:52:29.806 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 09:52:29.806 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 09:52:29.806 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 09:52:29.806 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 09:52:29.807 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 09:52:29.807 +09:00 [DBG] Creating DbConnection.
2025-06-16 09:52:29.807 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 09:52:29.807 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:52:29.807 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:52:29.808 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 09:52:29.808 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:52:29.808 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 09:52:29.808 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 09:52:29.808 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 09:52:29.808 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:29.808 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:29.808 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:29.809 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:29.809 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:29.809 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:29.809 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:29.809 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:29.809 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:29.809 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:29.809 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 09:52:29.809 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:52:29.809 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 09:52:29.809 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 09:52:29.809 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:52:29.810 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 09:52:29.810 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 09:52:29.810 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 09:52:29.810 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 09:52:29.810 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 09:52:29.810 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 09:52:29.811 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 5.1236ms
2025-06-16 09:52:29.811 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 09:52:29.811 +09:00 [DBG] Connection id "0HNDCBTPN9A99" completed keep alive response.
2025-06-16 09:52:29.811 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 09:52:29.811 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 09:52:29.811 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 09:52:29.811 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 6.8835ms
2025-06-16 09:52:29.843 +09:00 [DBG] Connection id "0HNDCBTPN9A99" received FIN.
2025-06-16 09:52:29.843 +09:00 [DBG] Connection id "0HNDCBTPN9A99" disconnecting.
2025-06-16 09:52:29.843 +09:00 [DBG] Connection id "0HNDCBTPN9A99" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 09:52:29.845 +09:00 [DBG] Connection id "0HNDCBTPN9A99" stopped.
2025-06-16 09:53:27.374 +09:00 [DBG] Connection id "0HNDCBTPN9A98" received FIN.
2025-06-16 09:53:27.376 +09:00 [DBG] Connection id "0HNDCBTPN9A98" disconnecting.
2025-06-16 09:53:27.376 +09:00 [DBG] Connection id "0HNDCBTPN9A98" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 09:53:27.379 +09:00 [DBG] Connection id "0HNDCBTPN9A98" stopped.
2025-06-16 09:59:45.175 +09:00 [DBG] Connection id "0HNDCBTPN9A9A" accepted.
2025-06-16 09:59:45.176 +09:00 [DBG] Connection id "0HNDCBTPN9A9A" started.
2025-06-16 09:59:45.205 +09:00 [DBG] Connection 0HNDCBTPN9A9A established using the following protocol: "Tls12"
2025-06-16 09:59:45.225 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests2/EC20505 - null null
2025-06-16 09:59:45.226 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests2/EC20505'
2025-06-16 09:59:45.226 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests2 (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests2/{userId}' is valid for the request path '/api/approvalrequest/my-requests2/EC20505'
2025-06-16 09:59:45.226 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests2 (ApprovalService.API)'
2025-06-16 09:59:45.227 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 09:59:45.227 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests2 (ApprovalService.API)'
2025-06-16 09:59:45.233 +09:00 [INF] Route matched with {action = "GetMyRequests2", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests2(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 09:59:45.233 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 09:59:45.233 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 09:59:45.233 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 09:59:45.234 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 09:59:45.234 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 09:59:45.234 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:59:45.234 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 09:59:45.234 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 09:59:45.234 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 09:59:45.234 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 09:59:45.234 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 09:59:45.234 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 09:59:45.236 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 09:59:45.243 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 09:59:45.248 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests2 (ApprovalService.API) in 14.4735ms
2025-06-16 09:59:45.249 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests2 (ApprovalService.API)'
2025-06-16 09:59:45.251 +09:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Cannot create a DbSet for 'ApprovalRequestWithCurrentStepDto' because this type is not included in the model for the context.
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.Where[TSource](IQueryable`1 source, Expression`1 predicate)
   at ApprovalService.Infrastructure.Repositories.ApprovalRequestRepository`1.GetMyRequestsAsync(String userId) in /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/Infrastructure/Repositories/ApprovalRequestRepository.cs:line 85
   at ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests2(String userId) in /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Controllers/ApprovalRequestController.cs:line 45
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-16 09:59:45.268 +09:00 [DBG] Connection id "0HNDCBTPN9A9A" completed keep alive response.
2025-06-16 09:59:45.268 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 09:59:45.268 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests2/EC20505 - 500 null text/plain; charset=utf-8 43.1187ms
2025-06-16 09:59:45.417 +09:00 [DBG] Connection id "0HNDCBTPN9A9A" received FIN.
2025-06-16 09:59:45.418 +09:00 [DBG] Connection id "0HNDCBTPN9A9A" disconnecting.
2025-06-16 09:59:45.418 +09:00 [DBG] Connection id "0HNDCBTPN9A9A" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 09:59:45.419 +09:00 [DBG] Connection id "0HNDCBTPN9A9A" stopped.
2025-06-16 10:00:24.862 +09:00 [DBG] Connection id "0HNDCBTPN9A9B" accepted.
2025-06-16 10:00:24.863 +09:00 [DBG] Connection id "0HNDCBTPN9A9B" started.
2025-06-16 10:00:24.893 +09:00 [DBG] Connection 0HNDCBTPN9A9B established using the following protocol: "Tls12"
2025-06-16 10:00:24.917 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 10:00:24.918 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 10:00:24.918 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 10:00:24.918 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:00:24.918 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 10:00:24.918 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:00:24.918 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 10:00:24.919 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 10:00:24.919 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 10:00:24.919 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 10:00:24.919 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 10:00:24.919 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 10:00:24.919 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 10:00:24.919 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 10:00:24.920 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 10:00:24.920 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 10:00:24.920 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 10:00:24.920 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 10:00:24.920 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 10:00:24.920 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 10:00:24.921 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 10:00:24.921 +09:00 [DBG] Creating DbConnection.
2025-06-16 10:00:24.922 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 10:00:24.922 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 10:00:24.923 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:00:24.923 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 10:00:24.923 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 10:00:24.923 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 10:00:24.924 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 10:00:24.927 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 10:00:24.927 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:00:24.927 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:00:24.927 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:00:24.927 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:00:24.928 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:00:24.928 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:00:24.928 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:00:24.928 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:00:24.929 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:00:24.929 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:00:24.929 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:00:24.929 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:00:24.929 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 10:00:24.929 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:00:24.929 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 10:00:24.929 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 10:00:24.929 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 10:00:24.929 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 10:00:24.929 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 10:00:24.929 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 10:00:24.929 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 10:00:24.930 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 10.69ms
2025-06-16 10:00:24.930 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:00:24.930 +09:00 [DBG] Connection id "0HNDCBTPN9A9B" completed keep alive response.
2025-06-16 10:00:24.930 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 10:00:24.930 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 10:00:24.930 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 10:00:24.930 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 12.7267ms
2025-06-16 10:00:24.972 +09:00 [DBG] Connection id "0HNDCBTPN9A9B" received FIN.
2025-06-16 10:00:24.972 +09:00 [DBG] Connection id "0HNDCBTPN9A9B" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 10:00:24.972 +09:00 [DBG] Connection id "0HNDCBTPN9A9B" disconnecting.
2025-06-16 10:00:24.972 +09:00 [DBG] Connection id "0HNDCBTPN9A9B" stopped.
2025-06-16 10:02:40.016 +09:00 [DBG] Connection id "0HNDCBTPN9A9C" accepted.
2025-06-16 10:02:40.018 +09:00 [DBG] Connection id "0HNDCBTPN9A9C" started.
2025-06-16 10:02:40.042 +09:00 [DBG] Connection 0HNDCBTPN9A9C established using the following protocol: "Tls12"
2025-06-16 10:02:40.062 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 10:02:40.062 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 10:02:40.062 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 10:02:40.062 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:02:40.062 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 10:02:40.062 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:02:40.063 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 10:02:40.063 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 10:02:40.063 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 10:02:40.063 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 10:02:40.063 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 10:02:40.063 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 10:02:40.063 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 10:02:40.064 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 10:02:40.064 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 10:02:40.064 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 10:02:40.064 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 10:02:40.064 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 10:02:40.064 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 10:02:40.064 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 10:02:40.065 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 10:02:40.066 +09:00 [DBG] Creating DbConnection.
2025-06-16 10:02:40.066 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 10:02:40.066 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 10:02:40.066 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:02:40.066 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 10:02:40.066 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 10:02:40.066 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 10:02:40.066 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 10:02:40.067 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 10:02:40.067 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:02:40.067 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:02:40.068 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:02:40.068 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:02:40.068 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:02:40.068 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:02:40.068 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:02:40.068 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:02:40.068 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:02:40.068 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:02:40.068 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:02:40.068 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:02:40.068 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 10:02:40.068 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:02:40.069 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 10:02:40.069 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 10:02:40.069 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 10:02:40.069 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 10:02:40.069 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 10:02:40.069 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 10:02:40.069 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 10:02:40.069 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 5.839ms
2025-06-16 10:02:40.069 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:02:40.069 +09:00 [DBG] Connection id "0HNDCBTPN9A9C" completed keep alive response.
2025-06-16 10:02:40.069 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 10:02:40.069 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 10:02:40.069 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 10:02:40.069 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 7.9107ms
2025-06-16 10:02:40.103 +09:00 [DBG] Connection id "0HNDCBTPN9A9C" received FIN.
2025-06-16 10:02:40.104 +09:00 [DBG] Connection id "0HNDCBTPN9A9C" disconnecting.
2025-06-16 10:02:40.104 +09:00 [DBG] Connection id "0HNDCBTPN9A9C" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 10:02:40.105 +09:00 [DBG] Connection id "0HNDCBTPN9A9C" stopped.
2025-06-16 10:04:48.718 +09:00 [DBG] Connection id "0HNDCBTPN9A9D" accepted.
2025-06-16 10:04:48.719 +09:00 [DBG] Connection id "0HNDCBTPN9A9D" started.
2025-06-16 10:04:48.769 +09:00 [DBG] Connection 0HNDCBTPN9A9D established using the following protocol: "Tls12"
2025-06-16 10:04:48.790 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 10:04:48.791 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 10:04:48.791 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 10:04:48.791 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:04:48.791 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 10:04:48.791 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:04:48.791 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 10:04:48.791 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 10:04:48.791 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 10:04:48.791 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 10:04:48.791 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 10:04:48.791 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 10:04:48.791 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 10:04:48.792 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 10:04:48.792 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 10:04:48.792 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 10:04:48.792 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 10:04:48.793 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 10:04:48.793 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 10:04:48.793 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 10:04:48.794 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 10:04:48.796 +09:00 [DBG] Creating DbConnection.
2025-06-16 10:04:48.796 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 10:04:48.797 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 10:04:48.797 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:04:48.797 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 10:04:48.797 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 10:04:48.797 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 10:04:48.797 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 10:04:48.798 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 10:04:48.798 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:04:48.798 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:04:48.798 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:04:48.798 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:04:48.798 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:04:48.799 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:04:48.799 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:04:48.799 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:04:48.799 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:04:48.799 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:04:48.799 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:04:48.799 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:04:48.799 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 10:04:48.799 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:04:48.799 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 10:04:48.799 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 10:04:48.799 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 10:04:48.799 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 10:04:48.799 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 10:04:48.799 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 10:04:48.799 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 10:04:48.800 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.3568ms
2025-06-16 10:04:48.800 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:04:48.800 +09:00 [DBG] Connection id "0HNDCBTPN9A9D" completed keep alive response.
2025-06-16 10:04:48.800 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 10:04:48.800 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 10:04:48.800 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 10:04:48.800 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 9.824ms
2025-06-16 10:04:49.000 +09:00 [DBG] Connection id "0HNDCBTPN9A9D" received FIN.
2025-06-16 10:04:49.000 +09:00 [DBG] Connection id "0HNDCBTPN9A9D" disconnecting.
2025-06-16 10:04:49.000 +09:00 [DBG] Connection id "0HNDCBTPN9A9D" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 10:04:49.001 +09:00 [DBG] Connection id "0HNDCBTPN9A9D" stopped.
2025-06-16 10:05:02.518 +09:00 [DBG] Connection id "0HNDCBTPN9A9E" accepted.
2025-06-16 10:05:02.519 +09:00 [DBG] Connection id "0HNDCBTPN9A9E" started.
2025-06-16 10:05:02.548 +09:00 [DBG] Connection 0HNDCBTPN9A9E established using the following protocol: "Tls12"
2025-06-16 10:05:02.567 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 10:05:02.567 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 10:05:02.568 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 10:05:02.568 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:05:02.568 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 10:05:02.568 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:05:02.568 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 10:05:02.568 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 10:05:02.568 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 10:05:02.568 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 10:05:02.568 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 10:05:02.568 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 10:05:02.568 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 10:05:02.569 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 10:05:02.569 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 10:05:02.569 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 10:05:02.569 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 10:05:02.569 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 10:05:02.569 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 10:05:02.569 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 10:05:02.570 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 10:05:02.572 +09:00 [DBG] Creating DbConnection.
2025-06-16 10:05:02.572 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 10:05:02.572 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 10:05:02.573 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:05:02.573 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 10:05:02.573 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 10:05:02.573 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 10:05:02.573 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 10:05:02.573 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 10:05:02.574 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:02.574 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:02.574 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:02.574 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:02.574 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:02.575 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:02.575 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:02.575 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:02.575 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:02.575 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:02.575 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:02.575 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:05:02.575 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 10:05:02.575 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:05:02.576 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 10:05:02.576 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 10:05:02.576 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 10:05:02.576 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 10:05:02.576 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 10:05:02.576 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 10:05:02.576 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 10:05:02.576 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.8888ms
2025-06-16 10:05:02.576 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:05:02.576 +09:00 [DBG] Connection id "0HNDCBTPN9A9E" completed keep alive response.
2025-06-16 10:05:02.576 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 10:05:02.577 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 10:05:02.577 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 10:05:02.577 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 10.0194ms
2025-06-16 10:05:02.692 +09:00 [DBG] Connection id "0HNDCBTPN9A9E" received FIN.
2025-06-16 10:05:02.692 +09:00 [DBG] Connection id "0HNDCBTPN9A9E" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 10:05:02.692 +09:00 [DBG] Connection id "0HNDCBTPN9A9E" disconnecting.
2025-06-16 10:05:02.692 +09:00 [DBG] Connection id "0HNDCBTPN9A9E" stopped.
2025-06-16 10:05:11.235 +09:00 [DBG] Connection id "0HNDCBTPN9A9F" accepted.
2025-06-16 10:05:11.235 +09:00 [DBG] Connection id "0HNDCBTPN9A9F" started.
2025-06-16 10:05:11.263 +09:00 [DBG] Connection 0HNDCBTPN9A9F established using the following protocol: "Tls12"
2025-06-16 10:05:11.284 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 10:05:11.284 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 10:05:11.285 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 10:05:11.285 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:05:11.285 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 10:05:11.285 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:05:11.285 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 10:05:11.285 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 10:05:11.285 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 10:05:11.285 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 10:05:11.285 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 10:05:11.285 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 10:05:11.285 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 10:05:11.286 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 10:05:11.286 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 10:05:11.286 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 10:05:11.286 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 10:05:11.286 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 10:05:11.286 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 10:05:11.286 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 10:05:11.286 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 10:05:11.287 +09:00 [DBG] Creating DbConnection.
2025-06-16 10:05:11.287 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 10:05:11.287 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 10:05:11.287 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:05:11.287 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 10:05:11.287 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 10:05:11.287 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 10:05:11.287 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 10:05:11.287 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 10:05:11.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:11.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:11.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:11.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:11.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:11.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:11.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:11.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:11.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:11.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:11.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 10:05:11.288 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:05:11.289 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 10:05:11.289 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 10:05:11.289 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 10:05:11.289 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 10:05:11.289 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 10:05:11.289 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 10:05:11.289 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 10:05:11.289 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 10:05:11.290 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 10:05:11.290 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.7842ms
2025-06-16 10:05:11.290 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 10:05:11.290 +09:00 [DBG] Connection id "0HNDCBTPN9A9F" completed keep alive response.
2025-06-16 10:05:11.290 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 10:05:11.290 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 10:05:11.290 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 10:05:11.291 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 6.369ms
2025-06-16 10:05:11.323 +09:00 [DBG] Connection id "0HNDCBTPN9A9F" received FIN.
2025-06-16 10:05:11.324 +09:00 [DBG] Connection id "0HNDCBTPN9A9F" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 10:05:11.324 +09:00 [DBG] Connection id "0HNDCBTPN9A9F" disconnecting.
2025-06-16 10:05:11.324 +09:00 [DBG] Connection id "0HNDCBTPN9A9F" stopped.
2025-06-16 13:21:29.150 +09:00 [INF] Starting Approval Service API
2025-06-16 13:21:29.238 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 13:21:29.325 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 13:21:29.584 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 13:21:29.589 +09:00 [DBG] Creating DbConnection.
2025-06-16 13:21:29.595 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-16 13:21:29.599 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:21:29.607 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:21:29.610 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:21:29.612 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 13:21:29.615 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 13:21:29.615 +09:00 [DBG] Creating DbConnection.
2025-06-16 13:21:29.616 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 13:21:29.618 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-16 13:21:29.618 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-16 13:21:29.618 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:21:29.619 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:21:29.622 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 13:21:29.637 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 13:21:29.639 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:21:29.640 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 13:21:29.643 +09:00 [DBG] Creating DbConnection.
2025-06-16 13:21:29.643 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 13:21:29.643 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:21:29.643 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:21:29.643 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:21:29.643 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 13:21:29.644 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 13:21:29.644 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 13:21:29.644 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 13:21:29.644 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:21:29.644 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:21:29.644 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 13:21:29.644 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 13:21:29.644 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:21:29.644 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 13:21:29.667 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 13:21:29.767 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 13:21:29.780 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:21:29.781 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:21:29.781 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 13:21:29.781 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 13:21:29.781 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 13:21:29.781 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 13:21:29.782 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 13:21:29.784 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:21:29.784 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 13:21:29.785 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:21:29.785 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 13:21:29.786 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 13:21:29.786 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:21:29.786 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 13:21:29.788 +09:00 [DBG] Hosting starting
2025-06-16 13:21:29.803 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 13:21:29.804 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 13:21:30.108 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 13:21:30.108 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 13:21:30.109 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 13:21:30.109 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 13:21:30.111 +09:00 [INF] Hosting environment: Development
2025-06-16 13:21:30.111 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 13:21:30.112 +09:00 [DBG] Hosting started
2025-06-16 13:24:25.202 +09:00 [DBG] Connection id "0HNDCHMMIIVN5" accepted.
2025-06-16 13:24:25.203 +09:00 [DBG] Connection id "0HNDCHMMIIVN5" started.
2025-06-16 13:24:25.239 +09:00 [DBG] Connection 0HNDCHMMIIVN5 established using the following protocol: "Tls12"
2025-06-16 13:24:25.254 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 13:24:25.267 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 13:24:25.268 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 13:24:25.269 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 13:24:25.278 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 13:24:25.279 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 13:24:25.288 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 13:24:25.289 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 13:24:25.289 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 13:24:25.289 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 13:24:25.289 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 13:24:25.289 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 13:24:25.290 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 13:24:25.291 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 13:24:25.292 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 13:24:25.293 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 13:24:25.293 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 13:24:25.293 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 13:24:25.293 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 13:24:25.296 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 13:24:25.307 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 13:24:25.315 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        ApplicantPosition = r.ApplicantPosition, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-16 13:24:25.377 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            string value9;
            List<ApprovalStep> namelessParameter{0};
            int? value11;
            string value12;
            string value13;
            string value14;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            value9 = dataReader.GetString(8);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value11 = (int?)dataReader.GetInt32(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            value13 = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
            value14 = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                value9, 
                namelessParameter{0}, 
                (object)value11, 
                value12, 
                value13, 
                value14 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid) : dataReader.GetGuid(12);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(17) ? default(bool) : dataReader.GetBoolean(17);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(19) ? default(int) : dataReader.GetInt32(19);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantDepartment = (string)(resultContext.Values[5]), 
            ApplicantName = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Status = (string)(resultContext.Values[8]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[9]), 
            CurrentStep = (int)(int?)(resultContext.Values[10]), 
            CurrentApproverName = (string)(resultContext.Values[11]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[12]), 
            CurrentActionStatus = (string)(resultContext.Values[13]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-16 13:24:25.391 +09:00 [DBG] Creating DbConnection.
2025-06-16 13:24:25.392 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 13:24:25.392 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:24:25.392 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:24:25.392 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 13:24:25.392 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 13:24:25.393 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 13:24:25.394 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 13:24:25.397 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 13:24:25.413 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:24:25.428 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:24:25.429 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:24:25.429 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 31ms reading results.
2025-06-16 13:24:25.429 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:24:25.429 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 13:24:25.430 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 13:24:25.431 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 13:24:25.431 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 13:24:25.431 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 13:24:25.431 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 13:24:25.431 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 13:24:25.474 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 183.6938ms
2025-06-16 13:24:25.477 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 13:24:25.477 +09:00 [DBG] Connection id "0HNDCHMMIIVN5" completed keep alive response.
2025-06-16 13:24:25.477 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 13:24:25.479 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:24:25.480 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 13:24:25.480 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 227.421ms
2025-06-16 13:24:27.232 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 13:24:27.233 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 13:24:27.233 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 13:24:27.233 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 13:24:27.233 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 13:24:27.233 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 13:24:27.236 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 13:24:27.236 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 13:24:27.236 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 13:24:27.236 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 13:24:27.236 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 13:24:27.236 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 13:24:27.237 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 13:24:27.238 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 13:24:27.238 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 13:24:27.238 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 13:24:27.238 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 13:24:27.239 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 13:24:27.239 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 13:24:27.239 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 13:24:27.262 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 13:24:27.263 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantName = r.ApplicantName, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantPosition = r.ApplicantPosition, 
        Steps = r.Steps, 
        Attachments = r.Attachments, 
        Status = r.Status, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-16 13:24:27.270 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-16 13:24:27.277 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            List<ApprovalStep> namelessParameter{0};
            List<ApprovalAttachment> namelessParameter{1};
            string value11;
            int? value12;
            string value13;
            string value14;
            string value15;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            namelessParameter{1} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalAttachment, List<ApprovalAttachment>>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
                }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()]);
            value11 = dataReader.GetString(28);
            value12 = (int?)dataReader.GetInt32(29);
            value13 = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
            value14 = dataReader.IsDBNull(31) ? default(string) : dataReader.GetString(31);
            value15 = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                namelessParameter{0}, 
                namelessParameter{1}, 
                value11, 
                (object)value12, 
                value13, 
                value14, 
                value15 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(8) ? default(object) : (object)dataReader.GetGuid(8) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(8) ? default(Guid) : dataReader.GetGuid(8);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(11) ? default(Guid) : dataReader.GetGuid(11);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(16) ? default(bool) : dataReader.GetBoolean(16);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(18) ? default(int) : dataReader.GetInt32(18);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalAttachment>, ApprovalAttachment, ApprovalAttachment>(
            collectionId: 1, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
            { 
                (object)(Guid?)dataReader.GetGuid(0), 
                (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
            }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(20) ? default(Guid?) : (Guid?)dataReader.GetGuid(20) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
            { 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
            }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalAttachment entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalAttachment instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalAttachment);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(20) ? default(object) : (object)dataReader.GetGuid(20) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalAttachment)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                {
                                    return 
                                    {
                                        ApprovalAttachment instance;
                                        instance = new ApprovalAttachment();
                                        instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(20) ? default(Guid) : dataReader.GetGuid(20);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(21) ? default(Guid) : dataReader.GetGuid(21);
                                        instance.<FileName>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<FilePath>k__BackingField = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
                                        instance.<FileSize>k__BackingField = dataReader.IsDBNull(24) ? default(long?) : (long?)dataReader.GetInt64(24);
                                        instance.<FileType>k__BackingField = dataReader.IsDBNull(25) ? default(string) : dataReader.GetString(25);
                                        instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(26) ? default(DateTime) : dataReader.GetDateTime(26);
                                        instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalAttachment)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            ApplicantDepartment = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[8]), 
            Attachments = (List<ApprovalAttachment>)(resultContext.Values[9]), 
            Status = (string)(resultContext.Values[10]), 
            CurrentStep = (int)(int?)(resultContext.Values[11]), 
            CurrentApproverName = (string)(resultContext.Values[12]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[13]), 
            CurrentActionStatus = (string)(resultContext.Values[14]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-16 13:24:27.280 +09:00 [DBG] Creating DbConnection.
2025-06-16 13:24:27.280 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 13:24:27.280 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:24:27.280 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:24:27.281 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 13:24:27.281 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 13:24:27.281 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 13:24:27.281 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 13:24:27.281 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 13:24:27.282 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:24:27.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:24:27.285 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:24:27.292 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:24:27.292 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:24:27.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:24:27.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:24:27.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:24:27.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:24:27.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:24:27.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:24:27.293 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:24:27.293 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 11ms reading results.
2025-06-16 13:24:27.293 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:24:27.293 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 13:24:27.294 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 13:24:27.294 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 13:24:27.294 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 13:24:27.294 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 13:24:27.294 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 13:24:27.294 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 13:24:27.296 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 59.5897ms
2025-06-16 13:24:27.296 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 13:24:27.296 +09:00 [DBG] Connection id "0HNDCHMMIIVN5" completed keep alive response.
2025-06-16 13:24:27.296 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 13:24:27.297 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:24:27.297 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 13:24:27.297 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 64.7585ms
2025-06-16 13:25:08.479 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 13:25:08.482 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 13:25:08.482 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 13:25:08.482 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 13:25:08.483 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 13:25:08.483 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 13:25:08.483 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 13:25:08.483 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 13:25:08.483 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 13:25:08.484 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 13:25:08.484 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 13:25:08.484 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 13:25:08.484 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 13:25:08.485 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 13:25:08.485 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 13:25:08.485 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 13:25:08.485 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 13:25:08.485 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 13:25:08.485 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 13:25:08.486 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 13:25:08.486 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 13:25:08.489 +09:00 [DBG] Creating DbConnection.
2025-06-16 13:25:08.489 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 13:25:08.490 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:25:08.490 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:25:08.490 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 13:25:08.490 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 13:25:08.490 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 13:25:08.490 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 13:25:08.491 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 13:25:08.491 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:08.491 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:08.491 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:08.491 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:08.491 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:08.492 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:08.492 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:08.492 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:08.492 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:08.492 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:08.492 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:08.492 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:25:08.492 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 13:25:08.492 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:25:08.492 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 13:25:08.492 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 13:25:08.492 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 13:25:08.492 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 13:25:08.492 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 13:25:08.492 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 13:25:08.492 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 13:25:08.493 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.7341ms
2025-06-16 13:25:08.493 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 13:25:08.493 +09:00 [DBG] Connection id "0HNDCHMMIIVN5" completed keep alive response.
2025-06-16 13:25:08.493 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 13:25:08.493 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:25:08.493 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 13:25:08.493 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 13.989ms
2025-06-16 13:25:25.207 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 13:25:25.207 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 13:25:25.208 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 13:25:25.208 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 13:25:25.208 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 13:25:25.208 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 13:25:25.209 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 13:25:25.209 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 13:25:25.209 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 13:25:25.209 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 13:25:25.209 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 13:25:25.209 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 13:25:25.210 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 13:25:25.212 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 13:25:25.212 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 13:25:25.213 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 13:25:25.213 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 13:25:25.213 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 13:25:25.213 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 13:25:25.213 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 13:25:25.214 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 13:25:25.215 +09:00 [DBG] Creating DbConnection.
2025-06-16 13:25:25.215 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 13:25:25.215 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:25:25.215 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:25:25.215 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 13:25:25.215 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 13:25:25.216 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 13:25:25.216 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 13:25:25.217 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 13:25:25.218 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:25.218 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:25.218 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:25.218 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:25.219 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:25.219 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:25.219 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:25.220 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:25.221 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:25.221 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:25.221 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 13:25:25.222 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:25:25.222 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-16 13:25:25.223 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 13:25:25.223 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 13:25:25.224 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 13:25:25.224 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 13:25:25.224 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 13:25:25.224 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 13:25:25.224 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 13:25:25.224 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 13:25:25.225 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 15.3923ms
2025-06-16 13:25:25.225 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 13:25:25.225 +09:00 [DBG] Connection id "0HNDCHMMIIVN5" completed keep alive response.
2025-06-16 13:25:25.226 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 13:25:25.226 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 13:25:25.226 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 13:25:25.226 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 19.1852ms
2025-06-16 13:26:40.201 +09:00 [DBG] Connection id "0HNDCHMMIIVN5" received FIN.
2025-06-16 13:26:40.208 +09:00 [DBG] Connection id "0HNDCHMMIIVN5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 13:26:40.209 +09:00 [DBG] Connection id "0HNDCHMMIIVN5" disconnecting.
2025-06-16 13:26:40.212 +09:00 [DBG] Connection id "0HNDCHMMIIVN5" stopped.
2025-06-16 14:33:32.010 +09:00 [DBG] Connection id "0HNDCHMMIIVN6" accepted.
2025-06-16 14:33:32.013 +09:00 [DBG] Connection id "0HNDCHMMIIVN6" started.
2025-06-16 14:33:32.052 +09:00 [DBG] Connection 0HNDCHMMIIVN6 established using the following protocol: "Tls12"
2025-06-16 14:33:32.071 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 14:33:32.076 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:33:32.076 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:33:32.077 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:33:32.080 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 14:33:32.080 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:33:32.081 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 14:33:32.082 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 14:33:32.082 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 14:33:32.083 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 14:33:32.083 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 14:33:32.083 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 14:33:32.084 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:33:32.090 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:33:32.090 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 14:33:32.091 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 14:33:32.092 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:33:32.092 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:33:32.092 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 14:33:32.094 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 14:33:32.101 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 14:33:32.104 +09:00 [DBG] Creating DbConnection.
2025-06-16 14:33:32.106 +09:00 [DBG] Created DbConnection. (2ms).
2025-06-16 14:33:32.107 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:33:32.113 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:33:32.114 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 14:33:32.115 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-06-16 14:33:32.115 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-16 14:33:32.115 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:33:32.120 +09:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:33:32.121 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:33:32.121 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:33:32.121 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:33:32.121 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:33:32.121 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:33:32.121 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:33:32.122 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:33:32.122 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:33:32.122 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:33:32.122 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:33:32.122 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:33:32.122 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:33:32.122 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 14:33:32.122 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:33:32.122 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:33:32.122 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 14:33:32.122 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 14:33:32.122 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 14:33:32.122 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 14:33:32.122 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 14:33:32.122 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 14:33:32.125 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 41.3984ms
2025-06-16 14:33:32.126 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:33:32.126 +09:00 [DBG] Connection id "0HNDCHMMIIVN6" completed keep alive response.
2025-06-16 14:33:32.126 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 14:33:32.126 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:33:32.127 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:33:32.127 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 56.8727ms
2025-06-16 14:34:47.006 +09:00 [DBG] Connection id "0HNDCHMMIIVN6" received FIN.
2025-06-16 14:34:47.010 +09:00 [DBG] Connection id "0HNDCHMMIIVN6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 14:34:47.012 +09:00 [DBG] Connection id "0HNDCHMMIIVN6" disconnecting.
2025-06-16 14:34:47.014 +09:00 [DBG] Connection id "0HNDCHMMIIVN6" stopped.
2025-06-16 14:35:41.375 +09:00 [DBG] Connection id "0HNDCHMMIIVN7" accepted.
2025-06-16 14:35:41.377 +09:00 [DBG] Connection id "0HNDCHMMIIVN7" started.
2025-06-16 14:35:41.402 +09:00 [DBG] Connection 0HNDCHMMIIVN7 established using the following protocol: "Tls12"
2025-06-16 14:35:41.408 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 14:35:41.409 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:35:41.409 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:35:41.410 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:41.410 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 14:35:41.410 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:41.411 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 14:35:41.411 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 14:35:41.411 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 14:35:41.411 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 14:35:41.411 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 14:35:41.411 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 14:35:41.411 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:35:41.412 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:35:41.412 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 14:35:41.412 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 14:35:41.412 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:35:41.412 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:35:41.412 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 14:35:41.412 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 14:35:41.413 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 14:35:41.415 +09:00 [DBG] Creating DbConnection.
2025-06-16 14:35:41.415 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 14:35:41.415 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:35:41.415 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:41.415 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 14:35:41.415 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:35:41.415 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:35:41.415 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:35:41.416 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:35:41.416 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:41.416 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:41.416 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:41.416 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:41.416 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:41.417 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:41.417 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:41.417 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:41.417 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:41.417 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:41.417 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:41.417 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:41.417 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 14:35:41.417 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:41.417 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:35:41.417 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 14:35:41.417 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 14:35:41.417 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 14:35:41.417 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 14:35:41.417 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 14:35:41.417 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 14:35:41.418 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6.7715ms
2025-06-16 14:35:41.418 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:41.418 +09:00 [DBG] Connection id "0HNDCHMMIIVN7" completed keep alive response.
2025-06-16 14:35:41.418 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 14:35:41.418 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:35:41.418 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:35:41.418 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 12.3456ms
2025-06-16 14:35:46.301 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 14:35:46.301 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:35:46.301 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:35:46.302 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:46.302 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 14:35:46.302 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:46.302 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 14:35:46.302 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 14:35:46.303 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 14:35:46.303 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 14:35:46.303 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 14:35:46.303 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 14:35:46.303 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:35:46.304 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:35:46.304 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 14:35:46.304 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 14:35:46.304 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:35:46.304 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:35:46.304 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 14:35:46.304 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 14:35:46.305 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 14:35:46.306 +09:00 [DBG] Creating DbConnection.
2025-06-16 14:35:46.306 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 14:35:46.306 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:35:46.307 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:46.307 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 14:35:46.307 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:35:46.307 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:35:46.307 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:35:46.308 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:35:46.308 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:46.308 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:46.308 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:46.309 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:46.309 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:46.309 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:46.309 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:46.309 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:46.309 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:46.309 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:46.310 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:46.310 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:46.310 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 14:35:46.310 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:46.310 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:35:46.310 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 14:35:46.310 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 14:35:46.310 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 14:35:46.311 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 14:35:46.311 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 14:35:46.311 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 14:35:46.312 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.5117ms
2025-06-16 14:35:46.312 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:46.312 +09:00 [DBG] Connection id "0HNDCHMMIIVN7" completed keep alive response.
2025-06-16 14:35:46.312 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 14:35:46.312 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:35:46.312 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:35:46.312 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 11.6119ms
2025-06-16 14:35:48.756 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 14:35:48.758 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 14:35:48.759 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 14:35:48.759 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 14:35:48.760 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 14:35:48.760 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 14:35:48.760 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 14:35:48.760 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 14:35:48.760 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 14:35:48.761 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 14:35:48.761 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 14:35:48.761 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 14:35:48.761 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 14:35:48.764 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 14:35:48.764 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 14:35:48.765 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 14:35:48.765 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 14:35:48.766 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 14:35:48.766 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 14:35:48.766 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 14:35:48.768 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 14:35:48.769 +09:00 [DBG] Creating DbConnection.
2025-06-16 14:35:48.769 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 14:35:48.769 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:35:48.769 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:48.769 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 14:35:48.769 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:35:48.770 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:35:48.770 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 14:35:48.771 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 14:35:48.771 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:48.771 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:48.772 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:48.772 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 14:35:48.772 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:48.772 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:35:48.773 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 14:35:48.773 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 14:35:48.773 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 14:35:48.773 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 14:35:48.773 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 14:35:48.773 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 14:35:48.774 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.3045ms
2025-06-16 14:35:48.774 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 14:35:48.774 +09:00 [DBG] Connection id "0HNDCHMMIIVN7" completed keep alive response.
2025-06-16 14:35:48.774 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 14:35:48.774 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:35:48.775 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:35:48.775 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 19.2339ms
2025-06-16 14:35:49.740 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 14:35:49.741 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:35:49.741 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:35:49.741 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:49.742 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 14:35:49.742 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:49.742 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 14:35:49.742 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 14:35:49.742 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 14:35:49.742 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 14:35:49.742 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 14:35:49.742 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 14:35:49.743 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:35:49.743 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:35:49.743 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 14:35:49.744 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 14:35:49.744 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:35:49.744 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:35:49.744 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 14:35:49.744 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 14:35:49.745 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 14:35:49.745 +09:00 [DBG] Creating DbConnection.
2025-06-16 14:35:49.745 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 14:35:49.745 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:35:49.746 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:49.746 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 14:35:49.746 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:35:49.746 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:35:49.746 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:35:49.747 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:35:49.747 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:49.747 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:49.748 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:49.748 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:49.748 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:49.748 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:49.748 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:49.749 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:49.749 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:49.749 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:49.749 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:49.749 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:49.749 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 14:35:49.749 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:49.749 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:35:49.749 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 14:35:49.749 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 14:35:49.749 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 14:35:49.749 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 14:35:49.749 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 14:35:49.749 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 14:35:49.750 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.1622ms
2025-06-16 14:35:49.750 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:49.750 +09:00 [DBG] Connection id "0HNDCHMMIIVN7" completed keep alive response.
2025-06-16 14:35:49.750 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 14:35:49.750 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:35:49.750 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:35:49.750 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 10.0475ms
2025-06-16 14:35:52.474 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 14:35:52.475 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:35:52.475 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:35:52.475 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:52.475 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 14:35:52.475 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:52.475 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 14:35:52.475 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 14:35:52.475 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 14:35:52.475 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 14:35:52.475 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 14:35:52.475 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 14:35:52.475 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:35:52.476 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:35:52.476 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 14:35:52.476 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 14:35:52.476 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:35:52.476 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:35:52.476 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 14:35:52.476 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 14:35:52.477 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 14:35:52.477 +09:00 [DBG] Creating DbConnection.
2025-06-16 14:35:52.477 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 14:35:52.477 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:35:52.477 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:52.477 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 14:35:52.478 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:35:52.478 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:35:52.478 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:35:52.479 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:35:52.479 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:52.480 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:52.480 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:52.480 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:52.480 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:52.481 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:52.481 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:52.482 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:52.483 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:52.483 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:52.484 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:52.484 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:52.484 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-16 14:35:52.484 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:52.485 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:35:52.487 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 14:35:52.487 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 14:35:52.487 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 14:35:52.488 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 14:35:52.488 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 14:35:52.488 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 14:35:52.489 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 13.1415ms
2025-06-16 14:35:52.489 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:52.489 +09:00 [DBG] Connection id "0HNDCHMMIIVN7" completed keep alive response.
2025-06-16 14:35:52.489 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 14:35:52.489 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:35:52.489 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:35:52.489 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 14.9434ms
2025-06-16 14:35:54.095 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 14:35:54.096 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:35:54.096 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:35:54.096 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:54.098 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 14:35:54.098 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:54.098 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 14:35:54.099 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 14:35:54.099 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 14:35:54.099 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 14:35:54.099 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 14:35:54.099 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 14:35:54.099 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:35:54.099 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:35:54.100 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 14:35:54.100 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 14:35:54.100 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:35:54.100 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:35:54.100 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 14:35:54.100 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 14:35:54.100 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 14:35:54.101 +09:00 [DBG] Creating DbConnection.
2025-06-16 14:35:54.101 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 14:35:54.101 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:35:54.101 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:54.101 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 14:35:54.101 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:35:54.101 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:35:54.101 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:35:54.101 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:35:54.101 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:54.102 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:54.102 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:54.102 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:54.102 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:54.102 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:54.102 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:54.102 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:54.102 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:54.102 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:54.102 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:35:54.102 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:54.102 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 14:35:54.102 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:35:54.102 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:35:54.102 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 14:35:54.102 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 14:35:54.102 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 14:35:54.102 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 14:35:54.102 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 14:35:54.102 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 14:35:54.103 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 3.3713ms
2025-06-16 14:35:54.103 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:35:54.103 +09:00 [DBG] Connection id "0HNDCHMMIIVN7" completed keep alive response.
2025-06-16 14:35:54.103 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 14:35:54.103 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:35:54.103 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:35:54.103 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 7.7539ms
2025-06-16 14:36:04.091 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 14:36:04.093 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 14:36:04.093 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 14:36:04.094 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 14:36:04.095 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 14:36:04.095 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 14:36:04.095 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 14:36:04.096 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 14:36:04.096 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 14:36:04.096 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 14:36:04.097 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 14:36:04.097 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 14:36:04.097 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 14:36:04.100 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 14:36:04.100 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 14:36:04.100 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 14:36:04.101 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 14:36:04.101 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 14:36:04.101 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 14:36:04.101 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 14:36:04.102 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 14:36:04.103 +09:00 [DBG] Creating DbConnection.
2025-06-16 14:36:04.103 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 14:36:04.103 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:36:04.104 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:36:04.104 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 14:36:04.104 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:36:04.104 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:36:04.104 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 14:36:04.105 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 14:36:04.106 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:36:04.107 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:36:04.107 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:36:04.107 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 14:36:04.108 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:36:04.108 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:36:04.108 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 14:36:04.108 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 14:36:04.108 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 14:36:04.109 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 14:36:04.109 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 14:36:04.109 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 14:36:04.109 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.4044ms
2025-06-16 14:36:04.109 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 14:36:04.109 +09:00 [DBG] Connection id "0HNDCHMMIIVN7" completed keep alive response.
2025-06-16 14:36:04.110 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 14:36:04.110 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:36:04.110 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:36:04.110 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 18.6787ms
2025-06-16 14:37:11.376 +09:00 [DBG] Connection id "0HNDCHMMIIVN7" received FIN.
2025-06-16 14:37:11.379 +09:00 [DBG] Connection id "0HNDCHMMIIVN7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 14:37:11.381 +09:00 [DBG] Connection id "0HNDCHMMIIVN7" disconnecting.
2025-06-16 14:37:11.382 +09:00 [DBG] Connection id "0HNDCHMMIIVN7" stopped.
2025-06-16 14:39:06.245 +09:00 [DBG] Connection id "0HNDCHMMIIVN8" accepted.
2025-06-16 14:39:06.248 +09:00 [DBG] Connection id "0HNDCHMMIIVN8" started.
2025-06-16 14:39:06.274 +09:00 [DBG] Connection 0HNDCHMMIIVN8 established using the following protocol: "Tls12"
2025-06-16 14:39:06.279 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 14:39:06.280 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:39:06.281 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:39:06.281 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:39:06.282 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 14:39:06.282 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:39:06.282 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 14:39:06.283 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 14:39:06.283 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 14:39:06.283 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 14:39:06.283 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 14:39:06.283 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 14:39:06.283 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:39:06.284 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:39:06.284 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 14:39:06.285 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 14:39:06.285 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:39:06.285 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:39:06.285 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 14:39:06.285 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 14:39:06.287 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 14:39:06.289 +09:00 [DBG] Creating DbConnection.
2025-06-16 14:39:06.290 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 14:39:06.290 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:39:06.290 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:39:06.290 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 14:39:06.291 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:39:06.291 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:39:06.291 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:39:06.292 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:39:06.292 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:06.292 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:06.292 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:06.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:06.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:06.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:06.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:06.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:06.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:06.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:06.294 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:06.294 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:39:06.294 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 14:39:06.294 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:39:06.294 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:39:06.294 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 14:39:06.294 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 14:39:06.294 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 14:39:06.294 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 14:39:06.295 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 14:39:06.295 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 14:39:06.296 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 13.3544ms
2025-06-16 14:39:06.297 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:39:06.297 +09:00 [DBG] Connection id "0HNDCHMMIIVN8" completed keep alive response.
2025-06-16 14:39:06.298 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 14:39:06.298 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:39:06.298 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:39:06.298 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 19.1764ms
2025-06-16 14:39:07.030 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 14:39:07.030 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 14:39:07.030 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 14:39:07.031 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 14:39:07.032 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 14:39:07.032 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 14:39:07.033 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 14:39:07.033 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 14:39:07.033 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 14:39:07.033 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 14:39:07.034 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 14:39:07.034 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 14:39:07.034 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 14:39:07.034 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 14:39:07.035 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 14:39:07.035 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 14:39:07.035 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 14:39:07.035 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 14:39:07.035 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 14:39:07.036 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 14:39:07.037 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 14:39:07.038 +09:00 [DBG] Creating DbConnection.
2025-06-16 14:39:07.038 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 14:39:07.038 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:39:07.038 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:39:07.039 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 14:39:07.039 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:39:07.039 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:39:07.039 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 14:39:07.039 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 14:39:07.040 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:07.040 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:07.041 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:39:07.041 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 14:39:07.041 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:39:07.042 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:39:07.042 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 14:39:07.042 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 14:39:07.043 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 14:39:07.043 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 14:39:07.043 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 14:39:07.043 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 14:39:07.044 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 9.7655ms
2025-06-16 14:39:07.044 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 14:39:07.044 +09:00 [DBG] Connection id "0HNDCHMMIIVN8" completed keep alive response.
2025-06-16 14:39:07.044 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 14:39:07.044 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:39:07.044 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:39:07.045 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 14.9858ms
2025-06-16 14:39:07.695 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 14:39:07.695 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:39:07.695 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:39:07.695 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:39:07.695 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 14:39:07.696 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:39:07.696 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 14:39:07.696 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 14:39:07.696 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 14:39:07.696 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 14:39:07.697 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 14:39:07.697 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 14:39:07.697 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:39:07.698 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:39:07.698 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 14:39:07.698 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 14:39:07.698 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:39:07.729 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:39:07.729 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 14:39:07.729 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 14:39:07.730 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 14:39:07.730 +09:00 [DBG] Creating DbConnection.
2025-06-16 14:39:07.730 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 14:39:07.730 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:39:07.730 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:39:07.730 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 14:39:07.731 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:39:07.731 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:39:07.731 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:39:07.731 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:39:07.731 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:07.731 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:07.732 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:07.732 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:07.732 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:07.732 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:07.732 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:07.732 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:07.732 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:07.732 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:07.732 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:39:07.732 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:39:07.732 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 14:39:07.733 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:39:07.733 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:39:07.733 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 14:39:07.733 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 14:39:07.733 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 14:39:07.733 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 14:39:07.733 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 14:39:07.733 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 14:39:07.741 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 43.9035ms
2025-06-16 14:39:07.741 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:39:07.742 +09:00 [DBG] Connection id "0HNDCHMMIIVN8" completed keep alive response.
2025-06-16 14:39:07.742 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 14:39:07.742 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:39:07.742 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:39:07.742 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 47.3737ms
2025-06-16 14:40:21.247 +09:00 [DBG] Connection id "0HNDCHMMIIVN8" received FIN.
2025-06-16 14:40:21.249 +09:00 [DBG] Connection id "0HNDCHMMIIVN8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 14:40:21.251 +09:00 [DBG] Connection id "0HNDCHMMIIVN8" disconnecting.
2025-06-16 14:40:21.251 +09:00 [DBG] Connection id "0HNDCHMMIIVN8" stopped.
2025-06-16 14:41:44.119 +09:00 [DBG] Connection id "0HNDCHMMIIVN9" accepted.
2025-06-16 14:41:44.120 +09:00 [DBG] Connection id "0HNDCHMMIIVN9" started.
2025-06-16 14:41:44.151 +09:00 [DBG] Connection 0HNDCHMMIIVN9 established using the following protocol: "Tls12"
2025-06-16 14:41:44.171 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 14:41:44.172 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:41:44.172 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 14:41:44.172 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:41:44.172 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 14:41:44.172 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:41:44.173 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 14:41:44.173 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 14:41:44.173 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 14:41:44.173 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 14:41:44.173 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 14:41:44.173 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 14:41:44.173 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:41:44.174 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 14:41:44.174 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 14:41:44.174 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 14:41:44.174 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:41:44.174 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 14:41:44.174 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 14:41:44.174 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 14:41:44.175 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 14:41:44.176 +09:00 [DBG] Creating DbConnection.
2025-06-16 14:41:44.177 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 14:41:44.177 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:41:44.177 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:41:44.177 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 14:41:44.177 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:41:44.177 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 14:41:44.177 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:41:44.178 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 14:41:44.178 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:41:44.178 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:41:44.178 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:41:44.179 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:41:44.179 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:41:44.179 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:41:44.179 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:41:44.179 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:41:44.179 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:41:44.179 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:41:44.179 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 14:41:44.179 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:41:44.179 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 14:41:44.179 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 14:41:44.179 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:41:44.179 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 14:41:44.180 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 14:41:44.180 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 14:41:44.180 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 14:41:44.180 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 14:41:44.180 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 14:41:44.180 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.5444ms
2025-06-16 14:41:44.180 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 14:41:44.181 +09:00 [DBG] Connection id "0HNDCHMMIIVN9" completed keep alive response.
2025-06-16 14:41:44.181 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 14:41:44.181 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 14:41:44.181 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 14:41:44.181 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 9.9533ms
2025-06-16 14:41:44.213 +09:00 [DBG] Connection id "0HNDCHMMIIVN9" received FIN.
2025-06-16 14:41:44.213 +09:00 [DBG] Connection id "0HNDCHMMIIVN9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 14:41:44.214 +09:00 [DBG] Connection id "0HNDCHMMIIVN9" disconnecting.
2025-06-16 14:41:44.214 +09:00 [DBG] Connection id "0HNDCHMMIIVN9" stopped.
2025-06-16 18:15:33.279 +09:00 [DBG] Connection id "0HNDCHMMIIVNA" accepted.
2025-06-16 18:15:33.283 +09:00 [DBG] Connection id "0HNDCHMMIIVNA" started.
2025-06-16 18:15:33.358 +09:00 [DBG] Connection 0HNDCHMMIIVNA established using the following protocol: "Tls12"
2025-06-16 18:15:33.375 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a8c4d9e7-cb88-4357-9683-da32e2effb73 - null null
2025-06-16 18:15:33.377 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/a8c4d9e7-cb88-4357-9683-da32e2effb73'
2025-06-16 18:15:33.378 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/a8c4d9e7-cb88-4357-9683-da32e2effb73'
2025-06-16 18:15:33.379 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 18:15:33.383 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:15:33.383 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 18:15:33.404 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:15:33.404 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:15:33.404 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:15:33.404 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:15:33.404 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:15:33.404 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:15:33.404 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:15:33.406 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:15:33.407 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 18:15:33.407 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-16 18:15:33.409 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 18:15:33.409 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 18:15:33.409 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 18:15:33.409 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-16 18:15:33.419 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:15:33.423 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-16 18:15:33.431 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-16 18:15:33.433 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-16 18:15:33.455 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-16 18:15:33.468 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(27) ? default(Guid?) : (Guid?)dataReader.GetGuid(27) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(27) ? default(object) : (object)dataReader.GetGuid(27) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(27) ? default(Guid) : dataReader.GetGuid(27);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(28) ? default(Guid) : dataReader.GetGuid(28);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(29) ? default(string) : dataReader.GetString(29);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(31) ? default(long?) : (long?)dataReader.GetInt64(31);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(33) ? default(DateTime) : dataReader.GetDateTime(33);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(34) ? default(string) : dataReader.GetString(34);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 18:15:33.482 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:15:33.482 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:15:33.482 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:15:33.486 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:15:33.487 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:15:33.488 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-06-16 18:15:33.489 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-06-16 18:15:33.490 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 18:15:33.501 +09:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 18:15:33.512 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:33.548 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:33.550 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:15:33.550 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 47ms reading results.
2025-06-16 18:15:33.550 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:15:33.550 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:15:33.550 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:15:33.550 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:15:33.550 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:15:33.550 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:15:33.550 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:15:33.550 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-16 18:15:33.552 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 148.3228ms
2025-06-16 18:15:33.553 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 18:15:33.553 +09:00 [DBG] Connection id "0HNDCHMMIIVNA" completed keep alive response.
2025-06-16 18:15:33.553 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:15:33.553 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:15:33.553 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:15:33.553 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/a8c4d9e7-cb88-4357-9683-da32e2effb73 - 200 null application/json; charset=utf-8 178.2415ms
2025-06-16 18:15:44.544 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 18:15:44.547 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 18:15:44.548 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 18:15:44.548 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:15:44.548 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:15:44.549 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:15:44.549 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:15:44.549 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:15:44.550 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:15:44.550 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:15:44.550 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:15:44.550 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:15:44.550 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:15:44.550 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:15:44.551 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 18:15:44.551 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 18:15:44.551 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:15:44.551 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:15:44.552 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 18:15:44.553 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 18:15:44.553 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:15:44.554 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:15:44.554 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:15:44.554 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:15:44.555 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:15:44.555 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:15:44.555 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:15:44.555 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:15:44.555 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:15:44.556 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:15:44.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:44.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:44.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:44.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:44.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:44.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:44.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:44.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:44.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:44.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:44.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:44.557 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:15:44.557 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 18:15:44.558 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:15:44.558 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:15:44.558 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:15:44.558 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:15:44.558 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:15:44.558 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:15:44.558 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:15:44.558 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:15:44.558 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.1174ms
2025-06-16 18:15:44.558 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:15:44.558 +09:00 [DBG] Connection id "0HNDCHMMIIVNA" completed keep alive response.
2025-06-16 18:15:44.558 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:15:44.558 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:15:44.558 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:15:44.558 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 14.6714ms
2025-06-16 18:15:59.868 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 18:15:59.869 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 18:15:59.870 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 18:15:59.870 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:15:59.871 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:15:59.871 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:15:59.872 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 18:15:59.872 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:15:59.872 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:15:59.872 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:15:59.873 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:15:59.873 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:15:59.873 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:15:59.874 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:15:59.874 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 18:15:59.874 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 18:15:59.874 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:15:59.875 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:15:59.875 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 18:15:59.875 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 18:15:59.876 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:15:59.878 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:15:59.878 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:15:59.878 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:15:59.878 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:15:59.879 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:15:59.879 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:15:59.880 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:15:59.880 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:15:59.881 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:15:59.883 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:59.883 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:15:59.883 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:15:59.884 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 18:15:59.884 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:15:59.884 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:15:59.885 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:15:59.885 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:15:59.885 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:15:59.885 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:15:59.885 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:15:59.885 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:15:59.886 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 13.0469ms
2025-06-16 18:15:59.886 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:15:59.887 +09:00 [DBG] Connection id "0HNDCHMMIIVNA" completed keep alive response.
2025-06-16 18:15:59.887 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:15:59.887 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:15:59.887 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:15:59.887 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 19.5187ms
2025-06-16 18:16:02.986 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 18:16:02.987 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 18:16:02.987 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 18:16:02.987 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:16:02.987 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:16:02.987 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:16:02.987 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:16:02.987 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:16:02.988 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:16:02.988 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:16:02.988 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:16:02.988 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:16:02.989 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:16:02.989 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:16:02.989 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 18:16:02.989 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 18:16:02.990 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:16:02.990 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:16:02.990 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 18:16:02.990 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 18:16:02.991 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:16:02.992 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:16:02.992 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:16:02.992 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:16:02.992 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:16:02.992 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:16:02.992 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:16:02.992 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:16:02.993 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:16:02.994 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:16:02.994 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:16:02.994 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:16:02.994 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:16:02.994 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:16:02.995 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:16:02.995 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:16:02.995 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:16:02.995 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:16:02.995 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:16:02.995 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:16:02.995 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:16:02.997 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:16:02.997 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-16 18:16:02.997 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:16:02.998 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:16:02.998 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:16:02.998 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:16:02.998 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:16:02.998 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:16:02.999 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:16:02.999 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:16:02.999 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 10.954ms
2025-06-16 18:16:03.000 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:16:03.000 +09:00 [DBG] Connection id "0HNDCHMMIIVNA" completed keep alive response.
2025-06-16 18:16:03.000 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:16:03.000 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:16:03.000 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:16:03.000 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 13.9082ms
2025-06-16 18:17:03.261 +09:00 [DBG] Connection id "0HNDCHMMIIVNA" received FIN.
2025-06-16 18:17:03.264 +09:00 [DBG] Connection id "0HNDCHMMIIVNA" disconnecting.
2025-06-16 18:17:03.266 +09:00 [DBG] Connection id "0HNDCHMMIIVNA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 18:17:03.269 +09:00 [DBG] Connection id "0HNDCHMMIIVNA" stopped.
2025-06-16 18:21:41.515 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" accepted.
2025-06-16 18:21:41.516 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" started.
2025-06-16 18:21:41.541 +09:00 [DBG] Connection 0HNDCHMMIIVNB established using the following protocol: "Tls12"
2025-06-16 18:21:41.560 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-16 18:21:41.561 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-16 18:21:41.562 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-16 18:21:41.562 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-16 18:21:41.562 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:21:41.562 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-16 18:21:41.569 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:21:41.569 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:21:41.570 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:21:41.570 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:21:41.570 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:21:41.570 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:21:41.570 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:21:41.570 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:21:41.572 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-16 18:21:41.572 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-16 18:21:41.573 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-16 18:21:41.589 +09:00 [DBG] Connection id "0HNDCHMMIIVNB", Request id "0HNDCHMMIIVNB:00000001": started reading request body.
2025-06-16 18:21:41.591 +09:00 [DBG] Connection id "0HNDCHMMIIVNB", Request id "0HNDCHMMIIVNB:00000001": done reading request body.
2025-06-16 18:21:41.605 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-16 18:21:41.605 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-16 18:21:41.605 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-16 18:21:41.606 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-16 18:21:41.615 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-16 18:21:41.616 +09:00 [INF] Creating a new approval request.
2025-06-16 18:21:41.619 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"d7cf2f8f-396f-4df3-a2d6-7877f4035cc1","RequestTitle":"회의 참석 - 폴더 카피해서 이동하는 cmd","RequestContent":"\r\nWindows 명령 프롬프트(CMD)에서 폴더 전체를 복사해서 다른 위치로 이동하려면 xcopy 명령어를 사용합니다.\r\n폴더를 \"복사\"하고 싶다면 xcopy, \"이동\"하고 싶다면 move를 사용하세요.\r\n\r\n1. 폴더 복사 (xcopy)\r\n하위 폴더 및 파일까지 모두 복사하려면 다음과 같이 입력합니다:\r\n\r\ntext\r\nxcopy 원본폴더 경로 대상폴더 경로 /E /H /K\r\n옵션 설명:\r\n\r\n/E : 비어있는 하위 폴더까지 모두 복사\r\n\r\n/H : 숨김 및 시스템 파일도 복사\r\n\r\n/K : 파일 속성(읽기전용 등) 유지\r\n\r\n예시:\r\n\r\ntext\r\nxcopy C:\\source C:\\target /E /H /K\r\n위 명령어는 C:\\source 폴더 전체(하위 폴더 포함)를 C:\\target으로 복사합니다.\r\n\r\n2. 폴더 이동 (move)\r\n폴더 전체를 \"이동\"하려면 move 명령어를 사용합니다:\r\n\r\ntext\r\nmove 원본폴더 경로 대상폴더 경로\r\n예시:\r\n\r\ntext\r\nmove C:\\source C:\\target\r\n이 명령어는 C:\\source 폴더를 C:\\target으로 이동시킵니다. 단, move는 폴더를 복사하는 것이 아니라 \"잘라내기\"입니다.\r\n\r\n3. 참고: copy 명령어\r\ncopy는 파일만 복사할 수 있으며, 폴더 전체 복사는 불가능합니다.\r\n\r\n4. 주요 명령어 비교\r\n목적\t명령어 예시\t특징\r\n폴더 복사\txcopy C:\\source C:\\target /E /H /K\t하위 폴더까지 복사\r\n폴더 이동\tmove C:\\source C:\\target\t폴더 전체 이동(잘라내기)\r\n파일 복사\tcopy C:\\source\\file.txt C:\\target\\file.txt\t파일만 복사\r\nTip:\r\n\r\nxcopy는 복사, move는 이동(잘라내기)입니다.\r\n\r\nxcopy 사용 시 대상 폴더가 없으면 자동 생성됩니다.\r\n\r\n대량의 파일이나 폴더 구조 복사에는 xcopy를, 단순 이동에는 move를 사용하세요.\r\n\r\n필요에 따라 위 명령어를 사용하면 됩니다.","ApplicantEmployeeNumber":"EC20505","ApplicantName":"User 6","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-16T09:21:41.4927850Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0001","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 1","Position":"System Administrator","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0004","Sequence":2,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 4","Position":"Staff","Department":"HR","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EC20507","Sequence":3,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 7","Position":"Staff","Department":"Sales","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-16 18:21:41.626 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:21:41.646 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.650 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.652 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.652 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.652 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.652 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.652 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.654 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-16 18:21:41.655 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-16 18:21:41.665 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-16 18:21:41.701 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:21:41.701 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:21:41.701 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:21:41.704 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:41.705 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-16 18:21:41.710 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-16 18:21:41.711 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:21:41.711 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:41.711 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:41.711 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 998), @p11='?' (Size = 24), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-16 18:21:41.713 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 998), @p11='?' (Size = 24), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-16 18:21:41.715 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:41.715 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 18:21:41.715 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:21:41.715 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:41.715 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:41.715 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 5), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 18:21:41.716 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 5), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 18:21:41.716 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:41.716 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:21:41.716 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:21:41.716 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:41.716 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:41.716 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 18:21:41.716 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 18:21:41.717 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:41.717 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:21:41.717 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:21:41.717 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:41.717 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:41.717 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 18:21:41.717 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 18:21:41.717 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:41.717 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:21:41.718 +09:00 [DBG] Committing transaction.
2025-06-16 18:21:41.719 +09:00 [DBG] Committed transaction.
2025-06-16 18:21:41.720 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:41.720 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:21:41.722 +09:00 [DBG] Disposing transaction.
2025-06-16 18:21:41.729 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.729 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.729 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.735 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.736 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 4 entities written to the database.
2025-06-16 18:21:41.736 +09:00 [INF] Approval request created successfully with ID: "d7cf2f8f-396f-4df3-a2d6-7877f4035cc1"
2025-06-16 18:21:41.737 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:21:41.737 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:21:41.737 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:21:41.737 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:21:41.737 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:21:41.737 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-16 18:21:41.750 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] for address (approvalId=[d7cf2f8f-396f-4df3-a2d6-7877f4035cc1],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-16 18:21:41.752 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) resulting in /api/ApprovalRequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1 and 
2025-06-16 18:21:41.754 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] with result /api/ApprovalRequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1
2025-06-16 18:21:41.754 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API) in 184.3501ms
2025-06-16 18:21:41.754 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-16 18:21:41.754 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" completed keep alive response.
2025-06-16 18:21:41.754 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:21:41.754 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:21:41.754 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:21:41.754 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 194.4234ms
2025-06-16 18:21:41.762 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 18:21:41.762 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 18:21:41.762 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 18:21:41.762 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:21:41.762 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:21:41.763 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:21:41.763 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:21:41.763 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:21:41.763 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:21:41.763 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:21:41.763 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:21:41.763 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:21:41.763 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:21:41.763 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:21:41.763 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 18:21:41.763 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 18:21:41.764 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:21:41.764 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:21:41.764 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 18:21:41.764 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 18:21:41.764 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:21:41.764 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:21:41.764 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:21:41.764 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:21:41.764 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:41.764 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:21:41.764 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:41.764 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:41.764 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:21:41.765 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:21:41.765 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.765 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.766 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.766 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.766 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.766 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.766 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.766 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.766 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.766 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.766 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.766 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.766 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.767 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:41.767 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:41.767 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 18:21:41.767 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:41.767 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:21:41.767 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:21:41.767 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:21:41.767 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:21:41.767 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:21:41.767 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:21:41.767 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:21:41.767 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.421ms
2025-06-16 18:21:41.768 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:21:41.768 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" completed keep alive response.
2025-06-16 18:21:41.768 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:21:41.768 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:21:41.768 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:21:41.768 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 5.8441ms
2025-06-16 18:21:46.064 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1 - null null
2025-06-16 18:21:46.064 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1'
2025-06-16 18:21:46.064 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1'
2025-06-16 18:21:46.064 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 18:21:46.065 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:21:46.065 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 18:21:46.065 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:21:46.066 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:21:46.066 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:21:46.066 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:21:46.066 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:21:46.066 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:21:46.066 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:21:46.067 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:21:46.067 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 18:21:46.067 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-16 18:21:46.067 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 18:21:46.067 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 18:21:46.067 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 18:21:46.067 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-16 18:21:46.068 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:21:46.068 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:21:46.068 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:21:46.068 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:21:46.068 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:46.068 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:21:46.068 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:46.068 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:46.069 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 18:21:46.069 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 18:21:46.070 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:46.070 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:46.072 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:46.072 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:46.072 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:46.072 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 18:21:46.072 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:46.072 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:21:46.072 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:21:46.072 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:21:46.072 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:21:46.072 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:21:46.072 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:21:46.072 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-16 18:21:46.075 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 8.9287ms
2025-06-16 18:21:46.076 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 18:21:46.076 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" completed keep alive response.
2025-06-16 18:21:46.076 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:21:46.076 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:21:46.076 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:21:46.076 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1 - 200 null application/json; charset=utf-8 12.5858ms
2025-06-16 18:21:50.700 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 18:21:50.701 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 18:21:50.702 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 18:21:50.702 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:21:50.702 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:21:50.702 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:21:50.703 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:21:50.703 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:21:50.704 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:21:50.704 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:21:50.704 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:21:50.704 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:21:50.704 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:21:50.705 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:21:50.705 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 18:21:50.706 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 18:21:50.706 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:21:50.706 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:21:50.706 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 18:21:50.708 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 18:21:50.709 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:21:50.710 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:21:50.711 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:21:50.711 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:21:50.711 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:50.711 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:21:50.711 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:50.711 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:50.711 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:21:50.712 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:21:50.712 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.713 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.713 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.713 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.713 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.713 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.713 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.713 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.713 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.714 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.714 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.714 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.714 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.714 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:50.714 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:50.714 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 18:21:50.714 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:50.714 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:21:50.715 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:21:50.715 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:21:50.715 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:21:50.715 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:21:50.715 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:21:50.715 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:21:50.715 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 11.3379ms
2025-06-16 18:21:50.716 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:21:50.716 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" completed keep alive response.
2025-06-16 18:21:50.716 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:21:50.716 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:21:50.716 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:21:50.717 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 16.483ms
2025-06-16 18:21:51.553 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 18:21:51.553 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 18:21:51.554 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 18:21:51.554 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:21:51.554 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:21:51.554 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:21:51.555 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 18:21:51.555 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:21:51.555 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:21:51.555 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:21:51.556 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:21:51.556 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:21:51.556 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:21:51.556 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:21:51.556 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 18:21:51.556 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 18:21:51.556 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:21:51.556 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:21:51.557 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 18:21:51.557 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 18:21:51.557 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:21:51.558 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:21:51.558 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:21:51.559 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:21:51.559 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:51.559 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:21:51.559 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:51.559 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:51.559 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:21:51.560 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:21:51.560 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:51.560 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:51.560 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:51.561 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:21:51.561 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:51.561 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:21:51.561 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:21:51.561 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:21:51.561 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:21:51.561 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:21:51.561 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:21:51.561 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:21:51.562 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 5.8864ms
2025-06-16 18:21:51.562 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:21:51.562 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" completed keep alive response.
2025-06-16 18:21:51.562 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:21:51.562 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:21:51.563 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:21:51.563 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 9.7676ms
2025-06-16 18:21:52.304 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 18:21:52.304 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 18:21:52.304 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 18:21:52.304 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:21:52.305 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:21:52.305 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:21:52.306 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:21:52.306 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:21:52.306 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:21:52.307 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:21:52.307 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:21:52.307 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:21:52.307 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:21:52.307 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:21:52.308 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 18:21:52.308 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 18:21:52.308 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:21:52.308 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:21:52.308 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 18:21:52.308 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 18:21:52.309 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:21:52.310 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:21:52.310 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:21:52.310 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:21:52.310 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:52.310 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:21:52.310 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:52.311 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:21:52.311 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:21:52.311 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:21:52.312 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.312 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.312 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.312 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.312 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.312 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.313 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.314 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:21:52.314 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:52.314 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 18:21:52.314 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:21:52.314 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:21:52.314 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:21:52.314 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:21:52.314 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:21:52.314 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:21:52.314 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:21:52.315 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:21:52.315 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.0158ms
2025-06-16 18:21:52.315 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:21:52.316 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" completed keep alive response.
2025-06-16 18:21:52.316 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:21:52.316 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:21:52.316 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:21:52.316 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 12.7491ms
2025-06-16 18:22:17.958 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - null null
2025-06-16 18:22:17.960 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20507'
2025-06-16 18:22:17.960 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20507'
2025-06-16 18:22:17.960 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:22:17.962 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:22:17.962 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:22:17.963 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 18:22:17.964 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:22:17.964 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:22:17.964 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:22:17.964 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:22:17.964 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:22:17.964 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:22:17.965 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:22:17.966 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 18:22:17.966 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 18:22:17.966 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:22:17.966 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:22:17.966 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 18:22:17.966 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 18:22:17.968 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:22:17.971 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:22:17.971 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:22:17.972 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:22:17.972 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:22:17.973 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:22:17.973 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:22:17.974 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:22:17.974 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:22:17.975 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:22:17.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:17.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:17.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:17.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:17.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:17.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:17.977 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:17.977 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:17.977 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:17.977 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:17.977 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:17.977 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:17.977 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:17.977 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:22:17.977 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 18:22:17.978 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:22:17.978 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:22:17.978 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:22:17.978 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:22:17.978 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:22:17.978 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:22:17.978 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:22:17.979 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:22:17.980 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 15.8608ms
2025-06-16 18:22:17.980 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:22:17.980 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" completed keep alive response.
2025-06-16 18:22:17.981 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:22:17.981 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:22:17.981 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:22:17.981 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20507 - 200 null application/json; charset=utf-8 23.4928ms
2025-06-16 18:22:50.938 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-16 18:22:50.940 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-16 18:22:50.940 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-16 18:22:50.941 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:22:50.941 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:22:50.941 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:22:50.942 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 18:22:50.942 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:22:50.942 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:22:50.943 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:22:50.943 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:22:50.943 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:22:50.943 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:22:50.943 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:22:50.944 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 18:22:50.944 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 18:22:50.944 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:22:50.944 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:22:50.945 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 18:22:50.945 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 18:22:50.947 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:22:50.949 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:22:50.949 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:22:50.949 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:22:50.949 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:22:50.949 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:22:50.950 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:22:50.950 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:22:50.950 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:22:50.951 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:22:50.952 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.952 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.952 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.952 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.952 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.953 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.953 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.953 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.953 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.953 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.953 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.953 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.954 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.954 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.954 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.954 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.955 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:22:50.955 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:22:50.956 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-16 18:22:50.957 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:22:50.957 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:22:50.957 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:22:50.957 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:22:50.957 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:22:50.957 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:22:50.958 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:22:50.958 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:22:50.958 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 15.4454ms
2025-06-16 18:22:50.958 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:22:50.959 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" completed keep alive response.
2025-06-16 18:22:50.959 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:22:50.959 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:22:50.959 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:22:50.959 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 21.844ms
2025-06-16 18:23:02.005 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-16 18:23:02.005 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-16 18:23:02.006 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-16 18:23:02.007 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-16 18:23:02.007 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:23:02.007 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-16 18:23:02.012 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 18:23:02.013 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:23:02.013 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:23:02.013 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:23:02.013 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:23:02.013 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:23:02.013 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:23:02.013 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:23:02.013 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-16 18:23:02.014 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-16 18:23:02.014 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-16 18:23:02.016 +09:00 [DBG] Connection id "0HNDCHMMIIVNB", Request id "0HNDCHMMIIVNB:00000009": started reading request body.
2025-06-16 18:23:02.016 +09:00 [DBG] Connection id "0HNDCHMMIIVNB", Request id "0HNDCHMMIIVNB:00000009": done reading request body.
2025-06-16 18:23:02.017 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.API.DTOs.ApproveRequestDto'
2025-06-16 18:23:02.017 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-16 18:23:02.017 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-16 18:23:02.017 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-16 18:23:02.018 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-16 18:23:02.022 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:23:02.025 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(r => r.Steps)
    .FirstOrDefault(r => r.ApprovalId == __approvalGuid_0)'
2025-06-16 18:23:02.025 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-16 18:23:02.036 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
            SELECT a1.ApprovalId, a1.ApplicantDepartment, a1.ApplicantEmployeeNumber, a1.ApplicantName, a1.ApplicantPosition, a1.ApprovalType, a1.ApproverComment, a1.CurrentApproverEmployeeNumber, a1.CurrentStep, a1.MisKey, a1.RequestContent, a1.RequestTitle, a1.RequestedAt, a1.RespondedAt, a1.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType
            FROM 
            (
                SELECT TOP(1) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__approvalGuid_0
            ) AS a1
            LEFT JOIN ApprovalSteps AS a0 ON a1.ApprovalId == a0.ApprovalId
            ORDER BY a1.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
            SELECT a1.ApprovalId, a1.ApplicantDepartment, a1.ApplicantEmployeeNumber, a1.ApplicantName, a1.ApplicantPosition, a1.ApprovalType, a1.ApproverComment, a1.CurrentApproverEmployeeNumber, a1.CurrentStep, a1.MisKey, a1.RequestContent, a1.RequestTitle, a1.RequestedAt, a1.RespondedAt, a1.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType
            FROM 
            (
                SELECT TOP(1) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__approvalGuid_0
            ) AS a1
            LEFT JOIN ApprovalSteps AS a0 ON a1.ApprovalId == a0.ApprovalId
            ORDER BY a1.ApprovalId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{9}, namelessParameter{10}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{10}, 
                        forMaterialization: True);
                    return namelessParameter{10}.<ApprovalRequest>k__BackingField = namelessParameter{9};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 18:23:02.040 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:23:02.040 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:23:02.040 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:23:02.040 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:02.041 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:23:02.041 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:02.041 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:02.041 +09:00 [DBG] Executing DbCommand [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-16 18:23:02.042 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-16 18:23:02.042 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.044 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.044 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.044 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.044 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:02.044 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 18:23:02.044 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:02.044 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:23:02.046 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-16 18:23:02.046 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-16 18:23:02.047 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentApproverEmployeeNumber' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-16 18:23:02.048 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.048 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentStep' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-16 18:23:02.048 +09:00 [DBG] The unchanged property 'ApprovalRequest.RespondedAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-16 18:23:02.048 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionDate' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-16 18:23:02.048 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.048 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-16 18:23:02.048 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-16 18:23:02.051 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:23:02.051 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:02.051 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-16 18:23:02.051 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-16 18:23:02.051 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:23:02.051 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:02.051 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:02.051 +09:00 [DBG] Executing DbCommand [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1, "RespondedAt" = @p2
WHERE "ApprovalId" = @p3
RETURNING 1;
2025-06-16 18:23:02.051 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1, "RespondedAt" = @p2
WHERE "ApprovalId" = @p3
RETURNING 1;
2025-06-16 18:23:02.053 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:02.053 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 18:23:02.053 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:23:02.053 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:02.053 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:02.053 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-16 18:23:02.053 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-16 18:23:02.053 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:02.053 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:23:02.053 +09:00 [DBG] Committing transaction.
2025-06-16 18:23:02.054 +09:00 [DBG] Committed transaction.
2025-06-16 18:23:02.054 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:02.054 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:23:02.054 +09:00 [DBG] Disposing transaction.
2025-06-16 18:23:02.054 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.054 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.054 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-16 18:23:02.055 +09:00 [INF] Approval d7cf2f8f-396f-4df3-a2d6-7877f4035cc1 approved by EMP0001 with comment: 
2025-06-16 18:23:02.055 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:23:02.055 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:23:02.055 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:23:02.055 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:23:02.055 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:23:02.055 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-06-16 18:23:02.057 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 43.7507ms
2025-06-16 18:23:02.057 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-16 18:23:02.057 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" completed keep alive response.
2025-06-16 18:23:02.057 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:23:02.057 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:23:02.057 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:23:02.057 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 200 null application/json; charset=utf-8 52.6118ms
2025-06-16 18:23:02.120 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-16 18:23:02.120 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-16 18:23:02.120 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-16 18:23:02.120 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:23:02.120 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:23:02.120 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:23:02.121 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 18:23:02.121 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:23:02.159 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:23:02.159 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:23:02.159 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:23:02.159 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:23:02.159 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:23:02.160 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:23:02.160 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 18:23:02.160 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 18:23:02.160 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:23:02.160 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:23:02.160 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 18:23:02.161 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 18:23:02.162 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:23:02.162 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:23:02.162 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:23:02.162 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:23:02.162 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:02.162 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:23:02.162 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:02.162 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:02.166 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:23:02.167 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:23:02.168 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.168 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.168 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.168 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.168 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.168 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.168 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.168 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.168 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.168 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.169 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.169 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.170 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.170 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.170 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.170 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.171 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:02.171 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:02.171 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-16 18:23:02.172 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:02.172 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:23:02.172 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:23:02.172 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:23:02.172 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:23:02.189 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:23:02.189 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:23:02.189 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:23:02.189 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 30.1393ms
2025-06-16 18:23:02.190 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:23:02.190 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" completed keep alive response.
2025-06-16 18:23:02.190 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:23:02.190 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:23:02.190 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:23:02.190 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 77.9683ms
2025-06-16 18:23:16.916 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approval/approve - application/json; charset=utf-8 null
2025-06-16 18:23:16.917 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/approve'
2025-06-16 18:23:16.918 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)' with route pattern 'api/Approval/approve' is valid for the request path '/api/approval/approve'
2025-06-16 18:23:16.918 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-16 18:23:16.918 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:23:16.919 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-16 18:23:16.919 +09:00 [INF] Route matched with {action = "Approve", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Approve(ApprovalService.API.DTOs.ApproveRequestDto) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 18:23:16.919 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:23:16.919 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:23:16.919 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:23:16.919 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:23:16.920 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:23:16.920 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:23:16.920 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:23:16.920 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-16 18:23:16.921 +09:00 [DBG] Attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' using the name '' in request data ...
2025-06-16 18:23:16.921 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-16 18:23:16.921 +09:00 [DBG] Connection id "0HNDCHMMIIVNB", Request id "0HNDCHMMIIVNB:0000000B": started reading request body.
2025-06-16 18:23:16.921 +09:00 [DBG] Connection id "0HNDCHMMIIVNB", Request id "0HNDCHMMIIVNB:0000000B": done reading request body.
2025-06-16 18:23:16.922 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.API.DTOs.ApproveRequestDto'
2025-06-16 18:23:16.922 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-16 18:23:16.922 +09:00 [DBG] Done attempting to bind parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-16 18:23:16.922 +09:00 [DBG] Attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto' ...
2025-06-16 18:23:16.922 +09:00 [DBG] Done attempting to validate the bound parameter 'approveRequest' of type 'ApprovalService.API.DTOs.ApproveRequestDto'.
2025-06-16 18:23:16.924 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:23:16.925 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:23:16.925 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:23:16.925 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:23:16.926 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:16.926 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:23:16.926 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:16.926 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:16.926 +09:00 [DBG] Executing DbCommand [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-16 18:23:16.927 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__approvalGuid_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a1"."ApprovalId", "a1"."ApplicantDepartment", "a1"."ApplicantEmployeeNumber", "a1"."ApplicantName", "a1"."ApplicantPosition", "a1"."ApprovalType", "a1"."ApproverComment", "a1"."CurrentApproverEmployeeNumber", "a1"."CurrentStep", "a1"."MisKey", "a1"."RequestContent", "a1"."RequestTitle", "a1"."RequestedAt", "a1"."RespondedAt", "a1"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__approvalGuid_0
    LIMIT 1
) AS "a1"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a1"."ApprovalId" = "a0"."ApprovalId"
ORDER BY "a1"."ApprovalId"
2025-06-16 18:23:16.927 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.928 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.928 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.928 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.928 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:16.928 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 18:23:16.928 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:16.929 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:23:16.929 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-16 18:23:16.929 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-16 18:23:16.929 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentApproverEmployeeNumber' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-16 18:23:16.929 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.929 +09:00 [DBG] The unchanged property 'ApprovalRequest.CurrentStep' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-16 18:23:16.929 +09:00 [DBG] The unchanged property 'ApprovalRequest.RespondedAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-16 18:23:16.930 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionDate' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-16 18:23:16.930 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.930 +09:00 [DBG] The unchanged property 'ApprovalStep.ActionStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-16 18:23:16.930 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-16 18:23:16.930 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:23:16.930 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:16.931 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-16 18:23:16.931 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-16 18:23:16.931 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:23:16.931 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:16.931 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:16.931 +09:00 [DBG] Executing DbCommand [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1, "RespondedAt" = @p2
WHERE "ApprovalId" = @p3
RETURNING 1;
2025-06-16 18:23:16.931 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Size = 7), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalRequests" SET "CurrentApproverEmployeeNumber" = @p0, "CurrentStep" = @p1, "RespondedAt" = @p2
WHERE "ApprovalId" = @p3
RETURNING 1;
2025-06-16 18:23:16.932 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:16.932 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:23:16.932 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:23:16.932 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:16.932 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:16.932 +09:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-16 18:23:16.933 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ApprovalSteps" SET "ActionDate" = @p0, "ActionStatus" = @p1
WHERE "StepId" = @p2
RETURNING 1;
2025-06-16 18:23:16.933 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:16.933 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:23:16.933 +09:00 [DBG] Committing transaction.
2025-06-16 18:23:16.934 +09:00 [DBG] Committed transaction.
2025-06-16 18:23:16.934 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:16.934 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:23:16.934 +09:00 [DBG] Disposing transaction.
2025-06-16 18:23:16.934 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.934 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.934 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-16 18:23:16.934 +09:00 [INF] Approval 81d366d9-92d9-417a-87b1-0be12d6fcbed approved by EMP0001 with comment: 
2025-06-16 18:23:16.934 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:23:16.935 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:23:16.935 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:23:16.935 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:23:16.935 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:23:16.935 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-06-16 18:23:16.935 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API) in 15.4576ms
2025-06-16 18:23:16.935 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.Approve (ApprovalService.API)'
2025-06-16 18:23:16.935 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" completed keep alive response.
2025-06-16 18:23:16.935 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:23:16.936 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:23:16.936 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:23:16.936 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approval/approve - 200 null application/json; charset=utf-8 19.9147ms
2025-06-16 18:23:16.943 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-16 18:23:16.943 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-16 18:23:16.944 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-16 18:23:16.944 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:23:16.944 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:23:16.944 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:23:16.944 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 18:23:16.944 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:23:16.944 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:23:16.944 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:23:16.944 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:23:16.945 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:23:16.945 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:23:16.945 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:23:16.945 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 18:23:16.945 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 18:23:16.945 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:23:16.945 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:23:16.945 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 18:23:16.945 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 18:23:16.946 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:23:16.946 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:23:16.946 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:23:16.946 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:23:16.946 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:16.947 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:23:16.947 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:16.947 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:16.947 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:23:16.947 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:23:16.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.949 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.950 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.950 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.950 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.950 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.950 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.950 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:23:16.950 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:16.950 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 18:23:16.950 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:16.950 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:23:16.951 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:23:16.951 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:23:16.951 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:23:16.951 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:23:16.951 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:23:16.951 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:23:16.952 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 7.1744ms
2025-06-16 18:23:16.952 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:23:16.952 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" completed keep alive response.
2025-06-16 18:23:16.952 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:23:16.952 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:23:16.952 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:23:16.952 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 9.1096ms
2025-06-16 18:23:24.843 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-16 18:23:24.844 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-16 18:23:24.844 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-16 18:23:24.845 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:23:24.845 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:23:24.845 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:23:24.845 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:23:24.846 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:23:24.846 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:23:24.846 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:23:24.846 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:23:24.847 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:23:24.847 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:23:24.847 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:23:24.848 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 18:23:24.848 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 18:23:24.848 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:23:24.848 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:23:24.848 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 18:23:24.848 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 18:23:24.850 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:23:24.850 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:23:24.850 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:23:24.851 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:23:24.851 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:24.851 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:23:24.851 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:24.851 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:23:24.851 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:23:24.852 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:23:24.852 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:24.852 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:23:24.852 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:23:24.852 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:23:24.853 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:23:24.853 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:23:24.853 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:23:24.853 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:23:24.853 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:23:24.854 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:23:24.854 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.3747ms
2025-06-16 18:23:24.854 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:23:24.854 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" completed keep alive response.
2025-06-16 18:23:24.854 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:23:24.854 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:23:24.855 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:23:24.855 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 12.3126ms
2025-06-16 18:23:56.526 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" received FIN.
2025-06-16 18:23:56.533 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" disconnecting.
2025-06-16 18:23:56.534 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" stopped.
2025-06-16 18:23:56.535 +09:00 [DBG] Connection id "0HNDCHMMIIVNB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 18:24:39.045 +09:00 [DBG] Connection id "0HNDCHMMIIVNC" accepted.
2025-06-16 18:24:39.046 +09:00 [DBG] Connection id "0HNDCHMMIIVNC" started.
2025-06-16 18:24:39.075 +09:00 [DBG] Connection 0HNDCHMMIIVNC established using the following protocol: "Tls12"
2025-06-16 18:24:39.089 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-16 18:24:39.091 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-16 18:24:39.091 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-16 18:24:39.091 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-16 18:24:39.092 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:24:39.093 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-16 18:24:39.093 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:24:39.093 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:24:39.094 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:24:39.094 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:24:39.094 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:24:39.094 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:24:39.094 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:24:39.095 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:24:39.095 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-16 18:24:39.095 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-16 18:24:39.095 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-16 18:24:39.096 +09:00 [DBG] Connection id "0HNDCHMMIIVNC", Request id "0HNDCHMMIIVNC:00000001": started reading request body.
2025-06-16 18:24:39.096 +09:00 [DBG] Connection id "0HNDCHMMIIVNC", Request id "0HNDCHMMIIVNC:00000001": done reading request body.
2025-06-16 18:24:39.096 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-16 18:24:39.096 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-16 18:24:39.097 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-16 18:24:39.097 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-16 18:24:39.102 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-16 18:24:39.103 +09:00 [INF] Creating a new approval request.
2025-06-16 18:24:39.104 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"986a7f25-cf1b-4aeb-85c4-2b87f0d58075","RequestTitle":"cmd 폴더 이동 명령어","RequestContent":"CMD 폴더 이동 명령어 정리\r\n폴더(디렉토리) 이동 명령어는 cd (Change Directory)입니다.\r\n\r\n기본 사용법\r\n하위 폴더로 이동\r\n\r\ntext\r\ncd 폴더명\r\n또는\r\n\r\ntext\r\ncd ./폴더명","ApplicantEmployeeNumber":"EMP0001","ApplicantName":"User 1","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-16T09:24:39.0272630Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0002","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 2","Position":"Team Leader","Department":"HR","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EC20507","Sequence":2,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 7","Position":"Staff","Department":"Sales","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"},{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0005","Sequence":3,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 5","Position":"Auditor","Department":"Marketing","StepType":"Agreement","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-16 18:24:39.106 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:24:39.107 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.108 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.108 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.108 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.108 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.108 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.108 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.109 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-16 18:24:39.109 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-16 18:24:39.109 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-16 18:24:39.110 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:24:39.110 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:24:39.110 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:24:39.111 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:39.111 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-16 18:24:39.111 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-16 18:24:39.111 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:24:39.111 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:39.111 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:39.111 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 119), @p11='?' (Size = 13), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-16 18:24:39.111 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 119), @p11='?' (Size = 13), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-16 18:24:39.111 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:39.112 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:24:39.112 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:24:39.112 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:39.112 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:39.112 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 5), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 18:24:39.112 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 5), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 18:24:39.112 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:39.112 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:24:39.112 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:24:39.112 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:39.112 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:39.112 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 9), @p8='?' (DbType = Boolean), @p9='?' (Size = 7), @p10='?' (DbType = Int32), @p11='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 18:24:39.112 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 9), @p8='?' (DbType = Boolean), @p9='?' (Size = 7), @p10='?' (DbType = Int32), @p11='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 18:24:39.113 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:39.113 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:24:39.113 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:24:39.113 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:39.113 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:39.113 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 11), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 18:24:39.113 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 2), @p8='?' (DbType = Boolean), @p9='?' (Size = 11), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-16 18:24:39.114 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:39.114 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:24:39.114 +09:00 [DBG] Committing transaction.
2025-06-16 18:24:39.115 +09:00 [DBG] Committed transaction.
2025-06-16 18:24:39.115 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:39.115 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:24:39.115 +09:00 [DBG] Disposing transaction.
2025-06-16 18:24:39.115 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.115 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.115 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.115 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.115 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 4 entities written to the database.
2025-06-16 18:24:39.115 +09:00 [INF] Approval request created successfully with ID: "986a7f25-cf1b-4aeb-85c4-2b87f0d58075"
2025-06-16 18:24:39.116 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:24:39.116 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:24:39.116 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:24:39.116 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:24:39.116 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:24:39.116 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-16 18:24:39.116 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] for address (approvalId=[986a7f25-cf1b-4aeb-85c4-2b87f0d58075],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-16 18:24:39.117 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) resulting in /api/ApprovalRequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075 and 
2025-06-16 18:24:39.117 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] with result /api/ApprovalRequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075
2025-06-16 18:24:39.117 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API) in 23.2567ms
2025-06-16 18:24:39.117 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-16 18:24:39.117 +09:00 [DBG] Connection id "0HNDCHMMIIVNC" completed keep alive response.
2025-06-16 18:24:39.117 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:24:39.118 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:24:39.118 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:24:39.118 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 29.1501ms
2025-06-16 18:24:39.124 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-16 18:24:39.124 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-16 18:24:39.124 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-16 18:24:39.124 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:24:39.124 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:24:39.124 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:24:39.124 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:24:39.125 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:24:39.125 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:24:39.125 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:24:39.125 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:24:39.125 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:24:39.125 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:24:39.125 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:24:39.125 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 18:24:39.125 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 18:24:39.125 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:24:39.125 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:24:39.125 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 18:24:39.125 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 18:24:39.126 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:24:39.126 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:24:39.126 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:24:39.126 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:24:39.126 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:39.126 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:24:39.126 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:39.127 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:39.127 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:24:39.127 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:24:39.127 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.127 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.127 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:39.127 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:39.127 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:24:39.128 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:39.128 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:24:39.128 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:24:39.128 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:24:39.128 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:24:39.128 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:24:39.128 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:24:39.128 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:24:39.128 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 3.3574ms
2025-06-16 18:24:39.128 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:24:39.128 +09:00 [DBG] Connection id "0HNDCHMMIIVNC" completed keep alive response.
2025-06-16 18:24:39.128 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:24:39.128 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:24:39.129 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:24:39.129 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 4.6528ms
2025-06-16 18:24:40.978 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075 - null null
2025-06-16 18:24:40.978 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075'
2025-06-16 18:24:40.978 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075'
2025-06-16 18:24:40.979 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 18:24:40.980 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:24:40.980 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 18:24:40.981 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:24:40.981 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:24:40.981 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:24:40.981 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:24:40.982 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:24:40.982 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:24:40.983 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:24:40.983 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:24:40.983 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 18:24:40.983 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-16 18:24:40.983 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 18:24:40.984 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 18:24:40.984 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 18:24:40.984 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-16 18:24:40.985 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:24:40.985 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:24:40.986 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:24:40.986 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:24:40.986 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:40.986 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:24:40.986 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:40.987 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:40.987 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 18:24:40.987 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 18:24:40.988 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:40.988 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:40.988 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:40.989 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:40.989 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:40.989 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 18:24:40.989 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:40.990 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:24:40.990 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:24:40.990 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:24:40.990 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:24:40.991 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:24:40.991 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:24:40.991 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-16 18:24:40.992 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 9.2982ms
2025-06-16 18:24:40.992 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 18:24:40.993 +09:00 [DBG] Connection id "0HNDCHMMIIVNC" completed keep alive response.
2025-06-16 18:24:40.993 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:24:40.993 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:24:40.993 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:24:40.993 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075 - 200 null application/json; charset=utf-8 15.4354ms
2025-06-16 18:24:48.226 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 18:24:48.229 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 18:24:48.229 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 18:24:48.229 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:24:48.230 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:24:48.230 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:24:48.231 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:24:48.231 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:24:48.231 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:24:48.232 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:24:48.234 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:24:48.234 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:24:48.234 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:24:48.235 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:24:48.235 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 18:24:48.235 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 18:24:48.235 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:24:48.235 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:24:48.235 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 18:24:48.236 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 18:24:48.237 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:24:48.239 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:24:48.239 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:24:48.239 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:24:48.239 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:48.241 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:24:48.241 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:48.241 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:48.242 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:24:48.242 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:24:48.243 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.243 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.244 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.244 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.244 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.245 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.245 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.245 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.245 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.245 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.245 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.246 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.246 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.246 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:48.246 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:48.246 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-16 18:24:48.247 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:48.247 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:24:48.247 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:24:48.247 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:24:48.247 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:24:48.247 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:24:48.247 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:24:48.247 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:24:48.248 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 14.291ms
2025-06-16 18:24:48.248 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:24:48.248 +09:00 [DBG] Connection id "0HNDCHMMIIVNC" completed keep alive response.
2025-06-16 18:24:48.248 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:24:48.249 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:24:48.249 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:24:48.249 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 22.7741ms
2025-06-16 18:24:53.156 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-16 18:24:53.156 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 18:24:53.156 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-16 18:24:53.156 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:24:53.159 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:24:53.159 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:24:53.159 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 18:24:53.159 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:24:53.159 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:24:53.160 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:24:53.160 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:24:53.160 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:24:53.160 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:24:53.160 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:24:53.160 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 18:24:53.161 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 18:24:53.161 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:24:53.161 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:24:53.162 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 18:24:53.162 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 18:24:53.162 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:24:53.163 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:24:53.164 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:24:53.164 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:24:53.164 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:53.164 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:24:53.165 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:53.165 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:24:53.165 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:24:53.166 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:24:53.166 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:53.166 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:24:53.166 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:53.167 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:24:53.167 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:24:53.168 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:24:53.168 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:24:53.168 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:24:53.168 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:24:53.168 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:24:53.168 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:24:53.168 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:24:53.169 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.847ms
2025-06-16 18:24:53.169 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:24:53.169 +09:00 [DBG] Connection id "0HNDCHMMIIVNC" completed keep alive response.
2025-06-16 18:24:53.170 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:24:53.170 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:24:53.170 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:24:53.170 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 14.5806ms
2025-06-16 18:25:54.046 +09:00 [DBG] Connection id "0HNDCHMMIIVNC" received FIN.
2025-06-16 18:25:54.047 +09:00 [DBG] Connection id "0HNDCHMMIIVNC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 18:25:54.048 +09:00 [DBG] Connection id "0HNDCHMMIIVNC" disconnecting.
2025-06-16 18:25:54.048 +09:00 [DBG] Connection id "0HNDCHMMIIVNC" stopped.
2025-06-16 18:29:27.250 +09:00 [DBG] Connection id "0HNDCHMMIIVND" accepted.
2025-06-16 18:29:27.251 +09:00 [DBG] Connection id "0HNDCHMMIIVND" started.
2025-06-16 18:29:27.282 +09:00 [DBG] Connection 0HNDCHMMIIVND established using the following protocol: "Tls12"
2025-06-16 18:29:27.286 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0002 - null null
2025-06-16 18:29:27.287 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0002'
2025-06-16 18:29:27.287 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0002'
2025-06-16 18:29:27.287 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:29:27.288 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:29:27.288 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:29:27.288 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:29:27.289 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:29:27.289 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:29:27.289 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:29:27.289 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:29:27.289 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:29:27.289 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:29:27.290 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:29:27.290 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 18:29:27.290 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 18:29:27.290 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:29:27.290 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 18:29:27.290 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 18:29:27.290 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 18:29:27.291 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:29:27.295 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:29:27.295 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:29:27.295 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:29:27.296 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:29:27.297 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:29:27.297 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:29:27.297 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:29:27.297 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:29:27.298 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 18:29:27.299 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:29:27.299 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-16 18:29:27.299 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:29:27.299 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:29:27.299 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:29:27.299 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:29:27.299 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:29:27.299 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:29:27.299 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:29:27.299 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:29:27.300 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 10.7054ms
2025-06-16 18:29:27.300 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 18:29:27.300 +09:00 [DBG] Connection id "0HNDCHMMIIVND" completed keep alive response.
2025-06-16 18:29:27.300 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:29:27.300 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:29:27.301 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:29:27.301 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0002 - 200 null application/json; charset=utf-8 14.7799ms
2025-06-16 18:29:28.631 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0002 - null null
2025-06-16 18:29:28.631 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0002'
2025-06-16 18:29:28.631 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0002'
2025-06-16 18:29:28.631 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:29:28.631 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:29:28.631 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:29:28.632 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-16 18:29:28.632 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:29:28.632 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:29:28.632 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:29:28.633 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:29:28.634 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:29:28.634 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:29:28.635 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-16 18:29:28.635 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-16 18:29:28.635 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-16 18:29:28.635 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:29:28.635 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-16 18:29:28.636 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-16 18:29:28.636 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-16 18:29:28.637 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:29:28.637 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:29:28.637 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:29:28.638 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:29:28.638 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:29:28.638 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:29:28.638 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:29:28.638 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:29:28.638 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:29:28.639 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-16 18:29:28.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:29:28.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:29:28.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:29:28.640 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:29:28.640 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 18:29:28.641 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:29:28.641 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:29:28.641 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:29:28.641 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:29:28.641 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:29:28.641 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:29:28.641 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:29:28.641 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 18:29:28.642 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 7.7099ms
2025-06-16 18:29:28.642 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-16 18:29:28.642 +09:00 [DBG] Connection id "0HNDCHMMIIVND" completed keep alive response.
2025-06-16 18:29:28.642 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:29:28.642 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:29:28.643 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:29:28.643 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0002 - 200 null application/json; charset=utf-8 12.0374ms
2025-06-16 18:29:34.657 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075 - null null
2025-06-16 18:29:34.658 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075'
2025-06-16 18:29:34.658 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075'
2025-06-16 18:29:34.658 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 18:29:34.658 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 18:29:34.658 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 18:29:34.658 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 18:29:34.659 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 18:29:34.659 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 18:29:34.659 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 18:29:34.659 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 18:29:34.659 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 18:29:34.659 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:29:34.660 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 18:29:34.660 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 18:29:34.660 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-16 18:29:34.661 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 18:29:34.661 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-16 18:29:34.661 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-16 18:29:34.661 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-16 18:29:34.663 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 18:29:34.665 +09:00 [DBG] Creating DbConnection.
2025-06-16 18:29:34.665 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 18:29:34.665 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:29:34.665 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:29:34.665 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 18:29:34.665 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:29:34.665 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 18:29:34.666 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 18:29:34.666 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-16 18:29:34.667 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:29:34.667 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:29:34.667 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:29:34.667 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 18:29:34.668 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:29:34.668 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-16 18:29:34.668 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 18:29:34.668 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:29:34.669 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 18:29:34.669 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 18:29:34.669 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 18:29:34.669 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 18:29:34.669 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 18:29:34.669 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-16 18:29:34.669 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 10.3131ms
2025-06-16 18:29:34.670 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-16 18:29:34.670 +09:00 [DBG] Connection id "0HNDCHMMIIVND" completed keep alive response.
2025-06-16 18:29:34.670 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 18:29:34.670 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 18:29:34.670 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 18:29:34.670 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075 - 200 null application/json; charset=utf-8 13.6639ms
2025-06-16 18:30:42.252 +09:00 [DBG] Connection id "0HNDCHMMIIVND" received FIN.
2025-06-16 18:30:42.255 +09:00 [DBG] Connection id "0HNDCHMMIIVND" disconnecting.
2025-06-16 18:30:42.256 +09:00 [DBG] Connection id "0HNDCHMMIIVND" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 18:30:42.259 +09:00 [DBG] Connection id "0HNDCHMMIIVND" stopped.
2025-06-16 20:48:10.238 +09:00 [INF] Starting Approval Service API
2025-06-16 20:48:10.447 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-16 20:48:10.565 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-16 20:48:10.934 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 20:48:10.943 +09:00 [DBG] Creating DbConnection.
2025-06-16 20:48:10.951 +09:00 [DBG] Created DbConnection. (8ms).
2025-06-16 20:48:10.955 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 20:48:10.966 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 20:48:10.969 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 20:48:10.971 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 20:48:10.974 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 20:48:10.975 +09:00 [DBG] Creating DbConnection.
2025-06-16 20:48:10.975 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 20:48:10.978 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-16 20:48:10.978 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-16 20:48:10.978 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 20:48:10.979 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 20:48:10.982 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 20:48:10.998 +09:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 20:48:11.000 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 20:48:11.001 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-16 20:48:11.004 +09:00 [DBG] Creating DbConnection.
2025-06-16 20:48:11.004 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 20:48:11.004 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 20:48:11.005 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 20:48:11.005 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 20:48:11.005 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 20:48:11.006 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-16 20:48:11.006 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 20:48:11.006 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-16 20:48:11.006 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 20:48:11.007 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 20:48:11.007 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 20:48:11.007 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-16 20:48:11.007 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 20:48:11.007 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 20:48:11.035 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-16 20:48:11.150 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-16 20:48:11.165 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 20:48:11.166 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 20:48:11.166 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 20:48:11.166 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 20:48:11.166 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-16 20:48:11.166 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 20:48:11.167 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-16 20:48:11.170 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 20:48:11.171 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-16 20:48:11.172 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 20:48:11.172 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 20:48:11.172 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 20:48:11.173 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 20:48:11.173 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 20:48:11.175 +09:00 [DBG] Hosting starting
2025-06-16 20:48:11.214 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-16 20:48:11.215 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-16 20:48:11.539 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-16 20:48:11.539 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-16 20:48:11.540 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-16 20:48:11.540 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 20:48:11.541 +09:00 [INF] Hosting environment: Development
2025-06-16 20:48:11.541 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-16 20:48:11.541 +09:00 [DBG] Hosting started
2025-06-16 20:50:01.535 +09:00 [DBG] Connection id "0HNDCPFMK442J" accepted.
2025-06-16 20:50:01.536 +09:00 [DBG] Connection id "0HNDCPFMK442J" started.
2025-06-16 20:50:01.576 +09:00 [DBG] Connection 0HNDCPFMK442J established using the following protocol: "Tls12"
2025-06-16 20:50:01.612 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-16 20:50:01.625 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 20:50:01.627 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-16 20:50:01.628 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 20:50:01.643 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-16 20:50:01.643 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 20:50:01.657 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-16 20:50:01.657 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-16 20:50:01.657 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-16 20:50:01.658 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-16 20:50:01.658 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-16 20:50:01.658 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-16 20:50:01.658 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 20:50:01.660 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-16 20:50:01.665 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-16 20:50:01.666 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-16 20:50:01.666 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 20:50:01.666 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-16 20:50:01.666 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-16 20:50:01.669 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-16 20:50:01.702 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-16 20:50:01.712 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantName = r.ApplicantName, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantPosition = r.ApplicantPosition, 
        Steps = r.Steps, 
        Attachments = r.Attachments, 
        Status = r.Status, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-16 20:50:01.773 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-16 20:50:01.785 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            List<ApprovalStep> namelessParameter{0};
            List<ApprovalAttachment> namelessParameter{1};
            string value11;
            int? value12;
            string value13;
            string value14;
            string value15;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            namelessParameter{1} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalAttachment, List<ApprovalAttachment>>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
                }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()]);
            value11 = dataReader.GetString(28);
            value12 = (int?)dataReader.GetInt32(29);
            value13 = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
            value14 = dataReader.IsDBNull(31) ? default(string) : dataReader.GetString(31);
            value15 = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                namelessParameter{0}, 
                namelessParameter{1}, 
                value11, 
                (object)value12, 
                value13, 
                value14, 
                value15 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(8) ? default(object) : (object)dataReader.GetGuid(8) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(8) ? default(Guid) : dataReader.GetGuid(8);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(11) ? default(Guid) : dataReader.GetGuid(11);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(16) ? default(bool) : dataReader.GetBoolean(16);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(18) ? default(int) : dataReader.GetInt32(18);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalAttachment>, ApprovalAttachment, ApprovalAttachment>(
            collectionId: 1, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
            { 
                (object)(Guid?)dataReader.GetGuid(0), 
                (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
            }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(20) ? default(Guid?) : (Guid?)dataReader.GetGuid(20) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
            { 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
            }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalAttachment entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalAttachment instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalAttachment);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(20) ? default(object) : (object)dataReader.GetGuid(20) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalAttachment)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                {
                                    return 
                                    {
                                        ApprovalAttachment instance;
                                        instance = new ApprovalAttachment();
                                        instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(20) ? default(Guid) : dataReader.GetGuid(20);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(21) ? default(Guid) : dataReader.GetGuid(21);
                                        instance.<FileName>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<FilePath>k__BackingField = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
                                        instance.<FileSize>k__BackingField = dataReader.IsDBNull(24) ? default(long?) : (long?)dataReader.GetInt64(24);
                                        instance.<FileType>k__BackingField = dataReader.IsDBNull(25) ? default(string) : dataReader.GetString(25);
                                        instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(26) ? default(DateTime) : dataReader.GetDateTime(26);
                                        instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalAttachment)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            ApplicantDepartment = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[8]), 
            Attachments = (List<ApprovalAttachment>)(resultContext.Values[9]), 
            Status = (string)(resultContext.Values[10]), 
            CurrentStep = (int)(int?)(resultContext.Values[11]), 
            CurrentApproverName = (string)(resultContext.Values[12]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[13]), 
            CurrentActionStatus = (string)(resultContext.Values[14]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-16 20:50:01.897 +09:00 [DBG] Creating DbConnection.
2025-06-16 20:50:01.897 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-16 20:50:01.897 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 20:50:01.897 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 20:50:01.897 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-16 20:50:01.897 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-16 20:50:01.899 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-16 20:50:01.901 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 20:50:01.905 +09:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-16 20:50:01.943 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.960 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.960 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.962 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.962 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.963 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.971 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.971 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.971 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-16 20:50:01.971 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 20:50:01.971 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 66ms reading results.
2025-06-16 20:50:01.971 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-16 20:50:01.971 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 20:50:01.973 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-16 20:50:01.973 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-16 20:50:01.973 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-16 20:50:01.973 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-16 20:50:01.974 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-16 20:50:01.974 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-16 20:50:02.031 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 371.8147ms
2025-06-16 20:50:02.035 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-16 20:50:02.036 +09:00 [DBG] Connection id "0HNDCPFMK442J" completed keep alive response.
2025-06-16 20:50:02.038 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-16 20:50:02.039 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-16 20:50:02.039 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-16 20:50:02.040 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 428.8594ms
2025-06-16 20:50:02.068 +09:00 [DBG] Connection id "0HNDCPFMK442J" received FIN.
2025-06-16 20:50:02.069 +09:00 [DBG] Connection id "0HNDCPFMK442J" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-16 20:50:02.069 +09:00 [DBG] Connection id "0HNDCPFMK442J" disconnecting.
2025-06-16 20:50:02.072 +09:00 [DBG] Connection id "0HNDCPFMK442J" stopped.
