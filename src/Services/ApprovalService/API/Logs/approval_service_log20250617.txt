2025-06-17 07:11:38.265 +09:00 [INF] Starting Approval Service API
2025-06-17 07:11:38.416 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-17 07:11:38.522 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-17 07:11:39.311 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:11:39.316 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:11:39.323 +09:00 [DBG] Created DbConnection. (6ms).
2025-06-17 07:11:39.327 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:11:39.343 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:39.347 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:11:39.350 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:11:39.353 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-17 07:11:39.353 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:11:39.354 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:11:39.369 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2025-06-17 07:11:39.371 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (18ms).
2025-06-17 07:11:39.371 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:11:39.374 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:39.378 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-17 07:11:39.416 +09:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-17 07:11:39.418 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:39.420 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (2ms).
2025-06-17 07:11:39.426 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:11:39.426 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:11:39.426 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:11:39.427 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:39.427 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:11:39.427 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:11:39.428 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-17 07:11:39.428 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-17 07:11:39.428 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-17 07:11:39.428 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:11:39.428 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:39.428 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-17 07:11:39.429 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-17 07:11:39.429 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:39.429 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:11:39.472 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-17 07:11:39.667 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-17 07:11:39.684 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:11:39.685 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:39.685 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:11:39.685 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:11:39.685 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:11:39.686 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-17 07:11:39.688 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-17 07:11:39.694 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:39.694 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 5ms reading results.
2025-06-17 07:11:39.695 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:39.695 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:11:39.696 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:11:39.696 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:11:39.697 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:11:39.698 +09:00 [DBG] Hosting starting
2025-06-17 07:11:39.751 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-17 07:11:39.753 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-17 07:11:40.299 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-17 07:11:40.299 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-17 07:11:40.299 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-17 07:11:40.300 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-17 07:11:40.301 +09:00 [INF] Hosting environment: Development
2025-06-17 07:11:40.301 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-17 07:11:40.301 +09:00 [DBG] Hosting started
2025-06-17 07:11:41.555 +09:00 [DBG] Connection id "0HNDD4B2SQSD5" accepted.
2025-06-17 07:11:41.555 +09:00 [DBG] Connection id "0HNDD4B2SQSD5" started.
2025-06-17 07:11:41.623 +09:00 [DBG] Connection 0HNDD4B2SQSD5 established using the following protocol: "Tls12"
2025-06-17 07:11:41.687 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075 - null null
2025-06-17 07:11:41.733 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075'
2025-06-17 07:11:41.737 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075'
2025-06-17 07:11:41.744 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 07:11:41.764 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:11:41.765 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 07:11:41.801 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 07:11:41.803 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:11:41.803 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:11:41.803 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:11:41.803 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:11:41.804 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:11:41.805 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:11:41.806 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:11:41.810 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 07:11:41.811 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-17 07:11:41.811 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 07:11:41.811 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 07:11:41.812 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 07:11:41.814 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-17 07:11:41.827 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:11:41.840 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-17 07:11:41.856 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-17 07:11:41.858 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-17 07:11:42.178 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-17 07:11:42.245 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(27) ? default(Guid?) : (Guid?)dataReader.GetGuid(27) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(27) ? default(object) : (object)dataReader.GetGuid(27) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(27) ? default(Guid) : dataReader.GetGuid(27);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(28) ? default(Guid) : dataReader.GetGuid(28);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(29) ? default(string) : dataReader.GetString(29);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(31) ? default(long?) : (long?)dataReader.GetInt64(31);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(33) ? default(DateTime) : dataReader.GetDateTime(33);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(34) ? default(string) : dataReader.GetString(34);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-17 07:11:42.273 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:11:42.274 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:11:42.274 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:11:42.274 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:42.275 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:11:42.275 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:11:42.277 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-06-17 07:11:42.278 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 07:11:42.282 +09:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 07:11:42.310 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:11:42.346 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:11:42.383 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:11:42.383 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:11:42.383 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:42.383 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 100ms reading results.
2025-06-17 07:11:42.384 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:42.384 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:11:42.386 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:11:42.386 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:11:42.386 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:11:42.386 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:11:42.387 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:11:42.387 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-17 07:11:42.472 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 656.8082ms
2025-06-17 07:11:42.482 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 07:11:42.486 +09:00 [DBG] Connection id "0HNDD4B2SQSD5" completed keep alive response.
2025-06-17 07:11:42.488 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:11:42.494 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:11:42.495 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:11:42.495 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/986a7f25-cf1b-4aeb-85c4-2b87f0d58075 - 200 null application/json; charset=utf-8 809.9504ms
2025-06-17 07:11:47.737 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0002 - null null
2025-06-17 07:11:47.740 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0002'
2025-06-17 07:11:47.740 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0002'
2025-06-17 07:11:47.741 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:11:47.742 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:11:47.743 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:11:47.746 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 07:11:47.747 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:11:47.747 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:11:47.747 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:11:47.747 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:11:47.747 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:11:47.747 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:11:47.750 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:11:47.751 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 07:11:47.751 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 07:11:47.751 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:11:47.751 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:11:47.751 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 07:11:47.759 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 07:11:47.795 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:11:47.799 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantName = r.ApplicantName, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantPosition = r.ApplicantPosition, 
        Steps = r.Steps, 
        Attachments = r.Attachments, 
        Status = r.Status, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-17 07:11:47.814 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-17 07:11:47.821 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            List<ApprovalStep> namelessParameter{0};
            List<ApprovalAttachment> namelessParameter{1};
            string value11;
            int? value12;
            string value13;
            string value14;
            string value15;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            namelessParameter{1} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalAttachment, List<ApprovalAttachment>>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
                }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()]);
            value11 = dataReader.GetString(28);
            value12 = (int?)dataReader.GetInt32(29);
            value13 = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
            value14 = dataReader.IsDBNull(31) ? default(string) : dataReader.GetString(31);
            value15 = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                namelessParameter{0}, 
                namelessParameter{1}, 
                value11, 
                (object)value12, 
                value13, 
                value14, 
                value15 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(8) ? default(object) : (object)dataReader.GetGuid(8) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(8) ? default(Guid) : dataReader.GetGuid(8);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(11) ? default(Guid) : dataReader.GetGuid(11);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(16) ? default(bool) : dataReader.GetBoolean(16);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(18) ? default(int) : dataReader.GetInt32(18);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalAttachment>, ApprovalAttachment, ApprovalAttachment>(
            collectionId: 1, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
            { 
                (object)(Guid?)dataReader.GetGuid(0), 
                (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
            }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(20) ? default(Guid?) : (Guid?)dataReader.GetGuid(20) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
            { 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
            }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalAttachment entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalAttachment instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalAttachment);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(20) ? default(object) : (object)dataReader.GetGuid(20) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalAttachment)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                {
                                    return 
                                    {
                                        ApprovalAttachment instance;
                                        instance = new ApprovalAttachment();
                                        instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(20) ? default(Guid) : dataReader.GetGuid(20);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(21) ? default(Guid) : dataReader.GetGuid(21);
                                        instance.<FileName>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<FilePath>k__BackingField = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
                                        instance.<FileSize>k__BackingField = dataReader.IsDBNull(24) ? default(long?) : (long?)dataReader.GetInt64(24);
                                        instance.<FileType>k__BackingField = dataReader.IsDBNull(25) ? default(string) : dataReader.GetString(25);
                                        instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(26) ? default(DateTime) : dataReader.GetDateTime(26);
                                        instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalAttachment)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            ApplicantDepartment = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[8]), 
            Attachments = (List<ApprovalAttachment>)(resultContext.Values[9]), 
            Status = (string)(resultContext.Values[10]), 
            CurrentStep = (int)(int?)(resultContext.Values[11]), 
            CurrentApproverName = (string)(resultContext.Values[12]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[13]), 
            CurrentActionStatus = (string)(resultContext.Values[14]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-17 07:11:47.829 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:11:47.829 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:11:47.829 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:11:47.829 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:47.829 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:11:47.829 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:11:47.829 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:11:47.829 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:11:47.830 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:11:47.831 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:47.831 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-17 07:11:47.831 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:11:47.831 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:11:47.831 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:11:47.831 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:11:47.831 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:11:47.831 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:11:47.832 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:11:47.832 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 07:11:47.834 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 86.5558ms
2025-06-17 07:11:47.834 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:11:47.834 +09:00 [DBG] Connection id "0HNDD4B2SQSD5" completed keep alive response.
2025-06-17 07:11:47.834 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:11:47.834 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:11:47.834 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:11:47.835 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0002 - 200 null application/json; charset=utf-8 98.0602ms
2025-06-17 07:12:32.318 +09:00 [DBG] Connection id "0HNDD4B2SQSD5" received FIN.
2025-06-17 07:12:32.321 +09:00 [DBG] Connection id "0HNDD4B2SQSD5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 07:12:32.324 +09:00 [DBG] Connection id "0HNDD4B2SQSD5" disconnecting.
2025-06-17 07:12:32.326 +09:00 [DBG] Connection id "0HNDD4B2SQSD5" stopped.
2025-06-17 07:16:07.587 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" accepted.
2025-06-17 07:16:07.589 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" started.
2025-06-17 07:16:07.615 +09:00 [DBG] Connection 0HNDD4B2SQSD6 established using the following protocol: "Tls12"
2025-06-17 07:16:07.621 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0002 - null null
2025-06-17 07:16:07.622 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0002'
2025-06-17 07:16:07.622 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0002'
2025-06-17 07:16:07.622 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:16:07.624 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:16:07.624 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:16:07.625 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 07:16:07.625 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:16:07.625 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:16:07.625 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:16:07.625 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:16:07.625 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:16:07.625 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:16:07.627 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:16:07.627 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 07:16:07.628 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 07:16:07.628 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:16:07.628 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:16:07.628 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 07:16:07.628 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 07:16:07.633 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:16:07.642 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:16:07.642 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:16:07.642 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:07.642 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:07.642 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:16:07.643 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:07.643 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:07.643 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:16:07.643 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:16:07.643 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:07.644 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-17 07:16:07.644 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:07.644 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:16:07.644 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:16:07.644 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:16:07.644 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:16:07.644 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:16:07.644 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:16:07.644 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 07:16:07.645 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 19.5758ms
2025-06-17 07:16:07.645 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:16:07.645 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" completed keep alive response.
2025-06-17 07:16:07.645 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:16:07.645 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:07.645 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:16:07.645 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0002 - 200 null application/json; charset=utf-8 24.3008ms
2025-06-17 07:16:14.737 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0002 - null null
2025-06-17 07:16:14.739 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0002'
2025-06-17 07:16:14.739 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0002'
2025-06-17 07:16:14.739 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:16:14.740 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:16:14.740 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:16:14.740 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 07:16:14.740 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:16:14.741 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:16:14.741 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:16:14.741 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:16:14.741 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:16:14.741 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:16:14.742 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:16:14.742 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 07:16:14.742 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 07:16:14.742 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:16:14.742 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:16:14.746 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 07:16:14.747 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 07:16:14.747 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:16:14.747 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:16:14.748 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:16:14.748 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:14.748 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:14.748 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:16:14.748 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:14.748 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:14.748 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:16:14.748 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:16:14.748 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:14.749 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-17 07:16:14.749 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:14.749 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:16:14.749 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:16:14.749 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:16:14.749 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:16:14.749 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:16:14.749 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:16:14.749 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 07:16:14.749 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.2385ms
2025-06-17 07:16:14.749 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:16:14.749 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" completed keep alive response.
2025-06-17 07:16:14.750 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:16:14.750 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:14.750 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:16:14.750 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0002 - 200 null application/json; charset=utf-8 12.8722ms
2025-06-17 07:16:20.286 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0002 - null null
2025-06-17 07:16:20.286 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0002'
2025-06-17 07:16:20.287 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0002'
2025-06-17 07:16:20.287 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 07:16:20.287 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:16:20.287 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 07:16:20.293 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-17 07:16:20.294 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:16:20.294 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:16:20.294 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:16:20.295 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:16:20.295 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:16:20.295 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 07:16:20.296 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 07:16:20.296 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-17 07:16:20.297 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-17 07:16:20.297 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 07:16:20.297 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 07:16:20.297 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-17 07:16:20.297 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-17 07:16:20.301 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:16:20.302 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        ApplicantPosition = r.ApplicantPosition, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-17 07:16:20.314 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            string value9;
            List<ApprovalStep> namelessParameter{0};
            int? value11;
            string value12;
            string value13;
            string value14;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            value9 = dataReader.GetString(8);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value11 = (int?)dataReader.GetInt32(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            value13 = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
            value14 = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                value9, 
                namelessParameter{0}, 
                (object)value11, 
                value12, 
                value13, 
                value14 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid) : dataReader.GetGuid(12);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(17) ? default(bool) : dataReader.GetBoolean(17);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(19) ? default(int) : dataReader.GetInt32(19);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantDepartment = (string)(resultContext.Values[5]), 
            ApplicantName = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Status = (string)(resultContext.Values[8]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[9]), 
            CurrentStep = (int)(int?)(resultContext.Values[10]), 
            CurrentApproverName = (string)(resultContext.Values[11]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[12]), 
            CurrentActionStatus = (string)(resultContext.Values[13]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-17 07:16:20.317 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:16:20.317 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:16:20.317 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:20.318 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:20.318 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:16:20.318 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:20.318 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:20.318 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 07:16:20.318 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 07:16:20.321 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:16:20.322 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:16:20.322 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:16:20.322 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:20.322 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-17 07:16:20.323 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:20.323 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:16:20.323 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:16:20.323 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:16:20.323 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:16:20.323 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:16:20.323 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:16:20.323 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 07:16:20.324 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 29.197ms
2025-06-17 07:16:20.325 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 07:16:20.325 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" completed keep alive response.
2025-06-17 07:16:20.325 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:16:20.325 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:20.325 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:16:20.325 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0002 - 200 null application/json; charset=utf-8 39.5377ms
2025-06-17 07:16:22.508 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0002 - null null
2025-06-17 07:16:22.509 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0002'
2025-06-17 07:16:22.530 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0002'
2025-06-17 07:16:22.539 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:16:22.540 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:16:22.540 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:16:22.543 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 07:16:22.543 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:16:22.544 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:16:22.544 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:16:22.544 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:16:22.544 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:16:22.544 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:16:22.547 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:16:22.547 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 07:16:22.548 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 07:16:22.549 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:16:22.549 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:16:22.549 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 07:16:22.549 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 07:16:22.556 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:16:22.581 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:16:22.581 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:16:22.582 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:22.586 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:22.586 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:16:22.596 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (10ms).
2025-06-17 07:16:22.612 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (25ms).
2025-06-17 07:16:22.625 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:16:22.630 +09:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:16:22.633 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:22.635 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-17 07:16:22.639 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:22.640 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (3ms).
2025-06-17 07:16:22.648 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:16:22.649 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:16:22.649 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:16:22.655 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:16:22.655 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:16:22.655 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 07:16:22.655 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 110.9053ms
2025-06-17 07:16:22.656 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:16:22.656 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" completed keep alive response.
2025-06-17 07:16:22.656 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:16:22.656 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:22.656 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:16:22.656 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0002 - 200 null application/json; charset=utf-8 147.8162ms
2025-06-17 07:16:32.946 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-17 07:16:32.947 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-17 07:16:32.947 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-17 07:16:32.947 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-17 07:16:32.948 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:16:32.949 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-17 07:16:32.953 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 07:16:32.953 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:16:32.953 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:16:32.953 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:16:32.953 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:16:32.953 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:16:32.953 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:16:32.954 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:16:32.955 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-17 07:16:32.955 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-17 07:16:32.956 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-17 07:16:32.964 +09:00 [DBG] Connection id "0HNDD4B2SQSD6", Request id "0HNDD4B2SQSD6:00000005": started reading request body.
2025-06-17 07:16:32.966 +09:00 [DBG] Connection id "0HNDD4B2SQSD6", Request id "0HNDD4B2SQSD6:00000005": done reading request body.
2025-06-17 07:16:32.978 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-17 07:16:32.978 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-17 07:16:32.978 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-17 07:16:32.978 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-17 07:16:32.982 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-17 07:16:32.983 +09:00 [INF] Creating a new approval request.
2025-06-17 07:16:32.984 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"69506548-fbeb-48eb-bbcf-3febe2fdea6e","RequestTitle":"TEST","RequestContent":"aaa","ApplicantEmployeeNumber":"EMP0002","ApplicantName":"User 2","ApplicantPosition":null,"ApplicantDepartment":"HR","Status":"Pending","RequestedAt":"2025-06-16T22:16:32.8781940Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EMP0001","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 1","Position":"System Administrator","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-17 07:16:32.987 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:16:32.997 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:16:32.999 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:16:33.001 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:16:33.002 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-17 07:16:33.003 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-17 07:16:33.012 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-17 07:16:33.042 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:16:33.043 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:16:33.043 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:33.043 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:33.044 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-17 07:16:33.045 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-17 07:16:33.046 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:16:33.046 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:33.046 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:33.047 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 2), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 3), @p11='?' (Size = 4), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-17 07:16:33.047 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 2), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 3), @p11='?' (Size = 4), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-17 07:16:33.049 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:33.049 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-17 07:16:33.050 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:16:33.050 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:33.050 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:33.050 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-17 07:16:33.051 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-17 07:16:33.051 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:33.051 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-17 07:16:33.052 +09:00 [DBG] Committing transaction.
2025-06-17 07:16:33.053 +09:00 [DBG] Committed transaction.
2025-06-17 07:16:33.055 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:33.055 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:16:33.056 +09:00 [DBG] Disposing transaction.
2025-06-17 07:16:33.059 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:16:33.059 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:16:33.059 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-17 07:16:33.060 +09:00 [INF] Approval request created successfully with ID: "69506548-fbeb-48eb-bbcf-3febe2fdea6e"
2025-06-17 07:16:33.060 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:16:33.060 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:16:33.060 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:16:33.060 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:16:33.061 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:16:33.061 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-17 07:16:33.073 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] for address (approvalId=[69506548-fbeb-48eb-bbcf-3febe2fdea6e],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-17 07:16:33.075 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) resulting in /api/ApprovalRequest/69506548-fbeb-48eb-bbcf-3febe2fdea6e and 
2025-06-17 07:16:33.076 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)"] with result /api/ApprovalRequest/69506548-fbeb-48eb-bbcf-3febe2fdea6e
2025-06-17 07:16:33.076 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API) in 123.0567ms
2025-06-17 07:16:33.076 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (ApprovalService.API)'
2025-06-17 07:16:33.076 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" completed keep alive response.
2025-06-17 07:16:33.077 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:16:33.077 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:33.077 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:16:33.077 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 131.1282ms
2025-06-17 07:16:33.084 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0002 - null null
2025-06-17 07:16:33.084 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0002'
2025-06-17 07:16:33.084 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0002'
2025-06-17 07:16:33.084 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:16:33.084 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:16:33.084 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:16:33.084 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 07:16:33.085 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:16:33.085 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:16:33.085 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:16:33.085 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:16:33.085 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:16:33.085 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:16:33.085 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:16:33.085 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 07:16:33.085 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 07:16:33.085 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:16:33.085 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:16:33.085 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 07:16:33.085 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 07:16:33.086 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:16:33.086 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:16:33.086 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:16:33.086 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:33.086 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:33.086 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:16:33.086 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:33.086 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:33.086 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:16:33.086 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:16:33.088 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:16:33.089 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:33.089 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-17 07:16:33.089 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:33.089 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:16:33.090 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:16:33.090 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:16:33.090 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:16:33.090 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:16:33.091 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:16:33.091 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 07:16:33.092 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 6.7942ms
2025-06-17 07:16:33.092 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:16:33.092 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" completed keep alive response.
2025-06-17 07:16:33.092 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:16:33.092 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:33.092 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:16:33.092 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0002 - 200 null application/json; charset=utf-8 8.1407ms
2025-06-17 07:16:35.323 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/69506548-fbeb-48eb-bbcf-3febe2fdea6e - null null
2025-06-17 07:16:35.323 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/69506548-fbeb-48eb-bbcf-3febe2fdea6e'
2025-06-17 07:16:35.324 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/69506548-fbeb-48eb-bbcf-3febe2fdea6e'
2025-06-17 07:16:35.324 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 07:16:35.324 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:16:35.324 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 07:16:35.325 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 07:16:35.325 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:16:35.325 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:16:35.325 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:16:35.326 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:16:35.326 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:16:35.326 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:16:35.327 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:16:35.328 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 07:16:35.328 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-17 07:16:35.328 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 07:16:35.329 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 07:16:35.329 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 07:16:35.329 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-17 07:16:35.330 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:16:35.330 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:16:35.330 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:16:35.330 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:35.330 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:35.330 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:16:35.331 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:35.331 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:16:35.331 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 07:16:35.331 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 07:16:35.332 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:16:35.332 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:16:35.332 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:35.332 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-17 07:16:35.332 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:16:35.332 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:16:35.332 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:16:35.333 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:16:35.333 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:16:35.333 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:16:35.333 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:16:35.333 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-17 07:16:35.334 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 7.4815ms
2025-06-17 07:16:35.334 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 07:16:35.334 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" completed keep alive response.
2025-06-17 07:16:35.334 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:16:35.334 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:16:35.334 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:16:35.335 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/69506548-fbeb-48eb-bbcf-3febe2fdea6e - 200 null application/json; charset=utf-8 11.5228ms
2025-06-17 07:17:05.415 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 07:17:05.418 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 07:17:05.419 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 07:17:05.419 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:17:05.421 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:17:05.421 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:17:05.422 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 07:17:05.424 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:17:05.424 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:17:05.424 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:17:05.425 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:17:05.425 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:17:05.426 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:17:05.428 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:17:05.429 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 07:17:05.429 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 07:17:05.430 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:17:05.430 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:17:05.430 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 07:17:05.434 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 07:17:05.439 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:17:05.442 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:17:05.443 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:17:05.443 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:17:05.444 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:17:05.444 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:17:05.444 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:17:05.444 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:17:05.444 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:17:05.446 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:17:05.447 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.447 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.447 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.449 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.449 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.454 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.469 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.469 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.469 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.470 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.470 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.470 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.470 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.470 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:05.470 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:17:05.470 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 23ms reading results.
2025-06-17 07:17:05.470 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:17:05.471 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:17:05.471 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:17:05.471 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:17:05.471 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:17:05.471 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:17:05.471 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:17:05.471 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 07:17:05.481 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 54.6613ms
2025-06-17 07:17:05.481 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:17:05.481 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" completed keep alive response.
2025-06-17 07:17:05.481 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:17:05.482 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:17:05.482 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:17:05.482 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 69.6305ms
2025-06-17 07:17:08.966 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 07:17:08.967 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 07:17:08.967 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 07:17:08.967 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:17:08.967 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:17:08.968 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:17:08.968 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 07:17:08.969 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:17:08.969 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:17:08.969 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:17:08.969 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:17:08.969 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:17:08.970 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:17:08.970 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:17:08.970 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 07:17:08.970 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 07:17:08.970 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:17:08.970 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:17:08.971 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 07:17:08.971 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 07:17:08.971 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:17:08.972 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:17:08.973 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:17:08.973 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:17:08.973 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:17:08.974 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:17:08.974 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:17:08.974 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:17:08.974 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:17:08.975 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:17:08.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.977 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.977 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.979 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.979 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.980 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.980 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.980 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.981 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.981 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.981 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.981 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.981 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.982 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:17:08.982 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:17:08.982 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 6ms reading results.
2025-06-17 07:17:08.982 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:17:08.982 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:17:08.982 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:17:08.982 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:17:08.983 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:17:08.983 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:17:08.983 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:17:08.983 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 07:17:08.983 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 13.6367ms
2025-06-17 07:17:08.983 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:17:08.984 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" completed keep alive response.
2025-06-17 07:17:08.984 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:17:08.984 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:17:08.984 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:17:08.984 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 17.3641ms
2025-06-17 07:17:58.127 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" received FIN.
2025-06-17 07:17:58.128 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 07:17:58.129 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" disconnecting.
2025-06-17 07:17:58.130 +09:00 [DBG] Connection id "0HNDD4B2SQSD6" stopped.
2025-06-17 07:18:29.307 +09:00 [DBG] Connection id "0HNDD4B2SQSD7" accepted.
2025-06-17 07:18:29.308 +09:00 [DBG] Connection id "0HNDD4B2SQSD7" started.
2025-06-17 07:18:29.330 +09:00 [DBG] Connection 0HNDD4B2SQSD7 established using the following protocol: "Tls12"
2025-06-17 07:18:29.335 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 07:18:29.336 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 07:18:29.336 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 07:18:29.336 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:18:29.336 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:18:29.336 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:18:29.337 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 07:18:29.337 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:18:29.337 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:18:29.337 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:18:29.337 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:18:29.337 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:18:29.337 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:18:29.339 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:18:29.339 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 07:18:29.340 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 07:18:29.340 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:18:29.340 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:18:29.340 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 07:18:29.341 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 07:18:29.342 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:18:29.344 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:18:29.344 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:18:29.344 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:18:29.344 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:18:29.344 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:18:29.344 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:18:29.344 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:18:29.344 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:18:29.345 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:18:29.345 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.345 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.346 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.346 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.346 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.346 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.346 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.346 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.346 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.346 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.346 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.346 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.347 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.347 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:18:29.347 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:18:29.347 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-17 07:18:29.347 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:18:29.347 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:18:29.347 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:18:29.347 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:18:29.347 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:18:29.347 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:18:29.347 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:18:29.347 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 07:18:29.348 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 11.1639ms
2025-06-17 07:18:29.350 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:18:29.350 +09:00 [DBG] Connection id "0HNDD4B2SQSD7" completed keep alive response.
2025-06-17 07:18:29.350 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:18:29.350 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:18:29.350 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:18:29.350 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 14.8859ms
2025-06-17 07:20:41.656 +09:00 [DBG] Connection id "0HNDD4B2SQSD7" disconnecting.
2025-06-17 07:20:41.669 +09:00 [DBG] Connection id "0HNDD4B2SQSD7" stopped.
2025-06-17 07:20:41.685 +09:00 [DBG] Connection id "0HNDD4B2SQSD7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 07:24:02.330 +09:00 [DBG] Connection id "0HNDD4B2SQSD8" accepted.
2025-06-17 07:24:02.331 +09:00 [DBG] Connection id "0HNDD4B2SQSD8" started.
2025-06-17 07:24:02.361 +09:00 [DBG] Connection 0HNDD4B2SQSD8 established using the following protocol: "Tls12"
2025-06-17 07:24:02.373 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 07:24:02.377 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 07:24:02.378 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 07:24:02.378 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:24:02.383 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:24:02.383 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:24:02.386 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 07:24:02.387 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:24:02.387 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:24:02.388 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:24:02.388 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:24:02.388 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:24:02.388 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:24:02.393 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:24:02.396 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 07:24:02.397 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 07:24:02.397 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:24:02.397 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:24:02.397 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 07:24:02.399 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 07:24:02.420 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:24:02.442 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:24:02.443 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:24:02.443 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:24:02.466 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:24:02.467 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:24:02.467 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:24:02.468 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-17 07:24:02.469 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:24:02.477 +09:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:24:02.485 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.490 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.491 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.494 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.494 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.495 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.498 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.499 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.499 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.499 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.499 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.500 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.500 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.500 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:02.500 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:24:02.500 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 22ms reading results.
2025-06-17 07:24:02.500 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:24:02.501 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:24:02.503 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:24:02.503 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:24:02.506 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:24:02.506 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:24:02.506 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:24:02.510 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 07:24:02.519 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 131.1972ms
2025-06-17 07:24:02.520 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:24:02.520 +09:00 [DBG] Connection id "0HNDD4B2SQSD8" completed keep alive response.
2025-06-17 07:24:02.520 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:24:02.520 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:24:02.521 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:24:02.521 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 148.563ms
2025-06-17 07:24:33.089 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 07:24:33.091 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 07:24:33.092 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 07:24:33.092 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:24:33.093 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 07:24:33.093 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:24:33.094 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 07:24:33.094 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 07:24:33.094 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 07:24:33.094 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 07:24:33.095 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 07:24:33.095 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 07:24:33.095 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:24:33.096 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 07:24:33.099 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 07:24:33.100 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 07:24:33.100 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:24:33.100 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 07:24:33.100 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 07:24:33.100 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 07:24:33.104 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 07:24:33.107 +09:00 [DBG] Creating DbConnection.
2025-06-17 07:24:33.108 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 07:24:33.108 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:24:33.108 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:24:33.108 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 07:24:33.108 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:24:33.108 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 07:24:33.108 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:24:33.109 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 07:24:33.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.113 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.113 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 07:24:33.113 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:24:33.113 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-17 07:24:33.113 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 07:24:33.113 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:24:33.114 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 07:24:33.114 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 07:24:33.116 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 07:24:33.116 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 07:24:33.117 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 07:24:33.117 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 07:24:33.119 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 23.5818ms
2025-06-17 07:24:33.119 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 07:24:33.119 +09:00 [DBG] Connection id "0HNDD4B2SQSD8" completed keep alive response.
2025-06-17 07:24:33.119 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 07:24:33.119 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 07:24:33.119 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 07:24:33.120 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 30.7314ms
2025-06-17 07:26:43.447 +09:00 [DBG] Connection id "0HNDD4B2SQSD8" disconnecting.
2025-06-17 07:26:43.452 +09:00 [DBG] Connection id "0HNDD4B2SQSD8" stopped.
2025-06-17 07:26:43.453 +09:00 [DBG] Connection id "0HNDD4B2SQSD8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 09:50:22.442 +09:00 [DBG] Connection id "0HNDD4B2SQSD9" accepted.
2025-06-17 09:50:22.445 +09:00 [DBG] Connection id "0HNDD4B2SQSD9" started.
2025-06-17 09:50:22.476 +09:00 [DBG] Connection 0HNDD4B2SQSD9 established using the following protocol: "Tls12"
2025-06-17 09:50:22.487 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 09:50:22.490 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:50:22.491 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:50:22.492 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:50:22.499 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:50:22.499 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:50:22.501 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 09:50:22.501 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:50:22.501 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:50:22.502 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 09:50:22.502 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:50:22.502 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 09:50:22.502 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:50:22.504 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:50:22.506 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 09:50:22.507 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 09:50:22.507 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:50:22.507 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:50:22.507 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 09:50:22.507 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 09:50:22.514 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:50:22.526 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:50:22.533 +09:00 [DBG] Created DbConnection. (6ms).
2025-06-17 09:50:22.533 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:50:22.542 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:50:22.542 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:50:22.543 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:50:22.543 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-17 09:50:22.545 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:50:22.551 +09:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:50:22.553 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.554 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.554 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.554 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.554 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.554 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:22.555 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:50:22.555 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-17 09:50:22.555 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:50:22.555 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:50:22.556 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:50:22.556 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:50:22.556 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:50:22.556 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:50:22.556 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:50:22.556 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:50:22.559 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 57.5759ms
2025-06-17 09:50:22.560 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:50:22.560 +09:00 [DBG] Connection id "0HNDD4B2SQSD9" completed keep alive response.
2025-06-17 09:50:22.560 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:50:22.560 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:50:22.560 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:50:22.560 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 74.355ms
2025-06-17 09:50:25.928 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 09:50:25.928 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:50:25.929 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:50:25.929 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:50:25.930 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:50:25.930 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:50:25.931 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 09:50:25.931 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:50:25.931 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:50:25.932 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 09:50:25.932 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:50:25.932 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 09:50:25.932 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:50:25.933 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:50:25.933 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 09:50:25.934 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 09:50:25.934 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:50:25.935 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:50:25.935 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 09:50:25.935 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 09:50:25.936 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:50:25.937 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:50:25.937 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:50:25.937 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:50:25.937 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:50:25.937 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:50:25.938 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:50:25.938 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:50:25.938 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:50:25.939 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:50:25.939 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.939 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.939 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.939 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.940 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.940 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.940 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.940 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.940 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.940 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.940 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.940 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.941 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.941 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:25.941 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:50:25.941 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-17 09:50:25.942 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:50:25.942 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:50:25.942 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:50:25.942 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:50:25.942 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:50:25.942 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:50:25.942 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:50:25.943 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:50:25.943 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 11.1944ms
2025-06-17 09:50:25.944 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:50:25.944 +09:00 [DBG] Connection id "0HNDD4B2SQSD9" completed keep alive response.
2025-06-17 09:50:25.944 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:50:25.944 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:50:25.944 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:50:25.945 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 17.1171ms
2025-06-17 09:50:31.823 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 09:50:31.824 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:50:31.828 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:50:31.828 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:50:31.829 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:50:31.829 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:50:31.830 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 09:50:31.830 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:50:31.830 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:50:31.830 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 09:50:31.830 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:50:31.830 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 09:50:31.830 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:50:31.831 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:50:31.831 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 09:50:31.832 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 09:50:31.832 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:50:31.832 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:50:31.832 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 09:50:31.832 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 09:50:31.837 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:50:31.846 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:50:31.846 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:50:31.846 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:50:31.847 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:50:31.847 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:50:31.847 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:50:31.847 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:50:31.847 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:50:31.847 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:50:31.848 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.848 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.848 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:31.849 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:50:31.849 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-17 09:50:31.850 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:50:31.850 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:50:31.850 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:50:31.850 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:50:31.850 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:50:31.850 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:50:31.850 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:50:31.850 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:50:31.851 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 20.306ms
2025-06-17 09:50:31.851 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:50:31.851 +09:00 [DBG] Connection id "0HNDD4B2SQSD9" completed keep alive response.
2025-06-17 09:50:31.852 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:50:31.852 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:50:31.852 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:50:31.853 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 30.5497ms
2025-06-17 09:50:44.701 +09:00 [DBG] Connection id "0HNDD4B2SQSD9" received FIN.
2025-06-17 09:50:44.702 +09:00 [DBG] Connection id "0HNDD4B2SQSD9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 09:50:44.703 +09:00 [DBG] Connection id "0HNDD4B2SQSD9" disconnecting.
2025-06-17 09:50:44.704 +09:00 [DBG] Connection id "0HNDD4B2SQSD9" stopped.
2025-06-17 09:50:56.314 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" accepted.
2025-06-17 09:50:56.314 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" started.
2025-06-17 09:50:56.338 +09:00 [DBG] Connection 0HNDD4B2SQSDA established using the following protocol: "Tls12"
2025-06-17 09:50:56.344 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 09:50:56.345 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:50:56.346 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:50:56.346 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:50:56.347 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:50:56.347 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:50:56.348 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 09:50:56.348 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:50:56.348 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:50:56.348 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 09:50:56.348 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:50:56.348 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 09:50:56.348 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:50:56.349 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:50:56.349 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 09:50:56.349 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 09:50:56.349 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:50:56.349 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:50:56.349 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 09:50:56.350 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 09:50:56.351 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:50:56.352 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:50:56.352 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:50:56.352 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:50:56.352 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:50:56.352 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:50:56.352 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:50:56.353 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:50:56.353 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:50:56.354 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:50:56.355 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.355 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.355 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.355 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.356 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.357 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.357 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.357 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:50:56.357 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:50:56.357 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-17 09:50:56.357 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:50:56.357 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:50:56.358 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:50:56.358 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:50:56.358 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:50:56.358 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:50:56.358 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:50:56.359 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:50:56.360 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 11.4607ms
2025-06-17 09:50:56.360 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:50:56.360 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" completed keep alive response.
2025-06-17 09:50:56.360 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:50:56.360 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:50:56.360 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:50:56.361 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 16.1994ms
2025-06-17 09:51:02.253 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 09:51:02.254 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:51:02.254 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:51:02.254 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:51:02.255 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:51:02.255 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:51:02.255 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 09:51:02.255 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:51:02.255 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:51:02.255 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 09:51:02.255 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:51:02.256 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 09:51:02.256 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:51:02.256 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:51:02.256 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 09:51:02.256 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 09:51:02.256 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:51:02.256 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:51:02.257 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 09:51:02.257 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 09:51:02.257 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:51:02.259 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:51:02.259 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:51:02.259 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:02.260 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:02.260 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:51:02.260 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:02.260 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:02.260 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:51:02.261 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:51:02.262 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.262 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.262 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.263 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.263 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.263 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.263 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.263 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.263 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.264 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.265 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:02.265 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:02.265 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-17 09:51:02.268 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:02.268 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:02.268 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:51:02.268 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:51:02.268 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:51:02.268 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:51:02.268 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:51:02.268 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:51:02.269 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 13.3353ms
2025-06-17 09:51:02.270 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:51:02.270 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" completed keep alive response.
2025-06-17 09:51:02.270 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:51:02.270 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:02.270 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:02.270 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 17.4419ms
2025-06-17 09:51:05.155 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 09:51:05.155 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:51:05.155 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:51:05.156 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:51:05.156 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:51:05.156 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:51:05.156 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 09:51:05.156 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:51:05.156 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:51:05.157 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 09:51:05.157 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:51:05.157 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 09:51:05.157 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:51:05.158 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:51:05.158 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 09:51:05.159 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 09:51:05.159 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:51:05.159 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:51:05.159 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 09:51:05.159 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 09:51:05.160 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:51:05.161 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:51:05.161 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:51:05.161 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:05.161 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:05.161 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:51:05.161 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:05.161 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:05.162 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:51:05.162 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:51:05.162 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.163 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.163 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.163 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.163 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.163 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.163 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.163 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.163 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.164 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.164 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.164 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.164 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.164 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.164 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:05.164 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-17 09:51:05.165 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:05.165 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:05.165 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:51:05.166 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:51:05.166 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:51:05.166 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:51:05.166 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:51:05.167 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:51:05.167 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 10.026ms
2025-06-17 09:51:05.167 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:51:05.167 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" completed keep alive response.
2025-06-17 09:51:05.167 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:51:05.168 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:05.168 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:05.168 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 13.064ms
2025-06-17 09:51:05.710 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-17 09:51:05.713 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 09:51:05.713 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 09:51:05.714 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:51:05.715 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:51:05.716 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:51:05.717 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-17 09:51:05.718 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:51:05.718 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:51:05.718 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 09:51:05.718 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:51:05.718 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 09:51:05.718 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 09:51:05.719 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 09:51:05.720 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-17 09:51:05.721 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-17 09:51:05.721 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 09:51:05.721 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 09:51:05.722 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-17 09:51:05.722 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-17 09:51:05.723 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:51:05.725 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:51:05.725 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:51:05.725 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:05.725 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:05.725 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:51:05.725 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:05.726 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:05.726 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 09:51:05.726 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 09:51:05.727 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.727 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:05.727 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:05.727 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-17 09:51:05.727 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:05.727 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:05.727 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:51:05.727 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:51:05.727 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:51:05.727 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:51:05.727 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:51:05.727 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:51:05.728 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 9.8339ms
2025-06-17 09:51:05.728 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:51:05.728 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" completed keep alive response.
2025-06-17 09:51:05.728 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:51:05.728 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:05.728 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:05.728 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 17.9272ms
2025-06-17 09:51:06.318 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 09:51:06.318 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:51:06.318 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:51:06.318 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:51:06.318 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:51:06.318 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:51:06.319 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 09:51:06.319 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:51:06.319 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:51:06.319 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 09:51:06.319 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:51:06.319 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 09:51:06.319 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:51:06.319 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:51:06.319 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 09:51:06.319 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 09:51:06.319 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:51:06.320 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:51:06.320 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 09:51:06.320 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 09:51:06.320 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:51:06.321 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:51:06.322 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:51:06.322 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:06.322 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:06.322 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:51:06.322 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:06.322 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:06.322 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:51:06.323 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:51:06.324 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.324 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.324 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.324 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.325 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.325 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.325 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.325 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.325 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.325 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.325 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.325 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.325 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.325 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:06.325 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:06.325 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-17 09:51:06.326 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:06.326 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:06.326 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:51:06.326 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:51:06.326 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:51:06.326 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:51:06.326 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:51:06.326 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:51:06.326 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.1573ms
2025-06-17 09:51:06.326 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:51:06.326 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" completed keep alive response.
2025-06-17 09:51:06.326 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:51:06.326 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:06.326 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:06.327 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 8.5756ms
2025-06-17 09:51:33.265 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1 - null null
2025-06-17 09:51:33.271 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1'
2025-06-17 09:51:33.271 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1'
2025-06-17 09:51:33.272 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 09:51:33.272 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:51:33.272 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 09:51:33.273 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 09:51:33.273 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:51:33.273 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:51:33.273 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 09:51:33.274 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:51:33.274 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 09:51:33.274 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:51:33.275 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:51:33.276 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 09:51:33.276 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-17 09:51:33.277 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 09:51:33.277 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 09:51:33.277 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 09:51:33.277 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-17 09:51:33.279 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:51:33.281 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:51:33.282 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:51:33.282 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:33.282 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:33.283 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:51:33.283 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:33.283 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:33.283 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 09:51:33.285 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 09:51:33.287 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:33.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:33.293 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:33.294 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:33.294 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:33.294 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 8ms reading results.
2025-06-17 09:51:33.294 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:33.294 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:33.295 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:51:33.295 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:51:33.295 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:51:33.295 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:51:33.296 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:51:33.296 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-17 09:51:33.301 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 26.8568ms
2025-06-17 09:51:33.301 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 09:51:33.301 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" completed keep alive response.
2025-06-17 09:51:33.301 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:51:33.301 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:33.301 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:33.301 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1 - 200 null application/json; charset=utf-8 36.5317ms
2025-06-17 09:51:36.423 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 09:51:36.423 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:51:36.424 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:51:36.424 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:51:36.424 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:51:36.424 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:51:36.425 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 09:51:36.425 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:51:36.425 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:51:36.426 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 09:51:36.426 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:51:36.426 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 09:51:36.426 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:51:36.427 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:51:36.427 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 09:51:36.427 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 09:51:36.427 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:51:36.428 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:51:36.428 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 09:51:36.429 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 09:51:36.430 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:51:36.431 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:51:36.432 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:51:36.432 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:36.432 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:36.432 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:51:36.432 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:36.432 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:36.432 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:51:36.433 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:51:36.433 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.433 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.433 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.434 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.434 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.434 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.434 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.435 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.435 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.435 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.435 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.435 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.435 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.435 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:36.435 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:36.435 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-17 09:51:36.436 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:36.436 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:36.436 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:51:36.436 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:51:36.436 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:51:36.436 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:51:36.436 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:51:36.436 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:51:36.437 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 10.7821ms
2025-06-17 09:51:36.437 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:51:36.437 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" completed keep alive response.
2025-06-17 09:51:36.437 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:51:36.437 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:36.437 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:36.437 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 14.7273ms
2025-06-17 09:51:37.184 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-17 09:51:37.184 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 09:51:37.184 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 09:51:37.184 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:51:37.184 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:51:37.184 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:51:37.184 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-17 09:51:37.185 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:51:37.185 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:51:37.185 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-17 09:51:37.185 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:51:37.185 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-17 09:51:37.186 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 09:51:37.189 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 09:51:37.189 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-17 09:51:37.189 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-17 09:51:37.190 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 09:51:37.190 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 09:51:37.190 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-17 09:51:37.190 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-17 09:51:37.190 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:51:37.191 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:51:37.191 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:51:37.191 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:37.191 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:37.191 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:51:37.192 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:37.192 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:51:37.192 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 09:51:37.192 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 09:51:37.192 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:37.192 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:51:37.192 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:37.192 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-17 09:51:37.192 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:51:37.193 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:37.193 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:51:37.193 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:51:37.193 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:51:37.193 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:51:37.193 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:51:37.193 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:51:37.193 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 7.3565ms
2025-06-17 09:51:37.193 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:51:37.194 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" completed keep alive response.
2025-06-17 09:51:37.194 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:51:37.194 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:51:37.194 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:51:37.194 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 10.3735ms
2025-06-17 09:52:41.322 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" received FIN.
2025-06-17 09:52:41.325 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 09:52:41.326 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" disconnecting.
2025-06-17 09:52:41.328 +09:00 [DBG] Connection id "0HNDD4B2SQSDA" stopped.
2025-06-17 09:55:41.551 +09:00 [INF] Application is shutting down...
2025-06-17 09:55:41.557 +09:00 [DBG] Hosting stopping
2025-06-17 09:55:41.570 +09:00 [DBG] Hosting stopped
2025-06-17 09:57:03.567 +09:00 [INF] Starting Approval Service API
2025-06-17 09:57:03.665 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-17 09:57:03.743 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-17 09:57:03.994 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:57:03.998 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:57:04.004 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-17 09:57:04.007 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:04.014 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:04.017 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:04.018 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:04.020 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-17 09:57:04.020 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:57:04.021 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:57:04.023 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-17 09:57:04.023 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-17 09:57:04.023 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:04.024 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:04.027 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-17 09:57:04.041 +09:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-17 09:57:04.044 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:04.045 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-17 09:57:04.048 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:57:04.048 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:57:04.048 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:04.049 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:04.049 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:04.049 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:04.049 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-17 09:57:04.049 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-17 09:57:04.049 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-17 09:57:04.049 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:04.049 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:04.049 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-17 09:57:04.050 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-17 09:57:04.050 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:04.050 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:04.072 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-17 09:57:04.334 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-17 09:57:04.356 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:04.357 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:04.357 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:57:04.358 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:04.358 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:04.358 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-17 09:57:04.360 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-17 09:57:04.365 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:04.366 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-17 09:57:04.367 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:04.367 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:04.368 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:57:04.369 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:04.369 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:04.371 +09:00 [DBG] Hosting starting
2025-06-17 09:57:04.397 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-17 09:57:04.398 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-17 09:57:05.012 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-17 09:57:05.013 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-17 09:57:05.013 +09:00 [DBG] Loaded hosting startup assembly ApprovalService.API
2025-06-17 09:57:05.014 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-17 09:57:05.015 +09:00 [INF] Hosting environment: Development
2025-06-17 09:57:05.015 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-17 09:57:05.015 +09:00 [DBG] Hosting started
2025-06-17 09:57:06.644 +09:00 [DBG] Connection id "0HNDD77GPRQUN" accepted.
2025-06-17 09:57:06.644 +09:00 [DBG] Connection id "0HNDD77GPRQUN" started.
2025-06-17 09:57:06.684 +09:00 [DBG] Connection 0HNDD77GPRQUN established using the following protocol: "Tls12"
2025-06-17 09:57:06.711 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-17 09:57:06.723 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 09:57:06.725 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 09:57:06.731 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:57:06.739 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:57:06.740 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:57:06.751 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-17 09:57:06.752 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:57:06.752 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:57:06.752 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:57:06.752 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:57:06.752 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:57:06.753 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 09:57:06.754 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 09:57:06.755 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-17 09:57:06.756 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-17 09:57:06.756 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 09:57:06.756 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 09:57:06.756 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-17 09:57:06.760 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-17 09:57:06.768 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:57:06.779 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        ApplicantPosition = r.ApplicantPosition, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-17 09:57:06.845 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            string value9;
            List<ApprovalStep> namelessParameter{0};
            int? value11;
            string value12;
            string value13;
            string value14;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            value9 = dataReader.GetString(8);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value11 = (int?)dataReader.GetInt32(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            value13 = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
            value14 = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                value9, 
                namelessParameter{0}, 
                (object)value11, 
                value12, 
                value13, 
                value14 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid) : dataReader.GetGuid(12);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(17) ? default(bool) : dataReader.GetBoolean(17);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(19) ? default(int) : dataReader.GetInt32(19);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantDepartment = (string)(resultContext.Values[5]), 
            ApplicantName = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Status = (string)(resultContext.Values[8]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[9]), 
            CurrentStep = (int)(int?)(resultContext.Values[10]), 
            CurrentApproverName = (string)(resultContext.Values[11]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[12]), 
            CurrentActionStatus = (string)(resultContext.Values[13]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-17 09:57:06.856 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:57:06.856 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:57:06.856 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:06.856 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:06.857 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:57:06.857 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:06.858 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:06.858 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 09:57:06.861 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 09:57:06.879 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:06.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:06.899 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:06.902 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 40ms reading results.
2025-06-17 09:57:06.902 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:06.904 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (2ms).
2025-06-17 09:57:06.905 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:57:06.905 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:57:06.905 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:57:06.906 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:57:06.906 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:57:06.906 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:57:06.949 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 195.2791ms
2025-06-17 09:57:06.951 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:57:06.952 +09:00 [DBG] Connection id "0HNDD77GPRQUN" completed keep alive response.
2025-06-17 09:57:06.952 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:57:06.953 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:06.953 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:06.954 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 244.204ms
2025-06-17 09:57:09.585 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-17 09:57:09.589 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 09:57:09.589 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 09:57:09.592 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:57:09.594 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:57:09.594 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:57:09.594 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-17 09:57:09.595 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:57:09.595 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:57:09.595 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:57:09.595 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:57:09.595 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:57:09.595 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 09:57:09.602 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 09:57:09.602 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-17 09:57:09.602 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-17 09:57:09.602 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 09:57:09.607 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 09:57:09.607 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-17 09:57:09.608 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-17 09:57:09.833 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:57:09.839 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:57:09.843 +09:00 [DBG] Created DbConnection. (3ms).
2025-06-17 09:57:09.843 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:09.843 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:09.844 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:57:09.844 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:09.844 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:09.845 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 09:57:09.845 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 09:57:09.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:09.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:09.847 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:09.847 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-17 09:57:09.849 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:09.852 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (2ms).
2025-06-17 09:57:09.853 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:57:09.853 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:57:09.853 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:57:09.853 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:57:09.853 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:57:09.854 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:57:09.855 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 259.4558ms
2025-06-17 09:57:09.858 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:57:09.859 +09:00 [DBG] Connection id "0HNDD77GPRQUN" completed keep alive response.
2025-06-17 09:57:09.862 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:57:09.863 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:09.863 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:09.863 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 280.751ms
2025-06-17 09:57:10.192 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 09:57:10.206 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:57:10.207 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:57:10.207 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:57:10.209 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:57:10.210 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:57:10.217 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 09:57:10.218 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:57:10.218 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:57:10.218 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:57:10.219 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:57:10.219 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:57:10.219 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:57:10.221 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:57:10.222 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 09:57:10.222 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 09:57:10.222 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:57:10.222 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:57:10.222 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 09:57:10.229 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 09:57:10.238 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:57:10.242 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantName = r.ApplicantName, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantPosition = r.ApplicantPosition, 
        Steps = r.Steps, 
        Attachments = r.Attachments, 
        Status = r.Status, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-17 09:57:10.280 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-17 09:57:10.313 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            List<ApprovalStep> namelessParameter{0};
            List<ApprovalAttachment> namelessParameter{1};
            string value11;
            int? value12;
            string value13;
            string value14;
            string value15;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            namelessParameter{1} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalAttachment, List<ApprovalAttachment>>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
                }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()]);
            value11 = dataReader.GetString(28);
            value12 = (int?)dataReader.GetInt32(29);
            value13 = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
            value14 = dataReader.IsDBNull(31) ? default(string) : dataReader.GetString(31);
            value15 = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                namelessParameter{0}, 
                namelessParameter{1}, 
                value11, 
                (object)value12, 
                value13, 
                value14, 
                value15 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(8) ? default(object) : (object)dataReader.GetGuid(8) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(8) ? default(Guid) : dataReader.GetGuid(8);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(11) ? default(Guid) : dataReader.GetGuid(11);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(16) ? default(bool) : dataReader.GetBoolean(16);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(18) ? default(int) : dataReader.GetInt32(18);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalAttachment>, ApprovalAttachment, ApprovalAttachment>(
            collectionId: 1, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
            { 
                (object)(Guid?)dataReader.GetGuid(0), 
                (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
            }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(20) ? default(Guid?) : (Guid?)dataReader.GetGuid(20) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
            { 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
            }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalAttachment entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalAttachment instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalAttachment);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(20) ? default(object) : (object)dataReader.GetGuid(20) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalAttachment)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                {
                                    return 
                                    {
                                        ApprovalAttachment instance;
                                        instance = new ApprovalAttachment();
                                        instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(20) ? default(Guid) : dataReader.GetGuid(20);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(21) ? default(Guid) : dataReader.GetGuid(21);
                                        instance.<FileName>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<FilePath>k__BackingField = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
                                        instance.<FileSize>k__BackingField = dataReader.IsDBNull(24) ? default(long?) : (long?)dataReader.GetInt64(24);
                                        instance.<FileType>k__BackingField = dataReader.IsDBNull(25) ? default(string) : dataReader.GetString(25);
                                        instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(26) ? default(DateTime) : dataReader.GetDateTime(26);
                                        instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalAttachment)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            ApplicantDepartment = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[8]), 
            Attachments = (List<ApprovalAttachment>)(resultContext.Values[9]), 
            Status = (string)(resultContext.Values[10]), 
            CurrentStep = (int)(int?)(resultContext.Values[11]), 
            CurrentApproverName = (string)(resultContext.Values[12]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[13]), 
            CurrentActionStatus = (string)(resultContext.Values[14]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-17 09:57:10.329 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:57:10.330 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:57:10.330 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:10.330 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:10.330 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:57:10.330 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:10.330 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:10.330 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:57:10.331 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:57:10.335 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.337 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.338 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.338 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.338 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.341 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.362 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.362 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.362 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.363 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.363 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.363 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.363 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.363 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:10.363 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:10.364 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 31ms reading results.
2025-06-17 09:57:10.364 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:10.364 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:10.364 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:57:10.364 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:57:10.364 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:57:10.364 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:57:10.365 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:57:10.365 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:57:10.381 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 161.7311ms
2025-06-17 09:57:10.382 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:57:10.382 +09:00 [DBG] Connection id "0HNDD77GPRQUN" completed keep alive response.
2025-06-17 09:57:10.382 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:57:10.382 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:10.382 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:10.382 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 190.5535ms
2025-06-17 09:57:12.517 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-17 09:57:12.518 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 09:57:12.519 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 09:57:12.520 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:57:12.520 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:57:12.520 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:57:12.520 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-17 09:57:12.521 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:57:12.521 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:57:12.521 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:57:12.521 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:57:12.521 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:57:12.521 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 09:57:12.524 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 09:57:12.524 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-17 09:57:12.524 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-17 09:57:12.525 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 09:57:12.525 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 09:57:12.525 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-17 09:57:12.525 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-17 09:57:12.526 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:57:12.527 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:57:12.527 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:57:12.527 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:12.527 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:12.527 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:57:12.527 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:12.527 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:12.527 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 09:57:12.528 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 09:57:12.529 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:12.529 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:12.529 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:12.529 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-17 09:57:12.529 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:12.530 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:12.530 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:57:12.530 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:57:12.530 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:57:12.530 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:57:12.530 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:57:12.531 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:57:12.531 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 9.9186ms
2025-06-17 09:57:12.531 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:57:12.532 +09:00 [DBG] Connection id "0HNDD77GPRQUN" completed keep alive response.
2025-06-17 09:57:12.532 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:57:12.532 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:12.532 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:12.532 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 15.0151ms
2025-06-17 09:57:13.133 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-17 09:57:13.133 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 09:57:13.134 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 09:57:13.134 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:57:13.135 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:57:13.135 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:57:13.136 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-17 09:57:13.136 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:57:13.136 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:57:13.137 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:57:13.137 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:57:13.137 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:57:13.137 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 09:57:13.137 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 09:57:13.137 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-17 09:57:13.138 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-17 09:57:13.138 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 09:57:13.138 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 09:57:13.138 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-17 09:57:13.138 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-17 09:57:13.140 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:57:13.141 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:57:13.141 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:57:13.141 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:13.141 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:13.141 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:57:13.141 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:13.141 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:13.141 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 09:57:13.142 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 09:57:13.142 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.143 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.143 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:13.143 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-17 09:57:13.143 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:13.143 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:13.144 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:57:13.144 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:57:13.144 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:57:13.144 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:57:13.144 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:57:13.145 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:57:13.145 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 8.3037ms
2025-06-17 09:57:13.146 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 09:57:13.146 +09:00 [DBG] Connection id "0HNDD77GPRQUN" completed keep alive response.
2025-06-17 09:57:13.146 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:57:13.146 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:13.146 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:13.146 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 13.4292ms
2025-06-17 09:57:13.730 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 09:57:13.733 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:57:13.733 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:57:13.734 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:57:13.734 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:57:13.734 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:57:13.734 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 09:57:13.734 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:57:13.734 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:57:13.735 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:57:13.735 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:57:13.735 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:57:13.735 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:57:13.736 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:57:13.737 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 09:57:13.737 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 09:57:13.737 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:57:13.737 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:57:13.737 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 09:57:13.737 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 09:57:13.739 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:57:13.741 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:57:13.742 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:57:13.742 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:13.742 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:13.742 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:57:13.742 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:13.743 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:57:13.743 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:57:13.744 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:57:13.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.746 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.746 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.746 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.747 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.748 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.748 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.748 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.750 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.750 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.750 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:57:13.750 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:13.751 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 6ms reading results.
2025-06-17 09:57:13.751 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:57:13.751 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:13.752 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:57:13.752 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:57:13.752 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:57:13.752 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:57:13.752 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:57:13.752 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:57:13.752 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 17.0641ms
2025-06-17 09:57:13.753 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:57:13.753 +09:00 [DBG] Connection id "0HNDD77GPRQUN" completed keep alive response.
2025-06-17 09:57:13.753 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:57:13.753 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:57:13.753 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:57:13.754 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 23.0107ms
2025-06-17 09:58:15.621 +09:00 [DBG] Connection id "0HNDD77GPRQUN" received FIN.
2025-06-17 09:58:15.625 +09:00 [DBG] Connection id "0HNDD77GPRQUN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 09:58:15.634 +09:00 [DBG] Connection id "0HNDD77GPRQUN" disconnecting.
2025-06-17 09:58:15.637 +09:00 [DBG] Connection id "0HNDD77GPRQUN" stopped.
2025-06-17 09:58:48.802 +09:00 [DBG] Connection id "0HNDD77GPRQUO" accepted.
2025-06-17 09:58:48.803 +09:00 [DBG] Connection id "0HNDD77GPRQUO" started.
2025-06-17 09:58:48.833 +09:00 [DBG] Connection 0HNDD77GPRQUO established using the following protocol: "Tls12"
2025-06-17 09:58:48.837 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 09:58:48.837 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:58:48.838 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:58:48.838 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:58:48.838 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:58:48.838 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:58:48.839 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 09:58:48.839 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:58:48.839 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:58:48.839 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:58:48.839 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:58:48.839 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:58:48.839 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:58:48.841 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:58:48.841 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 09:58:48.841 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 09:58:48.841 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:58:48.841 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:58:48.841 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 09:58:48.842 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 09:58:48.848 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:58:48.854 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:58:48.854 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:58:48.854 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:58:48.854 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:58:48.854 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:58:48.855 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:58:48.855 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:58:48.855 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:58:48.855 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:58:48.856 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.856 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.856 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.856 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.856 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.856 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.856 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.856 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.856 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.857 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.857 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.857 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.857 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.857 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:58:48.857 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:58:48.857 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-17 09:58:48.857 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:58:48.857 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:58:48.857 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:58:48.857 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:58:48.857 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:58:48.857 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:58:48.857 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:58:48.857 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:58:48.858 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 18.7492ms
2025-06-17 09:58:48.858 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:58:48.859 +09:00 [DBG] Connection id "0HNDD77GPRQUO" completed keep alive response.
2025-06-17 09:58:48.859 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:58:48.859 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:58:48.859 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:58:48.860 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 22.937ms
2025-06-17 09:59:41.970 +09:00 [DBG] Connection id "0HNDD77GPRQUO" received FIN.
2025-06-17 09:59:41.972 +09:00 [DBG] Connection id "0HNDD77GPRQUO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 09:59:41.973 +09:00 [DBG] Connection id "0HNDD77GPRQUO" disconnecting.
2025-06-17 09:59:41.974 +09:00 [DBG] Connection id "0HNDD77GPRQUO" stopped.
2025-06-17 09:59:57.722 +09:00 [DBG] Connection id "0HNDD77GPRQUP" accepted.
2025-06-17 09:59:57.723 +09:00 [DBG] Connection id "0HNDD77GPRQUP" started.
2025-06-17 09:59:57.745 +09:00 [DBG] Connection 0HNDD77GPRQUP established using the following protocol: "Tls12"
2025-06-17 09:59:57.750 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 09:59:57.751 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:59:57.751 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 09:59:57.752 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:59:57.752 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 09:59:57.753 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:59:57.753 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 09:59:57.753 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 09:59:57.753 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 09:59:57.753 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:59:57.753 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 09:59:57.753 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 09:59:57.753 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:59:57.754 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 09:59:57.754 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 09:59:57.754 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 09:59:57.754 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:59:57.754 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 09:59:57.754 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 09:59:57.755 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 09:59:57.756 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 09:59:57.757 +09:00 [DBG] Creating DbConnection.
2025-06-17 09:59:57.757 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 09:59:57.757 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:59:57.758 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:59:57.758 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 09:59:57.758 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:59:57.758 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 09:59:57.758 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:59:57.758 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 09:59:57.760 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:59:57.760 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-17 09:59:57.760 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 09:59:57.760 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:59:57.760 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 09:59:57.760 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 09:59:57.760 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 09:59:57.760 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 09:59:57.760 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 09:59:57.760 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 09:59:57.761 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.4276ms
2025-06-17 09:59:57.761 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 09:59:57.761 +09:00 [DBG] Connection id "0HNDD77GPRQUP" completed keep alive response.
2025-06-17 09:59:57.761 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 09:59:57.761 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 09:59:57.761 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 09:59:57.761 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 10.7636ms
2025-06-17 10:00:04.679 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-17 10:00:04.680 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 10:00:04.680 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 10:00:04.681 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 10:00:04.681 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 10:00:04.681 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 10:00:04.681 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-17 10:00:04.681 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 10:00:04.681 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 10:00:04.681 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 10:00:04.682 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 10:00:04.682 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 10:00:04.682 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 10:00:04.682 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 10:00:04.682 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-17 10:00:04.682 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-17 10:00:04.683 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 10:00:04.683 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 10:00:04.683 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-17 10:00:04.683 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-17 10:00:04.683 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 10:00:04.684 +09:00 [DBG] Creating DbConnection.
2025-06-17 10:00:04.684 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 10:00:04.684 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 10:00:04.684 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:04.684 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 10:00:04.685 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 10:00:04.685 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 10:00:04.685 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 10:00:04.686 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 10:00:04.686 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:04.686 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:04.686 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:04.686 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-17 10:00:04.686 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:04.687 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 10:00:04.687 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 10:00:04.687 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 10:00:04.687 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 10:00:04.687 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 10:00:04.687 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 10:00:04.687 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 10:00:04.687 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 5.6597ms
2025-06-17 10:00:04.688 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 10:00:04.688 +09:00 [DBG] Connection id "0HNDD77GPRQUP" completed keep alive response.
2025-06-17 10:00:04.688 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 10:00:04.688 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 10:00:04.688 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 10:00:04.688 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 9.23ms
2025-06-17 10:00:16.680 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-17 10:00:16.680 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 10:00:16.681 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 10:00:16.681 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 10:00:16.682 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 10:00:16.682 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 10:00:16.682 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-17 10:00:16.683 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 10:00:16.683 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 10:00:16.683 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 10:00:16.683 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 10:00:16.683 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 10:00:16.683 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 10:00:16.684 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 10:00:16.684 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-17 10:00:16.684 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-17 10:00:16.684 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 10:00:16.684 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 10:00:16.684 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-17 10:00:16.685 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-17 10:00:16.686 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 10:00:16.687 +09:00 [DBG] Creating DbConnection.
2025-06-17 10:00:16.687 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 10:00:16.687 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 10:00:16.687 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:16.688 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 10:00:16.688 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 10:00:16.688 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 10:00:16.688 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 10:00:16.692 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 10:00:16.694 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:16.694 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:16.695 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:16.695 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-17 10:00:16.695 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:16.695 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 10:00:16.695 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 10:00:16.695 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 10:00:16.695 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 10:00:16.695 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 10:00:16.695 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 10:00:16.695 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 10:00:16.696 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 12.6605ms
2025-06-17 10:00:16.696 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 10:00:16.696 +09:00 [DBG] Connection id "0HNDD77GPRQUP" completed keep alive response.
2025-06-17 10:00:16.696 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 10:00:16.696 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 10:00:16.697 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 10:00:16.698 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 18.1197ms
2025-06-17 10:00:35.116 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 10:00:35.117 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 10:00:35.117 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 10:00:35.119 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 10:00:35.121 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 10:00:35.122 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 10:00:35.123 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 10:00:35.123 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 10:00:35.124 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 10:00:35.124 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 10:00:35.124 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 10:00:35.124 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 10:00:35.124 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 10:00:35.125 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 10:00:35.126 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 10:00:35.126 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 10:00:35.126 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 10:00:35.126 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 10:00:35.126 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 10:00:35.126 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 10:00:35.129 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 10:00:35.131 +09:00 [DBG] Creating DbConnection.
2025-06-17 10:00:35.132 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 10:00:35.132 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 10:00:35.132 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:35.132 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 10:00:35.132 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 10:00:35.132 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 10:00:35.133 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 10:00:35.133 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 10:00:35.134 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.134 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.134 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.135 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.135 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.135 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.135 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.135 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.135 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:35.136 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:35.136 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-17 10:00:35.136 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:35.136 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 10:00:35.137 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 10:00:35.137 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 10:00:35.137 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 10:00:35.137 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 10:00:35.137 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 10:00:35.137 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 10:00:35.139 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 14.4952ms
2025-06-17 10:00:35.139 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 10:00:35.140 +09:00 [DBG] Connection id "0HNDD77GPRQUP" completed keep alive response.
2025-06-17 10:00:35.140 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 10:00:35.140 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 10:00:35.140 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 10:00:35.141 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 25.0462ms
2025-06-17 10:00:39.082 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 10:00:39.082 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 10:00:39.083 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 10:00:39.083 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 10:00:39.083 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 10:00:39.084 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 10:00:39.084 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 10:00:39.084 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 10:00:39.084 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 10:00:39.084 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 10:00:39.085 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 10:00:39.085 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 10:00:39.085 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 10:00:39.085 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 10:00:39.086 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 10:00:39.086 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 10:00:39.086 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 10:00:39.086 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 10:00:39.086 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 10:00:39.086 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 10:00:39.087 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 10:00:39.088 +09:00 [DBG] Creating DbConnection.
2025-06-17 10:00:39.088 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 10:00:39.088 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 10:00:39.088 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:39.089 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 10:00:39.089 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 10:00:39.089 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 10:00:39.089 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 10:00:39.090 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 10:00:39.091 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.091 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.092 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.092 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.093 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.094 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.094 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.094 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.094 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.094 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.095 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.095 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.095 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.095 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:39.096 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:39.096 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 5ms reading results.
2025-06-17 10:00:39.099 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:39.099 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 10:00:39.099 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 10:00:39.100 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 10:00:39.100 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 10:00:39.100 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 10:00:39.100 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 10:00:39.100 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 10:00:39.101 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 16.0456ms
2025-06-17 10:00:39.101 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 10:00:39.102 +09:00 [DBG] Connection id "0HNDD77GPRQUP" completed keep alive response.
2025-06-17 10:00:39.102 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 10:00:39.102 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 10:00:39.102 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 10:00:39.102 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 20.4452ms
2025-06-17 10:00:43.152 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1 - null null
2025-06-17 10:00:43.153 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1'
2025-06-17 10:00:43.153 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1'
2025-06-17 10:00:43.153 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 10:00:43.153 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 10:00:43.153 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 10:00:43.160 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 10:00:43.160 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 10:00:43.160 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 10:00:43.160 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 10:00:43.160 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 10:00:43.160 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 10:00:43.161 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 10:00:43.161 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 10:00:43.161 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 10:00:43.161 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-17 10:00:43.161 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 10:00:43.161 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 10:00:43.161 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 10:00:43.162 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-17 10:00:43.165 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 10:00:43.166 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Include(p => p.Steps)
    .Include(p => p.Attachments)
    .SingleOrDefault(request => request.ApprovalId == __id_0)'
2025-06-17 10:00:43.167 +09:00 [DBG] Including navigation: 'ApprovalRequest.Steps'.
2025-06-17 10:00:43.167 +09:00 [DBG] Including navigation: 'ApprovalRequest.Attachments'.
2025-06-17 10:00:43.179 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-17 10:00:43.188 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ApprovalRequest>(
    asyncEnumerable: SingleQueryingEnumerable.Create<ApprovalRequest>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ApprovalRequest.ApprovalId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ApprovalRequest.ApplicantDepartment (string), 1], [Property: ApprovalRequest.ApplicantEmployeeNumber (string) Required, 2], [Property: ApprovalRequest.ApplicantName (string) Required, 3], [Property: ApprovalRequest.ApplicantPosition (string), 4], [Property: ApprovalRequest.ApprovalType (string), 5], [Property: ApprovalRequest.ApproverComment (string), 6], [Property: ApprovalRequest.CurrentApproverEmployeeNumber (string), 7], [Property: ApprovalRequest.CurrentStep (int) Required, 8], [Property: ApprovalRequest.MisKey (string), 9], [Property: ApprovalRequest.RequestContent (string), 10], [Property: ApprovalRequest.RequestTitle (string) Required, 11], [Property: ApprovalRequest.RequestedAt (DateTime) Required, 12], [Property: ApprovalRequest.RespondedAt (DateTime?), 13], [Property: ApprovalRequest.Status (string) Required, 14] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 15], [Property: ApprovalStep.ActionDate (DateTime?), 16], [Property: ApprovalStep.ActionStatus (string), 17], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 18], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 19], [Property: ApprovalStep.ApproverName (string), 20], [Property: ApprovalStep.Comment (string), 21], [Property: ApprovalStep.Department (string), 22], [Property: ApprovalStep.IsFinalApprover (bool) Required, 23], [Property: ApprovalStep.Position (string), 24], [Property: ApprovalStep.Sequence (int) Required, 25], [Property: ApprovalStep.StepType (string), 26] }
                3 -> 15
                4 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 28], [Property: ApprovalAttachment.FileName (string) Required, 29], [Property: ApprovalAttachment.FilePath (string) Required, 30], [Property: ApprovalAttachment.FileSize (long?), 31], [Property: ApprovalAttachment.FileType (string), 32], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 33], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 34] }
                5 -> 27
            SELECT a2.ApprovalId, a2.ApplicantDepartment, a2.ApplicantEmployeeNumber, a2.ApplicantName, a2.ApplicantPosition, a2.ApprovalType, a2.ApproverComment, a2.CurrentApproverEmployeeNumber, a2.CurrentStep, a2.MisKey, a2.RequestContent, a2.RequestTitle, a2.RequestedAt, a2.RespondedAt, a2.Status, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber
            FROM 
            (
                SELECT TOP(2) a.ApprovalId, a.ApplicantDepartment, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantPosition, a.ApprovalType, a.ApproverComment, a.CurrentApproverEmployeeNumber, a.CurrentStep, a.MisKey, a.RequestContent, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.Status
                FROM ApprovalRequests AS a
                WHERE a.ApprovalId == @__id_0
            ) AS a2
            LEFT JOIN ApprovalSteps AS a0 ON a2.ApprovalId == a0.ApprovalId
            LEFT JOIN ApprovalAttachments AS a1 ON a2.ApprovalId == a1.ApprovalId
            ORDER BY a2.ApprovalId ASC, a0.StepId ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                ApprovalRequest entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalRequest instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalRequest);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalRequest.ApprovalId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindPrimaryKey()], 
                        keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalRequest)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]: 
                                {
                                    return 
                                    {
                                        ApprovalRequest instance;
                                        instance = new ApprovalRequest();
                                        instance.<ApprovalId>k__BackingField = dataReader.GetGuid(0);
                                        instance.<ApplicantDepartment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                        instance.<ApplicantEmployeeNumber>k__BackingField = dataReader.GetString(2);
                                        instance.<ApplicantName>k__BackingField = dataReader.GetString(3);
                                        instance.<ApplicantPosition>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                        instance.<ApprovalType>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                        instance.<ApproverComment>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                        instance.<CurrentApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                        instance.<CurrentStep>k__BackingField = dataReader.GetInt32(8);
                                        instance.<MisKey>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                        instance.<RequestContent>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<RequestTitle>k__BackingField = dataReader.GetString(11);
                                        instance.<RequestedAt>k__BackingField = dataReader.GetDateTime(12);
                                        instance.<RespondedAt>k__BackingField = dataReader.IsDBNull(13) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(13);
                                        instance.<Status>k__BackingField = dataReader.GetString(14);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalRequest | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalRequest)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Steps (List<ApprovalStep>) Collection ToDependent ApprovalStep Inverse: ApprovalRequest | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<ApprovalRequest, ApprovalRequest>(
                    collectionId: 1, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (ApprovalRequest)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        (object)(Guid?)dataReader.GetGuid(0), 
                        (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: ApprovalRequest.Attachments (List<ApprovalAttachment>) Collection ToDependent ApprovalAttachment Inverse: ApprovalRequest | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalStep>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalStep entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        ApprovalStep instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(ApprovalStep);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(15) ? default(object) : (object)dataReader.GetGuid(15) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (ApprovalStep)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                    {
                                        return 
                                        {
                                            ApprovalStep instance;
                                            instance = new ApprovalStep();
                                            instance.<StepId>k__BackingField = dataReader.IsDBNull(15) ? default(Guid) : dataReader.GetGuid(15);
                                            instance.<ActionDate>k__BackingField = dataReader.IsDBNull(16) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(16);
                                            instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(18) ? default(Guid) : dataReader.GetGuid(18);
                                            instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                            instance.<ApproverName>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                            instance.<Comment>k__BackingField = dataReader.IsDBNull(21) ? default(string) : dataReader.GetString(21);
                                            instance.<Department>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                            instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(23) ? default(bool) : dataReader.GetBoolean(23);
                                            instance.<Position>k__BackingField = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
                                            instance.<Sequence>k__BackingField = dataReader.IsDBNull(25) ? default(int) : dataReader.GetInt32(25);
                                            instance.<StepType>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalStep)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalStep.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Steps | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{11}, namelessParameter{12}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()].Add(
                        entity: namelessParameter{11}, 
                        value: namelessParameter{12}, 
                        forMaterialization: True);
                    return namelessParameter{12}.<ApprovalRequest>k__BackingField = namelessParameter{11};
                }, 
                trackingQuery: True);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<ApprovalRequest, ApprovalAttachment>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(15) ? default(Guid?) : (Guid?)dataReader.GetGuid(15) 
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(27) ? default(Guid?) : (Guid?)dataReader.GetGuid(27) }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                    (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    ApprovalAttachment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext3;
                        IEntityType entityType3;
                        ApprovalAttachment instance3;
                        InternalEntityEntry entry3;
                        bool hasNullKey3;
                        materializationContext3 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance3 = default(ApprovalAttachment);
                        entry3 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                            keyValues: new object[]{ dataReader.IsDBNull(27) ? default(object) : (object)dataReader.GetGuid(27) }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey3);
                        !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
                        {
                            entityType3 = entry3.EntityType;
                            return instance3 = (ApprovalAttachment)entry3.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot3;
                            shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType3 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{14} => namelessParameter{14}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                            instance3 = switch (entityType3)
                            {
                                case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{15} => namelessParameter{15}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                    {
                                        return 
                                        {
                                            ApprovalAttachment instance;
                                            instance = new ApprovalAttachment();
                                            instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(27) ? default(Guid) : dataReader.GetGuid(27);
                                            instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(28) ? default(Guid) : dataReader.GetGuid(28);
                                            instance.<FileName>k__BackingField = dataReader.IsDBNull(29) ? default(string) : dataReader.GetString(29);
                                            instance.<FilePath>k__BackingField = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
                                            instance.<FileSize>k__BackingField = dataReader.IsDBNull(31) ? default(long?) : (long?)dataReader.GetInt64(31);
                                            instance.<FileType>k__BackingField = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
                                            instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(33) ? default(DateTime) : dataReader.GetDateTime(33);
                                            instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(34) ? default(string) : dataReader.GetString(34);
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext3.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(ApprovalAttachment)
                            }
                            ;
                            entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType3, 
                                entity: instance3, 
                                snapshot: shadowSnapshot3);
                            return instance3;
                        } : default(void);
                        return instance3;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: ApprovalAttachment.ApprovalRequest (ApprovalRequest) ToPrincipal ApprovalRequest Inverse: Attachments | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindNavigation("ApprovalRequest")], 
                fixup: (namelessParameter{18}, namelessParameter{19}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{20} => namelessParameter{20}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()].Add(
                        entity: namelessParameter{18}, 
                        value: namelessParameter{19}, 
                        forMaterialization: True);
                    return namelessParameter{19}.<ApprovalRequest>k__BackingField = namelessParameter{18};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (ApprovalRequest)(resultContext.Values[0]) : default(ApprovalRequest);
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-17 10:00:43.193 +09:00 [DBG] Creating DbConnection.
2025-06-17 10:00:43.193 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 10:00:43.193 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 10:00:43.193 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:43.193 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 10:00:43.194 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 10:00:43.194 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-17 10:00:43.194 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 10:00:43.195 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 10:00:43.197 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:43.213 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:43.214 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:43.214 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 10:00:43.214 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:43.214 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 18ms reading results.
2025-06-17 10:00:43.214 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 10:00:43.214 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 10:00:43.214 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 10:00:43.214 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 10:00:43.214 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 10:00:43.214 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 10:00:43.214 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 10:00:43.214 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-17 10:00:43.215 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 54.1086ms
2025-06-17 10:00:43.215 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 10:00:43.215 +09:00 [DBG] Connection id "0HNDD77GPRQUP" completed keep alive response.
2025-06-17 10:00:43.215 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 10:00:43.215 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 10:00:43.215 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 10:00:43.215 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1 - 200 null application/json; charset=utf-8 62.8095ms
2025-06-17 10:01:57.735 +09:00 [DBG] Connection id "0HNDD77GPRQUP" received FIN.
2025-06-17 10:01:57.737 +09:00 [DBG] Connection id "0HNDD77GPRQUP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 10:01:57.738 +09:00 [DBG] Connection id "0HNDD77GPRQUP" disconnecting.
2025-06-17 10:01:57.742 +09:00 [DBG] Connection id "0HNDD77GPRQUP" stopped.
2025-06-17 11:14:32.823 +09:00 [DBG] Connection id "0HNDD77GPRQUQ" accepted.
2025-06-17 11:14:32.825 +09:00 [DBG] Connection id "0HNDD77GPRQUQ" started.
2025-06-17 11:14:32.861 +09:00 [DBG] Connection 0HNDD77GPRQUQ established using the following protocol: "Tls12"
2025-06-17 11:14:32.879 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 11:14:32.883 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:14:32.884 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:14:32.895 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:32.897 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 11:14:32.897 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:32.900 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 11:14:32.901 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 11:14:32.901 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 11:14:32.901 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:14:32.901 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 11:14:32.901 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:14:32.902 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:14:32.910 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:14:32.912 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 11:14:32.912 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 11:14:32.913 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:14:32.913 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:14:32.913 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 11:14:32.914 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 11:14:32.925 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 11:14:32.938 +09:00 [DBG] Creating DbConnection.
2025-06-17 11:14:32.943 +09:00 [DBG] Created DbConnection. (4ms).
2025-06-17 11:14:32.947 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:14:32.950 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:32.952 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 11:14:32.953 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-06-17 11:14:32.956 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-06-17 11:14:32.960 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:14:32.963 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:14:32.965 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.965 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.965 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.966 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.966 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.966 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.968 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.968 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.968 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.968 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.968 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.968 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.968 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.968 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:32.968 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:32.968 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-17 11:14:32.968 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:32.968 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:14:32.969 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 11:14:32.969 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 11:14:32.969 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 11:14:32.969 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 11:14:32.969 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 11:14:32.969 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 11:14:32.973 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 71.7616ms
2025-06-17 11:14:32.973 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:32.973 +09:00 [DBG] Connection id "0HNDD77GPRQUQ" completed keep alive response.
2025-06-17 11:14:32.974 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 11:14:32.974 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:14:32.974 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:14:32.974 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 96.3475ms
2025-06-17 11:14:37.898 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 11:14:37.899 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:14:37.899 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:14:37.899 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:37.900 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 11:14:37.900 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:37.900 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 11:14:37.901 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 11:14:37.901 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 11:14:37.901 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:14:37.901 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 11:14:37.901 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:14:37.901 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:14:37.901 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:14:37.901 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 11:14:37.901 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 11:14:37.902 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:14:37.902 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:14:37.902 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 11:14:37.902 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 11:14:37.902 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 11:14:37.902 +09:00 [DBG] Creating DbConnection.
2025-06-17 11:14:37.903 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 11:14:37.903 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:14:37.903 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:37.903 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 11:14:37.903 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:14:37.903 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:14:37.903 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:14:37.904 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:37.904 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:37.904 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-17 11:14:37.905 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:37.905 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:14:37.905 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 11:14:37.905 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 11:14:37.905 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 11:14:37.905 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 11:14:37.905 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 11:14:37.905 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 11:14:37.905 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 4.2347ms
2025-06-17 11:14:37.905 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:37.905 +09:00 [DBG] Connection id "0HNDD77GPRQUQ" completed keep alive response.
2025-06-17 11:14:37.905 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 11:14:37.905 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:14:37.905 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:14:37.906 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 7.5548ms
2025-06-17 11:14:42.129 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 11:14:42.130 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:14:42.131 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:14:42.131 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:42.131 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 11:14:42.131 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:42.131 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 11:14:42.131 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 11:14:42.131 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 11:14:42.131 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:14:42.131 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 11:14:42.131 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:14:42.131 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:14:42.132 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:14:42.132 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 11:14:42.132 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 11:14:42.132 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:14:42.132 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:14:42.132 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 11:14:42.132 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 11:14:42.132 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 11:14:42.133 +09:00 [DBG] Creating DbConnection.
2025-06-17 11:14:42.133 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 11:14:42.133 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:14:42.133 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:42.134 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 11:14:42.134 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:14:42.134 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:14:42.134 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:14:42.134 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:14:42.135 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.135 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.135 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.136 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:42.136 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:42.136 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-17 11:14:42.136 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:42.136 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:14:42.136 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 11:14:42.137 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 11:14:42.137 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 11:14:42.137 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 11:14:42.137 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 11:14:42.137 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 11:14:42.137 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 5.5406ms
2025-06-17 11:14:42.137 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:42.137 +09:00 [DBG] Connection id "0HNDD77GPRQUQ" completed keep alive response.
2025-06-17 11:14:42.137 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 11:14:42.137 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:14:42.137 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:14:42.137 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 7.9698ms
2025-06-17 11:14:47.438 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 11:14:47.440 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:14:47.441 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:14:47.444 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:47.445 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 11:14:47.445 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:47.445 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 11:14:47.445 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 11:14:47.445 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 11:14:47.446 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:14:47.446 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 11:14:47.446 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:14:47.447 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:14:47.447 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:14:47.448 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 11:14:47.448 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 11:14:47.448 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:14:47.448 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:14:47.448 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 11:14:47.448 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 11:14:47.449 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 11:14:47.449 +09:00 [DBG] Creating DbConnection.
2025-06-17 11:14:47.449 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 11:14:47.450 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:14:47.450 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:47.450 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 11:14:47.451 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:14:47.451 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:14:47.451 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:14:47.452 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:14:47.452 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.452 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.452 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.453 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.453 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.453 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.453 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.453 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.453 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.453 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.453 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.454 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.454 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.454 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:47.454 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:47.454 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-17 11:14:47.455 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:47.455 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:14:47.455 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 11:14:47.455 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 11:14:47.455 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 11:14:47.456 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 11:14:47.456 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 11:14:47.456 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 11:14:47.457 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 10.014ms
2025-06-17 11:14:47.457 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:47.457 +09:00 [DBG] Connection id "0HNDD77GPRQUQ" completed keep alive response.
2025-06-17 11:14:47.457 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 11:14:47.457 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:14:47.459 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-17 11:14:47.459 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 20.5698ms
2025-06-17 11:14:52.146 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 11:14:52.146 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:14:52.146 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:14:52.147 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:52.147 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 11:14:52.147 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:52.147 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 11:14:52.147 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 11:14:52.147 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 11:14:52.147 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:14:52.147 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 11:14:52.147 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:14:52.148 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:14:52.148 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:14:52.148 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 11:14:52.148 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 11:14:52.148 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:14:52.148 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:14:52.149 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 11:14:52.149 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 11:14:52.150 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 11:14:52.151 +09:00 [DBG] Creating DbConnection.
2025-06-17 11:14:52.151 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 11:14:52.151 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:14:52.151 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:52.152 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 11:14:52.152 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:14:52.152 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:14:52.152 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:14:52.153 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:14:52.153 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.154 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.154 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.154 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.154 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.154 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.154 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.154 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.155 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.155 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.155 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.155 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.155 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.155 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:14:52.155 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:52.155 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-17 11:14:52.155 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:14:52.156 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:14:52.156 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 11:14:52.156 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 11:14:52.156 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 11:14:52.157 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 11:14:52.157 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 11:14:52.157 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 11:14:52.158 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 9.995ms
2025-06-17 11:14:52.158 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:14:52.159 +09:00 [DBG] Connection id "0HNDD77GPRQUQ" completed keep alive response.
2025-06-17 11:14:52.159 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 11:14:52.159 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:14:52.159 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:14:52.159 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 13.3965ms
2025-06-17 11:16:02.805 +09:00 [DBG] Connection id "0HNDD77GPRQUQ" received FIN.
2025-06-17 11:16:02.809 +09:00 [DBG] Connection id "0HNDD77GPRQUQ" disconnecting.
2025-06-17 11:16:02.810 +09:00 [DBG] Connection id "0HNDD77GPRQUQ" stopped.
2025-06-17 11:16:02.812 +09:00 [DBG] Connection id "0HNDD77GPRQUQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 11:30:16.857 +09:00 [DBG] Connection id "0HNDD77GPRQUR" accepted.
2025-06-17 11:30:16.858 +09:00 [DBG] Connection id "0HNDD77GPRQUR" started.
2025-06-17 11:30:16.883 +09:00 [DBG] Connection 0HNDD77GPRQUR established using the following protocol: "Tls12"
2025-06-17 11:30:16.887 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 11:30:16.888 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:30:16.888 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:30:16.889 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:30:16.889 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 11:30:16.890 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:30:16.890 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 11:30:16.890 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 11:30:16.890 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 11:30:16.890 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:30:16.892 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 11:30:16.892 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:30:16.892 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:30:16.893 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:30:16.893 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 11:30:16.893 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 11:30:16.893 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:30:16.893 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:30:16.893 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 11:30:16.894 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 11:30:16.895 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 11:30:16.896 +09:00 [DBG] Creating DbConnection.
2025-06-17 11:30:16.896 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 11:30:16.896 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:30:16.897 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:16.897 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 11:30:16.897 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:30:16.897 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:30:16.897 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:30:16.897 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:30:16.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:16.901 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:16.901 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-17 11:30:16.901 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:16.901 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:30:16.901 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 11:30:16.901 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 11:30:16.901 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 11:30:16.901 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 11:30:16.901 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 11:30:16.901 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 11:30:16.902 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 9.5213ms
2025-06-17 11:30:16.902 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:30:16.902 +09:00 [DBG] Connection id "0HNDD77GPRQUR" completed keep alive response.
2025-06-17 11:30:16.902 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 11:30:16.902 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:30:16.902 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:30:16.902 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 14.9975ms
2025-06-17 11:30:17.885 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-17 11:30:17.886 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 11:30:17.886 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-17 11:30:17.887 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 11:30:17.887 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 11:30:17.887 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 11:30:17.887 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API).
2025-06-17 11:30:17.887 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 11:30:17.887 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 11:30:17.887 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:30:17.887 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 11:30:17.887 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:30:17.888 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 11:30:17.888 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (ApprovalService.API)
2025-06-17 11:30:17.888 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-17 11:30:17.891 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-17 11:30:17.891 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 11:30:17.891 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-17 11:30:17.891 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-17 11:30:17.891 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-17 11:30:17.892 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 11:30:17.894 +09:00 [DBG] Creating DbConnection.
2025-06-17 11:30:17.894 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 11:30:17.894 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:30:17.895 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:17.895 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 11:30:17.895 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:30:17.895 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:30:17.895 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 11:30:17.895 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-17 11:30:17.896 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:17.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:17.897 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:17.897 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-17 11:30:17.897 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:17.897 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:30:17.897 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 11:30:17.897 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 11:30:17.897 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 11:30:17.898 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 11:30:17.898 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 11:30:17.898 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 11:30:17.898 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API) in 10.568ms
2025-06-17 11:30:17.898 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (ApprovalService.API)'
2025-06-17 11:30:17.898 +09:00 [DBG] Connection id "0HNDD77GPRQUR" completed keep alive response.
2025-06-17 11:30:17.899 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 11:30:17.899 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:30:17.899 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:30:17.899 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 13.8963ms
2025-06-17 11:30:20.276 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 11:30:20.277 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:30:20.278 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:30:20.279 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:30:20.280 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 11:30:20.280 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:30:20.280 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 11:30:20.281 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 11:30:20.281 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 11:30:20.282 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:30:20.282 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 11:30:20.282 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:30:20.282 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:30:20.283 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:30:20.284 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 11:30:20.284 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 11:30:20.284 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:30:20.284 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:30:20.284 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 11:30:20.284 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 11:30:20.285 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 11:30:20.286 +09:00 [DBG] Creating DbConnection.
2025-06-17 11:30:20.286 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 11:30:20.286 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:30:20.287 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:20.287 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 11:30:20.287 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:30:20.287 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:30:20.287 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:30:20.288 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:30:20.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.288 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.289 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:20.289 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:20.289 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-17 11:30:20.289 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:20.289 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:30:20.290 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 11:30:20.290 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 11:30:20.290 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 11:30:20.290 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 11:30:20.290 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 11:30:20.290 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 11:30:20.296 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 12.905ms
2025-06-17 11:30:20.296 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:30:20.296 +09:00 [DBG] Connection id "0HNDD77GPRQUR" completed keep alive response.
2025-06-17 11:30:20.297 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 11:30:20.297 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:30:20.297 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:30:20.298 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 21.64ms
2025-06-17 11:30:25.222 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1 - null null
2025-06-17 11:30:25.223 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1'
2025-06-17 11:30:25.223 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1'
2025-06-17 11:30:25.223 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 11:30:25.224 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 11:30:25.224 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 11:30:25.225 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 11:30:25.225 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 11:30:25.225 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 11:30:25.225 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:30:25.225 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 11:30:25.226 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:30:25.226 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:30:25.227 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:30:25.227 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 11:30:25.228 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-17 11:30:25.230 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 11:30:25.230 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 11:30:25.230 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 11:30:25.230 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-17 11:30:25.232 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 11:30:25.235 +09:00 [DBG] Creating DbConnection.
2025-06-17 11:30:25.235 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 11:30:25.235 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:30:25.235 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:25.235 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 11:30:25.235 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:30:25.236 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:30:25.236 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 11:30:25.236 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 11:30:25.237 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:25.242 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:25.242 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:25.242 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:25.242 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:25.242 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 5ms reading results.
2025-06-17 11:30:25.242 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:25.242 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:30:25.242 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 11:30:25.242 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 11:30:25.242 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 11:30:25.243 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 11:30:25.243 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 11:30:25.243 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-17 11:30:25.243 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 17.2636ms
2025-06-17 11:30:25.243 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 11:30:25.243 +09:00 [DBG] Connection id "0HNDD77GPRQUR" completed keep alive response.
2025-06-17 11:30:25.243 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 11:30:25.243 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:30:25.243 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:30:25.243 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1 - 200 null application/json; charset=utf-8 21.054ms
2025-06-17 11:30:28.506 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 11:30:28.506 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:30:28.506 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:30:28.506 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:30:28.506 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 11:30:28.507 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:30:28.507 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 11:30:28.507 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 11:30:28.507 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 11:30:28.507 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:30:28.507 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 11:30:28.507 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:30:28.507 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:30:28.507 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:30:28.507 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 11:30:28.508 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 11:30:28.508 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:30:28.508 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:30:28.508 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 11:30:28.509 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 11:30:28.509 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 11:30:28.509 +09:00 [DBG] Creating DbConnection.
2025-06-17 11:30:28.510 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 11:30:28.510 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:30:28.510 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:28.510 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 11:30:28.510 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:30:28.510 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:30:28.510 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:30:28.510 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:30:28.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.512 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.512 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.512 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:30:28.513 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:28.513 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-17 11:30:28.513 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:30:28.514 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:30:28.515 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 11:30:28.515 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 11:30:28.515 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 11:30:28.515 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 11:30:28.515 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 11:30:28.515 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 11:30:28.515 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 8.3034ms
2025-06-17 11:30:28.516 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:30:28.516 +09:00 [DBG] Connection id "0HNDD77GPRQUR" completed keep alive response.
2025-06-17 11:30:28.516 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 11:30:28.516 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:30:28.516 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:30:28.516 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 10.2081ms
2025-06-17 11:31:32.016 +09:00 [DBG] Connection id "0HNDD77GPRQUR" received FIN.
2025-06-17 11:31:32.021 +09:00 [DBG] Connection id "0HNDD77GPRQUR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 11:31:32.021 +09:00 [DBG] Connection id "0HNDD77GPRQUR" disconnecting.
2025-06-17 11:31:32.022 +09:00 [DBG] Connection id "0HNDD77GPRQUR" stopped.
2025-06-17 11:31:47.350 +09:00 [DBG] Connection id "0HNDD77GPRQUS" accepted.
2025-06-17 11:31:47.350 +09:00 [DBG] Connection id "0HNDD77GPRQUS" started.
2025-06-17 11:31:47.376 +09:00 [DBG] Connection 0HNDD77GPRQUS established using the following protocol: "Tls12"
2025-06-17 11:31:47.381 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1 - null null
2025-06-17 11:31:47.382 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1'
2025-06-17 11:31:47.382 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1'
2025-06-17 11:31:47.383 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 11:31:47.383 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 11:31:47.384 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 11:31:47.384 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 11:31:47.384 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 11:31:47.384 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 11:31:47.384 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:31:47.384 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 11:31:47.384 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:31:47.384 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:31:47.385 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:31:47.385 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 11:31:47.385 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-17 11:31:47.385 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 11:31:47.385 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 11:31:47.385 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 11:31:47.385 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-17 11:31:47.386 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 11:31:47.388 +09:00 [DBG] Creating DbConnection.
2025-06-17 11:31:47.388 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 11:31:47.388 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:31:47.388 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:31:47.388 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 11:31:47.389 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:31:47.389 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:31:47.389 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 11:31:47.389 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 11:31:47.390 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:47.391 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:47.392 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:47.392 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:47.392 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:31:47.392 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-17 11:31:47.393 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:31:47.393 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:31:47.393 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 11:31:47.393 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 11:31:47.393 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 11:31:47.393 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 11:31:47.393 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 11:31:47.393 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-17 11:31:47.394 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 9.274ms
2025-06-17 11:31:47.394 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 11:31:47.394 +09:00 [DBG] Connection id "0HNDD77GPRQUS" completed keep alive response.
2025-06-17 11:31:47.394 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 11:31:47.394 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:31:47.394 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:31:47.394 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/d7cf2f8f-396f-4df3-a2d6-7877f4035cc1 - 200 null application/json; charset=utf-8 13.3405ms
2025-06-17 11:31:50.570 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-17 11:31:50.570 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:31:50.570 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-17 11:31:50.571 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:31:50.571 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 11:31:50.571 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:31:50.571 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 11:31:50.571 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 11:31:50.571 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 11:31:50.572 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:31:50.572 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 11:31:50.572 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:31:50.572 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:31:50.573 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:31:50.573 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-17 11:31:50.573 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-17 11:31:50.573 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:31:50.573 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-17 11:31:50.573 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-17 11:31:50.573 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-17 11:31:50.574 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 11:31:50.575 +09:00 [DBG] Creating DbConnection.
2025-06-17 11:31:50.575 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 11:31:50.575 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:31:50.575 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:31:50.576 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 11:31:50.576 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:31:50.576 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:31:50.576 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:31:50.577 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-17 11:31:50.577 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.577 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.577 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.577 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.578 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.578 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.578 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.578 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.578 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.578 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.578 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.578 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.578 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.579 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:50.579 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:31:50.579 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-17 11:31:50.579 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:31:50.579 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:31:50.579 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 11:31:50.579 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 11:31:50.579 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 11:31:50.579 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 11:31:50.579 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 11:31:50.579 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, ApprovalService.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-17 11:31:50.580 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API) in 7.6982ms
2025-06-17 11:31:50.580 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (ApprovalService.API)'
2025-06-17 11:31:50.580 +09:00 [DBG] Connection id "0HNDD77GPRQUS" completed keep alive response.
2025-06-17 11:31:50.580 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 11:31:50.580 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:31:50.580 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:31:50.581 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 10.6052ms
2025-06-17 11:31:52.833 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374 - null null
2025-06-17 11:31:52.833 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374'
2025-06-17 11:31:52.833 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)' with route pattern 'api/ApprovalRequest/{approvalId}' is valid for the request path '/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374'
2025-06-17 11:31:52.833 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 11:31:52.834 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-17 11:31:52.834 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 11:31:52.834 +09:00 [INF] Route matched with {action = "GetRequestById", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequestById(System.Guid) on controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API).
2025-06-17 11:31:52.834 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-17 11:31:52.834 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-17 11:31:52.834 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:31:52.834 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-17 11:31:52.834 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-17 11:31:52.835 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:31:52.835 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (ApprovalService.API)
2025-06-17 11:31:52.835 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 11:31:52.835 +09:00 [DBG] Attempting to bind parameter 'approvalId' of type 'System.Guid' using the name 'approvalId' in request data ...
2025-06-17 11:31:52.836 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 11:31:52.836 +09:00 [DBG] Done attempting to bind parameter 'approvalId' of type 'System.Guid'.
2025-06-17 11:31:52.836 +09:00 [DBG] Attempting to validate the bound parameter 'approvalId' of type 'System.Guid' ...
2025-06-17 11:31:52.836 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalId' of type 'System.Guid'.
2025-06-17 11:31:52.836 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-17 11:31:52.837 +09:00 [DBG] Creating DbConnection.
2025-06-17 11:31:52.837 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-17 11:31:52.837 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:31:52.837 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:31:52.837 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-17 11:31:52.837 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:31:52.838 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-17 11:31:52.838 +09:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 11:31:52.839 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT "a2"."ApprovalId", "a2"."ApplicantDepartment", "a2"."ApplicantEmployeeNumber", "a2"."ApplicantName", "a2"."ApplicantPosition", "a2"."ApprovalType", "a2"."ApproverComment", "a2"."CurrentApproverEmployeeNumber", "a2"."CurrentStep", "a2"."MisKey", "a2"."RequestContent", "a2"."RequestTitle", "a2"."RequestedAt", "a2"."RespondedAt", "a2"."Status", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber"
FROM (
    SELECT "a"."ApprovalId", "a"."ApplicantDepartment", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantPosition", "a"."ApprovalType", "a"."ApproverComment", "a"."CurrentApproverEmployeeNumber", "a"."CurrentStep", "a"."MisKey", "a"."RequestContent", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."Status"
    FROM "ApprovalRequests" AS "a"
    WHERE "a"."ApprovalId" = @__id_0
    LIMIT 2
) AS "a2"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a2"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a2"."ApprovalId" = "a1"."ApprovalId"
ORDER BY "a2"."ApprovalId", "a0"."StepId"
2025-06-17 11:31:52.840 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:52.840 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:52.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-17 11:31:52.849 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:31:52.849 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 9ms reading results.
2025-06-17 11:31:52.850 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-17 11:31:52.850 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:31:52.850 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-17 11:31:52.850 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-17 11:31:52.850 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-17 11:31:52.850 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-17 11:31:52.850 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-17 11:31:52.850 +09:00 [INF] Executing OkObjectResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequest'.
2025-06-17 11:31:52.851 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API) in 16.2727ms
2025-06-17 11:31:52.851 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (ApprovalService.API)'
2025-06-17 11:31:52.851 +09:00 [DBG] Connection id "0HNDD77GPRQUS" completed keep alive response.
2025-06-17 11:31:52.852 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-17 11:31:52.852 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-17 11:31:52.852 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-17 11:31:52.852 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/eea967d0-250c-4292-a781-02b195552374 - 200 null application/json; charset=utf-8 19.2948ms
2025-06-17 11:33:02.358 +09:00 [DBG] Connection id "0HNDD77GPRQUS" received FIN.
2025-06-17 11:33:02.373 +09:00 [DBG] Connection id "0HNDD77GPRQUS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 11:33:02.384 +09:00 [DBG] Connection id "0HNDD77GPRQUS" disconnecting.
2025-06-17 11:33:02.463 +09:00 [DBG] Connection id "0HNDD77GPRQUS" stopped.
2025-06-17 13:16:13.528 +09:00 [DBG] Connection id "0HNDD77GPRQUT" accepted.
2025-06-17 13:16:13.529 +09:00 [DBG] Connection id "0HNDD77GPRQUT" started.
2025-06-17 13:16:13.541 +09:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Cannot determine the frame size or a corrupted frame was received.
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-17 13:16:13.567 +09:00 [DBG] Connection id "0HNDD77GPRQUT" stopped.
2025-06-17 13:16:13.567 +09:00 [DBG] Connection id "0HNDD77GPRQUT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 13:16:14.980 +09:00 [DBG] Connection id "0HNDD77GPRQUU" accepted.
2025-06-17 13:16:14.981 +09:00 [DBG] Connection id "0HNDD77GPRQUU" started.
2025-06-17 13:16:14.982 +09:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Cannot determine the frame size or a corrupted frame was received.
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-17 13:16:14.983 +09:00 [DBG] Connection id "0HNDD77GPRQUU" stopped.
2025-06-17 13:16:14.983 +09:00 [DBG] Connection id "0HNDD77GPRQUU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 13:17:05.161 +09:00 [DBG] Connection id "0HNDD77GPRQUV" accepted.
2025-06-17 13:17:05.163 +09:00 [DBG] Connection id "0HNDD77GPRQUV" started.
2025-06-17 13:17:05.164 +09:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Cannot determine the frame size or a corrupted frame was received.
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-17 13:17:05.166 +09:00 [DBG] Connection id "0HNDD77GPRQUV" stopped.
2025-06-17 13:17:05.166 +09:00 [DBG] Connection id "0HNDD77GPRQUV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 19:44:32.851 +09:00 [DBG] Connection id "0HNDD77GPRQV0" accepted.
2025-06-17 19:44:32.855 +09:00 [DBG] Connection id "0HNDD77GPRQV0" started.
2025-06-17 19:44:32.869 +09:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Cannot determine the frame size or a corrupted frame was received.
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-17 19:44:32.883 +09:00 [DBG] Connection id "0HNDD77GPRQV0" stopped.
2025-06-17 19:44:32.884 +09:00 [DBG] Connection id "0HNDD77GPRQV0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 19:48:43.565 +09:00 [DBG] Connection id "0HNDD77GPRQV1" accepted.
2025-06-17 19:48:43.566 +09:00 [DBG] Connection id "0HNDD77GPRQV1" started.
2025-06-17 19:48:43.612 +09:00 [DBG] Connection 0HNDD77GPRQV1 established using the following protocol: "Tls12"
2025-06-17 19:48:43.650 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvals/{approvalId} - null null
2025-06-17 19:48:43.658 +09:00 [DBG] No candidates found for the request path '/api/approvals/{approvalId}'
2025-06-17 19:48:43.660 +09:00 [DBG] Request did not match any endpoints
2025-06-17 19:48:43.671 +09:00 [DBG] The request path  does not match the path filter
2025-06-17 19:48:43.677 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvals/{approvalId} - 404 0 null 27.4547ms
2025-06-17 19:48:43.692 +09:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:5001/api/approvals/%7BapprovalId%7D, Response status code: 404
2025-06-17 19:48:43.692 +09:00 [DBG] Connection id "0HNDD77GPRQV1" disconnecting.
2025-06-17 19:48:43.692 +09:00 [DBG] Connection id "0HNDD77GPRQV1" stopped.
2025-06-17 19:48:43.692 +09:00 [DBG] Connection id "0HNDD77GPRQV1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 20:01:31.201 +09:00 [DBG] Connection id "0HNDD77GPRQV2" accepted.
2025-06-17 20:01:31.204 +09:00 [DBG] Connection id "0HNDD77GPRQV2" started.
2025-06-17 20:01:31.237 +09:00 [DBG] Connection 0HNDD77GPRQV2 established using the following protocol: "Tls12"
2025-06-17 20:01:31.255 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvals - application/json 156
2025-06-17 20:01:31.256 +09:00 [DBG] No candidates found for the request path '/api/approvals'
2025-06-17 20:01:31.256 +09:00 [DBG] Request did not match any endpoints
2025-06-17 20:01:31.259 +09:00 [DBG] POST requests are not supported
2025-06-17 20:01:31.260 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvals - 404 0 null 5.8654ms
2025-06-17 20:01:31.261 +09:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:5001/api/approvals, Response status code: 404
2025-06-17 20:01:31.267 +09:00 [DBG] Connection id "0HNDD77GPRQV2", Request id "0HNDD77GPRQV2:00000001": started reading request body.
2025-06-17 20:01:31.268 +09:00 [DBG] Connection id "0HNDD77GPRQV2", Request id "0HNDD77GPRQV2:00000001": done reading request body.
2025-06-17 20:01:31.269 +09:00 [DBG] Connection id "0HNDD77GPRQV2" disconnecting.
2025-06-17 20:01:31.269 +09:00 [DBG] Connection id "0HNDD77GPRQV2" stopped.
2025-06-17 20:01:31.269 +09:00 [DBG] Connection id "0HNDD77GPRQV2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-17 20:01:34.475 +09:00 [DBG] Connection id "0HNDD77GPRQV3" accepted.
2025-06-17 20:01:34.475 +09:00 [DBG] Connection id "0HNDD77GPRQV3" started.
2025-06-17 20:01:34.504 +09:00 [DBG] Connection 0HNDD77GPRQV3 established using the following protocol: "Tls12"
2025-06-17 20:01:34.505 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvals/{approvalId} - null null
2025-06-17 20:01:34.505 +09:00 [DBG] No candidates found for the request path '/api/approvals/{approvalId}'
2025-06-17 20:01:34.505 +09:00 [DBG] Request did not match any endpoints
2025-06-17 20:01:34.506 +09:00 [DBG] The request path  does not match the path filter
2025-06-17 20:01:34.506 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvals/{approvalId} - 404 0 null 0.7258ms
2025-06-17 20:01:34.506 +09:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:5001/api/approvals/%7BapprovalId%7D, Response status code: 404
2025-06-17 20:01:34.506 +09:00 [DBG] Connection id "0HNDD77GPRQV3" disconnecting.
2025-06-17 20:01:34.506 +09:00 [DBG] Connection id "0HNDD77GPRQV3" stopped.
2025-06-17 20:01:34.506 +09:00 [DBG] Connection id "0HNDD77GPRQV3" sending FIN because: "The Socket transport's send loop completed gracefully."
