2025-06-20 00:03:24.376 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:03:24.420 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0132ms - processed: 0 items - remaining: 1 items
2025-06-20 00:06:07.730 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:06:07.731 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0145ms - processed: 0 items - remaining: 1 items
2025-06-20 00:06:17.733 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:06:17.733 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-06-20 00:06:27.735 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:06:27.736 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0065ms - processed: 0 items - remaining: 1 items
2025-06-20 00:08:44.638 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:08:44.639 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-06-20 00:34:26.423 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:34:26.424 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0288ms - processed: 0 items - remaining: 1 items
2025-06-20 00:34:36.423 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:34:36.424 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0167ms - processed: 0 items - remaining: 1 items
2025-06-20 00:34:46.424 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:34:46.425 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-06-20 00:44:26.238 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:44:26.240 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0291ms - processed: 0 items - remaining: 1 items
2025-06-20 00:44:36.240 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:44:36.241 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-06-20 00:44:46.243 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:44:46.244 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-06-20 00:55:50.342 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:55:50.343 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0099ms - processed: 0 items - remaining: 1 items
2025-06-20 00:56:00.328 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:56:00.328 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 00:56:10.321 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 00:56:10.322 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0053ms - processed: 0 items - remaining: 1 items
2025-06-20 01:12:18.555 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 01:12:18.556 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0108ms - processed: 0 items - remaining: 1 items
2025-06-20 01:46:09.590 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 01:46:09.591 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 02:19:43.821 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 02:19:43.822 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.032ms - processed: 0 items - remaining: 1 items
2025-06-20 02:54:15.994 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 02:54:15.994 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.007ms - processed: 0 items - remaining: 1 items
2025-06-20 03:27:44.258 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 03:27:44.259 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0119ms - processed: 0 items - remaining: 1 items
2025-06-20 04:02:24.386 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 04:02:24.494 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.011ms - processed: 0 items - remaining: 1 items
2025-06-20 04:02:34.492 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 04:02:34.493 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-06-20 04:02:44.495 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 04:02:44.496 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0157ms - processed: 0 items - remaining: 1 items
2025-06-20 04:18:58.649 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 04:18:58.651 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0447ms - processed: 0 items - remaining: 1 items
2025-06-20 04:26:37.010 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 04:26:37.010 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-06-20 04:26:47.016 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 04:26:47.016 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2025-06-20 04:26:57.019 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 04:26:57.020 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-06-20 04:43:12.106 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 04:43:12.107 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0175ms - processed: 0 items - remaining: 1 items
2025-06-20 04:43:26.084 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 04:43:26.084 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-06-20 04:43:36.089 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 04:43:36.089 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-06-20 04:43:46.092 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 04:43:46.092 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2025-06-20 04:48:14.548 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 04:48:14.548 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0052ms - processed: 0 items - remaining: 1 items
2025-06-20 05:03:32.936 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:03:32.938 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0058ms - processed: 0 items - remaining: 1 items
2025-06-20 05:09:34.708 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:09:34.799 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0248ms - processed: 0 items - remaining: 1 items
2025-06-20 05:43:36.276 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:43:36.277 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0205ms - processed: 0 items - remaining: 1 items
2025-06-20 05:45:20.361 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:45:20.362 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-06-20 05:45:30.363 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:45:30.364 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0054ms - processed: 0 items - remaining: 1 items
2025-06-20 05:45:40.366 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:45:40.367 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2025-06-20 05:46:12.001 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:46:12.001 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-06-20 05:46:24.318 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:46:24.319 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0144ms - processed: 0 items - remaining: 1 items
2025-06-20 05:46:47.080 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:46:47.081 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0159ms - processed: 0 items - remaining: 1 items
2025-06-20 05:46:57.085 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:46:57.086 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0212ms - processed: 0 items - remaining: 1 items
2025-06-20 05:47:07.087 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:47:07.088 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-06-20 05:49:08.099 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:49:08.103 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0513ms - processed: 0 items - remaining: 1 items
2025-06-20 05:49:18.114 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:49:18.123 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0217ms - processed: 0 items - remaining: 1 items
2025-06-20 05:49:28.363 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:49:28.369 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 1.825ms - processed: 0 items - remaining: 1 items
2025-06-20 05:49:38.379 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:49:38.381 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0964ms - processed: 0 items - remaining: 1 items
2025-06-20 05:49:48.399 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:49:48.414 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0169ms - processed: 0 items - remaining: 1 items
2025-06-20 05:49:58.530 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:49:58.531 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0091ms - processed: 0 items - remaining: 1 items
2025-06-20 05:50:08.537 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:50:08.538 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0112ms - processed: 0 items - remaining: 1 items
2025-06-20 05:50:18.730 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:50:18.732 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0144ms - processed: 0 items - remaining: 1 items
2025-06-20 05:50:28.738 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:50:28.774 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4438ms - processed: 0 items - remaining: 1 items
2025-06-20 05:50:38.776 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:50:38.777 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0152ms - processed: 0 items - remaining: 1 items
2025-06-20 05:50:48.784 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:50:48.786 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0137ms - processed: 0 items - remaining: 1 items
2025-06-20 05:50:58.791 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:50:58.792 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0072ms - processed: 0 items - remaining: 1 items
2025-06-20 05:51:08.792 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:51:08.793 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-06-20 05:51:18.794 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:51:18.795 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-06-20 05:51:28.796 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:51:28.797 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2025-06-20 05:51:38.797 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:51:38.798 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-06-20 05:51:48.799 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:51:48.800 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 05:51:58.800 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:51:58.801 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-06-20 05:52:08.802 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:52:08.802 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-06-20 05:52:18.802 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:52:18.802 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-06-20 05:52:28.803 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:52:28.805 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0175ms - processed: 0 items - remaining: 1 items
2025-06-20 05:52:38.806 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:52:38.807 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-06-20 05:52:48.807 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:52:48.807 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-06-20 05:52:58.809 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:52:58.809 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-06-20 05:53:08.810 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:53:08.811 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0068ms - processed: 0 items - remaining: 1 items
2025-06-20 05:53:18.812 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:53:18.813 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-06-20 05:53:28.814 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:53:28.815 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-06-20 05:53:38.816 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:53:38.816 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-06-20 05:53:48.818 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:53:48.818 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 05:53:58.820 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:53:58.820 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0045ms - processed: 0 items - remaining: 1 items
2025-06-20 05:54:08.821 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:54:08.822 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-06-20 05:54:18.824 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:54:18.824 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2025-06-20 05:54:28.825 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:54:28.827 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-06-20 05:54:38.829 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:54:38.829 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0058ms - processed: 0 items - remaining: 1 items
2025-06-20 05:54:48.831 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:54:48.831 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0105ms - processed: 0 items - remaining: 1 items
2025-06-20 05:54:58.832 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:54:58.832 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-06-20 05:55:08.833 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:55:08.834 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0123ms - processed: 0 items - remaining: 1 items
2025-06-20 05:55:18.835 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:55:18.836 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-06-20 05:55:28.836 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:55:28.837 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0182ms - processed: 0 items - remaining: 1 items
2025-06-20 05:55:38.837 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:55:38.838 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 05:55:48.840 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:55:48.840 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.017ms - processed: 0 items - remaining: 1 items
2025-06-20 05:55:58.841 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:55:58.841 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-06-20 05:56:08.842 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:56:08.843 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0397ms - processed: 0 items - remaining: 1 items
2025-06-20 05:56:18.845 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:56:18.845 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-06-20 05:56:28.847 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:56:28.847 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 05:56:38.848 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:56:38.849 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0055ms - processed: 0 items - remaining: 1 items
2025-06-20 05:56:48.850 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:56:48.851 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-06-20 05:56:58.852 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:56:58.852 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-06-20 05:57:08.894 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:57:08.894 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-06-20 05:57:18.905 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:57:18.906 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0144ms - processed: 0 items - remaining: 1 items
2025-06-20 05:57:28.908 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:57:28.909 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0058ms - processed: 0 items - remaining: 1 items
2025-06-20 05:57:38.910 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:57:38.910 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-06-20 05:57:48.911 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:57:48.913 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0081ms - processed: 0 items - remaining: 1 items
2025-06-20 05:57:58.913 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:57:58.914 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2025-06-20 05:58:08.915 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:58:08.915 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 05:58:18.915 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:58:18.916 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0051ms - processed: 0 items - remaining: 1 items
2025-06-20 05:58:28.918 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:58:28.918 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 05:58:38.919 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:58:38.920 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2025-06-20 05:58:48.921 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:58:48.921 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-06-20 05:58:58.923 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:58:58.923 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-06-20 05:59:08.924 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:59:08.925 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0515ms - processed: 0 items - remaining: 1 items
2025-06-20 05:59:18.926 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:59:18.926 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-06-20 05:59:28.927 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:59:28.930 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0438ms - processed: 0 items - remaining: 1 items
2025-06-20 05:59:38.930 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:59:38.931 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-06-20 05:59:48.932 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:59:48.933 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0204ms - processed: 0 items - remaining: 1 items
2025-06-20 05:59:58.934 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 05:59:58.937 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-06-20 06:00:08.940 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:00:08.941 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2025-06-20 06:00:18.943 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:00:18.943 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-06-20 06:00:28.945 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:00:28.945 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-06-20 06:00:38.947 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:00:38.948 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0202ms - processed: 0 items - remaining: 1 items
2025-06-20 06:00:48.949 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:00:48.950 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-06-20 06:00:58.953 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:00:58.953 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 06:01:08.954 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:01:08.955 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0115ms - processed: 0 items - remaining: 1 items
2025-06-20 06:01:18.956 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:01:18.956 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-06-20 06:01:28.958 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:01:28.959 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.01ms - processed: 0 items - remaining: 1 items
2025-06-20 06:01:38.959 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:01:38.961 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-06-20 06:01:48.961 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:01:48.962 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-06-20 06:01:58.963 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:01:58.964 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-06-20 06:02:08.965 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:02:08.966 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2025-06-20 06:02:18.966 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:02:18.967 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-06-20 06:02:28.968 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:02:28.968 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-06-20 06:02:38.970 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:02:38.970 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-06-20 06:02:48.972 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:02:48.973 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0068ms - processed: 0 items - remaining: 1 items
2025-06-20 06:02:58.974 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:02:58.974 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 06:03:08.975 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:03:08.975 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-06-20 06:03:18.977 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:03:18.977 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 06:03:28.978 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:03:28.979 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 06:03:38.980 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:03:38.981 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0057ms - processed: 0 items - remaining: 1 items
2025-06-20 06:03:48.982 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:03:48.982 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-06-20 06:03:58.982 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:03:58.983 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-06-20 06:04:08.983 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:04:08.983 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-06-20 06:04:18.985 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:04:18.986 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-06-20 06:04:28.987 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:04:28.988 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0147ms - processed: 0 items - remaining: 1 items
2025-06-20 06:04:38.989 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:04:38.990 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-06-20 06:04:48.991 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:04:48.992 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2025-06-20 06:04:58.992 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:04:58.994 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-06-20 06:05:08.994 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:05:08.995 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0072ms - processed: 0 items - remaining: 1 items
2025-06-20 06:05:18.997 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:05:18.997 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-06-20 06:05:28.999 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:05:28.999 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0049ms - processed: 0 items - remaining: 1 items
2025-06-20 06:05:39.000 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:05:39.001 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-06-20 06:05:49.002 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:05:49.003 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0135ms - processed: 0 items - remaining: 1 items
2025-06-20 06:05:59.004 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:05:59.005 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-06-20 06:06:09.006 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:06:09.007 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0825ms - processed: 0 items - remaining: 1 items
2025-06-20 06:06:19.008 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:06:19.009 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-06-20 06:06:29.010 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:06:29.010 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-06-20 06:06:39.012 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:06:39.013 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0136ms - processed: 0 items - remaining: 1 items
2025-06-20 06:06:49.015 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:06:49.016 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-06-20 06:06:59.016 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:06:59.017 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-06-20 06:07:09.018 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:07:09.021 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0191ms - processed: 0 items - remaining: 1 items
2025-06-20 06:07:19.023 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:07:19.023 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-06-20 06:07:29.025 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:07:29.025 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2025-06-20 06:07:39.026 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:07:39.027 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-06-20 06:07:49.027 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:07:49.028 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-06-20 06:07:59.029 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:07:59.030 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-06-20 06:08:09.030 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:08:09.031 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2025-06-20 06:08:19.032 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:08:19.033 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-06-20 06:08:29.035 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:08:29.036 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-06-20 06:08:39.036 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:08:39.036 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0051ms - processed: 0 items - remaining: 1 items
2025-06-20 06:08:49.037 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:08:49.038 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-06-20 06:08:59.045 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:08:59.045 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2025-06-20 06:09:09.047 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:09:09.048 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0046ms - processed: 0 items - remaining: 1 items
2025-06-20 06:09:19.048 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:09:19.049 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-06-20 06:09:29.049 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:09:29.050 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-06-20 06:09:39.052 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:09:39.053 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-06-20 06:09:49.055 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:09:49.057 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.014ms - processed: 0 items - remaining: 1 items
2025-06-20 06:09:59.061 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:09:59.061 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 06:10:09.063 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:10:09.065 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0148ms - processed: 0 items - remaining: 1 items
2025-06-20 06:10:19.065 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:10:19.066 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2025-06-20 06:10:29.067 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:10:29.068 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0104ms - processed: 0 items - remaining: 1 items
2025-06-20 06:10:39.068 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:10:39.069 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2025-06-20 06:10:49.071 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:10:49.072 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0156ms - processed: 0 items - remaining: 1 items
2025-06-20 06:10:59.072 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:10:59.072 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2025-06-20 06:11:09.074 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:11:09.075 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-06-20 06:11:19.075 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:11:19.076 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0175ms - processed: 0 items - remaining: 1 items
2025-06-20 06:11:29.077 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:11:29.078 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-06-20 06:11:39.079 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:11:39.080 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
2025-06-20 06:11:49.081 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:11:49.081 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-06-20 06:11:59.081 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:11:59.082 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-06-20 06:12:09.084 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:12:09.088 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0168ms - processed: 0 items - remaining: 1 items
2025-06-20 06:12:19.090 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:12:19.090 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2025-06-20 06:12:29.093 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:12:29.094 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0041ms - processed: 0 items - remaining: 1 items
2025-06-20 06:12:39.095 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:12:39.096 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-06-20 06:12:49.098 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:12:49.099 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0046ms - processed: 0 items - remaining: 1 items
2025-06-20 06:12:59.101 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:12:59.102 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-06-20 06:13:09.103 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:13:09.104 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0145ms - processed: 0 items - remaining: 1 items
2025-06-20 06:13:19.105 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:13:19.106 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2025-06-20 06:13:29.107 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:13:29.108 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0048ms - processed: 0 items - remaining: 1 items
2025-06-20 06:13:39.109 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:13:39.109 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-06-20 06:13:49.110 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:13:49.111 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-06-20 06:13:59.113 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:13:59.114 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0152ms - processed: 0 items - remaining: 1 items
2025-06-20 06:14:09.117 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:14:09.118 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0188ms - processed: 0 items - remaining: 1 items
2025-06-20 06:14:19.119 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:14:19.120 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0102ms - processed: 0 items - remaining: 1 items
2025-06-20 06:14:29.121 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:14:29.122 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-06-20 06:14:39.122 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:14:39.123 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.016ms - processed: 0 items - remaining: 1 items
2025-06-20 06:14:49.125 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 06:14:49.126 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.5127ms - processed: 1 items - remaining: 0 items
2025-06-20 07:21:39.274 +09:00 [DBG] Connection id "0HNDF59R4R034" accepted.
2025-06-20 07:21:39.277 +09:00 [DBG] Connection id "0HNDF59R4R034" started.
2025-06-20 07:21:39.310 +09:00 [DBG] Connection 0HNDF59R4R034 established using the following protocol: "Tls12"
2025-06-20 07:21:39.378 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-20 07:21:39.394 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-20 07:21:39.396 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-20 07:21:39.402 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 07:21:39.410 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 07:21:39.410 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 07:21:39.416 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 07:21:39.418 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 07:21:39.418 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 07:21:39.418 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 07:21:39.418 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 07:21:39.418 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 07:21:39.419 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:21:39.553 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:21:39.562 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-20 07:21:39.564 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-20 07:21:39.564 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-20 07:21:39.568 +09:00 [DBG] Connection id "0HNDF59R4R034", Request id "0HNDF59R4R034:00000001": started reading request body.
2025-06-20 07:21:39.568 +09:00 [DBG] Connection id "0HNDF59R4R034", Request id "0HNDF59R4R034:00000001": done reading request body.
2025-06-20 07:21:39.577 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-20 07:21:39.577 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:21:39.577 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:21:39.577 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-20 07:21:39.580 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:21:39.583 +09:00 [INF] Creating a new approval request.
2025-06-20 07:21:39.593 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"c52e8024-7439-4458-b916-8ffdebdf5ee2","RequestTitle":"email test","RequestContent":"test","ApplicantEmployeeNumber":"EMP0001","ApplicantName":"User 1","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-19T22:21:36.5123590Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EC20505","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 6","Position":"Staff","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-20 07:21:39.621 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 07:21:39.629 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:39.631 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:39.633 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:39.634 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-20 07:21:39.635 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-20 07:21:39.637 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-20 07:21:39.642 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:21:39.646 +09:00 [DBG] Created DbConnection. (3ms).
2025-06-20 07:21:39.646 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:21:39.659 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:21:39.659 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-20 07:21:39.665 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-20 07:21:39.673 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:21:39.673 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2025-06-20 07:21:39.674 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-06-20 07:21:39.675 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 4), @p11='?' (Size = 10), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-20 07:21:39.681 +09:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 4), @p11='?' (Size = 10), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-20 07:21:39.681 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:21:39.682 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-20 07:21:39.683 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:21:39.683 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:21:39.683 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:21:39.683 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-20 07:21:39.689 +09:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-20 07:21:39.689 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:21:39.689 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-20 07:21:39.689 +09:00 [DBG] Committing transaction.
2025-06-20 07:21:39.690 +09:00 [DBG] Committed transaction.
2025-06-20 07:21:39.690 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:21:39.692 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:21:39.692 +09:00 [DBG] Disposing transaction.
2025-06-20 07:21:39.693 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:39.693 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:39.693 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-20 07:21:39.693 +09:00 [INF] Approval request created successfully with ID: "c52e8024-7439-4458-b916-8ffdebdf5ee2"
2025-06-20 07:21:42.317 +09:00 [INF] Start processing HTTP request GET https://localhost:7129/api/userservice/users/EC20505
2025-06-20 07:21:42.318 +09:00 [INF] Sending HTTP request GET https://localhost:7129/api/userservice/users/EC20505
2025-06-20 07:21:44.704 +09:00 [INF] Received HTTP response headers after 2385.7987ms - 200
2025-06-20 07:21:44.705 +09:00 [INF] End processing HTTP request after 2389.5158ms - 200
2025-06-20 07:21:44.707 +09:00 [INF] User found: {"EmployeeNumber":"EC20505","Name":"User 6","Department":"Support","Email":"wonjin.byun@volvo.com","Role":"User","$type":"UserInfoDto"}
2025-06-20 07:21:49.470 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 07:21:49.471 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 07:21:49.471 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 07:21:49.471 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 07:21:49.471 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 07:21:49.471 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:21:49.473 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API)"] for address (approvalId=[c52e8024-7439-4458-b916-8ffdebdf5ee2],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-20 07:21:49.475 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API) resulting in /api/ApprovalRequest/c52e8024-7439-4458-b916-8ffdebdf5ee2 and 
2025-06-20 07:21:49.475 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API)"] with result /api/ApprovalRequest/c52e8024-7439-4458-b916-8ffdebdf5ee2
2025-06-20 07:21:49.478 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API) in 10060.2857ms
2025-06-20 07:21:49.478 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 07:21:49.479 +09:00 [DBG] Connection id "0HNDF59R4R034" completed keep alive response.
2025-06-20 07:21:49.480 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 07:21:49.481 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:21:49.481 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:21:49.482 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 10104.0758ms
2025-06-20 07:21:49.518 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-20 07:21:49.518 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 07:21:49.518 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 07:21:49.519 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 07:21:49.522 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 07:21:49.522 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 07:21:49.524 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 07:21:49.524 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 07:21:49.524 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 07:21:49.524 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 07:21:49.524 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 07:21:49.524 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 07:21:49.524 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:21:49.525 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:21:49.525 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 07:21:49.526 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 07:21:49.526 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 07:21:49.526 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 07:21:49.526 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 07:21:49.526 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 07:21:49.530 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 07:21:49.537 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:21:49.537 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 07:21:49.537 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:21:49.537 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:21:49.537 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:21:49.537 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:21:49.537 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:21:49.537 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 07:21:49.540 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 07:21:49.542 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:49.542 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:49.543 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:49.543 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:49.544 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:49.544 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:49.544 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:49.545 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:49.545 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:49.545 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:49.545 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:49.545 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:21:49.545 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:21:49.545 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 5ms reading results.
2025-06-20 07:21:49.545 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:21:49.546 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:21:49.546 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 07:21:49.546 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 07:21:49.546 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 07:21:49.546 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 07:21:49.546 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 07:21:49.546 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 07:21:49.547 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 23.397ms
2025-06-20 07:21:49.548 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 07:21:49.548 +09:00 [DBG] Connection id "0HNDF59R4R034" completed keep alive response.
2025-06-20 07:21:49.548 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 07:21:49.548 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:21:49.548 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:21:49.548 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 30.3197ms
2025-06-20 07:22:59.868 +09:00 [INF] Starting Approval Service API
2025-06-20 07:23:05.049 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 07:23:05.155 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 07:23:05.609 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 07:23:05.620 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:23:05.630 +09:00 [DBG] Created DbConnection. (8ms).
2025-06-20 07:23:05.634 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:23:05.654 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:05.657 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:23:05.662 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:23:05.664 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 07:23:05.665 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:23:05.665 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 07:23:05.668 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-20 07:23:05.670 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-06-20 07:23:05.670 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:23:05.671 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:05.674 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 07:23:05.691 +09:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 07:23:05.693 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:05.695 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-20 07:23:05.697 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:23:05.697 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 07:23:05.697 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:23:05.698 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:05.698 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:23:05.698 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:23:05.698 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 07:23:05.698 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 07:23:05.698 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 07:23:05.698 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:23:05.698 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:05.698 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 07:23:05.699 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 07:23:05.699 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:05.699 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:23:05.722 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-20 07:23:05.824 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 07:23:05.838 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:23:05.839 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:05.839 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:23:05.839 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:23:05.839 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:23:05.839 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-20 07:23:05.840 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-20 07:23:05.842 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:05.843 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-20 07:23:05.844 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:05.844 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:23:05.845 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 07:23:05.845 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:23:05.845 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:23:05.847 +09:00 [DBG] Hosting starting
2025-06-20 07:23:05.881 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-20 07:23:05.881 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 07:23:06.135 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-20 07:23:06.135 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-20 07:23:06.135 +09:00 [DBG] Loaded hosting startup assembly Volvo.Service.Approval.API
2025-06-20 07:23:06.136 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 07:23:06.136 +09:00 [INF] Hosting environment: Development
2025-06-20 07:23:06.136 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-20 07:23:06.136 +09:00 [DBG] Hosting started
2025-06-20 07:23:20.200 +09:00 [DBG] Connection id "0HNDFFVINETR7" accepted.
2025-06-20 07:23:20.202 +09:00 [DBG] Connection id "0HNDFFVINETR7" started.
2025-06-20 07:23:20.251 +09:00 [DBG] Connection 0HNDFFVINETR7 established using the following protocol: "Tls12"
2025-06-20 07:23:20.312 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-20 07:23:20.336 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-20 07:23:20.338 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-20 07:23:20.353 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 07:23:20.365 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 07:23:20.365 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 07:23:20.379 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 07:23:20.379 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 07:23:20.379 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 07:23:20.379 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 07:23:20.379 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 07:23:20.380 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 07:23:20.380 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:23:20.387 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:23:20.388 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-20 07:23:20.389 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-20 07:23:20.389 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-20 07:23:20.443 +09:00 [DBG] Connection id "0HNDFFVINETR7", Request id "0HNDFFVINETR7:00000001": started reading request body.
2025-06-20 07:23:20.447 +09:00 [DBG] Connection id "0HNDFFVINETR7", Request id "0HNDFFVINETR7:00000001": done reading request body.
2025-06-20 07:23:20.473 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-20 07:23:20.474 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:23:20.474 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:23:20.474 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-20 07:23:20.482 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:23:20.484 +09:00 [INF] Creating a new approval request.
2025-06-20 07:23:20.486 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"9d851d7b-4736-40fa-b16e-a8e28283e776","RequestTitle":"email22","RequestContent":"ee","ApplicantEmployeeNumber":"EMP0001","ApplicantName":"User 1","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-19T22:23:17.9541040Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EC20505","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 6","Position":"Staff","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-20 07:23:21.882 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 07:23:21.938 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:21.941 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:21.957 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:21.959 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-20 07:23:21.960 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-20 07:23:21.970 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-20 07:23:22.001 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:23:22.001 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 07:23:22.002 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:23:22.002 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:22.003 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-20 07:23:22.005 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-20 07:23:22.006 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:23:22.006 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:23:22.007 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:23:22.008 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 2), @p11='?' (Size = 7), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-20 07:23:22.010 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 2), @p11='?' (Size = 7), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-20 07:23:22.011 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:22.011 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-20 07:23:22.012 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:23:22.012 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:23:22.012 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:23:22.012 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-20 07:23:22.013 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-20 07:23:22.013 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:22.013 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-20 07:23:22.014 +09:00 [DBG] Committing transaction.
2025-06-20 07:23:22.015 +09:00 [DBG] Committed transaction.
2025-06-20 07:23:22.016 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:22.016 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:23:22.016 +09:00 [DBG] Disposing transaction.
2025-06-20 07:23:22.020 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:22.020 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:22.021 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-20 07:23:22.021 +09:00 [INF] Approval request created successfully with ID: "9d851d7b-4736-40fa-b16e-a8e28283e776"
2025-06-20 07:23:24.274 +09:00 [INF] Start processing HTTP request GET https://localhost:7129/api/userservice/users/EC20505
2025-06-20 07:23:24.280 +09:00 [INF] Sending HTTP request GET https://localhost:7129/api/userservice/users/EC20505
2025-06-20 07:23:31.356 +09:00 [INF] Received HTTP response headers after 7073.4769ms - 200
2025-06-20 07:23:31.360 +09:00 [INF] End processing HTTP request after 7088.2614ms - 200
2025-06-20 07:23:31.366 +09:00 [INF] User found: {"EmployeeNumber":"EC20505","Name":"User 6","Department":"Support","Email":"wonjin.byun@volvo.com","Role":"User","$type":"UserInfoDto"}
2025-06-20 07:23:38.346 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 07:23:38.357 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 07:23:38.357 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 07:23:38.358 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 07:23:38.360 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 07:23:38.362 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:23:38.421 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API)"] for address (approvalId=[9d851d7b-4736-40fa-b16e-a8e28283e776],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-20 07:23:38.424 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API) resulting in /api/ApprovalRequest/9d851d7b-4736-40fa-b16e-a8e28283e776 and 
2025-06-20 07:23:38.425 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API)"] with result /api/ApprovalRequest/9d851d7b-4736-40fa-b16e-a8e28283e776
2025-06-20 07:23:38.442 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API) in 18061.3107ms
2025-06-20 07:23:38.442 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 07:23:38.444 +09:00 [DBG] Connection id "0HNDFFVINETR7" completed keep alive response.
2025-06-20 07:23:38.446 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 07:23:38.447 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:23:38.448 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:23:38.449 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 18138.4998ms
2025-06-20 07:23:38.465 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-20 07:23:38.466 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 07:23:38.466 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 07:23:38.467 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 07:23:38.469 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 07:23:38.469 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 07:23:38.473 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 07:23:38.474 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 07:23:38.474 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 07:23:38.474 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 07:23:38.474 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 07:23:38.474 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 07:23:38.474 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:23:38.476 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:23:38.477 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 07:23:38.477 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 07:23:38.478 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 07:23:38.478 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 07:23:38.478 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 07:23:38.479 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 07:23:38.504 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 07:23:38.512 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantName = r.ApplicantName, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantPosition = r.ApplicantPosition, 
        Steps = r.Steps, 
        Attachments = r.Attachments, 
        Status = r.Status, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-20 07:23:38.571 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-20 07:23:38.583 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            List<ApprovalStep> namelessParameter{0};
            List<ApprovalAttachment> namelessParameter{1};
            string value11;
            int? value12;
            string value13;
            string value14;
            string value15;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            namelessParameter{1} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalAttachment, List<ApprovalAttachment>>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
                }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()]);
            value11 = dataReader.GetString(28);
            value12 = (int?)dataReader.GetInt32(29);
            value13 = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
            value14 = dataReader.IsDBNull(31) ? default(string) : dataReader.GetString(31);
            value15 = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                namelessParameter{0}, 
                namelessParameter{1}, 
                value11, 
                (object)value12, 
                value13, 
                value14, 
                value15 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(8) ? default(object) : (object)dataReader.GetGuid(8) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(8) ? default(Guid) : dataReader.GetGuid(8);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(11) ? default(Guid) : dataReader.GetGuid(11);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(16) ? default(bool) : dataReader.GetBoolean(16);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(18) ? default(int) : dataReader.GetInt32(18);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalAttachment>, ApprovalAttachment, ApprovalAttachment>(
            collectionId: 1, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
            { 
                (object)(Guid?)dataReader.GetGuid(0), 
                (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
            }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(20) ? default(Guid?) : (Guid?)dataReader.GetGuid(20) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
            { 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
            }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalAttachment entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalAttachment instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalAttachment);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(20) ? default(object) : (object)dataReader.GetGuid(20) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalAttachment)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                {
                                    return 
                                    {
                                        ApprovalAttachment instance;
                                        instance = new ApprovalAttachment();
                                        instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(20) ? default(Guid) : dataReader.GetGuid(20);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(21) ? default(Guid) : dataReader.GetGuid(21);
                                        instance.<FileName>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<FilePath>k__BackingField = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
                                        instance.<FileSize>k__BackingField = dataReader.IsDBNull(24) ? default(long?) : (long?)dataReader.GetInt64(24);
                                        instance.<FileType>k__BackingField = dataReader.IsDBNull(25) ? default(string) : dataReader.GetString(25);
                                        instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(26) ? default(DateTime) : dataReader.GetDateTime(26);
                                        instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalAttachment)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            ApplicantDepartment = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[8]), 
            Attachments = (List<ApprovalAttachment>)(resultContext.Values[9]), 
            Status = (string)(resultContext.Values[10]), 
            CurrentStep = (int)(int?)(resultContext.Values[11]), 
            CurrentApproverName = (string)(resultContext.Values[12]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[13]), 
            CurrentActionStatus = (string)(resultContext.Values[14]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-20 07:23:38.605 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:23:38.605 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 07:23:38.605 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:23:38.605 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:38.605 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:23:38.605 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:23:38.605 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:23:38.605 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 07:23:38.606 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 07:23:38.613 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:38.614 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:38.614 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:38.614 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:38.614 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:38.614 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:38.614 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:38.614 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:38.614 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:38.614 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:38.614 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:38.615 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:38.615 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:23:38.615 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:38.615 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 8ms reading results.
2025-06-20 07:23:38.615 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:23:38.615 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:23:38.615 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 07:23:38.616 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 07:23:38.616 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 07:23:38.616 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 07:23:38.616 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 07:23:38.616 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 07:23:38.618 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 144.2179ms
2025-06-20 07:23:38.618 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 07:23:38.618 +09:00 [DBG] Connection id "0HNDFFVINETR7" completed keep alive response.
2025-06-20 07:23:38.618 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 07:23:38.618 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:23:38.618 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:23:38.618 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 153.8268ms
2025-06-20 07:24:50.187 +09:00 [DBG] Connection id "0HNDFFVINETR7" received FIN.
2025-06-20 07:24:50.199 +09:00 [DBG] Connection id "0HNDFFVINETR7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 07:24:50.201 +09:00 [DBG] Connection id "0HNDFFVINETR7" disconnecting.
2025-06-20 07:24:50.204 +09:00 [DBG] Connection id "0HNDFFVINETR7" stopped.
2025-06-20 07:25:20.392 +09:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IUserServiceProxy'
2025-06-20 07:25:30.396 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:25:30.402 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.8945ms - processed: 0 items - remaining: 1 items
2025-06-20 07:25:40.402 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:25:40.403 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0128ms - processed: 0 items - remaining: 1 items
2025-06-20 07:25:50.404 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:25:50.405 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0116ms - processed: 0 items - remaining: 1 items
2025-06-20 07:26:00.406 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:26:00.407 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0085ms - processed: 0 items - remaining: 1 items
2025-06-20 07:26:10.408 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:26:10.409 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.009ms - processed: 0 items - remaining: 1 items
2025-06-20 07:26:20.410 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:26:20.411 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0692ms - processed: 0 items - remaining: 1 items
2025-06-20 07:27:45.363 +09:00 [INF] Starting Approval Service API
2025-06-20 07:27:45.565 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 07:27:45.671 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 07:27:45.954 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 07:27:45.959 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:27:45.965 +09:00 [DBG] Created DbConnection. (5ms).
2025-06-20 07:27:45.968 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:27:45.974 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:27:45.976 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:27:45.978 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:27:45.979 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 07:27:45.980 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:27:45.980 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 07:27:45.982 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-06-20 07:27:45.982 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-06-20 07:27:45.982 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:27:45.983 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:27:45.985 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 07:27:46.000 +09:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 07:27:46.001 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:27:46.002 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-20 07:27:46.005 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:27:46.005 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 07:27:46.005 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:27:46.005 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:27:46.005 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:27:46.005 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:27:46.006 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 07:27:46.006 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 07:27:46.006 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 07:27:46.006 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:27:46.006 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:27:46.006 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 07:27:46.006 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 07:27:46.006 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:27:46.006 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:27:46.030 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-20 07:27:46.123 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 07:27:46.136 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:27:46.136 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:27:46.136 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:27:46.136 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:27:46.136 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:27:46.137 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-20 07:27:46.138 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-20 07:27:46.140 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:27:46.140 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-20 07:27:46.141 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:27:46.141 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:27:46.142 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 07:27:46.143 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:27:46.143 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:27:46.144 +09:00 [DBG] Hosting starting
2025-06-20 07:27:46.177 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-20 07:27:46.178 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 07:27:46.435 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-20 07:27:46.435 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-20 07:27:46.435 +09:00 [DBG] Loaded hosting startup assembly Volvo.Service.Approval.API
2025-06-20 07:27:46.436 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 07:27:46.436 +09:00 [INF] Hosting environment: Development
2025-06-20 07:27:46.436 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-20 07:27:46.436 +09:00 [DBG] Hosting started
2025-06-20 07:28:00.721 +09:00 [DBG] Connection id "0HNDFG26AMUCJ" accepted.
2025-06-20 07:28:00.723 +09:00 [DBG] Connection id "0HNDFG26AMUCJ" started.
2025-06-20 07:28:00.801 +09:00 [DBG] Connection 0HNDFG26AMUCJ established using the following protocol: "Tls12"
2025-06-20 07:28:00.830 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-20 07:28:00.853 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 07:28:00.861 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 07:28:00.887 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 07:28:00.904 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 07:28:00.904 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 07:28:00.917 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 07:28:00.917 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 07:28:00.917 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 07:28:00.918 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 07:28:00.918 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 07:28:00.918 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 07:28:00.919 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:28:00.926 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:28:00.928 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 07:28:00.929 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 07:28:00.929 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 07:28:00.930 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 07:28:00.930 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 07:28:00.932 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 07:28:00.939 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 07:28:00.947 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantName = r.ApplicantName, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantPosition = r.ApplicantPosition, 
        Steps = r.Steps, 
        Attachments = r.Attachments, 
        Status = r.Status, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-20 07:28:01.010 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-20 07:28:01.022 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            List<ApprovalStep> namelessParameter{0};
            List<ApprovalAttachment> namelessParameter{1};
            string value11;
            int? value12;
            string value13;
            string value14;
            string value15;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            namelessParameter{1} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalAttachment, List<ApprovalAttachment>>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
                }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()]);
            value11 = dataReader.GetString(28);
            value12 = (int?)dataReader.GetInt32(29);
            value13 = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
            value14 = dataReader.IsDBNull(31) ? default(string) : dataReader.GetString(31);
            value15 = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                namelessParameter{0}, 
                namelessParameter{1}, 
                value11, 
                (object)value12, 
                value13, 
                value14, 
                value15 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(8) ? default(object) : (object)dataReader.GetGuid(8) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(8) ? default(Guid) : dataReader.GetGuid(8);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(11) ? default(Guid) : dataReader.GetGuid(11);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(16) ? default(bool) : dataReader.GetBoolean(16);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(18) ? default(int) : dataReader.GetInt32(18);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalAttachment>, ApprovalAttachment, ApprovalAttachment>(
            collectionId: 1, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
            { 
                (object)(Guid?)dataReader.GetGuid(0), 
                (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
            }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(20) ? default(Guid?) : (Guid?)dataReader.GetGuid(20) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
            { 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
            }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalAttachment entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalAttachment instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalAttachment);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(20) ? default(object) : (object)dataReader.GetGuid(20) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalAttachment)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                {
                                    return 
                                    {
                                        ApprovalAttachment instance;
                                        instance = new ApprovalAttachment();
                                        instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(20) ? default(Guid) : dataReader.GetGuid(20);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(21) ? default(Guid) : dataReader.GetGuid(21);
                                        instance.<FileName>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<FilePath>k__BackingField = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
                                        instance.<FileSize>k__BackingField = dataReader.IsDBNull(24) ? default(long?) : (long?)dataReader.GetInt64(24);
                                        instance.<FileType>k__BackingField = dataReader.IsDBNull(25) ? default(string) : dataReader.GetString(25);
                                        instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(26) ? default(DateTime) : dataReader.GetDateTime(26);
                                        instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalAttachment)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            ApplicantDepartment = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[8]), 
            Attachments = (List<ApprovalAttachment>)(resultContext.Values[9]), 
            Status = (string)(resultContext.Values[10]), 
            CurrentStep = (int)(int?)(resultContext.Values[11]), 
            CurrentApproverName = (string)(resultContext.Values[12]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[13]), 
            CurrentActionStatus = (string)(resultContext.Values[14]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-20 07:28:01.121 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:28:01.122 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 07:28:01.122 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:28:01.122 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:28:01.122 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:28:01.122 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:28:01.123 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-20 07:28:01.125 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 07:28:01.142 +09:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 07:28:01.159 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:28:01.175 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:28:01.175 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:28:01.175 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:28:01.176 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:28:01.176 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:28:01.176 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:28:01.176 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:28:01.176 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:28:01.176 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:28:01.176 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:28:01.176 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:28:01.176 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:28:01.177 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:28:01.177 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 34ms reading results.
2025-06-20 07:28:01.177 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:28:01.177 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:28:01.178 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 07:28:01.179 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 07:28:01.179 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 07:28:01.179 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 07:28:01.180 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 07:28:01.180 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 07:28:01.229 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 309.9541ms
2025-06-20 07:28:01.232 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 07:28:01.233 +09:00 [DBG] Connection id "0HNDFG26AMUCJ" completed keep alive response.
2025-06-20 07:28:01.234 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 07:28:01.236 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:28:01.236 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:28:01.237 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 408.9643ms
2025-06-20 07:29:15.749 +09:00 [DBG] Connection id "0HNDFG26AMUCJ" received FIN.
2025-06-20 07:29:15.752 +09:00 [DBG] Connection id "0HNDFG26AMUCJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 07:29:15.752 +09:00 [DBG] Connection id "0HNDFG26AMUCJ" disconnecting.
2025-06-20 07:29:15.756 +09:00 [DBG] Connection id "0HNDFG26AMUCJ" stopped.
2025-06-20 07:30:00.936 +09:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IUserServiceProxy'
2025-06-20 07:30:10.946 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:30:10.954 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4896ms - processed: 0 items - remaining: 1 items
2025-06-20 07:30:13.303 +09:00 [DBG] Connection id "0HNDFG26AMUCK" accepted.
2025-06-20 07:30:13.338 +09:00 [DBG] Connection id "0HNDFG26AMUCK" started.
2025-06-20 07:30:13.371 +09:00 [DBG] Connection 0HNDFG26AMUCK established using the following protocol: "Tls12"
2025-06-20 07:30:13.441 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-20 07:30:13.443 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-20 07:30:13.443 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-20 07:30:13.451 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 07:30:13.455 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 07:30:13.455 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 07:30:13.462 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 07:30:13.462 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 07:30:13.462 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 07:30:13.462 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 07:30:13.462 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 07:30:13.462 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 07:30:13.462 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:30:13.463 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:30:13.464 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-20 07:30:13.465 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-20 07:30:13.465 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-20 07:30:13.471 +09:00 [DBG] Connection id "0HNDFG26AMUCK", Request id "0HNDFG26AMUCK:00000001": started reading request body.
2025-06-20 07:30:13.473 +09:00 [DBG] Connection id "0HNDFG26AMUCK", Request id "0HNDFG26AMUCK:00000001": done reading request body.
2025-06-20 07:30:13.484 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-20 07:30:13.485 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:30:13.485 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:30:13.485 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-20 07:30:13.492 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:30:13.493 +09:00 [INF] Creating a new approval request.
2025-06-20 07:30:13.495 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"de0f9b12-d8c3-474e-a804-7d9a970b15ca","RequestTitle":"aaa","RequestContent":"aaaa","ApplicantEmployeeNumber":"EMP0001","ApplicantName":"User 1","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-19T22:30:09.6495050Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EC20505","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 6","Position":"Staff","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-20 07:30:19.330 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 07:30:19.367 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:19.371 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:19.376 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:19.378 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-20 07:30:19.380 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-20 07:30:19.392 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-20 07:30:19.427 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:30:19.427 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 07:30:19.427 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:30:19.427 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:30:19.428 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-20 07:30:19.430 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-20 07:30:19.432 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:30:19.432 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:30:19.432 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:30:19.432 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 4), @p11='?' (Size = 3), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-20 07:30:19.434 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 4), @p11='?' (Size = 3), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-20 07:30:19.436 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:30:19.436 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-20 07:30:19.436 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:30:19.436 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:30:19.436 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:30:19.436 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-20 07:30:19.437 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-20 07:30:19.437 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:30:19.437 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-20 07:30:19.438 +09:00 [DBG] Committing transaction.
2025-06-20 07:30:19.439 +09:00 [DBG] Committed transaction.
2025-06-20 07:30:19.440 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:30:19.440 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:30:19.440 +09:00 [DBG] Disposing transaction.
2025-06-20 07:30:19.443 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:19.444 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:19.444 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-20 07:30:19.444 +09:00 [INF] Approval request created successfully with ID: "de0f9b12-d8c3-474e-a804-7d9a970b15ca"
2025-06-20 07:30:21.739 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:30:21.740 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0062ms - processed: 0 items - remaining: 1 items
2025-06-20 07:30:21.744 +09:00 [INF] Start processing HTTP request GET https://localhost:7129/api/userservice/users/EC20505
2025-06-20 07:30:21.746 +09:00 [INF] Sending HTTP request GET https://localhost:7129/api/userservice/users/EC20505
2025-06-20 07:30:23.627 +09:00 [INF] Received HTTP response headers after 1878.9418ms - 200
2025-06-20 07:30:23.627 +09:00 [INF] End processing HTTP request after 1885.2376ms - 200
2025-06-20 07:30:23.630 +09:00 [INF] User found: {"EmployeeNumber":"EC20505","Name":"User 6","Department":"Support","Email":"wonjin.byun@volvo.com","Role":"User","$type":"UserInfoDto"}
2025-06-20 07:30:30.812 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 07:30:30.813 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 07:30:30.813 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 07:30:30.813 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 07:30:30.813 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 07:30:30.813 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:30:30.850 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API)"] for address (approvalId=[de0f9b12-d8c3-474e-a804-7d9a970b15ca],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-20 07:30:30.853 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API) resulting in /api/ApprovalRequest/de0f9b12-d8c3-474e-a804-7d9a970b15ca and 
2025-06-20 07:30:30.854 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API)"] with result /api/ApprovalRequest/de0f9b12-d8c3-474e-a804-7d9a970b15ca
2025-06-20 07:30:30.855 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API) in 17393.506ms
2025-06-20 07:30:30.856 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 07:30:30.858 +09:00 [DBG] Connection id "0HNDFG26AMUCK" completed keep alive response.
2025-06-20 07:30:30.858 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 07:30:30.858 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:30:30.858 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:30:30.858 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 17417.772ms
2025-06-20 07:30:30.884 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-20 07:30:30.885 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 07:30:30.885 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 07:30:30.885 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 07:30:30.886 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 07:30:30.887 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 07:30:30.887 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 07:30:30.887 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 07:30:30.887 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 07:30:30.887 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 07:30:30.887 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 07:30:30.887 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 07:30:30.887 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:30:30.889 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:30:30.889 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 07:30:30.889 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 07:30:30.889 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 07:30:30.889 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 07:30:30.889 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 07:30:30.890 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 07:30:30.891 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 07:30:30.894 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:30:30.895 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 07:30:30.895 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:30:30.895 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:30:30.895 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:30:30.895 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:30:30.895 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:30:30.895 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 07:30:30.896 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 07:30:30.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:30:30.900 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:30:30.901 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-20 07:30:30.901 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:30:30.901 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:30:30.901 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 07:30:30.901 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 07:30:30.901 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 07:30:30.901 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 07:30:30.901 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 07:30:30.901 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 07:30:30.903 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 15.3842ms
2025-06-20 07:30:30.903 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 07:30:30.903 +09:00 [DBG] Connection id "0HNDFG26AMUCK" completed keep alive response.
2025-06-20 07:30:30.903 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 07:30:30.903 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:30:30.903 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:30:30.903 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 18.4893ms
2025-06-20 07:30:31.741 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:30:31.741 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0056ms - processed: 0 items - remaining: 1 items
2025-06-20 07:30:41.743 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:30:41.744 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0522ms - processed: 0 items - remaining: 1 items
2025-06-20 07:30:51.745 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:30:51.746 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-06-20 07:31:01.746 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:31:01.747 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0092ms - processed: 0 items - remaining: 1 items
2025-06-20 07:31:11.748 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:31:11.748 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.015ms - processed: 0 items - remaining: 1 items
2025-06-20 07:31:21.750 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:31:21.751 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0333ms - processed: 0 items - remaining: 1 items
2025-06-20 07:31:31.753 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:31:31.753 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-06-20 07:31:41.755 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:31:41.755 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0128ms - processed: 0 items - remaining: 1 items
2025-06-20 07:31:43.350 +09:00 [DBG] Connection id "0HNDFG26AMUCK" received FIN.
2025-06-20 07:31:43.351 +09:00 [DBG] Connection id "0HNDFG26AMUCK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 07:31:43.352 +09:00 [DBG] Connection id "0HNDFG26AMUCK" disconnecting.
2025-06-20 07:31:43.358 +09:00 [DBG] Connection id "0HNDFG26AMUCK" stopped.
2025-06-20 07:31:51.756 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:31:51.757 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2025-06-20 07:32:01.759 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:32:01.760 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0157ms - processed: 0 items - remaining: 1 items
2025-06-20 07:32:11.761 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 07:32:11.761 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0052ms - processed: 0 items - remaining: 1 items
2025-06-20 07:32:13.462 +09:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IUserServiceProxy'
2025-06-20 07:32:21.763 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:32:21.763 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0072ms - processed: 0 items - remaining: 2 items
2025-06-20 07:32:31.765 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:32:31.765 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.006ms - processed: 0 items - remaining: 2 items
2025-06-20 07:32:41.768 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:32:41.769 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0529ms - processed: 0 items - remaining: 2 items
2025-06-20 07:32:51.770 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:32:51.771 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.005ms - processed: 0 items - remaining: 2 items
2025-06-20 07:33:01.772 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:33:01.772 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0113ms - processed: 0 items - remaining: 2 items
2025-06-20 07:33:11.773 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:33:11.774 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 2 items
2025-06-20 07:33:21.775 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:33:21.776 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0275ms - processed: 0 items - remaining: 2 items
2025-06-20 07:33:31.777 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:33:31.778 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0264ms - processed: 0 items - remaining: 2 items
2025-06-20 07:33:41.779 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:33:41.779 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.2561ms - processed: 0 items - remaining: 2 items
2025-06-20 07:33:51.780 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:33:51.781 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0111ms - processed: 0 items - remaining: 2 items
2025-06-20 07:34:01.782 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:34:01.783 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 2 items
2025-06-20 07:34:11.784 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:34:11.785 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0074ms - processed: 0 items - remaining: 2 items
2025-06-20 07:34:21.785 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:34:21.786 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0271ms - processed: 0 items - remaining: 2 items
2025-06-20 07:34:31.788 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:34:31.788 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0131ms - processed: 0 items - remaining: 2 items
2025-06-20 07:34:41.789 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:34:41.790 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0113ms - processed: 0 items - remaining: 2 items
2025-06-20 07:34:51.791 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:34:51.792 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0493ms - processed: 0 items - remaining: 2 items
2025-06-20 07:35:01.793 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:35:01.793 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.007ms - processed: 0 items - remaining: 2 items
2025-06-20 07:35:11.795 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:35:11.796 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.006ms - processed: 0 items - remaining: 2 items
2025-06-20 07:35:21.796 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:35:21.797 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0266ms - processed: 0 items - remaining: 2 items
2025-06-20 07:35:31.798 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:35:31.798 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0054ms - processed: 0 items - remaining: 2 items
2025-06-20 07:35:41.799 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:35:41.800 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0077ms - processed: 0 items - remaining: 2 items
2025-06-20 07:35:51.801 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:35:51.802 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0051ms - processed: 0 items - remaining: 2 items
2025-06-20 07:36:01.803 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:36:01.804 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.01ms - processed: 0 items - remaining: 2 items
2025-06-20 07:36:11.805 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:36:11.806 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.3199ms - processed: 0 items - remaining: 2 items
2025-06-20 07:36:21.808 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:36:21.809 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0152ms - processed: 0 items - remaining: 2 items
2025-06-20 07:36:31.811 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:36:31.811 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-06-20 07:36:41.813 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:36:41.815 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0132ms - processed: 0 items - remaining: 2 items
2025-06-20 07:36:51.816 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:36:51.816 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 2 items
2025-06-20 07:37:01.818 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:37:01.819 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-06-20 07:37:11.820 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:37:11.825 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.016ms - processed: 0 items - remaining: 2 items
2025-06-20 07:37:21.826 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:37:21.826 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2025-06-20 07:37:31.829 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:37:31.830 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0077ms - processed: 0 items - remaining: 2 items
2025-06-20 07:37:41.831 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:37:41.833 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.005ms - processed: 0 items - remaining: 2 items
2025-06-20 07:37:51.835 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:37:51.835 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0057ms - processed: 0 items - remaining: 2 items
2025-06-20 07:38:01.836 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:38:01.837 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 2 items
2025-06-20 07:38:11.837 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:38:11.838 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2025-06-20 07:38:21.840 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:38:21.841 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0205ms - processed: 0 items - remaining: 2 items
2025-06-20 07:38:31.842 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 07:38:31.845 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 2.3777ms - processed: 2 items - remaining: 0 items
2025-06-20 07:47:44.036 +09:00 [DBG] Connection id "0HNDFG26AMUCL" accepted.
2025-06-20 07:47:44.038 +09:00 [DBG] Connection id "0HNDFG26AMUCL" started.
2025-06-20 07:47:44.075 +09:00 [DBG] Connection 0HNDFG26AMUCL established using the following protocol: "Tls12"
2025-06-20 07:47:44.087 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-20 07:47:44.089 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-20 07:47:44.089 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-20 07:47:44.090 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 07:47:44.091 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 07:47:44.091 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 07:47:44.092 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 07:47:44.094 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 07:47:44.095 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 07:47:44.096 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 07:47:44.096 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 07:47:44.096 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 07:47:44.096 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:47:44.100 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 07:47:44.101 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-20 07:47:44.101 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-20 07:47:44.101 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-20 07:47:44.102 +09:00 [DBG] Connection id "0HNDFG26AMUCL", Request id "0HNDFG26AMUCL:00000001": started reading request body.
2025-06-20 07:47:44.102 +09:00 [DBG] Connection id "0HNDFG26AMUCL", Request id "0HNDFG26AMUCL:00000001": done reading request body.
2025-06-20 07:47:44.103 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-20 07:47:44.103 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:47:44.103 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:47:44.103 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-20 07:47:44.104 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 07:47:44.104 +09:00 [INF] Creating a new approval request.
2025-06-20 07:47:44.104 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"4c7f9d42-29f8-4a54-a31f-fe64b39580c5","RequestTitle":"eee","RequestContent":"eee","ApplicantEmployeeNumber":"EMP0001","ApplicantName":"User 1","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-19T22:47:41.9298930Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EC20505","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 6","Position":"Staff","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-20 07:47:49.653 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 07:47:49.658 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:47:49.658 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:47:49.659 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:47:49.659 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-20 07:47:49.659 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-20 07:47:49.660 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-20 07:47:49.661 +09:00 [DBG] Creating DbConnection.
2025-06-20 07:47:49.662 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 07:47:49.662 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 07:47:49.667 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:47:49.668 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-20 07:47:49.671 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-20 07:47:49.672 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:47:49.672 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-06-20 07:47:49.672 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-20 07:47:49.673 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 3), @p11='?' (Size = 3), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-20 07:47:49.675 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 3), @p11='?' (Size = 3), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-20 07:47:49.676 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:47:49.676 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-20 07:47:49.676 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 07:47:49.676 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:47:49.676 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 07:47:49.676 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-20 07:47:49.677 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-20 07:47:49.677 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:47:49.677 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-20 07:47:49.677 +09:00 [DBG] Committing transaction.
2025-06-20 07:47:49.678 +09:00 [DBG] Committed transaction.
2025-06-20 07:47:49.679 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 07:47:49.679 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 07:47:49.679 +09:00 [DBG] Disposing transaction.
2025-06-20 07:47:49.679 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:47:49.679 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 07:47:49.680 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-20 07:47:49.680 +09:00 [INF] Approval request created successfully with ID: "4c7f9d42-29f8-4a54-a31f-fe64b39580c5"
2025-06-20 07:47:51.695 +09:00 [INF] Start processing HTTP request GET https://localhost:7129/api/userservice/users/EC20505
2025-06-20 07:47:51.695 +09:00 [INF] Sending HTTP request GET https://localhost:7129/api/userservice/users/EC20505
2025-06-20 07:47:53.864 +09:00 [INF] Received HTTP response headers after 2169.1258ms - 200
2025-06-20 07:47:53.866 +09:00 [INF] End processing HTTP request after 2171.1459ms - 200
2025-06-20 07:47:53.879 +09:00 [INF] User found: {"EmployeeNumber":"EC20505","Name":"User 6","Department":"Support","Email":"wonjin.byun@volvo.com","Role":"User","$type":"UserInfoDto"}
2025-06-20 08:09:31.625 +09:00 [INF] Starting Approval Service API
2025-06-20 08:09:31.857 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 08:09:31.984 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 08:09:32.471 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 08:09:32.479 +09:00 [DBG] Creating DbConnection.
2025-06-20 08:09:32.487 +09:00 [DBG] Created DbConnection. (8ms).
2025-06-20 08:09:32.491 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:09:32.499 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:09:32.501 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:09:32.504 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:09:32.506 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 08:09:32.507 +09:00 [DBG] Creating DbConnection.
2025-06-20 08:09:32.507 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 08:09:32.510 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-06-20 08:09:32.511 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-06-20 08:09:32.512 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:09:32.513 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:09:32.516 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 08:09:32.535 +09:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 08:09:32.537 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:09:32.538 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-20 08:09:32.541 +09:00 [DBG] Creating DbConnection.
2025-06-20 08:09:32.541 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 08:09:32.541 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:09:32.541 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:09:32.541 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:09:32.541 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:09:32.542 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 08:09:32.542 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 08:09:32.542 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 08:09:32.542 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:09:32.542 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:09:32.542 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 08:09:32.542 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 08:09:32.543 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:09:32.543 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:09:32.569 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-20 08:09:32.687 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 08:09:32.705 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:09:32.706 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:09:32.707 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 08:09:32.707 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:09:32.707 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:09:32.707 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-20 08:09:32.709 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-20 08:09:32.714 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:09:32.715 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-20 08:09:32.716 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:09:32.716 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:09:32.717 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 08:09:32.718 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:09:32.718 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:09:32.720 +09:00 [DBG] Hosting starting
2025-06-20 08:09:32.759 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-20 08:09:32.759 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 08:09:33.094 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-20 08:09:33.095 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-20 08:09:33.095 +09:00 [DBG] Loaded hosting startup assembly Volvo.Service.Approval.API
2025-06-20 08:09:33.095 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 08:09:33.095 +09:00 [INF] Hosting environment: Development
2025-06-20 08:09:33.096 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-20 08:09:33.096 +09:00 [DBG] Hosting started
2025-06-20 08:10:55.633 +09:00 [DBG] Connection id "0HNDFGQ5MVKO7" accepted.
2025-06-20 08:10:55.637 +09:00 [DBG] Connection id "0HNDFGQ5MVKO7" started.
2025-06-20 08:10:55.670 +09:00 [DBG] Connection 0HNDFGQ5MVKO7 established using the following protocol: "Tls12"
2025-06-20 08:10:55.702 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-20 08:10:55.719 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 08:10:55.721 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 08:10:55.735 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 08:10:55.751 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 08:10:55.751 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 08:10:55.764 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 08:10:55.765 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 08:10:55.765 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 08:10:55.765 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 08:10:55.765 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 08:10:55.765 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 08:10:55.766 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 08:10:55.772 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 08:10:55.774 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 08:10:55.774 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 08:10:55.775 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 08:10:55.775 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 08:10:55.775 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 08:10:55.778 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 08:10:55.786 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 08:10:55.795 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantName = r.ApplicantName, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantPosition = r.ApplicantPosition, 
        Steps = r.Steps, 
        Attachments = r.Attachments, 
        Status = r.Status, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-20 08:10:55.860 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-20 08:10:55.873 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            List<ApprovalStep> namelessParameter{0};
            List<ApprovalAttachment> namelessParameter{1};
            string value11;
            int? value12;
            string value13;
            string value14;
            string value15;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            namelessParameter{1} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalAttachment, List<ApprovalAttachment>>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
                }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()]);
            value11 = dataReader.GetString(28);
            value12 = (int?)dataReader.GetInt32(29);
            value13 = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
            value14 = dataReader.IsDBNull(31) ? default(string) : dataReader.GetString(31);
            value15 = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                namelessParameter{0}, 
                namelessParameter{1}, 
                value11, 
                (object)value12, 
                value13, 
                value14, 
                value15 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(8) ? default(object) : (object)dataReader.GetGuid(8) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(8) ? default(Guid) : dataReader.GetGuid(8);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(11) ? default(Guid) : dataReader.GetGuid(11);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(16) ? default(bool) : dataReader.GetBoolean(16);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(18) ? default(int) : dataReader.GetInt32(18);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalAttachment>, ApprovalAttachment, ApprovalAttachment>(
            collectionId: 1, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
            { 
                (object)(Guid?)dataReader.GetGuid(0), 
                (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
            }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(20) ? default(Guid?) : (Guid?)dataReader.GetGuid(20) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
            { 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
            }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalAttachment entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalAttachment instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalAttachment);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(20) ? default(object) : (object)dataReader.GetGuid(20) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalAttachment)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                {
                                    return 
                                    {
                                        ApprovalAttachment instance;
                                        instance = new ApprovalAttachment();
                                        instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(20) ? default(Guid) : dataReader.GetGuid(20);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(21) ? default(Guid) : dataReader.GetGuid(21);
                                        instance.<FileName>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<FilePath>k__BackingField = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
                                        instance.<FileSize>k__BackingField = dataReader.IsDBNull(24) ? default(long?) : (long?)dataReader.GetInt64(24);
                                        instance.<FileType>k__BackingField = dataReader.IsDBNull(25) ? default(string) : dataReader.GetString(25);
                                        instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(26) ? default(DateTime) : dataReader.GetDateTime(26);
                                        instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalAttachment)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            ApplicantDepartment = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[8]), 
            Attachments = (List<ApprovalAttachment>)(resultContext.Values[9]), 
            Status = (string)(resultContext.Values[10]), 
            CurrentStep = (int)(int?)(resultContext.Values[11]), 
            CurrentApproverName = (string)(resultContext.Values[12]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[13]), 
            CurrentActionStatus = (string)(resultContext.Values[14]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-20 08:10:55.898 +09:00 [DBG] Creating DbConnection.
2025-06-20 08:10:55.898 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 08:10:55.898 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:10:55.899 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:10:55.899 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 08:10:55.899 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:10:55.900 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-20 08:10:55.902 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 08:10:55.909 +09:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 08:10:55.930 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.947 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.947 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.947 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.947 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.948 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:10:55.949 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:10:55.949 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 39ms reading results.
2025-06-20 08:10:55.949 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:10:55.949 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:10:55.953 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 08:10:55.957 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 08:10:55.958 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 08:10:55.958 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 08:10:55.962 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 08:10:55.963 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 08:10:56.133 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 366.7182ms
2025-06-20 08:10:56.136 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 08:10:56.136 +09:00 [DBG] Connection id "0HNDFGQ5MVKO7" completed keep alive response.
2025-06-20 08:10:56.137 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 08:10:56.138 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:10:56.138 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:10:56.139 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 438.355ms
2025-06-20 08:11:40.472 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-20 08:11:40.476 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-20 08:11:40.476 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-20 08:11:40.477 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 08:11:40.478 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 08:11:40.504 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 08:11:40.510 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 08:11:40.511 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 08:11:40.511 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 08:11:40.511 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 08:11:40.511 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 08:11:40.511 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 08:11:40.511 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 08:11:40.513 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 08:11:40.513 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-20 08:11:40.514 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-20 08:11:40.515 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-20 08:11:40.521 +09:00 [DBG] Connection id "0HNDFGQ5MVKO7", Request id "0HNDFGQ5MVKO7:00000002": started reading request body.
2025-06-20 08:11:40.524 +09:00 [DBG] Connection id "0HNDFGQ5MVKO7", Request id "0HNDFGQ5MVKO7:00000002": done reading request body.
2025-06-20 08:11:40.537 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-20 08:11:40.537 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 08:11:40.537 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 08:11:40.537 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-20 08:11:40.543 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 08:11:40.544 +09:00 [INF] Creating a new approval request.
2025-06-20 08:11:40.547 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"2012c429-89a0-42f3-9efd-ff27f538fe09","RequestTitle":"aaa","RequestContent":"aaaa","ApplicantEmployeeNumber":"EMP0001","ApplicantName":"User 1","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-19T23:11:37.6410450Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EC20505","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 6","Position":"Staff","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-20 08:11:41.782 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 08:11:41.810 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:11:41.814 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:11:41.820 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:11:41.821 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-20 08:11:41.823 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-20 08:11:41.833 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-20 08:11:41.865 +09:00 [DBG] Creating DbConnection.
2025-06-20 08:11:41.866 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 08:11:41.866 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:11:41.866 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:11:41.866 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-20 08:11:41.868 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-20 08:11:41.869 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 08:11:41.869 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:11:41.870 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:11:41.870 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 4), @p11='?' (Size = 3), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-20 08:11:41.872 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 4), @p11='?' (Size = 3), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-20 08:11:41.873 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:11:41.873 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-20 08:11:41.873 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 08:11:41.874 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:11:41.874 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:11:41.874 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-20 08:11:41.875 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-20 08:11:41.875 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:11:41.875 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-20 08:11:41.876 +09:00 [DBG] Committing transaction.
2025-06-20 08:11:41.877 +09:00 [DBG] Committed transaction.
2025-06-20 08:11:41.878 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:11:41.878 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:11:41.879 +09:00 [DBG] Disposing transaction.
2025-06-20 08:11:41.883 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:11:41.883 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:11:41.884 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-20 08:11:41.884 +09:00 [INF] Approval request created successfully with ID: "2012c429-89a0-42f3-9efd-ff27f538fe09"
2025-06-20 08:11:43.815 +09:00 [INF] Start processing HTTP request GET https://localhost:7129/api/userservice/users/EC20505
2025-06-20 08:11:43.819 +09:00 [INF] Sending HTTP request GET https://localhost:7129/api/userservice/users/EC20505
2025-06-20 08:11:45.799 +09:00 [INF] Received HTTP response headers after 1977.5894ms - 200
2025-06-20 08:11:45.799 +09:00 [INF] End processing HTTP request after 1985.3766ms - 200
2025-06-20 08:11:45.802 +09:00 [INF] User found: {"EmployeeNumber":"EC20505","Name":"User 6","Department":"Support","Email":"wonjin.byun@volvo.com","Role":"User","$type":"UserInfoDto"}
2025-06-20 08:11:53.416 +09:00 [INF] Ensuring RabbitMQ connection to localhost
2025-06-20 08:12:05.168 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 08:12:05.168 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 08:12:05.168 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 08:12:05.169 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 08:12:05.169 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 08:12:05.169 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 08:12:05.189 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API)"] for address (approvalId=[2012c429-89a0-42f3-9efd-ff27f538fe09],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-20 08:12:05.192 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API) resulting in /api/ApprovalRequest/2012c429-89a0-42f3-9efd-ff27f538fe09 and 
2025-06-20 08:12:05.192 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API)"] with result /api/ApprovalRequest/2012c429-89a0-42f3-9efd-ff27f538fe09
2025-06-20 08:12:05.195 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API) in 24684.3683ms
2025-06-20 08:12:05.196 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 08:12:05.198 +09:00 [DBG] Connection id "0HNDFGQ5MVKO7" completed keep alive response.
2025-06-20 08:12:05.198 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 08:12:05.199 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:12:05.199 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:12:05.199 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 24728.4977ms
2025-06-20 08:12:05.260 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-20 08:12:05.260 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 08:12:05.260 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 08:12:05.261 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 08:12:05.264 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 08:12:05.264 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 08:12:05.265 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 08:12:05.265 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 08:12:05.265 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 08:12:05.265 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 08:12:05.265 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 08:12:05.265 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 08:12:05.265 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 08:12:05.267 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 08:12:05.267 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 08:12:05.267 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 08:12:05.267 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 08:12:05.267 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 08:12:05.267 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 08:12:05.267 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 08:12:05.269 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 08:12:05.272 +09:00 [DBG] Creating DbConnection.
2025-06-20 08:12:05.272 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 08:12:05.272 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:12:05.273 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:12:05.273 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 08:12:05.273 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:12:05.273 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:12:05.273 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 08:12:05.274 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 08:12:05.275 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.276 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.276 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.276 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.276 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.276 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.276 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.276 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.277 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:12:05.277 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:12:05.277 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-20 08:12:05.278 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:12:05.278 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:12:05.278 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 08:12:05.278 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 08:12:05.278 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 08:12:05.278 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 08:12:05.278 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 08:12:05.278 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 08:12:05.279 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 14.1893ms
2025-06-20 08:12:05.279 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 08:12:05.279 +09:00 [DBG] Connection id "0HNDFGQ5MVKO7" completed keep alive response.
2025-06-20 08:12:05.279 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 08:12:05.279 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:12:05.279 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:12:05.279 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 19.3175ms
2025-06-20 08:12:55.800 +09:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IUserServiceProxy'
2025-06-20 08:13:05.803 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:13:05.805 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0917ms - processed: 0 items - remaining: 1 items
2025-06-20 08:13:10.650 +09:00 [DBG] Connection id "0HNDFGQ5MVKO7" received FIN.
2025-06-20 08:13:10.672 +09:00 [DBG] Connection id "0HNDFGQ5MVKO7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 08:13:10.673 +09:00 [DBG] Connection id "0HNDFGQ5MVKO7" disconnecting.
2025-06-20 08:13:10.677 +09:00 [DBG] Connection id "0HNDFGQ5MVKO7" stopped.
2025-06-20 08:13:15.807 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:13:15.807 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0377ms - processed: 0 items - remaining: 1 items
2025-06-20 08:13:25.810 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:13:25.819 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.185ms - processed: 0 items - remaining: 1 items
2025-06-20 08:13:35.824 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:13:35.828 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0095ms - processed: 0 items - remaining: 1 items
2025-06-20 08:13:45.830 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:13:45.831 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0881ms - processed: 0 items - remaining: 1 items
2025-06-20 08:13:55.833 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:13:55.834 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0076ms - processed: 0 items - remaining: 1 items
2025-06-20 08:14:05.836 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:14:05.837 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.1007ms - processed: 0 items - remaining: 1 items
2025-06-20 08:14:15.840 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:14:15.840 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.3454ms - processed: 0 items - remaining: 1 items
2025-06-20 08:14:25.841 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:14:25.841 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2025-06-20 08:14:35.842 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:14:35.843 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0064ms - processed: 0 items - remaining: 1 items
2025-06-20 08:14:45.845 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:14:45.846 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0624ms - processed: 0 items - remaining: 1 items
2025-06-20 08:14:55.851 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:14:55.856 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 4.5591ms - processed: 1 items - remaining: 0 items
2025-06-20 08:17:29.683 +09:00 [DBG] Connection id "0HNDFGQ5MVKO8" accepted.
2025-06-20 08:17:29.685 +09:00 [DBG] Connection id "0HNDFGQ5MVKO8" started.
2025-06-20 08:17:29.717 +09:00 [DBG] Connection 0HNDFGQ5MVKO8 established using the following protocol: "Tls12"
2025-06-20 08:17:29.722 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-20 08:17:29.723 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 08:17:29.723 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 08:17:29.724 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 08:17:29.725 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 08:17:29.725 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 08:17:29.727 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 08:17:29.727 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 08:17:29.727 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 08:17:29.727 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 08:17:29.728 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 08:17:29.728 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 08:17:29.728 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 08:17:29.730 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 08:17:29.730 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 08:17:29.730 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 08:17:29.730 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 08:17:29.730 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 08:17:29.730 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 08:17:29.731 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 08:17:29.733 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 08:17:29.735 +09:00 [DBG] Creating DbConnection.
2025-06-20 08:17:29.736 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 08:17:29.736 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:17:29.739 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:17:29.739 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 08:17:29.739 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:17:29.739 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:17:29.739 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 08:17:29.742 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 08:17:29.744 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.744 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.744 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.744 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.744 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.745 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.746 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.746 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.746 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.746 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:17:29.746 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:17:29.746 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-20 08:17:29.746 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:17:29.747 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:17:29.747 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 08:17:29.747 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 08:17:29.747 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 08:17:29.747 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 08:17:29.747 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 08:17:29.747 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 08:17:29.749 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 20.6942ms
2025-06-20 08:17:29.749 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 08:17:29.749 +09:00 [DBG] Connection id "0HNDFGQ5MVKO8" completed keep alive response.
2025-06-20 08:17:29.749 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 08:17:29.749 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:17:29.749 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:17:29.749 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 27.3225ms
2025-06-20 08:18:44.690 +09:00 [DBG] Connection id "0HNDFGQ5MVKO8" received FIN.
2025-06-20 08:18:44.722 +09:00 [DBG] Connection id "0HNDFGQ5MVKO8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 08:18:44.723 +09:00 [DBG] Connection id "0HNDFGQ5MVKO8" disconnecting.
2025-06-20 08:18:44.725 +09:00 [DBG] Connection id "0HNDFGQ5MVKO8" stopped.
2025-06-20 08:19:16.491 +09:00 [DBG] Connection id "0HNDFGQ5MVKO9" accepted.
2025-06-20 08:19:16.492 +09:00 [DBG] Connection id "0HNDFGQ5MVKO9" started.
2025-06-20 08:19:16.529 +09:00 [DBG] Connection 0HNDFGQ5MVKO9 established using the following protocol: "Tls12"
2025-06-20 08:19:16.594 +09:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - application/json; charset=utf-8 null
2025-06-20 08:19:16.594 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/create'
2025-06-20 08:19:16.595 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/create' is valid for the request path '/api/approvalrequest/create'
2025-06-20 08:19:16.595 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 08:19:16.596 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 08:19:16.596 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 08:19:16.596 +09:00 [INF] Route matched with {action = "CreateApprovalRequest", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateApprovalRequest(ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 08:19:16.596 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 08:19:16.597 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 08:19:16.597 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 08:19:16.597 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 08:19:16.597 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 08:19:16.597 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 08:19:16.598 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 08:19:16.598 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-20 08:19:16.599 +09:00 [DBG] Attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' using the name '' in request data ...
2025-06-20 08:19:16.599 +09:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2025-06-20 08:19:16.599 +09:00 [DBG] Connection id "0HNDFGQ5MVKO9", Request id "0HNDFGQ5MVKO9:00000001": started reading request body.
2025-06-20 08:19:16.599 +09:00 [DBG] Connection id "0HNDFGQ5MVKO9", Request id "0HNDFGQ5MVKO9:00000001": done reading request body.
2025-06-20 08:19:16.600 +09:00 [DBG] JSON input formatter succeeded, deserializing to type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'
2025-06-20 08:19:16.600 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 08:19:16.600 +09:00 [DBG] Done attempting to bind parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 08:19:16.600 +09:00 [DBG] Attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto' ...
2025-06-20 08:19:16.600 +09:00 [DBG] Done attempting to validate the bound parameter 'approvalRequest' of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 08:19:16.600 +09:00 [INF] Creating a new approval request.
2025-06-20 08:19:16.601 +09:00 [DBG] Approval Request Details: {"CurrentApproverName":"","CurrentActionStatus":"Pending","ApprovalId":"8f0bc056-4042-426d-b28c-40df69ca658b","RequestTitle":"aaaa","RequestContent":"aaaa","ApplicantEmployeeNumber":"EMP0001","ApplicantName":"User 1","ApplicantPosition":null,"ApplicantDepartment":"Support","Status":"Pending","RequestedAt":"2025-06-19T23:19:13.0100220Z","RespondedAt":null,"ApproverComment":null,"ApprovalType":null,"CurrentStep":1,"CurrentApproverEmployeeNumber":"","MisKey":null,"Steps":[{"StepId":"00000000-0000-0000-0000-000000000000","ApprovalId":"00000000-0000-0000-0000-000000000000","ApproverEmployeeNumber":"EC20505","Sequence":1,"IsFinalApprover":true,"ActionStatus":"Pending","ActionDate":null,"Comment":null,"ApproverName":"User 6","Position":"Staff","Department":"Support","StepType":"Approval","ApprovalRequest":null,"$type":"ApprovalStep"}],"Attachments":[],"$type":"ApprovalRequestWithCurrentStepDto"}
2025-06-20 08:19:25.007 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 08:19:25.010 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:25.010 +09:00 [DBG] 'ApprovalDbContext' generated a value for the property 'ApprovalStep.StepId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:25.011 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:25.011 +09:00 [DBG] SaveChanges starting for 'ApprovalDbContext'.
2025-06-20 08:19:25.011 +09:00 [DBG] DetectChanges starting for 'ApprovalDbContext'.
2025-06-20 08:19:25.012 +09:00 [DBG] DetectChanges completed for 'ApprovalDbContext'.
2025-06-20 08:19:25.014 +09:00 [DBG] Creating DbConnection.
2025-06-20 08:19:25.014 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 08:19:25.014 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:19:25.014 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:19:25.015 +09:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-20 08:19:25.015 +09:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-06-20 08:19:25.016 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 08:19:25.016 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:19:25.016 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:19:25.016 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 4), @p11='?' (Size = 4), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-20 08:19:25.017 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 7), @p2='?' (Size = 7), @p3='?' (Size = 6), @p4='?', @p5='?', @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Int32), @p9='?', @p10='?' (Size = 4), @p11='?' (Size = 4), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalRequests" ("ApprovalId", "ApplicantDepartment", "ApplicantEmployeeNumber", "ApplicantName", "ApplicantPosition", "ApprovalType", "ApproverComment", "CurrentApproverEmployeeNumber", "CurrentStep", "MisKey", "RequestContent", "RequestTitle", "RequestedAt", "RespondedAt", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-06-20 08:19:25.018 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:19:25.018 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-20 08:19:25.018 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 08:19:25.018 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:19:25.018 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:19:25.018 +09:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-20 08:19:25.019 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 7), @p3='?' (DbType = Guid), @p4='?' (Size = 7), @p5='?' (Size = 6), @p6='?', @p7='?' (Size = 7), @p8='?' (DbType = Boolean), @p9='?' (Size = 5), @p10='?' (DbType = Int32), @p11='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ApprovalSteps" ("StepId", "ActionDate", "ActionStatus", "ApprovalId", "ApproverEmployeeNumber", "ApproverName", "Comment", "Department", "IsFinalApprover", "Position", "Sequence", "StepType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-20 08:19:25.019 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:19:25.019 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 0ms reading results.
2025-06-20 08:19:25.020 +09:00 [DBG] Committing transaction.
2025-06-20 08:19:25.021 +09:00 [DBG] Committed transaction.
2025-06-20 08:19:25.021 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:19:25.021 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:19:25.021 +09:00 [DBG] Disposing transaction.
2025-06-20 08:19:25.022 +09:00 [DBG] An entity of type 'ApprovalRequest' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:25.022 +09:00 [DBG] An entity of type 'ApprovalStep' tracked by 'ApprovalDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:25.022 +09:00 [DBG] SaveChanges completed for 'ApprovalDbContext' with 2 entities written to the database.
2025-06-20 08:19:25.022 +09:00 [INF] Approval request created successfully with ID: "8f0bc056-4042-426d-b28c-40df69ca658b"
2025-06-20 08:19:27.558 +09:00 [INF] Start processing HTTP request GET https://localhost:7129/api/userservice/users/EC20505
2025-06-20 08:19:27.558 +09:00 [INF] Sending HTTP request GET https://localhost:7129/api/userservice/users/EC20505
2025-06-20 08:19:29.729 +09:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IUserServiceProxy'
2025-06-20 08:19:32.748 +09:00 [INF] Received HTTP response headers after 5189.4278ms - 200
2025-06-20 08:19:32.749 +09:00 [INF] End processing HTTP request after 5190.7747ms - 200
2025-06-20 08:19:32.750 +09:00 [INF] User found: {"EmployeeNumber":"EC20505","Name":"User 6","Department":"Support","Email":"wonjin.byun@volvo.com","Role":"User","$type":"UserInfoDto"}
2025-06-20 08:19:34.257 +09:00 [INF] Ensuring RabbitMQ connection to localhost
2025-06-20 08:19:39.777 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:19:39.777 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0209ms - processed: 0 items - remaining: 1 items
2025-06-20 08:19:39.778 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 08:19:39.779 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 08:19:39.779 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 08:19:39.779 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 08:19:39.779 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 08:19:39.779 +09:00 [INF] Executing CreatedAtActionResult, writing value of type 'ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto'.
2025-06-20 08:19:39.780 +09:00 [DBG] Found the endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API)"] for address (approvalId=[8f0bc056-4042-426d-b28c-40df69ca658b],action=[GetRequestById],controller=[ApprovalRequest])
2025-06-20 08:19:39.781 +09:00 [DBG] Successfully processed template api/ApprovalRequest/{approvalId} for ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API) resulting in /api/ApprovalRequest/8f0bc056-4042-426d-b28c-40df69ca658b and 
2025-06-20 08:19:39.781 +09:00 [DBG] Link generation succeeded for endpoints ["ApprovalService.API.Controllers.ApprovalRequestController.GetRequestById (Volvo.Service.Approval.API)"] with result /api/ApprovalRequest/8f0bc056-4042-426d-b28c-40df69ca658b
2025-06-20 08:19:39.783 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API) in 23186.3389ms
2025-06-20 08:19:39.783 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.CreateApprovalRequest (Volvo.Service.Approval.API)'
2025-06-20 08:19:39.784 +09:00 [DBG] Connection id "0HNDFGQ5MVKO9" completed keep alive response.
2025-06-20 08:19:39.784 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 08:19:39.784 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:19:39.784 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:19:39.784 +09:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/approvalrequest/create - 201 null application/json; charset=utf-8 23190.9696ms
2025-06-20 08:19:39.832 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-20 08:19:39.833 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 08:19:39.833 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 08:19:39.833 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 08:19:39.834 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 08:19:39.834 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 08:19:39.834 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 08:19:39.834 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 08:19:39.834 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 08:19:39.834 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 08:19:39.834 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 08:19:39.834 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 08:19:39.834 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 08:19:39.836 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 08:19:39.836 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 08:19:39.837 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 08:19:39.837 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 08:19:39.837 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 08:19:39.837 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 08:19:39.837 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 08:19:39.838 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 08:19:39.839 +09:00 [DBG] Creating DbConnection.
2025-06-20 08:19:39.839 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 08:19:39.839 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:19:39.839 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:19:39.839 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 08:19:39.839 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:19:39.839 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 08:19:39.839 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 08:19:39.840 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 08:19:39.841 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.842 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.842 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.842 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.842 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.843 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.843 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.843 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.843 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.844 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.844 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.844 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.844 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.845 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.845 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.845 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.845 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 08:19:39.845 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:19:39.846 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-20 08:19:39.846 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 08:19:39.846 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:19:39.846 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 08:19:39.846 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 08:19:39.846 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 08:19:39.847 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 08:19:39.847 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 08:19:39.847 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 08:19:39.848 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 13.7354ms
2025-06-20 08:19:39.848 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 08:19:39.848 +09:00 [DBG] Connection id "0HNDFGQ5MVKO9" completed keep alive response.
2025-06-20 08:19:39.848 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 08:19:39.848 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 08:19:39.849 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 08:19:39.849 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 16.6565ms
2025-06-20 08:19:49.777 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:19:49.778 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
2025-06-20 08:19:59.779 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:19:59.782 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.8286ms - processed: 0 items - remaining: 1 items
2025-06-20 08:20:09.784 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:20:09.784 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0057ms - processed: 0 items - remaining: 1 items
2025-06-20 08:20:19.787 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:20:19.789 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0893ms - processed: 0 items - remaining: 1 items
2025-06-20 08:20:29.791 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:20:29.791 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0057ms - processed: 0 items - remaining: 1 items
2025-06-20 08:20:39.793 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:20:39.793 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0064ms - processed: 0 items - remaining: 1 items
2025-06-20 08:20:46.501 +09:00 [DBG] Connection id "0HNDFGQ5MVKO9" received FIN.
2025-06-20 08:20:46.501 +09:00 [DBG] Connection id "0HNDFGQ5MVKO9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 08:20:46.502 +09:00 [DBG] Connection id "0HNDFGQ5MVKO9" disconnecting.
2025-06-20 08:20:46.502 +09:00 [DBG] Connection id "0HNDFGQ5MVKO9" stopped.
2025-06-20 08:20:49.794 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:20:49.795 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0044ms - processed: 0 items - remaining: 1 items
2025-06-20 08:20:59.797 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:20:59.797 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0762ms - processed: 0 items - remaining: 1 items
2025-06-20 08:21:09.798 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:21:09.799 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0122ms - processed: 0 items - remaining: 1 items
2025-06-20 08:21:19.801 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:21:19.801 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0193ms - processed: 0 items - remaining: 1 items
2025-06-20 08:21:29.802 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:21:29.803 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0051ms - processed: 0 items - remaining: 1 items
2025-06-20 08:21:39.806 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 08:21:39.806 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0047ms - processed: 0 items - remaining: 1 items
2025-06-20 08:21:39.836 +09:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IUserServiceProxy'
2025-06-20 08:21:49.807 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:21:49.807 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 2 items
2025-06-20 08:21:59.807 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:21:59.808 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0057ms - processed: 0 items - remaining: 2 items
2025-06-20 08:22:09.811 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:22:09.812 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.1007ms - processed: 0 items - remaining: 2 items
2025-06-20 08:22:19.812 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:22:19.813 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0427ms - processed: 0 items - remaining: 2 items
2025-06-20 08:22:29.814 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:22:29.815 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0043ms - processed: 0 items - remaining: 2 items
2025-06-20 08:22:39.817 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:22:39.818 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0049ms - processed: 0 items - remaining: 2 items
2025-06-20 08:22:49.820 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:22:49.822 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0105ms - processed: 0 items - remaining: 2 items
2025-06-20 08:22:59.822 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:22:59.823 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0185ms - processed: 0 items - remaining: 2 items
2025-06-20 08:23:09.824 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:23:09.825 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0162ms - processed: 0 items - remaining: 2 items
2025-06-20 08:23:19.826 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:23:19.827 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0071ms - processed: 0 items - remaining: 2 items
2025-06-20 08:23:29.829 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:23:29.830 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0584ms - processed: 0 items - remaining: 2 items
2025-06-20 08:23:39.832 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:23:39.833 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0061ms - processed: 0 items - remaining: 2 items
2025-06-20 08:23:49.834 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:23:49.835 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.007ms - processed: 0 items - remaining: 2 items
2025-06-20 08:23:59.835 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:23:59.836 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0164ms - processed: 0 items - remaining: 2 items
2025-06-20 08:24:09.836 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:24:09.837 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 2 items
2025-06-20 08:24:19.842 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:24:19.844 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.1902ms - processed: 0 items - remaining: 2 items
2025-06-20 08:24:29.846 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:24:29.847 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0725ms - processed: 0 items - remaining: 2 items
2025-06-20 08:24:39.848 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:24:39.858 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.2007ms - processed: 0 items - remaining: 2 items
2025-06-20 08:24:49.860 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:24:49.865 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0359ms - processed: 0 items - remaining: 2 items
2025-06-20 08:24:59.865 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:24:59.870 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0047ms - processed: 0 items - remaining: 2 items
2025-06-20 08:25:09.872 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:25:09.873 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0092ms - processed: 0 items - remaining: 2 items
2025-06-20 08:25:19.874 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 08:25:19.902 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0181ms - processed: 0 items - remaining: 2 items
2025-06-20 08:25:29.908 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-06-20 13:25:48.968 +09:00 [INF] Starting Approval Service API
2025-06-20 13:25:49.108 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 13:25:49.223 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 13:25:49.599 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:25:49.608 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:25:49.622 +09:00 [DBG] Created DbConnection. (13ms).
2025-06-20 13:25:49.626 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:25:49.636 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:25:49.638 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:25:49.642 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-20 13:25:49.645 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 13:25:49.646 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:25:49.646 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:25:49.651 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2025-06-20 13:25:49.651 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (7ms).
2025-06-20 13:25:49.651 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:25:49.652 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:25:49.655 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 13:25:49.691 +09:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 13:25:49.694 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:25:49.698 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (4ms).
2025-06-20 13:25:49.705 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:25:49.705 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:25:49.705 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:25:49.706 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:25:49.706 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:25:49.706 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:25:49.706 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 13:25:49.706 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 13:25:49.708 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-06-20 13:25:49.708 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:25:49.708 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:25:49.708 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 13:25:49.709 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 13:25:49.715 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:25:49.715 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:25:49.748 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-20 13:25:49.874 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 13:25:49.891 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:25:49.891 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:25:49.891 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:25:49.892 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:25:49.892 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:25:49.892 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-20 13:25:49.893 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-20 13:25:49.896 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:25:49.896 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 2ms reading results.
2025-06-20 13:25:49.897 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:25:49.897 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:25:49.898 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:25:49.899 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:25:49.899 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:25:49.900 +09:00 [DBG] Hosting starting
2025-06-20 13:25:49.920 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-20 13:25:49.920 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 13:25:50.369 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-20 13:25:50.370 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-20 13:25:50.370 +09:00 [DBG] Loaded hosting startup assembly Volvo.Service.Approval.API
2025-06-20 13:25:50.370 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 13:25:50.370 +09:00 [INF] Hosting environment: Development
2025-06-20 13:25:50.370 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-20 13:25:50.370 +09:00 [DBG] Hosting started
2025-06-20 13:25:58.318 +09:00 [DBG] Connection id "0HNDFMA751L05" accepted.
2025-06-20 13:25:58.319 +09:00 [DBG] Connection id "0HNDFMA751L05" started.
2025-06-20 13:25:58.363 +09:00 [DBG] Connection 0HNDFMA751L05 established using the following protocol: "Tls12"
2025-06-20 13:25:58.397 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-20 13:25:58.409 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 13:25:58.411 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 13:25:58.419 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:25:58.434 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:25:58.434 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:25:58.443 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:25:58.443 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:25:58.444 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:25:58.444 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:25:58.444 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:25:58.444 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:25:58.445 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:25:58.451 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:25:58.452 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:25:58.453 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:25:58.453 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:25:58.453 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:25:58.453 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:25:58.454 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:25:58.462 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:25:58.470 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantName = r.ApplicantName, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantPosition = r.ApplicantPosition, 
        Steps = r.Steps, 
        Attachments = r.Attachments, 
        Status = r.Status, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-20 13:25:58.536 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-20 13:25:58.549 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            List<ApprovalStep> namelessParameter{0};
            List<ApprovalAttachment> namelessParameter{1};
            string value11;
            int? value12;
            string value13;
            string value14;
            string value15;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            namelessParameter{1} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalAttachment, List<ApprovalAttachment>>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
                }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()]);
            value11 = dataReader.GetString(28);
            value12 = (int?)dataReader.GetInt32(29);
            value13 = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
            value14 = dataReader.IsDBNull(31) ? default(string) : dataReader.GetString(31);
            value15 = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                namelessParameter{0}, 
                namelessParameter{1}, 
                value11, 
                (object)value12, 
                value13, 
                value14, 
                value15 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(8) ? default(object) : (object)dataReader.GetGuid(8) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(8) ? default(Guid) : dataReader.GetGuid(8);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(11) ? default(Guid) : dataReader.GetGuid(11);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(16) ? default(bool) : dataReader.GetBoolean(16);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(18) ? default(int) : dataReader.GetInt32(18);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalAttachment>, ApprovalAttachment, ApprovalAttachment>(
            collectionId: 1, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
            { 
                (object)(Guid?)dataReader.GetGuid(0), 
                (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
            }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(20) ? default(Guid?) : (Guid?)dataReader.GetGuid(20) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
            { 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
            }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalAttachment entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalAttachment instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalAttachment);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(20) ? default(object) : (object)dataReader.GetGuid(20) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalAttachment)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                {
                                    return 
                                    {
                                        ApprovalAttachment instance;
                                        instance = new ApprovalAttachment();
                                        instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(20) ? default(Guid) : dataReader.GetGuid(20);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(21) ? default(Guid) : dataReader.GetGuid(21);
                                        instance.<FileName>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<FilePath>k__BackingField = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
                                        instance.<FileSize>k__BackingField = dataReader.IsDBNull(24) ? default(long?) : (long?)dataReader.GetInt64(24);
                                        instance.<FileType>k__BackingField = dataReader.IsDBNull(25) ? default(string) : dataReader.GetString(25);
                                        instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(26) ? default(DateTime) : dataReader.GetDateTime(26);
                                        instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalAttachment)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            ApplicantDepartment = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[8]), 
            Attachments = (List<ApprovalAttachment>)(resultContext.Values[9]), 
            Status = (string)(resultContext.Values[10]), 
            CurrentStep = (int)(int?)(resultContext.Values[11]), 
            CurrentApproverName = (string)(resultContext.Values[12]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[13]), 
            CurrentActionStatus = (string)(resultContext.Values[14]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-20 13:25:58.567 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:25:58.567 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:25:58.567 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:25:58.567 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:25:58.567 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:25:58.568 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:25:58.568 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:25:58.569 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:25:58.575 +09:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:25:58.594 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.609 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.609 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.609 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.610 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.610 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.610 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.610 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.610 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.610 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.610 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.610 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.611 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.611 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.611 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.611 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.611 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:25:58.612 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:25:58.612 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 36ms reading results.
2025-06-20 13:25:58.612 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:25:58.612 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:25:58.613 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:25:58.614 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:25:58.614 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:25:58.614 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:25:58.614 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:25:58.614 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:25:58.662 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 216.3602ms
2025-06-20 13:25:58.664 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:25:58.664 +09:00 [DBG] Connection id "0HNDFMA751L05" completed keep alive response.
2025-06-20 13:25:58.665 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:25:58.666 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:25:58.666 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:25:58.666 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 270.3117ms
2025-06-20 13:27:23.348 +09:00 [WRN] As of ""2025-06-20T04:27:21.4418150+00:00"", the heartbeat has been running for ""00:00:01.4201350"" which is longer than ""00:00:01"". This could be caused by thread pool starvation.
2025-06-20 13:27:36.576 +09:00 [DBG] Connection id "0HNDFMA751L05" received FIN.
2025-06-20 13:27:37.300 +09:00 [DBG] Connection id "0HNDFMA751L05" disconnecting.
2025-06-20 13:27:37.636 +09:00 [DBG] Connection id "0HNDFMA751L05" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 13:27:39.820 +09:00 [DBG] Connection id "0HNDFMA751L05" stopped.
2025-06-20 13:27:59.017 +09:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IUserServiceProxy'
2025-06-20 13:28:09.114 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:28:09.211 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.2494ms - processed: 0 items - remaining: 1 items
2025-06-20 13:28:19.224 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:28:19.229 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0362ms - processed: 0 items - remaining: 1 items
2025-06-20 13:28:29.234 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:28:29.235 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0332ms - processed: 0 items - remaining: 1 items
2025-06-20 13:28:39.279 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:28:39.531 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0367ms - processed: 0 items - remaining: 1 items
2025-06-20 13:28:49.532 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:28:49.532 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-06-20 13:28:59.536 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:28:59.537 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0552ms - processed: 0 items - remaining: 1 items
2025-06-20 13:29:09.539 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:29:09.539 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-06-20 13:29:19.541 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:29:19.542 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0337ms - processed: 0 items - remaining: 1 items
2025-06-20 13:29:29.548 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:29:29.549 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0076ms - processed: 0 items - remaining: 1 items
2025-06-20 13:29:39.552 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:29:39.554 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0162ms - processed: 0 items - remaining: 1 items
2025-06-20 13:29:49.556 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:29:49.558 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0134ms - processed: 0 items - remaining: 1 items
2025-06-20 13:29:59.561 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:29:59.562 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0052ms - processed: 0 items - remaining: 1 items
2025-06-20 13:30:09.563 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:30:09.564 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0045ms - processed: 0 items - remaining: 1 items
2025-06-20 13:30:19.570 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:30:19.572 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0454ms - processed: 0 items - remaining: 1 items
2025-06-20 13:30:29.574 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:30:29.575 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0358ms - processed: 0 items - remaining: 1 items
2025-06-20 13:30:39.576 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:30:39.577 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0154ms - processed: 0 items - remaining: 1 items
2025-06-20 13:30:49.578 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:30:49.579 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0048ms - processed: 0 items - remaining: 1 items
2025-06-20 13:30:59.580 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:30:59.581 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0438ms - processed: 0 items - remaining: 1 items
2025-06-20 13:31:09.582 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:31:09.583 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0085ms - processed: 0 items - remaining: 1 items
2025-06-20 13:31:19.584 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:31:19.585 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0165ms - processed: 0 items - remaining: 1 items
2025-06-20 13:31:29.609 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:31:29.609 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.2336ms - processed: 1 items - remaining: 0 items
2025-06-20 13:32:46.194 +09:00 [DBG] Connection id "0HNDFMA751L06" accepted.
2025-06-20 13:32:46.195 +09:00 [DBG] Connection id "0HNDFMA751L06" started.
2025-06-20 13:32:46.219 +09:00 [DBG] Connection 0HNDFMA751L06 established using the following protocol: "Tls12"
2025-06-20 13:32:46.226 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-20 13:32:46.229 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 13:32:46.229 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 13:32:46.230 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:32:46.231 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:32:46.232 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:32:46.232 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:32:46.233 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:32:46.233 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:32:46.233 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:32:46.233 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:32:46.233 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:32:46.233 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:32:46.236 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:32:46.237 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:32:46.237 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:32:46.237 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:32:46.237 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:32:46.237 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:32:46.238 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:32:46.266 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:32:46.270 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:32:46.271 +09:00 [DBG] Created DbConnection. (1ms).
2025-06-20 13:32:46.271 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:32:46.273 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:32:46.273 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:32:46.274 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:32:46.274 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:32:46.274 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:32:46.276 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:32:46.282 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.282 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.282 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.283 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.284 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.284 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.284 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.284 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:32:46.284 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:32:46.284 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 8ms reading results.
2025-06-20 13:32:46.284 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:32:46.285 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:32:46.285 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:32:46.286 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:32:46.286 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:32:46.286 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:32:46.286 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:32:46.286 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:32:46.291 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 57.7449ms
2025-06-20 13:32:46.291 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:32:46.291 +09:00 [DBG] Connection id "0HNDFMA751L06" completed keep alive response.
2025-06-20 13:32:46.291 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:32:46.291 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:32:46.292 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:32:46.292 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 66.1309ms
2025-06-20 13:33:51.522 +09:00 [DBG] Connection id "0HNDFMA751L06" received FIN.
2025-06-20 13:33:51.524 +09:00 [DBG] Connection id "0HNDFMA751L06" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 13:33:51.524 +09:00 [DBG] Connection id "0HNDFMA751L06" disconnecting.
2025-06-20 13:33:51.526 +09:00 [DBG] Connection id "0HNDFMA751L06" stopped.
2025-06-20 13:34:46.237 +09:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IUserServiceProxy'
2025-06-20 13:34:56.240 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:34:56.241 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0265ms - processed: 0 items - remaining: 1 items
2025-06-20 13:35:06.243 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:35:06.243 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0053ms - processed: 0 items - remaining: 1 items
2025-06-20 13:35:16.245 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:35:16.245 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0196ms - processed: 0 items - remaining: 1 items
2025-06-20 13:35:26.245 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:35:26.246 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0044ms - processed: 0 items - remaining: 1 items
2025-06-20 13:35:36.248 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:35:36.248 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0105ms - processed: 0 items - remaining: 1 items
2025-06-20 13:35:46.250 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:35:46.251 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.1729ms - processed: 0 items - remaining: 1 items
2025-06-20 13:35:56.253 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:35:56.254 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0771ms - processed: 0 items - remaining: 1 items
2025-06-20 13:36:06.255 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:36:06.256 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0047ms - processed: 0 items - remaining: 1 items
2025-06-20 13:36:16.259 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:36:16.260 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.075ms - processed: 0 items - remaining: 1 items
2025-06-20 13:36:26.262 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:36:26.263 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0141ms - processed: 0 items - remaining: 1 items
2025-06-20 13:36:36.264 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:36:36.265 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2025-06-20 13:36:46.267 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:36:46.268 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0515ms - processed: 0 items - remaining: 1 items
2025-06-20 13:36:56.270 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:36:56.270 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0041ms - processed: 0 items - remaining: 1 items
2025-06-20 13:37:06.271 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:37:06.271 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0059ms - processed: 0 items - remaining: 1 items
2025-06-20 13:37:16.272 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:37:16.273 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2025-06-20 13:37:26.274 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:37:26.275 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0159ms - processed: 0 items - remaining: 1 items
2025-06-20 13:37:36.275 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:37:36.276 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2025-06-20 13:37:46.277 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:37:46.278 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2025-06-20 13:37:56.279 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:37:56.280 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0508ms - processed: 0 items - remaining: 1 items
2025-06-20 13:38:06.281 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:38:06.281 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0053ms - processed: 0 items - remaining: 1 items
2025-06-20 13:38:16.282 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:38:16.282 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0043ms - processed: 0 items - remaining: 1 items
2025-06-20 13:38:26.284 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:38:26.285 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2025-06-20 13:38:36.286 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:38:36.287 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0592ms - processed: 0 items - remaining: 1 items
2025-06-20 13:38:46.288 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:38:46.291 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0047ms - processed: 0 items - remaining: 1 items
2025-06-20 13:38:56.292 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:38:56.293 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2025-06-20 13:39:06.294 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:39:06.295 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0152ms - processed: 0 items - remaining: 1 items
2025-06-20 13:39:16.296 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:39:16.297 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.2829ms - processed: 0 items - remaining: 1 items
2025-06-20 13:39:26.299 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:39:26.299 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2025-06-20 13:39:36.300 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:39:36.301 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-06-20 13:39:46.302 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:39:46.302 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0071ms - processed: 0 items - remaining: 1 items
2025-06-20 13:39:56.303 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:39:56.303 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-06-20 13:40:06.306 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:40:06.307 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0197ms - processed: 0 items - remaining: 1 items
2025-06-20 13:40:16.309 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:40:16.310 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0045ms - processed: 0 items - remaining: 1 items
2025-06-20 13:40:26.311 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:40:26.312 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-06-20 13:40:36.313 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:40:36.314 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0106ms - processed: 0 items - remaining: 1 items
2025-06-20 13:40:46.316 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:40:46.316 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-06-20 13:40:56.319 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:40:56.321 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0364ms - processed: 0 items - remaining: 1 items
2025-06-20 13:41:06.321 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:41:06.323 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0172ms - processed: 0 items - remaining: 1 items
2025-06-20 13:41:16.324 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:41:16.325 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0086ms - processed: 0 items - remaining: 1 items
2025-06-20 13:41:26.326 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:41:26.327 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0508ms - processed: 0 items - remaining: 1 items
2025-06-20 13:41:32.194 +09:00 [DBG] Connection id "0HNDFMA751L07" accepted.
2025-06-20 13:41:32.194 +09:00 [DBG] Connection id "0HNDFMA751L07" started.
2025-06-20 13:41:32.218 +09:00 [DBG] Connection 0HNDFMA751L07 established using the following protocol: "Tls12"
2025-06-20 13:41:32.223 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-20 13:41:32.224 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 13:41:32.224 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 13:41:32.225 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:41:32.227 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:41:32.227 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:41:32.228 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:41:32.228 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:41:32.228 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:41:32.228 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:41:32.228 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:41:32.228 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:41:32.228 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:41:32.231 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:41:32.231 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:41:32.231 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:41:32.231 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:41:32.231 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:41:32.231 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:41:32.231 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:41:32.232 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:41:32.233 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:41:32.233 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:41:32.233 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:41:32.235 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:41:32.235 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:41:32.235 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:41:32.236 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:41:32.236 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:41:32.238 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:41:32.238 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.238 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.240 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.240 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.240 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:32.240 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:41:32.240 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-20 13:41:32.240 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:41:32.240 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:41:32.240 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:41:32.240 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:41:32.240 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:41:32.240 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:41:32.240 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:41:32.240 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:41:32.243 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 14.5987ms
2025-06-20 13:41:32.243 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:41:32.243 +09:00 [DBG] Connection id "0HNDFMA751L07" completed keep alive response.
2025-06-20 13:41:32.244 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:41:32.244 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:41:32.244 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:41:32.245 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 21.4455ms
2025-06-20 13:41:34.561 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-20 13:41:34.562 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 13:41:34.562 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 13:41:34.562 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:41:34.562 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:41:34.562 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:41:34.562 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:41:34.563 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:41:34.563 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:41:34.563 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:41:34.563 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:41:34.563 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:41:34.563 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:41:34.564 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:41:34.564 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:41:34.564 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:41:34.564 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:41:34.565 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:41:34.565 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:41:34.565 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:41:34.566 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:41:34.566 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:41:34.567 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:41:34.567 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:41:34.567 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:41:34.567 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:41:34.567 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:41:34.567 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:41:34.567 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:41:34.568 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:41:34.568 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.568 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.568 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.569 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.569 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.569 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.569 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.569 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.569 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.569 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.569 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.569 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.570 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.570 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.570 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.570 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.570 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:34.570 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:41:34.570 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 1ms reading results.
2025-06-20 13:41:34.570 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:41:34.570 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:41:34.570 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:41:34.571 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:41:34.571 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:41:34.571 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:41:34.571 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:41:34.571 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:41:34.572 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 8.4592ms
2025-06-20 13:41:34.572 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:41:34.572 +09:00 [DBG] Connection id "0HNDFMA751L07" completed keep alive response.
2025-06-20 13:41:34.572 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:41:34.572 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:41:34.572 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:41:34.573 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 11.1618ms
2025-06-20 13:41:36.226 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - null null
2025-06-20 13:41:36.226 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 13:41:36.227 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EMP0001'
2025-06-20 13:41:36.227 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:41:36.228 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:41:36.228 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:41:36.228 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:41:36.228 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:41:36.229 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:41:36.229 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:41:36.229 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:41:36.229 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:41:36.229 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:41:36.230 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:41:36.230 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:41:36.230 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:41:36.231 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:41:36.231 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:41:36.231 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:41:36.231 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:41:36.232 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:41:36.234 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:41:36.234 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:41:36.234 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:41:36.235 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:41:36.235 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:41:36.236 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:41:36.236 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-20 13:41:36.237 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:41:36.238 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:41:36.238 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.238 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.239 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.240 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.240 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.240 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.240 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.240 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.241 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.241 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.241 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.242 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.242 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:36.242 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:41:36.242 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-20 13:41:36.243 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:41:36.243 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:41:36.244 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:41:36.244 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:41:36.244 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:41:36.245 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:41:36.245 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:41:36.245 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:41:36.245 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 16.418ms
2025-06-20 13:41:36.246 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:41:36.246 +09:00 [DBG] Connection id "0HNDFMA751L07" completed keep alive response.
2025-06-20 13:41:36.246 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:41:36.246 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:41:36.246 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:41:36.246 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EMP0001 - 200 null application/json; charset=utf-8 20.7167ms
2025-06-20 13:41:36.328 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:41:36.329 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-06-20 13:41:41.706 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - null null
2025-06-20 13:41:41.707 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EMP0001'
2025-06-20 13:41:41.707 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EMP0001'
2025-06-20 13:41:41.708 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API)'
2025-06-20 13:41:41.708 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:41:41.708 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API)'
2025-06-20 13:41:41.720 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (Volvo.Service.Approval.API).
2025-06-20 13:41:41.720 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:41:41.720 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:41:41.720 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:41:41.720 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:41:41.720 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:41:41.720 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (Volvo.Service.Approval.API)
2025-06-20 13:41:41.721 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (Volvo.Service.Approval.API)
2025-06-20 13:41:41.722 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-20 13:41:41.722 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-20 13:41:41.722 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-20 13:41:41.722 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-20 13:41:41.722 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-20 13:41:41.723 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-20 13:41:41.728 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:41:41.731 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        ApplicantPosition = r.ApplicantPosition, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-20 13:41:41.750 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            string value9;
            List<ApprovalStep> namelessParameter{0};
            int? value11;
            string value12;
            string value13;
            string value14;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            value9 = dataReader.GetString(8);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value11 = (int?)dataReader.GetInt32(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            value13 = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
            value14 = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                value9, 
                namelessParameter{0}, 
                (object)value11, 
                value12, 
                value13, 
                value14 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid) : dataReader.GetGuid(12);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(17) ? default(bool) : dataReader.GetBoolean(17);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(19) ? default(int) : dataReader.GetInt32(19);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantDepartment = (string)(resultContext.Values[5]), 
            ApplicantName = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Status = (string)(resultContext.Values[8]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[9]), 
            CurrentStep = (int)(int?)(resultContext.Values[10]), 
            CurrentApproverName = (string)(resultContext.Values[11]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[12]), 
            CurrentActionStatus = (string)(resultContext.Values[13]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-20 13:41:41.754 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:41:41.754 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:41:41.754 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:41:41.754 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:41:41.754 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:41:41.754 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:41:41.754 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:41:41.754 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-20 13:41:41.755 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-20 13:41:41.756 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.757 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.758 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.758 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.758 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.758 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.758 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.758 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.758 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.758 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.758 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.758 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.759 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.760 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.760 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.760 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.761 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.761 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.761 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.762 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.762 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.762 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.762 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.762 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.762 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.762 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.762 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.762 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.762 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.763 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.763 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.763 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.763 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.763 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.763 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.763 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.763 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.763 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:41:41.764 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:41:41.764 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 8ms reading results.
2025-06-20 13:41:41.764 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:41:41.764 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:41:41.764 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:41:41.764 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:41:41.764 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:41:41.764 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:41:41.764 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:41:41.764 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:41:41.765 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API) in 45.0905ms
2025-06-20 13:41:41.766 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API)'
2025-06-20 13:41:41.766 +09:00 [DBG] Connection id "0HNDFMA751L07" completed keep alive response.
2025-06-20 13:41:41.766 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:41:41.766 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:41:41.766 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:41:41.766 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EMP0001 - 200 null application/json; charset=utf-8 60.4648ms
2025-06-20 13:41:46.331 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:41:46.331 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-06-20 13:41:56.332 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:41:56.332 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0049ms - processed: 0 items - remaining: 1 items
2025-06-20 13:42:06.334 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:42:06.334 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-06-20 13:42:16.337 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:42:16.339 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.019ms - processed: 0 items - remaining: 1 items
2025-06-20 13:42:26.341 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:42:26.342 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0195ms - processed: 0 items - remaining: 1 items
2025-06-20 13:42:36.344 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:42:36.344 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-06-20 13:42:46.346 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:42:46.347 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.015ms - processed: 0 items - remaining: 1 items
2025-06-20 13:42:47.191 +09:00 [DBG] Connection id "0HNDFMA751L07" received FIN.
2025-06-20 13:42:47.193 +09:00 [DBG] Connection id "0HNDFMA751L07" disconnecting.
2025-06-20 13:42:47.193 +09:00 [DBG] Connection id "0HNDFMA751L07" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 13:42:47.194 +09:00 [DBG] Connection id "0HNDFMA751L07" stopped.
2025-06-20 13:42:52.659 +09:00 [DBG] Connection id "0HNDFMA751L08" accepted.
2025-06-20 13:42:52.661 +09:00 [DBG] Connection id "0HNDFMA751L08" started.
2025-06-20 13:42:52.690 +09:00 [DBG] Connection 0HNDFMA751L08 established using the following protocol: "Tls12"
2025-06-20 13:42:52.696 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-20 13:42:52.697 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:42:52.697 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:42:52.698 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:42:52.699 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:42:52.699 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:42:52.699 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:42:52.699 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:42:52.700 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:42:52.700 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:42:52.700 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:42:52.700 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:42:52.700 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:42:52.701 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:42:52.702 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:42:52.702 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:42:52.702 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:42:52.702 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:42:52.702 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:42:52.702 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:42:52.712 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:42:52.716 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:42:52.717 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:42:52.717 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:42:52.717 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:42:52.717 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:42:52.717 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:42:52.717 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:42:52.717 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:42:52.718 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:42:52.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.719 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.720 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.721 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.723 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.733 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.733 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.733 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.733 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.734 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.735 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.735 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.735 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.735 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.735 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:42:52.735 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:42:52.735 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 16ms reading results.
2025-06-20 13:42:52.735 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:42:52.735 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:42:52.735 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:42:52.735 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:42:52.735 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:42:52.735 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:42:52.735 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:42:52.735 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:42:52.737 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 37.5307ms
2025-06-20 13:42:52.738 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:42:52.738 +09:00 [DBG] Connection id "0HNDFMA751L08" completed keep alive response.
2025-06-20 13:42:52.738 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:42:52.738 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:42:52.738 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:42:52.738 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 41.8185ms
2025-06-20 13:46:20.007 +09:00 [INF] Starting Approval Service API
2025-06-20 13:46:20.198 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 13:46:20.381 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 13:46:20.665 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:46:20.669 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:46:20.676 +09:00 [DBG] Created DbConnection. (6ms).
2025-06-20 13:46:20.680 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:20.697 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:20.701 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:20.703 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:20.705 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 13:46:20.705 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:46:20.713 +09:00 [DBG] Created DbConnection. (8ms).
2025-06-20 13:46:20.716 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (10ms).
2025-06-20 13:46:20.723 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (18ms).
2025-06-20 13:46:20.723 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:20.730 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:20.751 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 13:46:20.776 +09:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 13:46:20.777 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:20.779 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (1ms).
2025-06-20 13:46:20.781 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:46:20.781 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:46:20.781 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:20.782 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:20.782 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:20.782 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:20.782 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 13:46:20.782 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 13:46:20.782 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 13:46:20.782 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:20.782 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:20.782 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 13:46:20.782 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 13:46:20.783 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:20.783 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:20.807 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-20 13:46:20.907 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 13:46:20.921 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:20.922 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:20.922 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:46:20.922 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:20.922 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:20.922 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-20 13:46:20.923 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-20 13:46:20.927 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:20.928 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 3ms reading results.
2025-06-20 13:46:20.929 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:20.929 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:20.931 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:46:20.932 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:20.932 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:20.934 +09:00 [DBG] Hosting starting
2025-06-20 13:46:20.955 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-20 13:46:20.956 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 13:46:21.316 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-20 13:46:21.316 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-20 13:46:21.316 +09:00 [DBG] Loaded hosting startup assembly Volvo.Service.Approval.API
2025-06-20 13:46:21.316 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 13:46:21.316 +09:00 [INF] Hosting environment: Development
2025-06-20 13:46:21.316 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-20 13:46:21.317 +09:00 [DBG] Hosting started
2025-06-20 13:46:29.362 +09:00 [DBG] Connection id "0HNDFMLM16INL" accepted.
2025-06-20 13:46:29.363 +09:00 [DBG] Connection id "0HNDFMLM16INL" started.
2025-06-20 13:46:29.393 +09:00 [DBG] Connection 0HNDFMLM16INL established using the following protocol: "Tls12"
2025-06-20 13:46:29.417 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-20 13:46:29.430 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:29.433 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:29.440 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:29.450 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:46:29.450 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:29.460 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:46:29.461 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:46:29.461 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:46:29.463 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:46:29.463 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:46:29.463 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:46:29.464 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:29.471 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:29.472 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:29.475 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:46:29.479 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:29.479 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:29.479 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:29.483 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:46:29.490 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:46:29.500 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(r => r.ApplicantEmployeeNumber == __userId_0)
    .OrderByDescending(r => r.RequestedAt)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantName = r.ApplicantName, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantPosition = r.ApplicantPosition, 
        Steps = r.Steps, 
        Attachments = r.Attachments, 
        Status = r.Status, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-20 13:46:29.561 +09:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-20 13:46:29.572 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: ApprovalStep.ActionDate (DateTime?), 9], [Property: ApprovalStep.ActionStatus (string), 10], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 11], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 12], [Property: ApprovalStep.ApproverName (string), 13], [Property: ApprovalStep.Comment (string), 14], [Property: ApprovalStep.Department (string), 15], [Property: ApprovalStep.IsFinalApprover (bool) Required, 16], [Property: ApprovalStep.Position (string), 17], [Property: ApprovalStep.Sequence (int) Required, 18], [Property: ApprovalStep.StepType (string), 19] }
            9 -> 8
            10 -> Dictionary<IProperty, int> { [Property: ApprovalAttachment.AttachmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: ApprovalAttachment.ApprovalId (Guid) Required FK Index, 21], [Property: ApprovalAttachment.FileName (string) Required, 22], [Property: ApprovalAttachment.FilePath (string) Required, 23], [Property: ApprovalAttachment.FileSize (long?), 24], [Property: ApprovalAttachment.FileType (string), 25], [Property: ApprovalAttachment.UploadedAt (DateTime) Required, 26], [Property: ApprovalAttachment.UploadedByEmployeeNumber (string) Required, 27] }
            11 -> 20
            12 -> 28
            13 -> 29
            14 -> 30
            15 -> 31
            16 -> 32
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantName, a.ApplicantDepartment, a.ApplicantPosition, a0.StepId, a0.ActionDate, a0.ActionStatus, a0.ApprovalId, a0.ApproverEmployeeNumber, a0.ApproverName, a0.Comment, a0.Department, a0.IsFinalApprover, a0.Position, a0.Sequence, a0.StepType, a1.AttachmentId, a1.ApprovalId, a1.FileName, a1.FilePath, a1.FileSize, a1.FileType, a1.UploadedAt, a1.UploadedByEmployeeNumber, a.Status, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a0 ON a.ApprovalId == a0.ApprovalId
        LEFT JOIN ApprovalAttachments AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE a.ApplicantEmployeeNumber == @__userId_0
        ORDER BY a.RequestedAt DESC, a.ApprovalId ASC, a0.StepId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            List<ApprovalStep> namelessParameter{0};
            List<ApprovalAttachment> namelessParameter{1};
            string value11;
            int? value12;
            string value13;
            string value14;
            string value15;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.GetString(5);
            value7 = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            namelessParameter{1} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalAttachment, List<ApprovalAttachment>>(
                collectionId: 1, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    (object)(Guid?)dataReader.GetGuid(0), 
                    (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
                }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalAttachment>, ApprovalAttachment> | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Attachments").GetCollectionAccessor()]);
            value11 = dataReader.GetString(28);
            value12 = (int?)dataReader.GetInt32(29);
            value13 = dataReader.IsDBNull(30) ? default(string) : dataReader.GetString(30);
            value14 = dataReader.IsDBNull(31) ? default(string) : dataReader.GetString(31);
            value15 = dataReader.IsDBNull(32) ? default(string) : dataReader.GetString(32);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                namelessParameter{0}, 
                namelessParameter{1}, 
                value11, 
                (object)value12, 
                value13, 
                value14, 
                value15 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(8) ? default(object) : (object)dataReader.GetGuid(8) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(8) ? default(Guid) : dataReader.GetGuid(8);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(10) ? default(string) : dataReader.GetString(10);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(11) ? default(Guid) : dataReader.GetGuid(11);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(16) ? default(bool) : dataReader.GetBoolean(16);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(17) ? default(string) : dataReader.GetString(17);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(18) ? default(int) : dataReader.GetInt32(18);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalAttachment>, ApprovalAttachment, ApprovalAttachment>(
            collectionId: 1, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
            { 
                (object)(Guid?)dataReader.GetGuid(0), 
                (object)dataReader.IsDBNull(8) ? default(Guid?) : (Guid?)dataReader.GetGuid(8) 
            }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(20) ? default(Guid?) : (Guid?)dataReader.GetGuid(20) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
            { 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right, 
                (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right 
            }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalAttachment entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    ApprovalAttachment instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(ApprovalAttachment);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalAttachment.AttachmentId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(20) ? default(object) : (object)dataReader.GetGuid(20) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (ApprovalAttachment)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]: 
                                {
                                    return 
                                    {
                                        ApprovalAttachment instance;
                                        instance = new ApprovalAttachment();
                                        instance.<AttachmentId>k__BackingField = dataReader.IsDBNull(20) ? default(Guid) : dataReader.GetGuid(20);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(21) ? default(Guid) : dataReader.GetGuid(21);
                                        instance.<FileName>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                        instance.<FilePath>k__BackingField = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
                                        instance.<FileSize>k__BackingField = dataReader.IsDBNull(24) ? default(long?) : (long?)dataReader.GetInt64(24);
                                        instance.<FileType>k__BackingField = dataReader.IsDBNull(25) ? default(string) : dataReader.GetString(25);
                                        instance.<UploadedAt>k__BackingField = dataReader.IsDBNull(26) ? default(DateTime) : dataReader.GetDateTime(26);
                                        instance.<UploadedByEmployeeNumber>k__BackingField = dataReader.IsDBNull(27) ? default(string) : dataReader.GetString(27);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalAttachment | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalAttachment")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalAttachment)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantName = (string)(resultContext.Values[5]), 
            ApplicantDepartment = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[8]), 
            Attachments = (List<ApprovalAttachment>)(resultContext.Values[9]), 
            Status = (string)(resultContext.Values[10]), 
            CurrentStep = (int)(int?)(resultContext.Values[11]), 
            CurrentApproverName = (string)(resultContext.Values[12]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[13]), 
            CurrentActionStatus = (string)(resultContext.Values[14]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-20 13:46:29.587 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:46:29.587 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:46:29.587 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:29.587 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:29.587 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:46:29.588 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:29.588 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:29.589 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:29.593 +09:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:29.609 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.625 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.625 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.625 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.625 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.625 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.625 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.625 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.625 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.626 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.626 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.626 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.626 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.626 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.626 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.626 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.626 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.626 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.627 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.627 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.627 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.627 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.627 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.627 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.627 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.627 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.627 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.628 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.628 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.629 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.637 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.637 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.637 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.637 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.637 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.637 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.637 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.638 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.638 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.638 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.638 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.638 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.638 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.638 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.638 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.639 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.640 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:29.640 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:29.640 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 46ms reading results.
2025-06-20 13:46:29.640 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:29.640 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:29.641 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:46:29.642 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:46:29.642 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:46:29.642 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:46:29.642 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:46:29.642 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:46:29.690 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 225.614ms
2025-06-20 13:46:29.692 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:29.693 +09:00 [DBG] Connection id "0HNDFMLM16INL" completed keep alive response.
2025-06-20 13:46:29.693 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:46:29.695 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:29.696 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:29.697 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 281.212ms
2025-06-20 13:46:32.889 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-20 13:46:32.893 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:32.894 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:32.895 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:32.897 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:46:32.897 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:32.897 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:46:32.897 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:46:32.897 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:46:32.898 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:46:32.898 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:46:32.898 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:46:32.899 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:32.902 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:32.902 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:32.902 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:46:32.902 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:32.903 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:32.903 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:32.903 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:46:32.963 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:46:32.966 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:46:32.967 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:46:32.967 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:32.967 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:32.967 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:46:32.967 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:32.967 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:32.967 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:32.968 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:32.969 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.969 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.969 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.969 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.969 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.970 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.971 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.971 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.971 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.971 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.971 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.971 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.972 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.972 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.972 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.972 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.972 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.972 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.972 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.972 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.972 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.972 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.972 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.972 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.973 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.973 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.973 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.973 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.973 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.973 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.973 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.974 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.974 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.974 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.974 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.974 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.974 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.975 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.975 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.975 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.975 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.975 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.975 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.975 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.975 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.975 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.975 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.976 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:32.976 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:32.977 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 7ms reading results.
2025-06-20 13:46:32.977 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:32.977 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:32.977 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:46:32.977 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:46:32.978 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:46:32.978 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:46:32.978 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:46:32.979 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:46:32.983 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 84.086ms
2025-06-20 13:46:32.983 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:32.984 +09:00 [DBG] Connection id "0HNDFMLM16INL" completed keep alive response.
2025-06-20 13:46:32.984 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:46:32.984 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:32.985 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:32.985 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 96.1998ms
2025-06-20 13:46:34.496 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-20 13:46:34.497 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:34.497 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:34.497 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:34.499 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:46:34.499 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:34.499 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:46:34.499 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:46:34.500 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:46:34.500 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:46:34.500 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:46:34.500 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:46:34.500 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:34.501 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:34.501 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:34.502 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:46:34.502 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:34.502 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:34.502 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:34.502 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:46:34.503 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:46:34.503 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:46:34.504 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:46:34.504 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:34.504 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:34.504 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:46:34.504 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:34.504 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:34.505 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:34.506 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:34.506 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.506 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.506 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.507 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.508 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.509 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.510 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.510 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.510 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.512 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.512 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.518 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.518 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.518 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.518 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:34.519 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:34.519 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 13ms reading results.
2025-06-20 13:46:34.520 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:34.520 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:34.520 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:46:34.520 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:46:34.520 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:46:34.521 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:46:34.521 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:46:34.521 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:46:34.523 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 22.667ms
2025-06-20 13:46:34.523 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:34.523 +09:00 [DBG] Connection id "0HNDFMLM16INL" completed keep alive response.
2025-06-20 13:46:34.523 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:46:34.523 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:34.523 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:34.524 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 27.6101ms
2025-06-20 13:46:35.103 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-20 13:46:35.103 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:35.104 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:35.104 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:35.104 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:46:35.105 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:35.105 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:46:35.106 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:46:35.106 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:46:35.106 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:46:35.106 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:46:35.106 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:46:35.106 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:35.107 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:35.107 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:35.107 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:46:35.107 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:35.107 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:35.107 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:35.107 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:46:35.108 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:46:35.108 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:46:35.109 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:46:35.109 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:35.109 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:35.109 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:46:35.109 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:35.109 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:35.109 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:35.110 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:35.110 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.111 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.112 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.113 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.113 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.113 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.113 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.113 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.113 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.113 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.113 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.113 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.114 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.114 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.114 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.114 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.114 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.114 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.115 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.115 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.115 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.115 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.115 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.115 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.116 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.117 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.117 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.117 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.117 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.117 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:35.117 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:35.117 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 6ms reading results.
2025-06-20 13:46:35.117 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:35.117 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:35.118 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:46:35.118 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:46:35.118 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:46:35.118 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:46:35.118 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:46:35.118 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:46:35.119 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 12.7435ms
2025-06-20 13:46:35.119 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:35.119 +09:00 [DBG] Connection id "0HNDFMLM16INL" completed keep alive response.
2025-06-20 13:46:35.120 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:46:35.120 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:35.120 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:35.120 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 17.5637ms
2025-06-20 13:46:36.504 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-20 13:46:36.504 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:36.504 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:36.505 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:36.505 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:46:36.505 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:36.506 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:46:36.506 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:46:36.506 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:46:36.507 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:46:36.507 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:46:36.507 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:46:36.507 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:36.507 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:36.507 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:36.507 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:46:36.507 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:36.507 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:36.508 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:36.508 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:46:36.508 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:46:36.508 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:46:36.508 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:46:36.508 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:36.509 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:36.509 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:46:36.509 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:36.509 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:36.509 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:36.509 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:36.510 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.511 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.512 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.512 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.512 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.512 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.512 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.512 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.512 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.513 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.514 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.514 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.514 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.514 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.514 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.514 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.514 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.514 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.514 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.514 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.514 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.514 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.514 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.515 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.516 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.516 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.516 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.516 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:36.516 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:36.516 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 5ms reading results.
2025-06-20 13:46:36.516 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:36.516 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:36.516 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:46:36.516 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:46:36.516 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:46:36.516 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:46:36.516 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:46:36.516 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:46:36.517 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 9.8299ms
2025-06-20 13:46:36.517 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:36.517 +09:00 [DBG] Connection id "0HNDFMLM16INL" completed keep alive response.
2025-06-20 13:46:36.517 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:46:36.517 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:36.517 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:36.518 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 13.7491ms
2025-06-20 13:46:38.378 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-20 13:46:38.379 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:38.380 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:38.380 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:38.380 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:46:38.380 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:38.380 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:46:38.380 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:46:38.380 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:46:38.380 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:46:38.381 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:46:38.381 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:46:38.381 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:38.381 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:38.381 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:38.381 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:46:38.382 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:38.382 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:38.382 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:38.382 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:46:38.382 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:46:38.383 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:46:38.383 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:46:38.383 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:38.383 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:38.383 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:46:38.383 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:38.383 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:38.384 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:38.384 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:38.384 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.384 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.384 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.385 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.386 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.387 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.388 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.388 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.388 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.388 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.388 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.388 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.388 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.388 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.389 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.389 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:38.389 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:38.389 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-20 13:46:38.389 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:38.389 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:38.390 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:46:38.390 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:46:38.390 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:46:38.390 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:46:38.390 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:46:38.390 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:46:38.390 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 9.6872ms
2025-06-20 13:46:38.391 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:38.391 +09:00 [DBG] Connection id "0HNDFMLM16INL" completed keep alive response.
2025-06-20 13:46:38.391 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:46:38.391 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:38.391 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:38.391 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 12.9035ms
2025-06-20 13:46:39.838 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-20 13:46:39.838 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:39.838 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:39.839 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:39.839 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:46:39.839 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:39.839 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:46:39.839 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:46:39.839 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:46:39.839 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:46:39.839 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:46:39.839 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:46:39.839 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:39.840 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:39.840 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:39.840 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:46:39.840 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:39.840 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:39.840 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:39.840 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:46:39.841 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:46:39.841 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:46:39.841 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:46:39.841 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:39.841 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:39.841 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:46:39.841 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:39.841 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:39.841 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:39.842 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:39.842 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.842 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.842 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.842 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.842 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.843 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.843 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.843 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.844 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.844 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.844 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.844 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.844 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.845 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.845 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.845 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.845 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.845 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.845 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.845 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.846 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.846 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.846 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.846 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.846 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.846 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.846 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.846 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.846 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.846 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.847 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.848 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.848 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.848 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.848 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.849 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.850 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.850 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.850 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.850 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.850 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.850 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.851 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:39.851 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:39.851 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 9ms reading results.
2025-06-20 13:46:39.852 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:39.852 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:39.852 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:46:39.853 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:46:39.853 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:46:39.853 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:46:39.853 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:46:39.853 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:46:39.855 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 15.3866ms
2025-06-20 13:46:39.855 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:39.855 +09:00 [DBG] Connection id "0HNDFMLM16INL" completed keep alive response.
2025-06-20 13:46:39.855 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:46:39.855 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:39.855 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:39.855 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 17.254ms
2025-06-20 13:46:40.775 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-20 13:46:40.775 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:40.775 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:40.775 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:40.776 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:46:40.776 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:40.776 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:46:40.778 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:46:40.778 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:46:40.778 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:46:40.778 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:46:40.778 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:46:40.778 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:40.779 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:40.779 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:40.779 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:46:40.779 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:40.779 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:40.779 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:40.780 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:46:40.780 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:46:40.781 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:46:40.781 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:46:40.781 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:40.782 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:40.782 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:46:40.782 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:40.782 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:40.782 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:40.782 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:40.783 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.783 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.783 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.783 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.783 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.783 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.784 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.785 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.785 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.785 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.785 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.785 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.786 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.786 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.786 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.786 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.786 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.787 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.788 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.789 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.789 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.789 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.789 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:40.789 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:40.789 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 6ms reading results.
2025-06-20 13:46:40.789 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:40.789 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:40.789 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:46:40.789 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:46:40.789 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:46:40.789 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:46:40.789 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:46:40.789 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:46:40.790 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 11.2637ms
2025-06-20 13:46:40.790 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:40.790 +09:00 [DBG] Connection id "0HNDFMLM16INL" completed keep alive response.
2025-06-20 13:46:40.790 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:46:40.790 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:40.790 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:40.790 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 15.8858ms
2025-06-20 13:46:41.886 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-20 13:46:41.887 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:41.889 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:46:41.890 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:41.890 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:46:41.890 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:41.891 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:46:41.891 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:46:41.891 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:46:41.891 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:46:41.891 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:46:41.891 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:46:41.891 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:41.892 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:46:41.892 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:41.892 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:46:41.892 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:41.892 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:46:41.892 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:46:41.892 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:46:41.893 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:46:41.894 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:46:41.895 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:46:41.895 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:41.895 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:41.895 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:46:41.895 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:41.895 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:41.895 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:41.895 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:46:41.896 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.896 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.896 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.896 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.896 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.896 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.896 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.899 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.900 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:41.900 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:41.900 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-20 13:46:41.900 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:41.900 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:41.900 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:46:41.901 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:46:41.901 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:46:41.901 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:46:41.901 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:46:41.901 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:46:41.902 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 10.5467ms
2025-06-20 13:46:41.902 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:46:41.903 +09:00 [DBG] Connection id "0HNDFMLM16INL" completed keep alive response.
2025-06-20 13:46:41.903 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:46:41.903 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:41.903 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:41.903 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 17.1392ms
2025-06-20 13:46:58.620 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-20 13:46:58.622 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-20 13:46:58.622 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-20 13:46:58.624 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API)'
2025-06-20 13:46:58.626 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:46:58.626 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API)'
2025-06-20 13:46:58.640 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (Volvo.Service.Approval.API).
2025-06-20 13:46:58.640 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:46:58.640 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:46:58.640 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:46:58.640 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:46:58.640 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:46:58.641 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (Volvo.Service.Approval.API)
2025-06-20 13:46:58.642 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (Volvo.Service.Approval.API)
2025-06-20 13:46:58.642 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-20 13:46:58.642 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-20 13:46:58.642 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-20 13:46:58.643 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-20 13:46:58.643 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-20 13:46:58.643 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-20 13:46:58.649 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:46:58.653 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Where(approval => approval.Steps
        .Any(step => step.ApproverEmployeeNumber == __userId_0))
    .Include(approval => approval.Steps)
    .Select(r => new ApprovalRequestWithCurrentStepDto{ 
        ApprovalId = r.ApprovalId, 
        RequestTitle = r.RequestTitle, 
        RequestedAt = r.RequestedAt, 
        RespondedAt = r.RespondedAt, 
        ApplicantEmployeeNumber = r.ApplicantEmployeeNumber, 
        ApplicantDepartment = r.ApplicantDepartment, 
        ApplicantName = r.ApplicantName, 
        ApplicantPosition = r.ApplicantPosition, 
        Status = r.Status, 
        Steps = r.Steps, 
        CurrentStep = r.CurrentStep, 
        CurrentApproverName = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverName)
            .FirstOrDefault(), 
        CurrentApproverEmployeeNumber = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ApproverEmployeeNumber)
            .FirstOrDefault(), 
        CurrentActionStatus = r.Steps
            .Where(s => s.Sequence == r.CurrentStep)
            .Select(s => s.ActionStatus)
            .FirstOrDefault() 
    }
    )'
2025-06-20 13:46:58.668 +09:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<ApprovalRequestWithCurrentStepDto>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
            4 -> 4
            5 -> 5
            6 -> 6
            7 -> 7
            8 -> 8
            9 -> Dictionary<IProperty, int> { [Property: ApprovalStep.StepId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: ApprovalStep.ActionDate (DateTime?), 10], [Property: ApprovalStep.ActionStatus (string), 11], [Property: ApprovalStep.ApprovalId (Guid) Required FK Index, 12], [Property: ApprovalStep.ApproverEmployeeNumber (string) Required, 13], [Property: ApprovalStep.ApproverName (string), 14], [Property: ApprovalStep.Comment (string), 15], [Property: ApprovalStep.Department (string), 16], [Property: ApprovalStep.IsFinalApprover (bool) Required, 17], [Property: ApprovalStep.Position (string), 18], [Property: ApprovalStep.Sequence (int) Required, 19], [Property: ApprovalStep.StepType (string), 20] }
            10 -> 9
            11 -> 21
            12 -> 22
            13 -> 23
            14 -> 24
        SELECT a.ApprovalId, a.RequestTitle, a.RequestedAt, a.RespondedAt, a.ApplicantEmployeeNumber, a.ApplicantDepartment, a.ApplicantName, a.ApplicantPosition, a.Status, a1.StepId, a1.ActionDate, a1.ActionStatus, a1.ApprovalId, a1.ApproverEmployeeNumber, a1.ApproverName, a1.Comment, a1.Department, a1.IsFinalApprover, a1.Position, a1.Sequence, a1.StepType, a.CurrentStep, (
            SELECT TOP(1) a2.ApproverName
            FROM ApprovalSteps AS a2
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a2.ApprovalId)) && (a2.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a3.ApproverEmployeeNumber
            FROM ApprovalSteps AS a3
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a3.ApprovalId)) && (a3.Sequence == a.CurrentStep)), (
            SELECT TOP(1) a4.ActionStatus
            FROM ApprovalSteps AS a4
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a4.ApprovalId)) && (a4.Sequence == a.CurrentStep))
        FROM ApprovalRequests AS a
        LEFT JOIN ApprovalSteps AS a1 ON a.ApprovalId == a1.ApprovalId
        WHERE EXISTS (
            SELECT 1
            FROM ApprovalSteps AS a0
            WHERE ((a.ApprovalId != NULL) && (a.ApprovalId == a0.ApprovalId)) && (a0.ApproverEmployeeNumber == @__userId_0))
        ORDER BY a.ApprovalId ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            Guid? value1;
            string value2;
            DateTime? value3;
            DateTime? value4;
            string value5;
            string value6;
            string value7;
            string value8;
            string value9;
            List<ApprovalStep> namelessParameter{0};
            int? value11;
            string value12;
            string value13;
            string value14;
            value1 = (Guid?)dataReader.GetGuid(0);
            value2 = dataReader.GetString(1);
            value3 = (DateTime?)dataReader.GetDateTime(2);
            value4 = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
            value5 = dataReader.GetString(4);
            value6 = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
            value7 = dataReader.GetString(6);
            value8 = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
            value9 = dataReader.GetString(8);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<ApprovalStep, List<ApprovalStep>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<ApprovalRequest, List<ApprovalStep>, ApprovalStep> | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalRequest").FindNavigation("Steps").GetCollectionAccessor()]);
            value11 = (int?)dataReader.GetInt32(21);
            value12 = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
            value13 = dataReader.IsDBNull(23) ? default(string) : dataReader.GetString(23);
            value14 = dataReader.IsDBNull(24) ? default(string) : dataReader.GetString(24);
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                (object)value3, 
                (object)value4, 
                value5, 
                value6, 
                value7, 
                value8, 
                value9, 
                namelessParameter{0}, 
                (object)value11, 
                value12, 
                value13, 
                value14 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<ApprovalStep>, ApprovalStep, ApprovalStep>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)(Guid?)dataReader.GetGuid(0) }], 
            selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(9) ? default(Guid?) : (Guid?)dataReader.GetGuid(9) }], 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (Guid)left == (Guid)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                ApprovalStep entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    ApprovalStep instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(ApprovalStep);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: ApprovalStep.StepId PK | Resolver: c => c.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(9) ? default(object) : (object)dataReader.GetGuid(9) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (ApprovalStep)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]: 
                                {
                                    return 
                                    {
                                        ApprovalStep instance;
                                        instance = new ApprovalStep();
                                        instance.<StepId>k__BackingField = dataReader.IsDBNull(9) ? default(Guid) : dataReader.GetGuid(9);
                                        instance.<ActionDate>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                        instance.<ActionStatus>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                        instance.<ApprovalId>k__BackingField = dataReader.IsDBNull(12) ? default(Guid) : dataReader.GetGuid(12);
                                        instance.<ApproverEmployeeNumber>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                        instance.<ApproverName>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                        instance.<Comment>k__BackingField = dataReader.IsDBNull(15) ? default(string) : dataReader.GetString(15);
                                        instance.<Department>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                        instance.<IsFinalApprover>k__BackingField = dataReader.IsDBNull(17) ? default(bool) : dataReader.GetBoolean(17);
                                        instance.<Position>k__BackingField = dataReader.IsDBNull(18) ? default(string) : dataReader.GetString(18);
                                        instance.<Sequence>k__BackingField = dataReader.IsDBNull(19) ? default(int) : dataReader.GetInt32(19);
                                        instance.<StepType>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: ApprovalStep | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("ApprovalService.Domain.Entities.ApprovalStep")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(ApprovalStep)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new ApprovalRequestWithCurrentStepDto{ 
            ApprovalId = (Guid)(Guid?)(resultContext.Values[0]), 
            RequestTitle = (string)(resultContext.Values[1]), 
            RequestedAt = (DateTime)(DateTime?)(resultContext.Values[2]), 
            RespondedAt = (DateTime?)(resultContext.Values[3]), 
            ApplicantEmployeeNumber = (string)(resultContext.Values[4]), 
            ApplicantDepartment = (string)(resultContext.Values[5]), 
            ApplicantName = (string)(resultContext.Values[6]), 
            ApplicantPosition = (string)(resultContext.Values[7]), 
            Status = (string)(resultContext.Values[8]), 
            Steps = (List<ApprovalStep>)(resultContext.Values[9]), 
            CurrentStep = (int)(int?)(resultContext.Values[10]), 
            CurrentApproverName = (string)(resultContext.Values[11]), 
            CurrentApproverEmployeeNumber = (string)(resultContext.Values[12]), 
            CurrentActionStatus = (string)(resultContext.Values[13]) 
        }
         : default(ApprovalRequestWithCurrentStepDto);
    }, 
    contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-20 13:46:58.671 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:46:58.671 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:46:58.671 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:58.671 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:58.671 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:46:58.671 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:58.671 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:46:58.671 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-20 13:46:58.672 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-20 13:46:58.673 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.673 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.673 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.673 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.673 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.674 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.674 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.674 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.679 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.679 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.679 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.679 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.679 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.679 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.679 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.679 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:46:58.679 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:58.679 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 7ms reading results.
2025-06-20 13:46:58.680 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:46:58.680 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:58.680 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:46:58.680 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:46:58.680 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:46:58.680 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:46:58.680 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:46:58.680 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:46:58.681 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API) in 40.1845ms
2025-06-20 13:46:58.681 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API)'
2025-06-20 13:46:58.681 +09:00 [DBG] Connection id "0HNDFMLM16INL" completed keep alive response.
2025-06-20 13:46:58.682 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:46:58.682 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:46:58.682 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:46:58.682 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 62.0318ms
2025-06-20 13:47:00.505 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-20 13:47:00.517 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:47:00.517 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:47:00.518 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:47:00.520 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:47:00.520 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:47:00.520 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:47:00.521 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:47:00.521 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:47:00.521 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:47:00.521 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:47:00.521 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:47:00.521 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:47:00.522 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:47:00.522 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:47:00.523 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:47:00.523 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:47:00.523 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:47:00.524 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:47:00.524 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:47:00.525 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:47:00.526 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:47:00.526 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:47:00.526 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:47:00.526 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:47:00.526 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:47:00.526 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:47:00.526 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:47:00.526 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:47:00.527 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:47:00.549 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.549 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.550 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.550 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.550 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.550 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.550 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.550 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.550 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.551 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.551 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.551 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.551 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.551 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.551 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.551 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.551 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.551 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.552 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.552 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.552 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.553 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.553 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.553 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.553 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.554 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.554 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.554 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.554 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.555 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.556 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.557 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:00.557 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:47:00.557 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 13ms reading results.
2025-06-20 13:47:00.557 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:47:00.557 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:47:00.557 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:47:00.558 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:47:00.558 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:47:00.558 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:47:00.558 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:47:00.558 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:47:00.558 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 36.7502ms
2025-06-20 13:47:00.558 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:47:00.558 +09:00 [DBG] Connection id "0HNDFMLM16INL" completed keep alive response.
2025-06-20 13:47:00.558 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:47:00.558 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:47:00.558 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:47:00.559 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 53.973ms
2025-06-20 13:47:24.704 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - null null
2025-06-20 13:47:24.705 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:47:24.706 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)' with route pattern 'api/ApprovalRequest/my-requests/{userId}' is valid for the request path '/api/approvalrequest/my-requests/EC20505'
2025-06-20 13:47:24.707 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:47:24.708 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:47:24.708 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:47:24.709 +09:00 [INF] Route matched with {action = "GetMyRequests", controller = "ApprovalRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyRequests(System.String) on controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API).
2025-06-20 13:47:24.710 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:47:24.711 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:47:24.712 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)","Microsoft.AspNetCore.Mvc.Filters.ResponseCacheFilter"]
2025-06-20 13:47:24.712 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:47:24.713 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:47:24.713 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:47:24.715 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalRequestController (Volvo.Service.Approval.API)
2025-06-20 13:47:24.716 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' ...
2025-06-20 13:47:24.717 +09:00 [DBG] Attempting to bind parameter 'userId' of type 'System.String' using the name 'userId' in request data ...
2025-06-20 13:47:24.717 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:47:24.717 +09:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.String'.
2025-06-20 13:47:24.717 +09:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.String' ...
2025-06-20 13:47:24.717 +09:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.String'.
2025-06-20 13:47:24.724 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:47:24.727 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:47:24.728 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:47:24.728 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:47:24.729 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:47:24.730 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:47:24.730 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:47:24.730 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:47:24.731 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:47:24.732 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantName", "a"."ApplicantDepartment", "a"."ApplicantPosition", "a0"."StepId", "a0"."ActionDate", "a0"."ActionStatus", "a0"."ApprovalId", "a0"."ApproverEmployeeNumber", "a0"."ApproverName", "a0"."Comment", "a0"."Department", "a0"."IsFinalApprover", "a0"."Position", "a0"."Sequence", "a0"."StepType", "a1"."AttachmentId", "a1"."ApprovalId", "a1"."FileName", "a1"."FilePath", "a1"."FileSize", "a1"."FileType", "a1"."UploadedAt", "a1"."UploadedByEmployeeNumber", "a"."Status", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a0" ON "a"."ApprovalId" = "a0"."ApprovalId"
LEFT JOIN "ApprovalAttachments" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE "a"."ApplicantEmployeeNumber" = @__userId_0
ORDER BY "a"."RequestedAt" DESC, "a"."ApprovalId", "a0"."StepId"
2025-06-20 13:47:24.733 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.735 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.735 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.735 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.736 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.736 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.736 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.736 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.736 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.736 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.736 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.736 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.736 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.736 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.737 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.737 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.737 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.737 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.737 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.737 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.737 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.737 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.737 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.738 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.738 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.738 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.738 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.738 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.738 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.739 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.739 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.739 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.739 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.739 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.739 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.739 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.739 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.739 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.739 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.739 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.740 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.741 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.741 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.741 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.741 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.741 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.741 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.741 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.741 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalAttachment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:24.741 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:47:24.741 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 8ms reading results.
2025-06-20 13:47:24.742 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:47:24.742 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:47:24.742 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:47:24.742 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:47:24.742 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:47:24.742 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:47:24.742 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:47:24.742 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:47:24.743 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API) in 30.4779ms
2025-06-20 13:47:24.744 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalRequestController.GetMyRequests (Volvo.Service.Approval.API)'
2025-06-20 13:47:24.744 +09:00 [DBG] Connection id "0HNDFMLM16INL" completed keep alive response.
2025-06-20 13:47:24.744 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:47:24.744 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:47:24.744 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:47:24.744 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approvalrequest/my-requests/EC20505 - 200 null application/json; charset=utf-8 41.2007ms
2025-06-20 13:47:27.884 +09:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - null null
2025-06-20 13:47:27.886 +09:00 [DBG] 1 candidate(s) found for the request path '/api/approval/my-approvals/EC20505'
2025-06-20 13:47:27.887 +09:00 [DBG] Endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API)' with route pattern 'api/Approval/my-approvals/{approverId}' is valid for the request path '/api/approval/my-approvals/EC20505'
2025-06-20 13:47:27.887 +09:00 [DBG] Request matched endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API)'
2025-06-20 13:47:27.887 +09:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 13:47:27.887 +09:00 [INF] Executing endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API)'
2025-06-20 13:47:27.887 +09:00 [INF] Route matched with {action = "GetMyApprovals", controller = "Approval"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyApprovals(System.String) on controller ApprovalService.API.Controllers.ApprovalController (Volvo.Service.Approval.API).
2025-06-20 13:47:27.888 +09:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 13:47:27.888 +09:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 13:47:27.888 +09:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:47:27.888 +09:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 13:47:27.888 +09:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2025-06-20 13:47:27.888 +09:00 [DBG] Executing controller factory for controller ApprovalService.API.Controllers.ApprovalController (Volvo.Service.Approval.API)
2025-06-20 13:47:27.889 +09:00 [DBG] Executed controller factory for controller ApprovalService.API.Controllers.ApprovalController (Volvo.Service.Approval.API)
2025-06-20 13:47:27.889 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' ...
2025-06-20 13:47:27.889 +09:00 [DBG] Attempting to bind parameter 'approverId' of type 'System.String' using the name 'approverId' in request data ...
2025-06-20 13:47:27.889 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-20 13:47:27.889 +09:00 [DBG] Done attempting to bind parameter 'approverId' of type 'System.String'.
2025-06-20 13:47:27.889 +09:00 [DBG] Attempting to validate the bound parameter 'approverId' of type 'System.String' ...
2025-06-20 13:47:27.890 +09:00 [DBG] Done attempting to validate the bound parameter 'approverId' of type 'System.String'.
2025-06-20 13:47:27.891 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 13:47:27.891 +09:00 [DBG] Creating DbConnection.
2025-06-20 13:47:27.892 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 13:47:27.892 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:47:27.892 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:47:27.892 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 13:47:27.892 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:47:27.892 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 13:47:27.893 +09:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-20 13:47:27.894 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."ApprovalId", "a"."RequestTitle", "a"."RequestedAt", "a"."RespondedAt", "a"."ApplicantEmployeeNumber", "a"."ApplicantDepartment", "a"."ApplicantName", "a"."ApplicantPosition", "a"."Status", "a1"."StepId", "a1"."ActionDate", "a1"."ActionStatus", "a1"."ApprovalId", "a1"."ApproverEmployeeNumber", "a1"."ApproverName", "a1"."Comment", "a1"."Department", "a1"."IsFinalApprover", "a1"."Position", "a1"."Sequence", "a1"."StepType", "a"."CurrentStep", (
    SELECT "a2"."ApproverName"
    FROM "ApprovalSteps" AS "a2"
    WHERE "a"."ApprovalId" = "a2"."ApprovalId" AND "a2"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a3"."ApproverEmployeeNumber"
    FROM "ApprovalSteps" AS "a3"
    WHERE "a"."ApprovalId" = "a3"."ApprovalId" AND "a3"."Sequence" = "a"."CurrentStep"
    LIMIT 1), (
    SELECT "a4"."ActionStatus"
    FROM "ApprovalSteps" AS "a4"
    WHERE "a"."ApprovalId" = "a4"."ApprovalId" AND "a4"."Sequence" = "a"."CurrentStep"
    LIMIT 1)
FROM "ApprovalRequests" AS "a"
LEFT JOIN "ApprovalSteps" AS "a1" ON "a"."ApprovalId" = "a1"."ApprovalId"
WHERE EXISTS (
    SELECT 1
    FROM "ApprovalSteps" AS "a0"
    WHERE "a"."ApprovalId" = "a0"."ApprovalId" AND "a0"."ApproverEmployeeNumber" = @__userId_0)
ORDER BY "a"."ApprovalId"
2025-06-20 13:47:27.895 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.895 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.895 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.895 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.896 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.896 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.897 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.898 +09:00 [DBG] Context 'ApprovalDbContext' started tracking 'ApprovalStep' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 13:47:27.898 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:47:27.899 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-20 13:47:27.899 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 13:47:27.899 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:47:27.899 +09:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 13:47:27.899 +09:00 [DBG] No information found on request to perform content negotiation.
2025-06-20 13:47:27.899 +09:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 13:47:27.899 +09:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 13:47:27.900 +09:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 13:47:27.900 +09:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApprovalService.Domain.Entities.ApprovalRequestWithCurrentStepDto, Volvo.Service.Approval.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 13:47:27.900 +09:00 [INF] Executed action ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API) in 12.0616ms
2025-06-20 13:47:27.900 +09:00 [INF] Executed endpoint 'ApprovalService.API.Controllers.ApprovalController.GetMyApprovals (Volvo.Service.Approval.API)'
2025-06-20 13:47:27.901 +09:00 [DBG] Connection id "0HNDFMLM16INL" completed keep alive response.
2025-06-20 13:47:27.901 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 13:47:27.901 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 13:47:27.901 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 13:47:27.901 +09:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/approval/my-approvals/EC20505 - 200 null application/json; charset=utf-8 17.042ms
2025-06-20 13:48:29.365 +09:00 [DBG] Connection id "0HNDFMLM16INL" received FIN.
2025-06-20 13:48:29.369 +09:00 [DBG] Connection id "0HNDFMLM16INL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 13:48:29.372 +09:00 [DBG] Connection id "0HNDFMLM16INL" disconnecting.
2025-06-20 13:48:29.373 +09:00 [DBG] Connection id "0HNDFMLM16INL" stopped.
2025-06-20 13:48:29.472 +09:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IUserServiceProxy'
2025-06-20 13:48:39.475 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:48:39.482 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.3629ms - processed: 0 items - remaining: 1 items
2025-06-20 13:48:49.484 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:48:49.485 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0064ms - processed: 0 items - remaining: 1 items
2025-06-20 13:48:59.486 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:48:59.487 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0162ms - processed: 0 items - remaining: 1 items
2025-06-20 13:49:09.487 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:49:09.488 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0042ms - processed: 0 items - remaining: 1 items
2025-06-20 13:49:19.489 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:49:19.490 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.006ms - processed: 0 items - remaining: 1 items
2025-06-20 13:49:29.492 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:49:29.493 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0095ms - processed: 0 items - remaining: 1 items
2025-06-20 13:49:39.495 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:49:39.497 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.278ms - processed: 0 items - remaining: 1 items
2025-06-20 13:49:49.499 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:49:49.500 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2025-06-20 13:49:59.502 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:49:59.503 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2025-06-20 13:50:09.504 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:50:09.506 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.3084ms - processed: 0 items - remaining: 1 items
2025-06-20 13:50:19.510 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:50:19.511 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.03ms - processed: 0 items - remaining: 1 items
2025-06-20 13:50:29.513 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:50:29.514 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2025-06-20 13:50:39.515 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:50:39.516 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0357ms - processed: 0 items - remaining: 1 items
2025-06-20 13:50:49.518 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:50:49.518 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2025-06-20 13:50:59.531 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:50:59.535 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0271ms - processed: 0 items - remaining: 1 items
2025-06-20 13:51:09.536 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:51:09.537 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-06-20 13:51:19.547 +09:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-20 13:51:19.551 +09:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0234ms - processed: 0 items - remaining: 1 items
2025-06-20 14:06:04.113 +09:00 [INF] Starting Approval Service API
2025-06-20 14:06:04.999 +09:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 14:06:05.810 +09:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 14:06:11.403 +09:00 [DBG] Entity Framework Core 9.0.5 initialized 'ApprovalDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:9.0.5' with options: None
2025-06-20 14:06:11.424 +09:00 [DBG] Creating DbConnection.
2025-06-20 14:06:11.438 +09:00 [DBG] Created DbConnection. (12ms).
2025-06-20 14:06:11.490 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 14:06:11.508 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 14:06:11.512 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 14:06:11.517 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 14:06:11.521 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 14:06:11.521 +09:00 [DBG] Creating DbConnection.
2025-06-20 14:06:11.522 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 14:06:11.601 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (14ms).
2025-06-20 14:06:11.602 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (81ms).
2025-06-20 14:06:11.602 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 14:06:11.615 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 14:06:11.688 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 14:06:11.877 +09:00 [INF] Executed DbCommand (240ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 14:06:11.891 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 14:06:11.893 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (2ms).
2025-06-20 14:06:11.918 +09:00 [DBG] Creating DbConnection.
2025-06-20 14:06:11.918 +09:00 [DBG] Created DbConnection. (0ms).
2025-06-20 14:06:11.919 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 14:06:11.920 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 14:06:11.920 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 14:06:11.920 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 14:06:11.920 +09:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 14:06:11.920 +09:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 14:06:11.921 +09:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 14:06:11.921 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 14:06:11.921 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 14:06:11.921 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 14:06:11.922 +09:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-20 14:06:11.923 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 14:06:11.923 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 14:06:12.665 +09:00 [DBG] Compiling query expression: 
'DbSet<ApprovalRequest>()
    .Any()'
2025-06-20 14:06:14.237 +09:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM ApprovalRequests AS a), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: ApprovalService.Infrastructure.Persistence.ApprovalDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 14:06:14.409 +09:00 [DBG] Opening connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 14:06:14.415 +09:00 [DBG] Opened connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 14:06:14.433 +09:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 14:06:14.433 +09:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-06-20 14:06:14.434 +09:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-06-20 14:06:14.434 +09:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-20 14:06:14.436 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ApprovalRequests" AS "a")
2025-06-20 14:06:14.441 +09:00 [DBG] Closing data reader to 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 14:06:14.442 +09:00 [DBG] A data reader for 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db' is being disposed after spending 4ms reading results.
2025-06-20 14:06:14.453 +09:00 [DBG] Closing connection to database 'main' on server '/Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API/Data/ApprovalService.db'.
2025-06-20 14:06:14.472 +09:00 [DBG] Closed connection to database 'main' on server 'Data/ApprovalService.db' (28ms).
2025-06-20 14:06:14.500 +09:00 [DBG] 'ApprovalDbContext' disposed.
2025-06-20 14:06:14.502 +09:00 [DBG] Disposing connection to database 'main' on server 'Data/ApprovalService.db'.
2025-06-20 14:06:14.502 +09:00 [DBG] Disposed connection to database 'main' on server 'Data/ApprovalService.db' (0ms).
2025-06-20 14:06:14.506 +09:00 [DBG] Hosting starting
2025-06-20 14:06:14.765 +09:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-20 14:06:14.765 +09:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 14:06:15.763 +09:00 [INF] Now listening on: https://localhost:5001
2025-06-20 14:06:15.764 +09:00 [INF] Now listening on: http://localhost:5229
2025-06-20 14:06:15.764 +09:00 [DBG] Loaded hosting startup assembly Volvo.Service.Approval.API
2025-06-20 14:06:15.764 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 14:06:15.765 +09:00 [INF] Hosting environment: Development
2025-06-20 14:06:15.765 +09:00 [INF] Content root path: /Users/7ames7in/Documents/GitHub/New-Projects/NewApprovalSystem/src/Services/ApprovalService/API
2025-06-20 14:06:15.765 +09:00 [DBG] Hosting started
